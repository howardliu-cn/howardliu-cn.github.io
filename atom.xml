<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ²‰æ½œé£åŠ¨</title>
  
  <subtitle>å›å­è—å™¨äºèº«ï¼Œå¾…æ—¶è€ŒåŠ¨ã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.howardliu.cn/"/>
  <updated>2023-01-07T14:40:56.000Z</updated>
  <id>https://www.howardliu.cn/</id>
  
  <author>
    <name>Howard Liu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç¾Šä¸ç¾Šçš„å…³æˆ‘ä»€ä¹ˆäº‹ï¼Ÿ</title>
    <link href="https://www.howardliu.cn/what-i-think-of-covid-19/"/>
    <id>https://www.howardliu.cn/what-i-think-of-covid-19/</id>
    <published>2023-01-07T14:40:56.000Z</published>
    <updated>2023-01-07T14:40:56.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/raving/b919bbc6863c45cb94c7f5a0ce376f18.jpg" alt="è¿™æ®µç»å†ç»ˆå°†æˆä¸ºå†å²"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>ä¸å‡ºæ„å¤–ï¼Œçœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„äººå…«æˆé˜³äº†ã€‚</p><p>å…ˆæ”¾ä¸ªç»Ÿè®¡ï¼Œ12æœˆ23å·çš„æ—¶å€™ï¼Œéƒ¨é—¨å‘èµ·äº†ä¸€æ¬¡æŠ•ç¥¨ï¼Œ480äººå‚ä¸ï¼Œåªæœ‰20%çš„å£®å£«è¿˜æ²¡é˜³ã€‚</p><a id="more"></a><p><img src="https://static.howardliu.cn/raving/1.jpeg" alt="æ˜¯å¦æ„ŸæŸ“æ–°å† ç»Ÿè®¡"></p><p>åœ¨è¿™ä¸€æ³¢é«˜å³°æœŸå‰ï¼Œæˆ‘ä»¬å…¬å¸å·²ç»å±…å®¶å¥½å‡ ä¸ªå‘¨äº†ï¼Œæ‰€ä»¥æŠ•ç¥¨ç»“æœåŸºæœ¬ä¸Šèƒ½å¤Ÿååº”ç¤¾ä¼šæƒ…å†µã€‚</p><p>ä»Šå¤©å°±æƒ³èŠä¸¤ä»¶äº‹ï¼š</p><ol><li>ä¸ºå•¥çªç„¶æ”¾å¼€äº†ï¼Ÿ</li><li>æˆ‘å¯¹æ”¾å¼€çš„çœ‹æ³•ã€‚</li></ol><h2 id="ä¸ºå•¥æ”¾å¼€"><a href="#ä¸ºå•¥æ”¾å¼€" class="headerlink" title="ä¸ºå•¥æ”¾å¼€"></a>ä¸ºå•¥æ”¾å¼€</h2><p>ä»€ä¹ˆæƒ…å†µä¸‹å¯ä»¥æ”¾å¼€ï¼ŸåŸºæœ¬ä¸Šæœ‰ä¸‰ç§æƒ…å†µï¼š</p><ol><li>ç¬¬ä¸€ç§æƒ…å†µæ˜¯å¤§å®¶å¸Œæœ›çš„ï¼ŒåƒSARSä¸€æ ·ï¼Œæ–°å† ç—…æ¯’æ¶ˆå¤±äº†ï¼›</li><li>ç¬¬äºŒç§æƒ…å†µæ˜¯ä¸éœ€è¦é˜²ï¼Œæ–°å† ç—…æ¯’è‡´æ­»ç‡é‡ç—‡ç‡é™ä½åˆ°å¯å®¹å¿èŒƒå›´ï¼ˆæ¯”å¦‚æ— é™æ¥è¿‘0ï¼‰ï¼Œæˆ‘ä»¬ä¸ç—…æ¯’å…±ç”Ÿäº†ï¼›</li><li>ç¬¬ä¸‰ç§æƒ…å†µæ˜¯é˜²ä¸ä½ï¼Œè™½ç„¶ç—…æ¯’è‡´æ­»ç‡è¿˜å¾ˆé«˜ï¼Œä½†ä¸€ä¸ªçœ¼ç¥äº¤æµå°±ä¼šä¼ æŸ“ï¼Œé˜²ä¸èƒœé˜²äº†ã€‚</li></ol><p>ç°åœ¨æ˜¾ç„¶ä¸æ˜¯ç¬¬ä¸€ç§æƒ…å†µã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªæ•°æ®ï¼š</p><p>æ–°å† ç—…æ¯’åŸå§‹æ¯’æ ªçš„R0å€¼åœ¨3-5ï¼›å¾·å°”å¡”æ¯’æ ªçš„R0å€¼ä¸º6-8ï¼›å¥¥å¯†å…‹æˆBA.1çš„R0å€¼çº¦ä¸º9.5ï¼›å¥¥å¯†å…‹æˆBA.2çš„R0å€¼çº¦ä¸º13.3ï¼›å¥¥å¯†å…‹æˆBA.4/5çš„R0å€¼å¯èƒ½è¾¾åˆ°18.6â€¦â€¦</p><p>R0å€¼ï¼ˆR naughtï¼‰æ˜¯åŸºæœ¬ä¼ æŸ“æ•°ï¼ˆbasic reproductive numberï¼‰çš„ç®€ç§°ï¼Œåˆè¯‘ä½œåŸºæœ¬å†ç”Ÿæ•°ï¼ŒæŒ‡çš„æ˜¯åœ¨æ²¡æœ‰é‡‡å–ä»»ä½•å¹²é¢„æªæ–½çš„æƒ…å†µä¸‹ï¼Œå¹³å‡æ¯ä½æ„ŸæŸ“è€…åœ¨ä¼ æŸ“æœŸå†…ä½¿æ˜“æ„Ÿè€…ä¸ªä½“è‡´ç—…çš„æ•°é‡ã€‚æ•°å­—è¶Šå¤§è¯´æ˜ä¼ æ’­èƒ½åŠ›è¶Šå¼ºï¼Œæ§åˆ¶éš¾åº¦è¶Šå¤§ã€‚</p><p>ç®€å•è¯´å°±æ˜¯ï¼ŒR0æ˜¯2æ—¶ï¼Œä¸€ä¸ªä¼ æŸ“ä¿©ï¼Œä¸¤ä¸ªä¼ å››ä¸ªï¼Œå››ä¸ªä¼ å…«ä¸ªï¼Œä»¥æ­¤ç±»æ¨â€¦â€¦ç»è¿‡4ä¸ªå¾ªç¯ï¼Œç—…ä¾‹æ•°å°±å¢åŠ åˆ°64äººã€‚</p><p>å’±ä»¬æŠŠæ–°å† ç—…æ¯’çš„R0å€¼åšä¸ªå›¾ï¼š</p><p><img src="https://static.howardliu.cn/raving/B1234E4F-0095-4002-99A4-74530209393F.png" alt="æ–°å† é›†ä¸­æ¯’æ ªçš„R0å€¼æ›²çº¿"></p><p>è¿™å°±æ˜¯æ‰€è°“çš„æŒ‡æ•°çˆ†ç‚¸ï¼š</p><ul><li>å½“R0ç­‰äº3çš„æ—¶å€™ï¼Œç»è¿‡4æ¬¡ä¼ æ’­ï¼Œç»“æœæ˜¯81ï¼›</li><li>å½“R0ç­‰äº6çš„æ—¶å€™ï¼Œç»è¿‡4æ¬¡ä¼ æ’­ï¼Œç»“æœæ˜¯1296ï¼›</li><li>å½“R0ç­‰äº9çš„æ—¶å€™ï¼Œç»è¿‡4æ¬¡ä¼ æ’­ï¼Œç»“æœæ˜¯6561ï¼›</li><li>å½“R0ç­‰äº13çš„æ—¶å€™ï¼Œç»è¿‡4æ¬¡ä¼ æ’­ï¼Œç»“æœæ˜¯28561ï¼›</li><li>â€¦â€¦</li></ul><p>å½“R0è¶…è¿‡ä¸€å®šèŒƒå›´ï¼Œä¸æ˜¯æˆ‘ä»¬æƒ³é˜²å°±èƒ½é˜²å¾—ä½çš„ã€‚å°±æ¯”å¦‚å¹´åˆçš„ä¸Šæµ·ï¼Œå¥¥å¯†å…‹æˆçš„é«˜ä¼ æ’­æ€§è¿…é€Ÿå‡»æºƒäº†ç²¾å‡†é˜²æ§ï¼Œæ¼”å˜æˆåæ¥çš„å°åŸã€‚</p><p>å¥¥å¯†å…‹æˆçš„å˜å¼‚æ ªçš„ä¼ æŸ“èƒ½åŠ›è¿˜åœ¨å¢å¼ºï¼Œæ®è¯´ç°åœ¨æ˜¯21äº†ï¼ˆæ²¡æœ‰æŸ¥åˆ°å®˜æ–¹æ•°æ®ï¼‰ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¦‚æœè¿˜æƒ³åƒå‰å‡ å¹´ä¼¼çš„ï¼Œæƒ³é€šè¿‡å°æ§æ¥é˜»æ–­ä¼ æŸ“ï¼Œå°±è¦ä¸¾å…¨å›½ä¹‹åŠ›äº†ã€‚é‚£ç§æƒ…å†µä¸‹ï¼Œå¤§å®¶å°±åªèƒ½å¾…åœ¨å®¶é‡Œï¼Œå„ç§è¡Œä¸šåœæ‘†ã€‚æ˜¾ç„¶æ˜¯ä¸ç°å®çš„ï¼Œä¸æ˜¯æ¯å®¶éƒ½æœ‰èƒ½å¤Ÿåƒä¸€ä¸ªæœˆçš„æˆ˜ç•¥å‚¨å¤‡ç²®ï¼Œä¹Ÿä¸æ˜¯æ¯å®¶éƒ½èƒ½å¤Ÿå•¥ä¹Ÿä¸å¹²ç™½æ¥ä¸€ä¸ªæœˆé’±çš„ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨æ˜¯é˜²ä¸ä½äº†ã€‚</p><p><img src="https://static.howardliu.cn/raving/1BE20C5B-4E99-462F-A95C-60550E27304A.png" alt="ä¸ç”¨ä¸‹æ¥¼ä¼šæ„ŸæŸ“äº†æ–°å† "></p><p>ç„¶åæˆ‘ä»¬å†çœ‹çœ‹è‡´ç—…æ€§ï¼Œé‰´äºå¤§å®¶æˆ–è€…å‘¨å›´äººéƒ½é˜³è¿‡ï¼Œå°±ç®—æ˜¯æœ‰ç»éªŒã€‚æˆ‘èº«è¾¹äººé˜³äº†ä¹‹åçš„å¾å…†åŸºæœ¬ä¸Šè¿™è¿™å‡ ç§ï¼š</p><ol><li>å‘çƒ§ï¼Œæœ‰çš„ä½çƒ§å¥½å‡ å¤©ï¼ˆå…ç–«åŠ›å·®ï¼‰ã€æœ‰çš„é«˜çƒ§ä¸€ä¸¤å¤©ï¼ˆå…ç–«åŠ›å¼ºï¼‰ï¼›</li><li>å’³å—½ï¼Œå¹²å’³æˆ–è€…æ¹¿å’³ï¼Œå› äººè€Œå¼‚ï¼›</li><li>å—“å­ç–¼ï¼Œæˆç§°å®å¨Ÿå—“ï¼Œä¸¥é‡çš„è¯´ä¸å‡ºè¯ï¼Œæ„Ÿè§‰åƒæ˜¯ååˆ€ç‰‡ä¸€æ ·ï¼›</li><li>æµ‘èº«ç–¼ï¼Œä¸»è¦å˜ç°æ˜¯è‚Œè‚‰é…¸ç–¼ï¼Œæµ‘èº«æ²¡åŠ²ï¼›</li></ol><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›ç—‡çŠ¶å’Œæ™®é€šçš„æµæ„Ÿå¾ˆåƒã€‚ç”šè‡³æ²¡æœ‰æŠ—åŸçš„æƒ…å†µä¸‹ï¼Œéƒ½ä¸èƒ½æ–­å®šè‡ªå·±æ˜¯æµæ„Ÿè¿˜æ˜¯æ–°å† ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤§éƒ¨åˆ†äººé˜³äº†ä¹‹åç—‡çŠ¶éƒ½å¾ˆè½»ï¼Œä¸”å±äºä¸Šå‘¼å¸é“çš„ç—‡çŠ¶ï¼ŒåŸºæœ¬ä¸Šå¯¹è‚ºéƒ¨æ²¡å•¥å½±å“ã€‚</p><p>è¿™æ ·å°±ç¬¦åˆç¬¬äºŒç§æƒ…å†µäº†ï¼Œæˆ‘ä»¬å¤§å¤šæ•°äººå¯ä»¥ä¸æ–°å† ç—…æ¯’å…±ç”Ÿäº†ã€‚</p><p>ä»ç»æµçš„è§’åº¦çœ‹ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ— é™æœŸçš„æ”¶ç´§é˜²æ§æªæ–½ï¼Œå¾ˆå¤šä¼ä¸šåœ¨è¿™æ®µå°æ§æœŸé—´è‰°éš¾åº¦æ—¥ï¼Œæ¯ä¸€æ¬¡æ”¶ç´§ï¼Œä¼ä¸šéƒ½ä¼šå—åˆ°å†²å‡»ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ä¸è®¡æˆæœ¬çš„å°æ§ï¼Œå­©å­è¦é•¿å¤§ï¼Œæˆäººè¦å·¥ä½œï¼Œä¼ä¸šè¦å‘å±•ï¼Œäººä»¬è¦ç”Ÿæ´»ã€‚æ—¶ç§»ä¸–æ˜“ï¼Œå½“å°æ§æˆæœ¬è¿œè¿œå¤§äºæ”¶ç›Šæ—¶ï¼Œå½“æ„ŸæŸ“åå¯¹èº«ä½“å½±å“å¾ˆå°æ—¶ï¼Œæˆ‘ä»¬å°±è¦é€‰æ‹©æ›´é€‚åˆçš„æ–¹å¼ã€‚</p><h2 id="æˆ‘çš„çœ‹æ³•"><a href="#æˆ‘çš„çœ‹æ³•" class="headerlink" title="æˆ‘çš„çœ‹æ³•"></a>æˆ‘çš„çœ‹æ³•</h2><p>å†æ¥è¯´ä¸‹æˆ‘å¯¹æ”¾å¼€çš„çœ‹æ³•ï¼šåšå†³æ‹¥æŠ¤ï¼Œä½†ä¹Ÿä¼šåšå¥½ä¸ªäººé˜²æŠ¤ã€‚</p><p>é¦–å…ˆè¯´ä¸ªäººé˜²æŠ¤ï¼Œç›¸ä¿¡å¤§å®¶ä»å„ç§æ¸ é“äº†è§£è¿‡ï¼Œç—…æ¯’æ˜¯RNAå¤åˆ¶ï¼Œå˜å¼‚æ–¹å‘å¤šå˜ä¸”é€Ÿåº¦å¿«ï¼Œå°±æœ‰æ¦‚ç‡å‡ºç°ä¼ æŸ“æ€§å¼ºä¸”è‡´æ­»ç‡é«˜çš„æ¯’æ ªã€‚åªè¦æˆ‘ä»¬åšå¥½é˜²æŠ¤ï¼Œåˆ«è®©ç—…æ¯’åœ¨æˆ‘ä»¬ä½“å†…æœ‰å¤åˆ¶çš„æœºä¼šï¼Œé‚£å˜å¼‚çš„æœºä¼šå°±ä¼šå°‘å¾ˆå¤šã€‚</p><p>ç„¶åè¯´åšå†³æ‹¥æŠ¤ï¼Œå°±è¿™å‡ å‘¨çœ‹è¿‡æ¥ï¼Œå•†åœºåœ¨æ¸æ¸æ¢å¤ï¼Œå¤§å®¶ç”Ÿæ´»è½»æ¾å¾ˆå¤šï¼Œè¿å‰å‡ å¤©å‡ ä¹ç˜«ç—ªçš„ç‰©æµå¿«é€’ä¸šï¼Œç°åœ¨ä¹Ÿé€æ¸æ¢å¤äº†ã€‚ä¸€åˆ‡éƒ½åœ¨å‘å¥½çš„æ–¹å‘å‘å±•ï¼Œæœ‰ä»€ä¹ˆç†ç”±ä¸æ‹¥æŠ¤å‘¢ï¼Ÿ</p><p>ç»™å¤§å®¶çœ‹ä¸€ä¸‹åŒ—äº¬åœ°é“æœ€è¿‘15æ—¥å®¢æµé‡å’Œå¾€å¹´æ—¥å‡å®¢æµé‡å›¾ã€‚</p><p><img src="https://static.howardliu.cn/raving/B5237931-A4EE-47B1-8E68-0B1A7399572C.png" alt="åŒ—äº¬åœ°é“æœ€è¿‘15æ—¥å®¢æµé‡"></p><p><img src="https://static.howardliu.cn/raving/375EB016-DA3D-4D34-A161-CCF332189190.png" alt="åŒ—äº¬åœ°é“å¾€å¹´æ—¥å‡å®¢æµé‡"></p><p>æœ€è¿‘15æ—¥å®¢æµé‡æ¯ä¸ªå·¥ä½œæ—¥éƒ½åœ¨é€’å¢ï¼Œåœ¨1æœˆ6æ—¥å·²ç»è¾¾åˆ°769ä¸‡ã€‚å†çœ‹å¹´æ—¥å‡å®¢æµï¼Œ2023å¹´åˆšå¼€å§‹7å¤©ï¼Œæ—¥å‡å®¢æµé‡å·²ç»è¾¾åˆ°å»å¹´å¹³å‡æ°´å¹³ã€‚</p><p>å›æƒ³å‰æ®µæ—¶é—´ï¼Œ2022å¹´11æœˆ25æ—¥å®¢æµé‡è·Œåˆ°äº†108ä¸‡ï¼Œåœ¨æ”¾å¼€ä¹‹åï¼Œé€æ­¥æ¢å¤ç”Ÿæœºã€‚</p><p>ä»ä¸Šå¸è§†è§’çœ‹ï¼Œä¸­å¤®è¸©åˆ¹è½¦æ‰“æ–¹å‘ç›˜çš„ä¸¾æªæ˜¯æ­£ç¡®çš„ã€‚å°±è¿™å‡ å¤©å¤å·¥ç»å†çœ‹ï¼ŒåŒäº‹ä»¬å¸¦ç€å£ç½©ï¼Œå¶å°”å¬åˆ°å‡ å£°å’³å—½ï¼Œä¹Ÿéƒ½æ²¡äººåœ¨æ„ï¼Œæˆ‘ä»¬ä»¥è¾ƒå°çš„æˆæœ¬å®ç°äº†ä¸æ–°å† å…±å­˜ã€‚</p><p>æ”¾ä¸€ä¸ªæ–°åç¤¾çš„<a href="https://h5.xinhuaxmt.com/h5/m1/covid19/index.html" target="_blank" rel="noopener">æ–°å† é˜²ç–«æ‰‹å†Œ</a>ï¼Œè™½ç„¶ç—…æ¯’æ¯’æ€§å¼±äº†ï¼Œä½†æ˜¯é˜³çš„æ—¶å€™è¿˜æ˜¯å¾ˆéš¾å—çš„ï¼Œèƒ½ä¸é‡é˜³å°±ä¸é‡é˜³å§ã€‚</p><p>æœ€åï¼Œå¤šå¹´ä¹‹åï¼Œå½“æˆ‘ä»¬å›å¿†èµ·è¿™ä¸‰å¹´ï¼Œå¯èƒ½æœ‰æ„Ÿæ…¨ã€æœ‰æ€€å¿µã€æœ‰æ‚²ä¼¤ï¼Œæ›´å¤šçš„å¯èƒ½æ˜¯å¯¹å½“ä¸‹ç¾å¥½ç”Ÿæ´»çš„çæƒœã€‚</p><p>ç¥å¤§å®¶èº«ä½“å¥åº·ã€‚</p><p><img src="https://static.howardliu.cn/raving/1FE35223-7DD2-4910-89C7-081ACCF12BE3.jpg" alt="æŠ¤ä½“é‡‘é’Ÿç½©"></p><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/what-i-think-of-covid-19/">ç¾Šä¸ç¾Šçš„å…³æˆ‘ä»€ä¹ˆäº‹ï¼Ÿ</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://static.howardliu.cn/raving/b919bbc6863c45cb94c7f5a0ce376f18.jpg&quot; alt=&quot;è¿™æ®µç»å†ç»ˆå°†æˆä¸ºå†å²&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚&lt;/p&gt;
&lt;p&gt;ä¸å‡ºæ„å¤–ï¼Œçœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„äººå…«æˆé˜³äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆæ”¾ä¸ªç»Ÿè®¡ï¼Œ12æœˆ23å·çš„æ—¶å€™ï¼Œéƒ¨é—¨å‘èµ·äº†ä¸€æ¬¡æŠ•ç¥¨ï¼Œ480äººå‚ä¸ï¼Œåªæœ‰20%çš„å£®å£«è¿˜æ²¡é˜³ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="é—²èŠ" scheme="https://www.howardliu.cn/categories/%E9%97%B2%E8%81%8A/"/>
    
    
      <category term="é—²èŠ" scheme="https://www.howardliu.cn/tags/%E9%97%B2%E8%81%8A/"/>
    
      <category term="æ–°å† " scheme="https://www.howardliu.cn/tags/%E6%96%B0%E5%86%A0/"/>
    
      <category term="covid-19" scheme="https://www.howardliu.cn/tags/covid-19/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource ä¸ Nacos ç»„åˆå®ç°åŠ¨æ€é…ç½®èƒ½åŠ›</title>
    <link href="https://www.howardliu.cn/springboot-action-messagesource-nacos/"/>
    <id>https://www.howardliu.cn/springboot-action-messagesource-nacos/</id>
    <published>2022-08-14T02:52:50.000Z</published>
    <updated>2022-08-14T02:52:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/jellyfish-g1ec9e22b7_1920.jpeg" alt="SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource ä¸ Nacos ç»„åˆå®ç°åŠ¨æ€é…ç½®èƒ½åŠ›"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>å‰é¢ä»‹ç»äº† Spring çš„ MessageSource ç»„ä»¶çš„ç”¨æ³•ã€æ‰§è¡Œé€»è¾‘å’Œæºç ï¼Œæœ¬æ–‡æˆ‘ä»¬å°†æ ¹æ®å‰é¢çš„çŸ¥è¯†ï¼Œå®ç°è‡ªå·±çš„åŠ¨æ€åˆ·æ–°çš„å›½é™…åŒ–ç»„ä»¶ã€‚</p><a id="more"></a><p>ç°åœ¨å¤§å®¶éƒ½ç”¨çš„æ˜¯å¾®æœåŠ¡ï¼Œä¸ºäº†é«˜å¯ç”¨ï¼Œæ¯ä¸ªæœåŠ¡éƒ¨ç½²æ—¶æœ€å°‘ä¸¤ä¸ªå®ä¾‹ã€‚</p><ul><li>å¦‚æœä½¿ç”¨<code>ResourceBundleMessageSource</code>å®ç°å›½é™…åŒ–ï¼Œæ¯æ¬¡ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œéƒ½éœ€è¦é‡å¯æœåŠ¡ã€‚</li><li>å¦‚æœä½¿ç”¨<code>ReloadableResourceBundleMessageSource</code>ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©å¤šä¸ªæœåŠ¡æŒ‚åœ¨åŒä¸€ä¸ªç£ç›˜æˆ–åŒä¸€ä¸ªå·è¯»å–åŒä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå€ŸåŠ©è¿œç¨‹å·¥å…·ï¼Œä¿®æ”¹æ–‡ä»¶å®ç°åŠ¨æ€é…ç½®å†…å®¹çš„ä¿®æ”¹ã€‚ä½†æ˜¯è¿™å°±æ¶‰åŠåˆ°æ–‡æœ¬ç¼–è¾‘ï¼Œä¸èƒ½å¾ˆå¥½çš„å®ç°å®¡è®¡è®°å½•å’Œæ–‡ä»¶ç®¡æ§ã€‚</li></ul><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸ªé€‚ç”¨äºå¾®æœåŠ¡æ¶æ„ã€æ–¹ä¾¿ä¿®æ”¹ã€å…·å¤‡å®¡è®¡åŠŸèƒ½çš„åŠ¨æ€çš„å›½é™…åŒ–é…ç½®ç»„ä»¶ã€‚æœ¬æ–‡é€‰æ‹© Nacos å®ç°ï¼ŒNacos æœ‰é…ç½®ä¸­å¿ƒçš„èƒ½åŠ›ï¼Œé€‚åˆåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨ï¼ŒåŒæ—¶ä¹Ÿå…·å¤‡æ–¹ä¾¿ä¿®æ”¹å’Œå®¡è®¡èƒ½åŠ›ï¼Œåªè¦æˆ‘ä»¬å®ç°ä» Nacos åŠ è½½å›½é™…åŒ–é…ç½®çš„èƒ½åŠ›ï¼Œå°±å¯ä»¥è½»æ¾å®ç°ç›®æ ‡ã€‚</p><h2 id="å‡ ä¸ªå…³é”®ç‚¹"><a href="#å‡ ä¸ªå…³é”®ç‚¹" class="headerlink" title="å‡ ä¸ªå…³é”®ç‚¹"></a>å‡ ä¸ªå…³é”®ç‚¹</h2><p>Spring æä¾›çš„é»˜è®¤å®ç°ä¸­ï¼Œ<code>ReloadableResourceBundleMessageSource</code>å®ç°äº†åŠ¨æ€åˆ·æ–°çš„èƒ½åŠ›ï¼Œåªä¸è¿‡æ˜¯ä»æ–‡ä»¶è¯»å–å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>ReloadableResourceBundleMessageSource</code>çš„é€»è¾‘å®ç°ï¼Œåªæ˜¯å°†å…¶æ”¹ä¸ºä» Nacos è¯»å–å†…å®¹ã€‚</p><p>è¿™ä¸ªå®ç°ï¼Œé€šå¸¸å¯ä»¥æœ‰ä¸¤ç§æ–¹æ¡ˆï¼ˆå‡è®¾æˆ‘ä»¬æ–°å®ç°çš„ç±»å‘½åä¸º<code>NacosBundleMessageSource</code>ï¼‰ï¼š</p><ol><li>ç»§æ‰¿<code>ReloadableResourceBundleMessageSource</code>ï¼šé‡å†™è¯»å–é…ç½®çš„æ–¹æ³•ï¼Œç„¶åé€šè¿‡ Spring æ³¨å…¥æ–°çš„æ–¹æ³•ã€‚è¿™ç§æ–¹å¼æœ‰ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š<ol><li>ä¼˜ç‚¹ 1ï¼šæˆ‘ä»¬å¯ä»¥ä¿æŒä¸<code>ReloadableResourceBundleMessageSource</code>ç›¸ä¼¼çš„ç»“æ„å’Œæ‰§è¡Œé€»è¾‘ï¼Œå½“ Spring è¿›è¡Œå‡çº§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡ç»§æ‰¿è·å–äº†èƒ½åŠ›ï¼›</li><li>ä¼˜ç‚¹ 2ï¼šæˆ‘ä»¬åªéœ€è¦è¦†ç›–å‡ ä¸ªå…³é”®æ–¹æ³•ï¼Œéœ€è¦é‡å†™çš„æ–¹æ³•æ¯”è¾ƒå°‘ï¼›</li><li>ç¼ºç‚¹ 1ï¼šå½“æˆ‘ä»¬æœŸæœ›åœ¨ç³»ç»Ÿä¸­å¼•å…¥å¤šç§ç±»å‹çš„ MessageSource ç»„ä»¶æ—¶ï¼Œå°±ä¸èƒ½ç®€å•çš„é€šè¿‡ç±»å‹åŠ è½½äº†ã€‚æ¯”å¦‚<code>applicationContext.getBean(ReloadableResourceBundleMessageSource.class)</code>ä¼šæ‰¾åˆ°<code>ReloadableResourceBundleMessageSource</code>å’Œ<code>NacosBundleMessageSource</code>ä¸¤ä¸ª Beanï¼ŒSpring å®¹å™¨å°±ä¸çŸ¥é“è¯¥è¿”å›å“ªä¸ªäº†ï¼›</li><li>ç¼ºç‚¹ 2ï¼šè™½ç„¶ç»§æ‰¿èƒ½å¤Ÿå°‘å†™ä»£ç ï¼Œä½†æ˜¯ä¸€æ—¦ Spring ä¿®æ”¹äº†æ‰§è¡Œé€»è¾‘ï¼Œæˆ‘ä»¬çš„<code>NacosBundleMessageSource</code>å°±å¯èƒ½éœ€è¦é‡å†™ã€‚</li></ol></li><li>æ¨¡ä»¿<code>ReloadableResourceBundleMessageSource</code>ï¼šå®Œå…¨å®ç°è‡ªå·±çš„ä¸€ä¸ªåŠ¨æ€åŠ è½½ç±»ã€‚ä¸ç¬¬ä¸€ç§çš„ä¼˜ç¼ºç‚¹æ­£å¥½ç›¸åï¼š<ol><li>ä¼˜ç‚¹ 1ï¼šå®Œå…¨ä¸åŒçš„ç±»ï¼ŒBean å¯¹åº”çš„ class ç±»å‹ä¸åŒï¼Œ<code>applicationContext.getBean</code>å¯ä»¥é€šè¿‡ class ç±»å‹è·å–ï¼›</li><li>ä¼˜ç‚¹ 2ï¼šä¸<code>ReloadableResourceBundleMessageSource</code>çš„ç±»å®šä¹‰æ²¡æœ‰å…³ç³»ï¼Œé™¤é Spring ä¿®æ”¹åº•å±‚é€»è¾‘ï¼Œå¦åˆ™ä¸ä¼šå› ä¸º<code>ReloadableResourceBundleMessageSource</code>çš„å˜åŠ¨å‡ºç°ä¸å…¼å®¹çš„æƒ…å†µï¼›</li><li>ç¼ºç‚¹ 1ï¼šå½“ Spring å¯¹<code>ReloadableResourceBundleMessageSource</code>è¿›è¡Œå‡çº§ï¼Œæå‡ºæ›´åŠ ä¼˜åŒ–çš„å†™æ³•ï¼Œæˆ‘ä»¬å°±éœ€è¦é‡å†™<code>NacosBundleMessageSource</code>äº†ï¼›</li><li>ç¼ºç‚¹ 2ï¼šæ—¢ç„¶æ˜¯ä»¿å†™ï¼Œå¾ˆå¤šæ–¹æ³•éƒ½æ˜¯ä¸<code>ReloadableResourceBundleMessageSource</code>å®Œå…¨ç›¸åŒçš„é‡å¤ä»£ç ã€‚</li></ol></li></ol><p>è€ƒè™‘åˆ°ä¸¤ç§æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ï¼Œç»“åˆä¸šåŠ¡ä¸­çš„é€»è¾‘ï¼Œæœ€ç»ˆé€‰æ‹©æ–¹æ¡ˆäºŒã€‚</p><h2 id="æ–‡ä»¶å"><a href="#æ–‡ä»¶å" class="headerlink" title="æ–‡ä»¶å"></a>æ–‡ä»¶å</h2><p>æˆ‘ä»¬è¦å®ç°çš„å›½é™…åŒ–ç»„ä»¶ï¼Œåœ¨ Spring çš„å®ç°ä¸­ï¼Œä½¿ç”¨çš„æ˜¯<code>Locale</code>è¡¨ç¤ºæŒ‡å®šçš„åŒºåŸŸï¼Œåœ¨è¿™ä¸ªç±»ä¸­ï¼Œå®šä¹‰äº†ä¸‰ä¸ªä¸åŒçš„ç»´åº¦<code>language</code>ã€<code>country</code>ã€<code>variant</code>ï¼Œç¿»è¯‘è¿‡æ¥æ˜¯<code>è¯­è¨€</code>ã€<code>å›½å®¶</code>ã€<code>å˜ç§</code>ï¼Œç»“åˆ<code>BaseLocale</code>çš„å®šä¹‰ï¼Œå¯ä»¥å°†<code>country</code>çœ‹åšæ˜¯è¯­è¨€å¤§ç±»ã€‚</p><p>æ ¹æ®å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬çš„å›½é™…åŒ–é…ç½®æ–‡ä»¶å®šä¹‰æ ¼å¼æ˜¯æ ¹æ®<code>Locale</code>æ ¼å¼å®šä¹‰çš„ã€‚æ¯”å¦‚ï¼Œbasename æ˜¯ messagesï¼ŒLocale æ˜¯ de_AT_oo çš„è¯ï¼Œå¯¹åº”çš„é…ç½®æ–‡ä»¶å¯ä»¥æ˜¯â€œmessages_de_AT_OOâ€ã€â€œmessages_de_ATâ€ã€â€œmessages_deâ€ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨åˆ°é€’å½’çš„æ–¹å¼è·å–æ–‡ä»¶åï¼š</p><pre><code class="java">protected List&lt;String&gt; calculateFilenamesForLocale(String basename, Locale locale) {    List&lt;String&gt; result = new ArrayList&lt;&gt;(3);    String language = locale.getLanguage();    String country = locale.getCountry();    String variant = locale.getVariant();    StringBuilder temp = new StringBuilder(basename);    temp.append(&#39;_&#39;);    if (language.length() &gt; 0) {        temp.append(language);        result.add(0, temp.toString());    }    temp.append(&#39;_&#39;);    if (country.length() &gt; 0) {        temp.append(country);        result.add(0, temp.toString());    }    if (variant.length() &gt; 0 &amp;&amp; (language.length() &gt; 0 || country.length() &gt; 0)) {        temp.append(&#39;_&#39;).append(variant);        result.add(0, temp.toString());    }    return result;}</code></pre><h2 id="åŠ è½½æ–¹å¼"><a href="#åŠ è½½æ–¹å¼" class="headerlink" title="åŠ è½½æ–¹å¼"></a>åŠ è½½æ–¹å¼</h2><p>æ—¢ç„¶æ˜¯ä» Nacos è¯»å–é…ç½®ï¼Œé‚£é…ç½®æ–‡ä»¶çš„å†…å®¹å°±éœ€è¦é€šè¿‡ Nacos è·å–ã€‚è¿™é‡Œä½¿ç”¨äº†<code>NacosConfigManager</code>è·å–ï¼š</p><pre><code class="java">protected Properties loadProperties(String filename) throws IOException, NacosException {    final Properties props = newProperties();    final String dataId = filename + NacosConstants.PROPERTIES_SUFFIX;    logger.info(&quot;Loading properties for &quot; + dataId);    final String config = nacosConfigManager.getConfigService().getConfig(dataId, nacosGroup, 5000);    if (StringUtils.hasText(config)) {        logger.info(&quot;No properties found for &quot; + dataId);        throw new NoSuchFileException(dataId);    }    try (Reader reader = new StringReader(config)) {        this.propertiesPersister.load(props, reader);        logger.info(&quot;Loaded properties for &quot; + dataId);    }    return props;}</code></pre><p>æ–¹æ³•ä¼ å…¥çš„<code>filename</code>å°±æ˜¯ä»ä¸Šä¸€èŠ‚ä¸­è·å–çš„æ–‡ä»¶åã€‚å½“ç„¶ï¼Œæ–‡ä»¶åæ˜¯æˆ‘ä»¬è®¡ç®—å‡ºæ¥çš„ï¼Œå¯èƒ½ä¸å­˜åœ¨ï¼Œæ­¤å¤„ç›´æ¥æŠ›å‡º<code>NoSuchFileException</code>ï¼Œç”±ä¸Šå±‚é€»è¾‘æ•æ‰å¤„ç†ï¼š</p><pre><code class="java">protected PropertiesHolder refreshProperties(String filename, @Nullable PropertiesHolder propHolder) {    long refreshTimestamp = (getCacheMillis() &lt; 0 ? -1 : System.currentTimeMillis());    try {        Properties props = loadProperties(filename);        propHolder = new PropertiesHolder(props, -1);    } catch (NacosException ex) {        if (logger.isWarnEnabled()) {            logger.warn(&quot;Could not get properties form nacos &quot;, ex);        }        // Empty holder representing &quot;not valid&quot;.        propHolder = new PropertiesHolder();    } catch (IOException ex) {        if (logger.isInfoEnabled()) {            logger.info(&quot;Could not get properties form nacos, the message is &quot; + ex.getMessage());        }        // Empty holder representing &quot;not valid&quot;.        propHolder = new PropertiesHolder();    }    propHolder.setRefreshTimestamp(refreshTimestamp);    this.cachedProperties.put(filename, propHolder);    logger.info(&quot;Refreshed properties for &quot; + filename);    return propHolder;}</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä» Nacos ä¸­è¯»å–é…ç½®é€»è¾‘çš„ä¸Šå±‚ä¼šæ•æ‰<code>Exception</code>ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç©ºçš„é…ç½®ç®¡ç†å™¨ã€‚æ­¤å¤„ä¼šæœ‰ä¸¤ä¸ªå¼‚å¸¸ï¼š</p><ul><li><code>NacosException</code>ï¼šè¯»å– Nacos å¤±è´¥æŠ›å‡ºçš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬ Nacos é“¾æ¥ä¸æ­£ç¡®æˆ–è€…æ˜¯è¯»å–å¤±è´¥ç­‰ï¼›</li><li><code>IOException</code>ï¼šæ²¡æœ‰æŒ‡å®šæ–‡ä»¶åçš„é…ç½®æ—¶ä¼šæŠ›å‡º IOExceptionã€‚</li></ul><h2 id="åŠ¨æ€åˆ·æ–°"><a href="#åŠ¨æ€åˆ·æ–°" class="headerlink" title="åŠ¨æ€åˆ·æ–°"></a>åŠ¨æ€åˆ·æ–°</h2><p>å‰ä¸€èŠ‚è®²äº†åŠ è½½ Nacos é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œæœ¬èŠ‚è¯´ä¸€ä¸‹æ€ä¹ˆå®ç° Nacos é…ç½®æ–‡ä»¶çš„ç›‘å¬ï¼ŒåŠ¨æ€åˆ·æ–°é…ç½®å†…å®¹ã€‚</p><p>æˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹å®ç° Nacos ç›‘å¬çš„å‡ ä¸ªç±»ï¼š</p><ul><li>NacosRefreshHistoryï¼šnacos é…ç½®æ–‡ä»¶åˆ·æ–°çš„å†å²è®°å½•ï¼Œä¼šä¿å­˜ Nacos é…ç½®æ–‡ä»¶çš„åˆ·æ–°å†å²ï¼Œæœ€å¤šå­˜å‚¨ 20 ä¸ªï¼›</li><li>ConfigServiceï¼šä¸€èˆ¬ä½¿ç”¨çš„æ—¶å€™æ˜¯ NacosConfigService ç±»ï¼Œè¿™ä¸ªç±»æ˜¯ä½¿ç”¨<code>NacosConfigManager#getConfigService</code>é€šè¿‡åå°„åˆ›å»ºçš„ï¼Œç”¨äºå­˜å‚¨ Nacos ç›‘å¬å™¨ï¼Œå®ç°ç›‘å¬é€»è¾‘ï¼›</li><li>Listenerï¼šè¿™ä¸ªå°±æ˜¯å…·ä½“çš„ç›‘å¬å™¨äº†ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨çš„æ˜¯<code>AbstractSharedListener</code>çš„åŒ¿åå­ç±»ï¼Œå®ç°åŠ¨æ€åˆ·æ–°çš„é€»è¾‘å°±åœ¨è¿™ä¸ªç±»é‡Œã€‚</li></ul><p>é¦–å…ˆï¼Œæˆ‘ä»¬å½“å‰ç»„ä»¶æ˜¯ MessageSourceï¼Œç”¨äºå®ç°å›½é™…åŒ–çš„ç»„ä»¶ã€‚è¿™ä¸ªç»„ä»¶æ˜¯åœ¨æ•´ä¸ªåº”ç”¨å°±ç»ªåå†åŠ è½½å°±è¡Œï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ç›‘å¬ Spring çš„<code>ApplicationReadyEvent</code>äº‹ä»¶å³å¯ã€‚</p><pre><code class="java">@Overridepublic void onApplicationEvent(ApplicationReadyEvent event) {    // many Spring context    if (this.ready.compareAndSet(false, true)) {        for (Locale defaultLocale : this.nacosBundleMessageSource.defaultLocales()) {            this.nacosBundleMessageSource.getMergedProperties(defaultLocale);        }        this.registerNacosListenersForApplications();    }}</code></pre><p>ç„¶åæ˜¯æˆ‘ä»¬éœ€è¦å¯¹æ‰€æœ‰å¯èƒ½çš„é…ç½®æ–‡ä»¶è¿›è¡Œç›‘å¬ï¼Œå°±éœ€è¦ç”¨åˆ°å‰æ–‡çš„<code>calculateFilenamesForLocale</code>æ–¹æ³•ï¼Œè®¡ç®—æ‰€æœ‰å¯èƒ½å‡ºç°çš„åå­—ã€‚</p><pre><code class="java">private void registerNacosListenersForApplications() {    if (!isRefreshEnabled()) {        return;    }    this.nacosBundleMessageSource.getBasenameSet().stream()            .map(basename -&gt; this.nacosBundleMessageSource.defaultLocales().stream()                    .map(locale -&gt; this.nacosBundleMessageSource.calculateAllFilenames(basename, locale))                    .flatMap(List::stream)                    .collect(Collectors.toList())            )            .flatMap(List::stream)            .forEach(x -&gt; registerNacosListener(nacosBundleMessageSource.getNacosGroup(), x + NacosConstants.PROPERTIES_SUFFIX));}</code></pre><p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦å‘ Nacos çš„è¿è¡Œç®¡ç†å™¨ä¸­æ³¨å†Œæ–‡ä»¶ç›‘å¬ï¼Œå®ç°åŠ¨æ€åˆ·æ–°çš„èƒ½åŠ›ã€‚</p><pre><code class="java">private void registerNacosListener(final String groupKey, final String dataKey) {    final String key = NacosPropertySourceRepository.getMapKey(dataKey, groupKey);    final Listener listener = listenerMap.computeIfAbsent(key, lst -&gt; new AbstractSharedListener() {        @Override        public void innerReceive(String dataId, String group, String configInfo) {            refreshCountIncrement();            nacosRefreshHistory.addRefreshRecord(dataId, group, configInfo);            try {                nacosBundleMessageSource.forceRefresh(dataId, configInfo);                if (log.isDebugEnabled()) {                    log.debug(&quot;Refresh Nacos config group={},dataId={},configInfo={}&quot;, group, dataId, configInfo);                }            } catch (IOException e) {                log.warn(&quot;Nacos refresh failed, dataId: {}, group: {}, configInfo: {}&quot;,                        dataId, group, configInfo, e);            }        }    });    try {        configService.addListener(dataKey, groupKey, listener);    } catch (NacosException e) {        log.warn(&quot;register fail for nacos listener ,dataId=[{}],group=[{}]&quot;, dataKey, groupKey, e);    }}</code></pre><p>è‡³æ­¤ï¼Œæˆ‘ä»¬è·å–äº†å›½é™…åŒ–ç»„ä»¶ MessageSource ä¸ Nacos ç»„åˆå®ç°åŠ¨æ€é…ç½®èƒ½åŠ›ã€‚æœ¬æ–‡ä¸­çš„å®ä¾‹å·²ç»ä¼ åˆ° GitHubï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤<code>spring</code>è·å–æºç ã€‚</p><h2 id="å‘æ•£ä¸€ä¸‹"><a href="#å‘æ•£ä¸€ä¸‹" class="headerlink" title="å‘æ•£ä¸€ä¸‹"></a>å‘æ•£ä¸€ä¸‹</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†é‡å¤´æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬æœ€åˆæƒ³è¦å®ç°ä¸€ä¸ªé€‚ç”¨äºå¾®æœåŠ¡æ¶æ„ã€æ–¹ä¾¿ä¿®æ”¹ã€å…·å¤‡å®¡è®¡åŠŸèƒ½çš„åŠ¨æ€çš„å›½é™…åŒ–é…ç½®ç»„ä»¶ã€‚é€‰æ‹© Nacos ä½œä¸ºä¾‹å­ï¼Œæ˜¯å› ä¸º Nacos æœ¬èº«å®ç°äº†åŠ¨æ€ç›‘å¬çš„èƒ½åŠ›ï¼Œå¯ä»¥å¿«é€Ÿå¤åˆ»<code>ReloadableResourceBundleMessageSource</code>çš„èƒ½åŠ›ã€‚é‚£ Nacos å…·å¤‡ä»€ä¹ˆèƒ½åŠ›å‘¢ï¼Ÿ</p><ol><li>ä¸­å¿ƒåŒ–å­˜å‚¨ï¼šå› ä¸ºæˆ‘ä»¬æƒ³åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨ï¼Œå°±ä¸èƒ½é‡‡ç”¨ä¸ç‹¬ç«‹æœåŠ¡è€¦åˆçš„æ–¹å¼ï¼Œéœ€è¦æ‰€æœ‰æœåŠ¡å¯ä»¥è¯»å–çš„æ–¹å¼ã€‚æ¯”å¦‚æ•°æ®åº“ï¼ˆåŒ…æ‹¬å…³ç³»å‹æ•°æ®åº“ã€éå…³ç³»å‹æ•°æ®åº“ç­‰ï¼‰ã€åˆ†å¸ƒå¼ç¼“å­˜ã€è¿œç¨‹ç£ç›˜ï¼ˆæˆ–è€… Docker çš„å·ï¼‰ç­‰ï¼›</li><li>å¯ç›‘å¬ï¼šä»»ä½•é…ç½®çš„ä¿®æ”¹èƒ½å¤Ÿè¢«æœåŠ¡æ„ŸçŸ¥ï¼Œæƒ³è¦åšåˆ°è¿™ä¸ªï¼Œå°±æ˜¯åœ¨é…ç½®å‘ç”Ÿä¿®æ”¹æ—¶ï¼Œå‘é€ä¸€ä¸ªä¿®æ”¹æ—¶é—´ï¼Œé€šçŸ¥ç›‘å¬æœåŠ¡é…ç½®è¢«ä¿®æ”¹ã€‚å¯ä»¥é‡‡ç”¨è¢«åŠ¨å’Œä¸»åŠ¨ä¸¤ç§æ–¹å¼ï¼š<ol><li>è¢«åŠ¨æ–¹å¼ï¼šè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œåªè¦å°†ç»„ä»¶ä¸­çš„ç¼“å­˜é€»è¾‘åˆ é™¤å°±å¯ä»¥äº†ï¼Œæ¯æ¬¡æŸ¥è¯¢é…ç½®éƒ½ç›´æ¥å­˜å‚¨å™¨ä¸­è¯»å–ï¼Œä½†æ˜¯è¿™åˆä¸æ€§èƒ½ç›¸æ‚–ï¼Œä¸€èˆ¬ä¸é‡‡ç”¨è¿™ä¸ªæ–¹æ¡ˆï¼›</li><li>ä¸»åŠ¨æ–¹å¼ï¼šé€šè¿‡å‘é€äº‹ä»¶æˆ–è€…æ¶ˆæ¯çš„æ–¹å¼ï¼Œæ¯”å¦‚é‡‡ç”¨ CQRS æ¨¡å¼ï¼Œå‘ç”Ÿä¿®æ”¹æ—¶ï¼Œå‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œå„ä¸ªå¾®æœåŠ¡ç›‘å¬è¿™ä¸ªæ¶ˆæ¯ï¼Œé‡æ–°åŠ è½½é…ç½®ï¼›</li></ol></li><li>å¯å®¡è®¡ï¼šè¿™ä¸ªèƒ½åŠ›ç®€å•è¯´å°±æ˜¯è¦è®°å½•æ¯æ¬¡ä¿®æ”¹çš„æ—¶é—´ã€äººç‰©ã€åŠ¨ä½œç­‰ä¿¡æ¯ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯å¸¸ç”¨åŠŸèƒ½ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</li></ol><p>åªè¦å…·å¤‡ä¸Šé¢ä¸‰ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å„ç§ç»„åˆå®ç°ï¼Œæ¯”å¦‚ï¼š</p><ol><li>å¯æŒ‚åœ¨ç£ç›˜</li><li>Git+Hook</li><li>MySQL+Redis+MQ</li><li>â€¦â€¦</li></ol><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»å®è·µè§’åº¦å‡ºå‘ï¼Œå®ç°äº†ä¸€ä¸ªé€‚ç”¨äºå¾®æœåŠ¡æ¶æ„ã€æ–¹ä¾¿ä¿®æ”¹ã€å…·å¤‡å®¡è®¡åŠŸèƒ½çš„åŠ¨æ€çš„å›½é™…åŒ–é…ç½®ç»„ä»¶ã€‚æ–‡ä¸­çš„å®ä¾‹å·²ç»ä¼ åˆ° GitHubï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤<code>spring</code>è·å–æºç ã€‚å¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šé‡‡ç”¨å“ªç§æ–¹æ¡ˆå‘¢ï¼Ÿæ¬¢è¿ä¸€èµ·è®¨è®ºã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/zUrx7duy0-OY1oYn8FeKOw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¸€æ‹›å®ç°ç»“æœçš„ä¼˜é›…å“åº”</a></li><li><a href="https://mp.weixin.qq.com/s/H599Wri3VbjTuLBnf7pD3w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå¦‚ä½•ä¼˜é›…åœ°å¤„ç†å¼‚å¸¸</a></li><li><a href="https://mp.weixin.qq.com/s/fcVE-cE7tDuWKoNNX9rsoQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šé€šè¿‡ BeanPostProcessor åŠ¨æ€æ³¨å…¥ ID ç”Ÿæˆå™¨</a></li><li><a href="https://mp.weixin.qq.com/s/xQQbl6VNF2eCgmQPrMyc4w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šè‡ªå®šä¹‰ Filter ä¼˜é›…è·å–è¯·æ±‚å‚æ•°å’Œå“åº”ç»“æœ</a></li><li><a href="https://mp.weixin.qq.com/s/coKjuefWMmCA4bSkRDIRVA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…åœ°ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/pet_rA7-O1JD3QfQ1fqxAQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…åœ°ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/2OXArNObVejXLvMOmE3oqw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…åœ°ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/hdioIIwPA2lv2khfRmKhOQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…åœ°ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/vbccn0kTdyOlmznDr3RItw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šJUnit5+MockMvc+Mockito åšå¥½å•å…ƒæµ‹è¯•</a></li><li><a href="https://mp.weixin.qq.com/s/s8PQXLT8Ni3dLqsOgf3syA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåŠ è½½å’Œè¯»å–èµ„æºæ–‡ä»¶å†…å®¹</a></li><li><a href="https://mp.weixin.qq.com/s/dGPhS5vdbnFdiTxkpr2mLg" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</a></li><li><a href="https://mp.weixin.qq.com/s/FzX-nVMl96RwI6ITULhQcQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶MessageSourceçš„æ‰§è¡Œé€»è¾‘ä¸æºç </a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/springboot-action-messagesource-nacos/">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource ä¸ Nacos ç»„åˆå®ç°åŠ¨æ€é…ç½®èƒ½åŠ›</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource ä¸ Nacos ç»„åˆå®ç°åŠ¨æ€é…ç½®èƒ½åŠ›</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      å‰é¢ä»‹ç»äº† Spring çš„ MessageSource ç»„ä»¶çš„ç”¨æ³•ã€æ‰§è¡Œé€»è¾‘å’Œæºç ï¼Œæœ¬æ–‡æˆ‘ä»¬å°†æ ¹æ®å‰é¢çš„çŸ¥è¯†ï¼Œå®ç°è‡ªå·±çš„åŠ¨æ€åˆ·æ–°çš„å›½é™…åŒ–ç»„ä»¶ã€‚
    
    </summary>
    
    
      <category term="spring" scheme="https://www.howardliu.cn/categories/spring/"/>
    
    
      <category term="SpringBoot å®æˆ˜" scheme="https://www.howardliu.cn/tags/SpringBoot-%E5%AE%9E%E6%88%98/"/>
    
      <category term="SpringBoot" scheme="https://www.howardliu.cn/tags/SpringBoot/"/>
    
      <category term="spring" scheme="https://www.howardliu.cn/tags/spring/"/>
    
      <category term="SpringBoot æ‰‹å†Œ" scheme="https://www.howardliu.cn/tags/SpringBoot-%E6%89%8B%E5%86%8C/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource çš„æ‰§è¡Œé€»è¾‘ä¸æºç </title>
    <link href="https://www.howardliu.cn/springboot-action-messagesource-principle/"/>
    <id>https://www.howardliu.cn/springboot-action-messagesource-principle/</id>
    <published>2022-08-07T13:04:19.000Z</published>
    <updated>2022-08-07T13:04:19.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/squirrel-7025721_1920.jpeg" alt="SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource çš„æ‰§è¡Œé€»è¾‘ä¸æºç "></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>å‰æ–‡ä»‹ç»äº† SpringBoot ä¸­çš„å›½é™…åŒ–ç»„ä»¶<code>MessageSource</code>çš„ä½¿ç”¨ï¼Œæœ¬ç« æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹<code>ResourceBundleMessageSource</code>å’Œ<code>ReloadableResourceBundleMessageSource</code>çš„æ‰§è¡Œé€»è¾‘ã€‚SpringBoot çš„ MessageSource ç»„ä»¶æœ‰å¾ˆå¤šæŠ½è±¡åŒ–ï¼Œæºç çœ‹èµ·æ¥æ¯”è¾ƒåˆ†æ•£ï¼Œæ‰€ä»¥æœ¬æ–‡ä¼šé€šè¿‡æµç¨‹å›¾çš„æ–¹å¼è¿›è¡Œè®²è§£ã€‚</p><a id="more"></a><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p>é…ç½®æ–‡ä»¶æ˜¯åŸºç¡€ï¼Œä¼šå½±å“æ‰§è¡Œé€»è¾‘ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é…ç½®é¡¹ï¼š</p><ul><li>basenameï¼šåŠ è½½èµ„æºçš„æ–‡ä»¶åï¼Œå¯ä»¥å¤šä¸ªèµ„æºåç§°ï¼Œé€šè¿‡é€—å·éš”å¼€ï¼Œé»˜è®¤æ˜¯â€œmessagesâ€ï¼›</li><li>encodingï¼šåŠ è½½æ–‡ä»¶çš„å­—ç¬¦é›†ï¼Œé»˜è®¤æ˜¯ UTF-8ï¼Œè¿™ä¸ªä¸å¤šè¯´ï¼›</li><li>cacheDurationï¼šæ–‡ä»¶åŠ è½½åˆ°å†…å­˜åç¼“å­˜æ—¶é—´ï¼Œé»˜è®¤å•ä½æ˜¯ç§’ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåªä¼šåŠ è½½ä¸€æ¬¡ç¼“å­˜ï¼Œä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™ä¸ªå‚æ•°åœ¨ ResourceBundleMessageSourceã€ReloadableResourceBundleMessageSource ç¨å¾®æœ‰äº›å·®å¼‚ï¼Œä¼šå…·ä½“è¯´ä¸‹ã€‚</li><li>fallbackToSystemLocaleï¼šè¿™æ˜¯ä¸€ä¸ªå…œåº•å¼€å…³ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœåœ¨æŒ‡å®šè¯­è¨€ä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„å€¼ï¼Œä¼šä» basename å‚æ•°ï¼ˆé»˜è®¤æ˜¯ messages.propertiesï¼‰ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœå†æ‰¾ä¸åˆ°å¯èƒ½ç›´æ¥è¿”å›æˆ–æŠ›é”™ã€‚è¯¥å‚æ•°è®¾ç½®ä¸º true çš„è¯ï¼Œè¿˜ä¼šå†èµ°ä¸€æ­¥å…œåº•é€»è¾‘ï¼Œä»å½“å‰ç³»ç»Ÿè¯­è¨€å¯¹åº”é…ç½®æ–‡ä»¶ä¸­æŸ¥æ‰¾ã€‚è¯¥å‚æ•°é»˜è®¤æ˜¯ trueï¼›</li><li>alwaysUseMessageFormatï¼šMessageSource ç»„ä»¶é€šè¿‡<code>MessageFormat.format</code>å‡½æ•°å¯¹å›½é™…åŒ–ä¿¡æ¯æ ¼å¼åŒ–ï¼Œå¦‚æœæ³¨å…¥å‚æ•°ï¼Œè¾“å‡ºç»“æœæ˜¯ç»è¿‡æ ¼å¼åŒ–çš„ã€‚æ¯”å¦‚<code>MessageFormat.format(&quot;Hello, {0}!&quot;, &quot;Kanshan&quot;)</code>è¾“å‡ºç»“æœæ˜¯â€œHello, Kanshan!â€ã€‚è¯¥å‚æ•°æ§åˆ¶çš„æ˜¯ï¼Œå½“è¾“å…¥å‚æ•°ä¸ºç©ºæ—¶ï¼Œæ˜¯å¦è¿˜æ˜¯ä½¿ç”¨<code>MessageFormat.format</code>å‡½æ•°å¯¹ç»“æœè¿›è¡Œæ ¼å¼åŒ–ï¼Œé»˜è®¤æ˜¯ falseï¼›</li><li>useCodeAsDefaultMessageï¼šå½“æ²¡æœ‰æ‰¾åˆ°å¯¹åº”ä¿¡æ¯çš„æ—¶å€™ï¼Œæ˜¯å¦è¿”å› codeã€‚ä¹Ÿå°±æ˜¯å½“æ‰¾äº†æ‰€æœ‰èƒ½æ‰¾çš„é…ç½®æ–‡ä»¶åï¼Œè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ä¿¡æ¯ï¼Œæ˜¯å¦ç›´æ¥è¿”å› code å€¼ã€‚é»˜è®¤æ˜¯ falseï¼Œå³ä¸è¿”å› codeï¼ŒæŠ›å‡º<code>NoSuchMessageException</code>å¼‚å¸¸ã€‚</li></ul><p>è¿™äº›é…ç½®å‚æ•°éƒ½æœ‰å„è‡ªçš„é»˜è®¤å€¼ã€‚å¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„éœ€æ±‚ï¼Œå¯ä»¥ç›´æ¥ç›´æ¥æŒ‰ç…§é»˜è®¤çº¦å®šä½¿ç”¨ã€‚</p><h2 id="æ‰§è¡Œé€»è¾‘"><a href="#æ‰§è¡Œé€»è¾‘" class="headerlink" title="æ‰§è¡Œé€»è¾‘"></a>æ‰§è¡Œé€»è¾‘</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹æµç¨‹å›¾ï¼Œä¸‹é¢çš„æµç¨‹å›¾ç»¿è‰²éƒ¨åˆ†æ˜¯ cacheDuration æ²¡æœ‰é…ç½®çš„æƒ…å†µã€‚å¯¹äº ResourceBundleMessageSource æ˜¯åªåŠ è½½ä¸€æ¬¡é…ç½®æ–‡ä»¶ï¼ŒReloadableResourceBundleMessageSource ä¼šæ ¹æ®æ–‡ä»¶ä¿®æ”¹æ—¶é—´åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°åŠ è½½ã€‚</p><h3 id="ResourceBundleMessageSource-çš„æµç¨‹å›¾"><a href="#ResourceBundleMessageSource-çš„æµç¨‹å›¾" class="headerlink" title="ResourceBundleMessageSource çš„æµç¨‹å›¾"></a>ResourceBundleMessageSource çš„æµç¨‹å›¾</h3><p><img src="https://static.howardliu.cn/spring/springboot-messagesource-ResourceBundleMessageSource.png" alt="ResourceBundleMessageSource"></p><h3 id="ReloadableResourceBundleMessageSource-çš„æµç¨‹å›¾"><a href="#ReloadableResourceBundleMessageSource-çš„æµç¨‹å›¾" class="headerlink" title="ReloadableResourceBundleMessageSource çš„æµç¨‹å›¾"></a>ReloadableResourceBundleMessageSource çš„æµç¨‹å›¾</h3><p><img src="https://static.howardliu.cn/spring/springboot-messagesource-ReloadableResourceBundleMessageSource.png" alt="ReloadableResourceBundleMessageSource"></p><h3 id="AbstractMessageSource-çš„å‡ ä¸ª-getMessage-æ–¹æ³•æºç "><a href="#AbstractMessageSource-çš„å‡ ä¸ª-getMessage-æ–¹æ³•æºç " class="headerlink" title="AbstractMessageSource çš„å‡ ä¸ª getMessage æ–¹æ³•æºç "></a>AbstractMessageSource çš„å‡ ä¸ª getMessage æ–¹æ³•æºç </h3><pre><code class="java">@Overridepublic final String getMessage(String code, @Nullable Object[] args, @Nullable String defaultMessage, Locale locale) {    String msg = getMessageInternal(code, args, locale);    if (msg != null) {        return msg;    }    if (defaultMessage == null) {        return getDefaultMessage(code);    }    return renderDefaultMessage(defaultMessage, args, locale);}@Overridepublic final String getMessage(String code, @Nullable Object[] args, Locale locale) throws NoSuchMessageException {    String msg = getMessageInternal(code, args, locale);    if (msg != null) {        return msg;    }    String fallback = getDefaultMessage(code);    if (fallback != null) {        return fallback;    }    throw new NoSuchMessageException(code, locale);}@Overridepublic final String getMessage(MessageSourceResolvable resolvable, Locale locale) throws NoSuchMessageException {    String[] codes = resolvable.getCodes();    if (codes != null) {        for (String code : codes) {            String message = getMessageInternal(code, resolvable.getArguments(), locale);            if (message != null) {                return message;            }        }    }    String defaultMessage = getDefaultMessage(resolvable, locale);    if (defaultMessage != null) {        return defaultMessage;    }    throw new NoSuchMessageException(!ObjectUtils.isEmpty(codes) ? codes[codes.length - 1] : &quot;&quot;, locale);}</code></pre><p>ç¬¬ä¸€ä¸ª<code>getMessage</code>æ–¹æ³•ï¼Œæ˜¯å¯ä»¥ä¼ å…¥é»˜è®¤å€¼<code>defaultMessage</code>çš„ï¼Œä¹Ÿå°±æ˜¯å½“æ‰€æœ‰ basename çš„é…ç½®æ–‡ä»¶ä¸­ä¸å­˜åœ¨ code æŒ‡å®šçš„å€¼ï¼Œå°±ä¼šä½¿ç”¨<code>defaultMessage</code>å€¼è¿›è¡Œæ ¼å¼åŒ–è¿”å›ã€‚</p><p>ç¬¬äºŒä¸ª<code>getMessage</code>æ–¹æ³•ï¼Œæ˜¯é€šè¿‡åˆ¤æ–­<code>useCodeAsDefaultMessage</code>é…ç½®ï¼Œå¦‚æœè®¾ç½®äº† trueï¼Œåœ¨æ‰€æœ‰ basename çš„é…ç½®æ–‡ä»¶ä¸­ä¸å­˜åœ¨ code æŒ‡å®šçš„å€¼çš„æƒ…å†µä¸‹ï¼Œä¼šè¿”å› code ä½œä¸ºè¿”å›å€¼ã€‚ä½†æ˜¯å½“è®¾ç½®ä¸º false æ—¶ï¼Œcode ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œä¼šæŠ›å‡º<code>NoSuchMessageException</code>å¼‚å¸¸ã€‚</p><p>ç¬¬ä¸‰ä¸ª<code>getMessage</code>æ–¹æ³•ï¼Œä¼ å…¥çš„æ˜¯<code>MessageSourceResolvable</code>æ¥å£å¯¹è±¡ï¼ŒæŸ¥æ‰¾çš„ code æ›´åŠ å¤šç§å¤šæ ·ã€‚ä¸è¿‡å¦‚æœæœ€åè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œä¼šæŠ›å‡º<code>NoSuchMessageException</code>å¼‚å¸¸ã€‚</p><h2 id="ç¼“å­˜çš„ä½¿ç”¨"><a href="#ç¼“å­˜çš„ä½¿ç”¨" class="headerlink" title="ç¼“å­˜çš„ä½¿ç”¨"></a>ç¼“å­˜çš„ä½¿ç”¨</h2><p>æˆ‘ä»¬çœ‹æºç ä¸ä»…ä»…æ˜¯ä¸ºäº†çœ‹åŠŸèƒ½ç»„ä»¶çš„å®ç°ï¼Œè¿˜æ˜¯å­¦ä¹ æ›´åŠ ä¼˜ç§€çš„ç¼–ç¨‹æ–¹å¼ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µå†…å­˜ç¼“å­˜çš„ä½¿ç”¨ï¼ŒSpring æºç ä¸­å¾ˆå¤šåœ°æ–¹éƒ½ç”¨åˆ°äº†è¿™ç§å†…å­˜ç¼“å­˜çš„ä½¿ç”¨æ–¹å¼ï¼š</p><pre><code class="java">// ä¸¤å±‚ Mapï¼Œç¬¬ä¸€å±‚æ˜¯ basenameï¼Œç¬¬äºŒå±‚æ˜¯ localeprivate final Map&lt;String, Map&lt;Locale, ResourceBundle&gt;&gt; cachedResourceBundles =        new ConcurrentHashMap&lt;&gt;();@Nullableprotected ResourceBundle getResourceBundle(String basename, Locale locale) {    if (getCacheMillis() &gt;= 0) {        // Fresh ResourceBundle.getBundle call in order to let ResourceBundle        // do its native caching, at the expense of more extensive lookup steps.        return doGetBundle(basename, locale);    }    else {        // Cache forever: prefer locale cache over repeated getBundle calls.        // å…ˆä»ç¼“å­˜ä¸­è·å–ç¬¬ä¸€å±‚ basename çš„ç¼“å­˜        Map&lt;Locale, ResourceBundle&gt; localeMap = this.cachedResourceBundles.get(basename);        if (localeMap != null) {            // å¦‚æœå‘½ä¸­ç¬¬ä¸€å±‚ï¼Œåœ¨é€šè¿‡ locale è·å–ç¬¬äºŒå±‚çš„å€¼            ResourceBundle bundle = localeMap.get(locale);            if (bundle != null) {                // å¦‚æœå‘½ä¸­ç¬¬äºŒå±‚ç¼“å­˜ï¼Œç›´æ¥è¿”å›                return bundle;            }        }        try {            // èµ°åˆ°è¿™é‡Œï¼Œè¯´æ˜æ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼Œå°±æ ¹æ® basename å’Œ locale åˆ›å»ºå¯¹è±¡            ResourceBundle bundle = doGetBundle(basename, locale);            if (localeMap == null) {                // å¦‚æœ localeMap ä¸ºç©ºï¼Œè¯´æ˜ç¬¬ä¸€çº§å°±ä¸å­˜åœ¨ï¼Œé€šè¿‡ Map çš„ computeIfAbsent æ–¹æ³•åˆå§‹åŒ–                localeMap = this.cachedResourceBundles.computeIfAbsent(basename, bn -&gt; new ConcurrentHashMap&lt;&gt;());            }            // å°†æ–°å»ºçš„ ResourceBundle å¯¹è±¡æ”¾å…¥ localeMap ä¸­            localeMap.put(locale, bundle);            return bundle;        }        catch (MissingResourceException ex) {            if (logger.isWarnEnabled()) {                logger.warn(&quot;ResourceBundle [&quot; + basename + &quot;] not found for MessageSource: &quot; + ex.getMessage());            }            // Assume bundle not found            // -&gt; do NOT throw the exception to allow for checking parent message source.            return null;        }    }}</code></pre><p>è¿˜æœ‰ä¸€ç§ä½¿ç”¨ Map å®ç°å†…å­˜ç¼“å­˜çš„å†™æ³•ï¼Œæ¯”å¦‚æˆ‘ä»¬å°±å¯¹ä¸Šé¢çš„è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ”¹å†™ï¼š</p><pre><code class="java">public class ResourceBundleMessageSourceExt extends ResourceBundleMessageSource {    private final Map&lt;BasenameLocale, ResourceBundle&gt; cachedResourceBundles = new ConcurrentHashMap&lt;&gt;();    @Override    protected ResourceBundle getResourceBundle(String basename, Locale locale) {        if (getCacheMillis() &gt;= 0) {            // Fresh ResourceBundle.getBundle call in order to let ResourceBundle            // do its native caching, at the expense of more extensive lookup steps.            return doGetBundle(basename, locale);        } else {            // Cache forever: prefer locale cache over repeated getBundle calls.            final BasenameLocale basenameLocale = new BasenameLocale(basename, locale);            ResourceBundle resourceBundle = this.cachedResourceBundles.get(basenameLocale);            if (resourceBundle != null) {                return resourceBundle;            }            try {                ResourceBundle bundle = doGetBundle(basename, locale);                this.cachedResourceBundles.put(basenameLocale, bundle);                return bundle;            } catch (MissingResourceException ex) {                if (logger.isWarnEnabled()) {                    logger.warn(&quot;ResourceBundle [&quot; + basename + &quot;] not found for MessageSource: &quot; + ex.getMessage());                }                // Assume bundle not found                // -&gt; do NOT throw the exception to allow for checking parent message source.                return null;            }        }    }    public record BasenameLocale(String basename, Locale locale) {        @Override        public boolean equals(Object o) {            if (this == o) {                return true;            }            if (o == null || getClass() != o.getClass()) {                return false;            }            BasenameLocale that = (BasenameLocale) o;            return basename.equals(that.basename) &amp;&amp; locale.equals(that.locale);        }        @Override        public int hashCode() {            return Objects.hash(basename, locale);        }    }}</code></pre><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Map æ˜¯é€šè¿‡<code>equals</code>åˆ¤æ–­ key æ˜¯å¦ä¸€è‡´çš„åŸç†ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å« basenameã€locale çš„å¯¹è±¡<code>BasenameLocale</code>ï¼Œç„¶åæ”¹å†™<code>cachedResourceBundles</code>ä¸ºä¸€å±‚ Mapï¼Œä¼šç®€åŒ–ä¸€äº›åˆ¤æ–­é€»è¾‘ã€‚</p><blockquote><p>æ­¤å¤„çš„<code>BasenameLocale</code>æ˜¯<code>record</code>ç±»å‹ï¼Œå…·ä½“è¯­æ³•å¯ä»¥å‚è€ƒ <a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a> ä¸­çš„ Record ç±»å‹ä¸€èŠ‚ã€‚</p></blockquote><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡å…ˆä»‹ç»äº† MessageSource çš„é…ç½®é¡¹ï¼Œç„¶åé€šè¿‡æµç¨‹å›¾çš„æ–¹å¼ä»‹ç»äº†<code>ResourceBundleMessageSource</code>å’Œ<code>ReloadableResourceBundleMessageSource</code>çš„æ‰§è¡Œé€»è¾‘ï¼Œæœ€ååˆ†äº«äº†ä¸¤ä¸ªä½¿ç”¨ Map å®ç°å†…å­˜ç¼“å­˜çš„æ–¹å¼ã€‚</p><p>ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†æ‰©å±• MessageSourceï¼Œå®ç°ä» Nacos åŠ è½½é…ç½®å†…å®¹ï¼ŒåŒæ—¶å®ç°åŠ¨æ€ä¿®æ”¹é…ç½®å†…å®¹çš„åŠŸèƒ½ã€‚</p><p>æœ¬æ–‡ä¸­çš„å®ä¾‹å·²ç»ä¼ åˆ° GitHubï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤<code>spring</code>è·å–æºç ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/zUrx7duy0-OY1oYn8FeKOw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¸€æ‹›å®ç°ç»“æœçš„ä¼˜é›…å“åº”</a></li><li><a href="https://mp.weixin.qq.com/s/H599Wri3VbjTuLBnf7pD3w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå¦‚ä½•ä¼˜é›…çš„å¤„ç†å¼‚å¸¸</a></li><li><a href="https://mp.weixin.qq.com/s/fcVE-cE7tDuWKoNNX9rsoQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šé€šè¿‡ BeanPostProcessor åŠ¨æ€æ³¨å…¥ ID ç”Ÿæˆå™¨</a></li><li><a href="https://mp.weixin.qq.com/s/xQQbl6VNF2eCgmQPrMyc4w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šè‡ªå®šä¹‰ Filter ä¼˜é›…è·å–è¯·æ±‚å‚æ•°å’Œå“åº”ç»“æœ</a></li><li><a href="https://mp.weixin.qq.com/s/coKjuefWMmCA4bSkRDIRVA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/pet_rA7-O1JD3QfQ1fqxAQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/2OXArNObVejXLvMOmE3oqw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/hdioIIwPA2lv2khfRmKhOQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/vbccn0kTdyOlmznDr3RItw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šJUnit5+MockMvc+Mockito åšå¥½å•å…ƒæµ‹è¯•</a></li><li><a href="https://mp.weixin.qq.com/s/s8PQXLT8Ni3dLqsOgf3syA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåŠ è½½å’Œè¯»å–èµ„æºæ–‡ä»¶å†…å®¹</a></li><li><a href="https://mp.weixin.qq.com/s/dGPhS5vdbnFdiTxkpr2mLg" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/springboot-action-messagesource-principle/">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource çš„æ‰§è¡Œé€»è¾‘ä¸æºç </a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource çš„æ‰§è¡Œé€»è¾‘ä¸æºç </a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      æŒæ¡ MessageSource çš„åŸç†ï¼Œæˆ‘ä»¬æ‰èƒ½æ›´å¥½çš„æ‰©å±•ã€‚
    
    </summary>
    
    
      <category term="spring" scheme="https://www.howardliu.cn/categories/spring/"/>
    
    
      <category term="SpringBoot å®æˆ˜" scheme="https://www.howardliu.cn/tags/SpringBoot-%E5%AE%9E%E6%88%98/"/>
    
      <category term="SpringBoot" scheme="https://www.howardliu.cn/tags/SpringBoot/"/>
    
      <category term="spring" scheme="https://www.howardliu.cn/tags/spring/"/>
    
      <category term="SpringBoot æ‰‹å†Œ" scheme="https://www.howardliu.cn/tags/SpringBoot-%E6%89%8B%E5%86%8C/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</title>
    <link href="https://www.howardliu.cn/springboot-action-messagesource/"/>
    <id>https://www.howardliu.cn/springboot-action-messagesource/</id>
    <published>2022-07-30T03:26:55.000Z</published>
    <updated>2022-07-30T03:26:55.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/taiwan-3511017.jpeg" alt="SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>å’±ä»¬ä»Šå¤©ä¸€èµ·æ¥èŠèŠ SpringBoot ä¸­çš„å›½é™…åŒ–ç»„ä»¶ MessageSourceã€‚</p><a id="more"></a><h2 id="åˆè¯†-MessageSource"><a href="#åˆè¯†-MessageSource" class="headerlink" title="åˆè¯† MessageSource"></a>åˆè¯† MessageSource</h2><p>å…ˆçœ‹ä¸€ä¸‹ç±»å›¾ï¼š</p><p><img src="https://static.howardliu.cn/spring/MessageSource.png" alt="MessageSource ç±»å›¾"></p><p>ä»ç±»å›¾å¯ä»¥çœ‹åˆ°ï¼ŒSpring å†…ç½®çš„<code>MessageSource</code>æœ‰ä¸‰ä¸ªå®ç°ç±»ï¼š</p><ul><li>ResourceBundleMessageSourceï¼šé€šè¿‡ JDK æä¾›çš„ ResourceBundle åŠ è½½èµ„æºæ–‡ä»¶ï¼›</li><li>ReloadableResourceBundleMessageSourceï¼šé€šè¿‡ PropertiesPersister åŠ è½½èµ„æºï¼Œæ”¯æŒ xmlã€properties ä¸¤ä¸ªæ ¼å¼ï¼Œä¼˜å…ˆåŠ è½½ properties æ ¼å¼çš„æ–‡ä»¶ã€‚å¦‚æœåŒæ—¶å­˜åœ¨ properties å’Œ xml çš„æ–‡ä»¶ï¼Œä¼šåªåŠ è½½ properties çš„å†…å®¹ï¼›</li><li>StaticMessageSourceï¼šæ˜¯æ‰‹åŠ¨æ³¨å…¥å›½é™…åŒ–å†…å®¹ï¼Œç›¸å½“äºæ‰‹å†™ä»£ç ã€‚å› ä¸ºæ¯”è¾ƒç®€å•ï¼Œè€Œä¸”å®é™…ç”¨å¤„ä¸å¤§ï¼Œæ‰€ä»¥æš‚æ—¶ä¸åšè®¨è®ºã€‚</li></ul><p>åœ¨ SpringBoot ä¸­ï¼Œé»˜è®¤åˆ›å»º ResourceBundleMessageSource å®ä¾‹å®ç°å›½é™…åŒ–è¾“å‡ºã€‚æ ‡å‡†çš„é…ç½®é€šè¿‡<code>MessageSourceProperties</code>ç±»æ³¨å…¥ï¼š</p><ul><li>basenameï¼šåŠ è½½èµ„æºçš„æ–‡ä»¶åï¼Œå¯ä»¥å¤šä¸ªèµ„æºåç§°ï¼Œé€šè¿‡é€—å·éš”å¼€ï¼Œé»˜è®¤æ˜¯â€œmessagesâ€ï¼›</li><li>encodingï¼šåŠ è½½æ–‡ä»¶çš„å­—ç¬¦é›†ï¼Œé»˜è®¤æ˜¯ UTF-8ï¼Œè¿™ä¸ªä¸å¤šè¯´ï¼›</li><li>cacheDurationï¼šæ–‡ä»¶åŠ è½½åˆ°å†…å­˜åç¼“å­˜æ—¶é—´ï¼Œé»˜è®¤å•ä½æ˜¯ç§’ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåªä¼šåŠ è½½ä¸€æ¬¡ç¼“å­˜ï¼Œä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™ä¸ªå‚æ•°åœ¨ ResourceBundleMessageSourceã€ReloadableResourceBundleMessageSource ç¨å¾®æœ‰äº›å·®å¼‚ï¼Œä¼šå…·ä½“è¯´ä¸‹ã€‚</li><li>fallbackToSystemLocaleï¼šè¿™æ˜¯ä¸€ä¸ªå…œåº•å¼€å…³ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœåœ¨æŒ‡å®šè¯­è¨€ä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„å€¼ï¼Œä¼šä» basename å‚æ•°ï¼ˆé»˜è®¤æ˜¯ messages.propertiesï¼‰ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœå†æ‰¾ä¸åˆ°å¯èƒ½ç›´æ¥è¿”å›æˆ–æŠ›é”™ã€‚è¯¥å‚æ•°è®¾ç½®ä¸º true çš„è¯ï¼Œè¿˜ä¼šå†èµ°ä¸€æ­¥å…œåº•é€»è¾‘ï¼Œä»å½“å‰ç³»ç»Ÿè¯­è¨€å¯¹åº”é…ç½®æ–‡ä»¶ä¸­æŸ¥æ‰¾ã€‚è¯¥å‚æ•°é»˜è®¤æ˜¯ trueï¼›</li><li>alwaysUseMessageFormatï¼šMessageSource ç»„ä»¶é€šè¿‡<code>MessageFormat.format</code>å‡½æ•°å¯¹å›½é™…åŒ–ä¿¡æ¯æ ¼å¼åŒ–ï¼Œå¦‚æœæ³¨å…¥å‚æ•°ï¼Œè¾“å‡ºç»“æœæ˜¯ç»è¿‡æ ¼å¼åŒ–çš„ã€‚æ¯”å¦‚<code>MessageFormat.format(&quot;Hello, {0}!&quot;, &quot;Kanshan&quot;)</code>è¾“å‡ºç»“æœæ˜¯â€œHello, Kanshan!â€ã€‚è¯¥å‚æ•°æ§åˆ¶çš„æ˜¯ï¼Œå½“è¾“å…¥å‚æ•°ä¸ºç©ºæ—¶ï¼Œæ˜¯å¦è¿˜æ˜¯ä½¿ç”¨<code>MessageFormat.format</code>å‡½æ•°å¯¹ç»“æœè¿›è¡Œæ ¼å¼åŒ–ï¼Œé»˜è®¤æ˜¯ falseï¼›</li><li>useCodeAsDefaultMessageï¼šå½“æ²¡æœ‰æ‰¾åˆ°å¯¹åº”ä¿¡æ¯çš„æ—¶å€™ï¼Œæ˜¯å¦è¿”å› codeã€‚ä¹Ÿå°±æ˜¯å½“æ‰¾äº†æ‰€æœ‰èƒ½æ‰¾çš„é…ç½®æ–‡ä»¶åï¼Œè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ä¿¡æ¯ï¼Œæ˜¯å¦ç›´æ¥è¿”å› code å€¼ã€‚é»˜è®¤æ˜¯ falseï¼Œå³ä¸è¿”å› codeï¼ŒæŠ›å‡º<code>NoSuchMessageException</code>å¼‚å¸¸ã€‚</li></ul><h2 id="å°è¯•ç‰›åˆ€"><a href="#å°è¯•ç‰›åˆ€" class="headerlink" title="å°è¯•ç‰›åˆ€"></a>å°è¯•ç‰›åˆ€</h2><p>ä»ä¸Šé¢æˆ‘ä»¬çŸ¥é“äº†ä¸€äº›ç®€å•çš„é…ç½®ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰åŠæ³•çŸ¥é“ MessageSource åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œæœ¬èŠ‚æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­å°è¯•ç‰›åˆ€ã€‚</p><p>é¦–å…ˆä»<a href="https://start.spring.io/" target="_blank" rel="noopener">https://start.spring.io/</a>åˆ›å»ºä¸€ä¸ªæœ€å°‘ä¾èµ–<code>spring-boot-starter-web</code>çš„ SpringBoot é¡¹ç›®ã€‚</p><p>ç„¶ååœ¨ resources ç›®å½•ä¸‹å®šä¹‰ä¸€ç»„å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨é»˜è®¤é…ç½®ï¼Œæ‰€ä»¥ basename æ˜¯ messagesï¼š</p><pre><code class="properties">## messages.propertiesmessage.code1=[DEFAULT]code onemessage.code2=[DEFAULT]code twomessage.code3=[DEFAULT]code threemessage.code4=[DEFAULT]code fourmessage.code5=[DEFAULT]code fivemessage.code6=[DEFAULT]code six## messages_en.propertiesmessage.code2=[en]code two## messages_en_US.propertiesmessage.code3=[en_US]code three## messages_zh.propertiesmessage.code4=[ä¸­æ–‡] ä¸å­—å·## messages_zh_CN.propertiesmessage.code5=[å¤§é™†åŒºåŸŸä¸­æ–‡] æˆŠå­—å·## messages_zh_Hans.propertiesmessage.code6=[ç®€ä½“ä¸­æ–‡] å·±å­—å·</code></pre><p>ä¸€ä¸ªå®šä¹‰äº†å…­ä¸ªé…ç½®æ–‡ä»¶ï¼š</p><ul><li>messages.propertiesï¼šé»˜è®¤é…ç½®æ–‡ä»¶</li><li>messages_en.propertiesï¼šè‹±æ–‡é…ç½®æ–‡ä»¶</li><li>messages_en_US.propertiesï¼šè‹±æ–‡ç¾å›½é…ç½®æ–‡ä»¶</li><li>messages_zh.propertiesï¼šä¸­æ–‡é…ç½®æ–‡ä»¶</li><li>messages_zh_CN.propertiesï¼šä¸­æ–‡ä¸­å›½å¤§é™†åŒºåŸŸé…ç½®æ–‡ä»¶</li><li>messages_zh_Hans.propertiesï¼šç®€ä½“ä¸­æ–‡é…ç½®æ–‡ä»¶</li></ul><p>ä»ä¸Šé¢é…ç½®æ–‡ä»¶çš„å‘½åå¯ä»¥çœ‹å‡ºï¼Œéƒ½æ˜¯ä»¥ basename å¼€å¤´ï¼Œåé¢è·Ÿä¸Šè¯­ç³»å’Œåœ°åŒºï¼Œä¸‰ä¸ªå‚æ•°ä»¥ä¸‹åˆ’çº¿åˆ†éš”ã€‚</p><p>å¯ä»¥æ”¯æŒçš„è¯­è¨€å’Œå›½å®¶å¯ä»¥ä»<code>java.util.Locale</code>æŸ¥æ‰¾ã€‚</p><p>æœ€åæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Controller å®éªŒï¼š</p><pre><code class="java">@RestControllerpublic class HelloController {    @Autowired    private MessageSource messageSource;    @GetMapping(&quot;m1&quot;)    public List&lt;String&gt; m1(Locale locale) {        final List&lt;String&gt; multi = new ArrayList&lt;&gt;();        multi.add(messageSource.getMessage(&quot;message.code1&quot;, null, locale));        multi.add(messageSource.getMessage(&quot;message.code2&quot;, null, locale));        multi.add(messageSource.getMessage(&quot;message.code3&quot;, null, locale));        multi.add(messageSource.getMessage(&quot;message.code4&quot;, null, locale));        multi.add(messageSource.getMessage(&quot;message.code5&quot;, null, locale));        multi.add(messageSource.getMessage(&quot;message.code6&quot;, null, locale));        return multi;    }}</code></pre><p>æˆ‘ä»¬é€šè¿‡ä¸åŒçš„è¯·æ±‚æŸ¥çœ‹ç»“æœï¼š</p><pre><code class="http">### é»˜è®¤GET http://localhost:8080/m1### ç»“æœæ˜¯ï¼š[  &quot;[DEFAULT]code one&quot;,  &quot;[DEFAULT]code two&quot;,  &quot;[DEFAULT]code three&quot;,  &quot;[ä¸­æ–‡] ä¸å­—å·&quot;,  &quot;[å¤§é™†åŒºåŸŸä¸­æ–‡] æˆŠå­—å·&quot;,  &quot;[ç®€ä½“ä¸­æ–‡] å·±å­—å·&quot;]### local: enGET http://localhost:8080/m1Accept-Language: en### ç»“æœæ˜¯ï¼š[  &quot;[DEFAULT]code one&quot;,  &quot;[en]code two&quot;,  &quot;[DEFAULT]code three&quot;,  &quot;[DEFAULT]code four&quot;,  &quot;[DEFAULT]code five&quot;,  &quot;[DEFAULT]code six&quot;]### local: en-USGET http://localhost:8080/m1Accept-Language: en-US### ç»“æœæ˜¯ï¼š[  &quot;[DEFAULT]code one&quot;,  &quot;[en]code two&quot;,  &quot;[en_US]code three&quot;,  &quot;[DEFAULT]code four&quot;,  &quot;[DEFAULT]code five&quot;,  &quot;[DEFAULT]code six&quot;]### local: zhGET http://localhost:8080/m1Accept-Language: zh### ç»“æœæ˜¯ï¼š[  &quot;[DEFAULT]code one&quot;,  &quot;[DEFAULT]code two&quot;,  &quot;[DEFAULT]code three&quot;,  &quot;[ä¸­æ–‡] ä¸å­—å·&quot;,  &quot;[DEFAULT]code five&quot;,  &quot;[DEFAULT]code six&quot;]### local: zh-CNGET http://localhost:8080/m1Accept-Language: zh-CN### ç»“æœæ˜¯ï¼š[  &quot;[DEFAULT]code one&quot;,  &quot;[DEFAULT]code two&quot;,  &quot;[DEFAULT]code three&quot;,  &quot;[ä¸­æ–‡] ä¸å­—å·&quot;,  &quot;[å¤§é™†åŒºåŸŸä¸­æ–‡] æˆŠå­—å·&quot;,  &quot;[DEFAULT]code six&quot;]</code></pre><p>ä»ä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼š</p><ol><li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHTTP è¯·æ±‚æ²¡æœ‰ä¼ è¯­è¨€ï¼Œæ‰€ä»¥ä½¿ç”¨äº†ç³»ç»Ÿè¯­è¨€ç»„è£…ï¼Œç›¸å½“äºä¼ å‚æ˜¯<code>zh-Hans</code>ï¼Œæ‰€ä»¥ç»“æœæ˜¯ç®€ä½“ä¸­æ–‡ä¼˜å…ˆï¼›</li><li>HTTP è¯·æ±‚å®šä¹‰çš„è¯­è¨€è¶Šç²¾ç¡®ï¼ŒåŒ¹é…çš„å†…å®¹è¶Šç²¾ç¡®ï¼›</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŒ‡å®šè¯­è¨€é…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°ï¼Œä¼šä¸€æ¬¡å‘ä¸ŠæŸ¥æ‰¾ï¼Œåœ°åŒº &gt; å›½å®¶ &gt; è¯­è¨€ &gt; é»˜è®¤ã€‚</li></ol><h2 id="å¸¦å‚æ•°çš„å›½é™…åŒ–ä¿¡æ¯"><a href="#å¸¦å‚æ•°çš„å›½é™…åŒ–ä¿¡æ¯" class="headerlink" title="å¸¦å‚æ•°çš„å›½é™…åŒ–ä¿¡æ¯"></a>å¸¦å‚æ•°çš„å›½é™…åŒ–ä¿¡æ¯</h2><p>æˆ‘ä»¬åœ¨ message.properties ä¸­æ·»åŠ ä¸€è¡Œé…ç½®ï¼š</p><pre><code class="properties">message.multiVars=var1={0}, var2={1}</code></pre><p>åœ¨åˆšæ‰çš„ Controller ä¸­å¢åŠ ä¸€ä¸ªè¯·æ±‚ï¼š</p><pre><code class="java">@GetMapping(&quot;m2&quot;)public List&lt;String&gt; m2(Locale locale) {    final List&lt;String&gt; multi = new ArrayList&lt;&gt;();    multi.add(&quot;å‚æ•°ä¸º null: &quot; + messageSource.getMessage(&quot;message.multiVars&quot;, null, locale));    multi.add(&quot;å‚æ•°ä¸ºç©ºï¼š&quot; + messageSource.getMessage(&quot;message.multiVars&quot;, new Object[]{}, locale));    multi.add(&quot;åªä¼ ä¸€ä¸ªå‚æ•°ï¼š&quot; + messageSource.getMessage(&quot;message.multiVars&quot;, new Object[]{&quot;ç¬¬ä¸€ä¸ªå‚æ•°&quot;}, locale));    multi.add(&quot;ä¼ ä¸¤ä¸ªå‚æ•°ï¼š&quot; + messageSource.getMessage(&quot;message.multiVars&quot;, new Object[]{&quot;ç¬¬ä¸€ä¸ªå‚æ•°&quot;, &quot;ç¬¬äºŒä¸ªå‚æ•°&quot;}, locale));    multi.add(&quot;ä¼ è¶…è¿‡ä¸¤ä¸ªå‚æ•°ï¼š&quot; + messageSource.getMessage(&quot;message.multiVars&quot;, new Object[]{&quot;ç¬¬ä¸€ä¸ªå‚æ•°&quot;, &quot;ç¬¬äºŒä¸ªå‚æ•°&quot;, &quot;ç¬¬ä¸‰ä¸ªå‚æ•°&quot;}, locale));    return multi;}</code></pre><p>æˆ‘ä»¬çœ‹çœ‹ç»“æœï¼š</p><pre><code class="http">###GET http://localhost:8080/m2### ç»“æœæ˜¯ï¼š[  &quot;å‚æ•°ä¸º null: var1={0}, var2={1}&quot;,  &quot;å‚æ•°ä¸ºç©ºï¼švar1={0}, var2={1}&quot;,  &quot;åªä¼ ä¸€ä¸ªå‚æ•°ï¼švar1=ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œvar2={1}&quot;,  &quot;ä¼ ä¸¤ä¸ªå‚æ•°ï¼švar1=ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œvar2=ç¬¬äºŒä¸ªå‚æ•°&quot;,  &quot;ä¼ è¶…è¿‡ä¸¤ä¸ªå‚æ•°ï¼švar1=ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œvar2=ç¬¬äºŒä¸ªå‚æ•°&quot;]</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰äº†å¸¦å‚æ•°çš„é…ç½®ä¿¡æ¯ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä¼ å‚æ•°ã€ä¼ å°‘äºæŒ‡å®šæ•°é‡çš„å‚æ•°ã€ä¼ ç¬¦åˆæŒ‡å®šæ•°é‡çš„å‚æ•°ã€ä¼ è¶…è¿‡æŒ‡å®šæ•°é‡çš„å‚æ•°ï¼Œéƒ½å¯ä»¥æ­£å¸¸è¿”å›å›½é™…åŒ–ä¿¡æ¯ã€‚</p><p>æ­¤å¤„å¯ä»¥ç†è§£ä¸ºï¼Œ<code>MessageFormat.format</code>æ‰§è¡Œè¿‡ç¨‹æ˜¯<code>for-index</code>å¾ªç¯ï¼Œä»é…ç½®å€¼ä¸­æ‰¾æ ¼å¼ä¸º<code>{æ•°å­—}</code>çš„å ä½ç¬¦ï¼Œç„¶åç”¨å¯¹åº”ä¸‹æ ‡çš„è¾“å…¥å‚æ•°æ›¿æ¢ï¼Œå¦‚æœå±äºå‚æ•°æ²¡äº†ï¼Œå°±ä¿æŒåŸæ ·ã€‚</p><h2 id="æ‰¾ä¸åˆ°é…ç½®å†…å®¹"><a href="#æ‰¾ä¸åˆ°é…ç½®å†…å®¹" class="headerlink" title="æ‰¾ä¸åˆ°é…ç½®å†…å®¹"></a>æ‰¾ä¸åˆ°é…ç½®å†…å®¹</h2><p>å¦‚æœæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰é…ç½®æˆ–è€…å¯¹åº”è¯­è¨€åŠå…¶çˆ¶çº§éƒ½æ²¡æœ‰é…ç½®å‘¢ï¼Ÿ</p><p>è¿™ä¸ªå°±è¦é å‰é¢è¯´çš„<code>useCodeAsDefaultMessage</code>é…ç½®äº†ï¼Œå¦‚æœä¸º trueï¼Œå°±ä¼šè¿”å›è¾“å…¥çš„ codeï¼Œå¦‚æœä¸º falseï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é»˜è®¤æ˜¯ falseï¼Œæ‰€ä»¥å¦‚æœæ‰¾ä¸åˆ°ä¼šæŠ›å¼‚å¸¸ã€‚æ¯”å¦‚ï¼š</p><pre><code class="java">@GetMapping(&quot;m3&quot;)public List&lt;String&gt; m3(Locale locale) {    final List&lt;String&gt; multi = new ArrayList&lt;&gt;();    multi.add(&quot;ä¸å­˜åœ¨çš„ code: &quot; + messageSource.getMessage(&quot;message.notExist&quot;, null, locale));    return multi;}</code></pre><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ‰§è¡Œ http è¯·æ±‚ï¼š</p><pre><code class="http">###GET http://localhost:8080/m3### ç»“æœæ˜¯ï¼š{  &quot;timestamp&quot;: &quot;2022-06-19T09:14:14.977+00:00&quot;,  &quot;status&quot;: 500,  &quot;error&quot;: &quot;Internal Server Error&quot;,  &quot;path&quot;: &quot;/m3&quot;}</code></pre><p>è¿™æ˜¯æŠ¥é”™äº†ï¼Œå¼‚å¸¸æ ˆæ˜¯ï¼š</p><pre><code class="log">org.springframework.context.NoSuchMessageException: No message found under code &#39;message.notExist&#39; for locale &#39;zh_CN_#Hans&#39;.    at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161) ~[spring-context-5.3.20.jar:5.3.20]    at cn.howardliu.effective.spring.springbootmessages.controller.HelloController.m3(HelloController.java:47) ~[classes/:na]    â€¦â€¦æ­¤å¤„çœç•¥</code></pre><h2 id="è‡ªå®šä¹‰-MessageSource"><a href="#è‡ªå®šä¹‰-MessageSource" class="headerlink" title="è‡ªå®šä¹‰ MessageSource"></a>è‡ªå®šä¹‰ MessageSource</h2><p>æœ¬æ–‡å¼€å¤´è¯´è¿‡ï¼ŒMessageSource æœ‰ä¸‰ç§å®ç°ï¼ŒSpring é»˜è®¤ä½¿ç”¨äº† ResourceBundleMessageSourceï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä½¿ç”¨ ReloadableResourceBundleMessageSourceã€‚</p><p>æ—¢ç„¶æ˜¯åœ¨ SpringBoot ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¾é  SpringBoot çš„ç‰¹æ€§å®šä¹‰ï¼š</p><pre><code class="java">@Configuration(proxyBeanMethods = false)@ConditionalOnMissingBean(name = AbstractApplicationContext.MESSAGE_SOURCE_BEAN_NAME, search = SearchStrategy.CURRENT)@ConditionalOnProperty(name = &quot;spring.messages-type&quot;, havingValue = &quot;ReloadableResourceBundleMessageSource&quot;)@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)@Conditional(ReloadResourceBundleCondition.class)@EnableConfigurationPropertiespublic class ReloadMessageSourceAutoConfiguration {    private static final Resource[] NO_RESOURCES = {};    @Bean    @ConfigurationProperties(prefix = &quot;spring.messages&quot;)    public MessageSourceProperties messageSourceProperties() {        return new MessageSourceProperties();    }    @Bean    public MessageSource messageSource(MessageSourceProperties properties) {        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();        if (StringUtils.hasText(properties.getBasename())) {            final String[] originBaseNames = StringUtils                    .commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(properties.getBasename()));            final String[] baseNames = new String[originBaseNames.length];            for (int i = 0; i &lt; originBaseNames.length; i++) {                if (originBaseNames[i].startsWith(&quot;classpath:&quot;)) {                    baseNames[i] = originBaseNames[i];                } else {                    baseNames[i] = &quot;classpath:&quot; + originBaseNames[i];                }            }            messageSource.setBasenames(baseNames);        }        if (properties.getEncoding() != null) {            messageSource.setDefaultEncoding(properties.getEncoding().name());        }        messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());        Duration cacheDuration = properties.getCacheDuration();        if (cacheDuration != null) {            messageSource.setCacheMillis(cacheDuration.toMillis());        }        messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());        messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());        return messageSource;    }    protected static class ReloadResourceBundleCondition extends SpringBootCondition {        private static final ConcurrentReferenceHashMap&lt;String, ConditionOutcome&gt; CACHE =                new ConcurrentReferenceHashMap&lt;&gt;();        @Override        public ConditionOutcome getMatchOutcome(ConditionContext context, AnnotatedTypeMetadata metadata) {            String basename = context.getEnvironment().getProperty(&quot;spring.messages.basename&quot;, &quot;messages&quot;);            ConditionOutcome outcome = CACHE.get(basename);            if (outcome == null) {                outcome = getMatchOutcomeForBasename(context, basename);                CACHE.put(basename, outcome);            }            return outcome;        }        private ConditionOutcome getMatchOutcomeForBasename(ConditionContext context, String basename) {            ConditionMessage.Builder message = ConditionMessage.forCondition(&quot;ResourceBundle&quot;);            for (String name : StringUtils.commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(basename))) {                for (Resource resource : getResources(context.getClassLoader(), name)) {                    if (resource.exists()) {                        return ConditionOutcome.match(message.found(&quot;bundle&quot;).items(resource));                    }                }            }            return ConditionOutcome.noMatch(message.didNotFind(&quot;bundle with basename &quot; + basename).atAll());        }        private Resource[] getResources(ClassLoader classLoader, String name) {            String target = name.replace(&#39;.&#39;, &#39;/&#39;);            try {                return new PathMatchingResourcePatternResolver(classLoader)                        .getResources(&quot;classpath*:&quot; + target + &quot;.properties&quot;);            } catch (Exception ex) {                return NO_RESOURCES;            }        }    }}</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œ<code>messageSource.setBasenames(baseNames);</code>çš„æ—¶å€™ï¼Œ<code>baseNames</code>ä¸­çš„å€¼éƒ½æ˜¯è®¾ç½®æˆ<code>classpath:</code>å¼€å¤´çš„ï¼Œè¿™æ˜¯ä¸ºäº†ä½¿<code>ReloadableResourceBundleMessageSource</code>èƒ½å¤Ÿè¯»å– CLASSPATH ä¸‹çš„é…ç½®æ–‡ä»¶ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„å®ç°ï¼Œè¿™ä¸ªæ˜¯æ¯”è¾ƒçµæ´»çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶å†…å®¹ï¼ŒæŸ¥çœ‹å˜åŒ–ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡é€šè¿‡å‡ ä¸ªå°ä¾‹å­ä»‹ç»äº†<code>MessageSource</code>çš„ä½¿ç”¨ã€‚è¿™é‡Œåšä¸€ä¸‹é¢„å‘Šï¼Œä¸‹ä¸€ç« æˆ‘ä»¬ä¼šä»æºç è§’åº¦åˆ†æ<code>MessageSourc</code>e çš„å®ç°ç±»<code>ResourceBundleMessageSource</code>å’Œ<code>ReloadableResourceBundleMessageSource</code>çš„æ‰§è¡Œé€»è¾‘ï¼›ç„¶åæˆ‘ä»¬è‡ªå®šä¹‰æ‰©å±•ï¼Œä» Nacos ä¸­è¯»å–é…ç½®å†…å®¹ï¼Œå®ç°æ›´åŠ çµæ´»çš„é…ç½®ã€‚</p><p>æœ¬æ–‡ä¸­çš„å®ä¾‹å·²ç»ä¼ åˆ° GitHubï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤<code>spring</code>è·å–æºç ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/zUrx7duy0-OY1oYn8FeKOw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¸€æ‹›å®ç°ç»“æœçš„ä¼˜é›…å“åº”</a></li><li><a href="https://mp.weixin.qq.com/s/H599Wri3VbjTuLBnf7pD3w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå¦‚ä½•ä¼˜é›…çš„å¤„ç†å¼‚å¸¸</a></li><li><a href="https://mp.weixin.qq.com/s/fcVE-cE7tDuWKoNNX9rsoQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šé€šè¿‡ BeanPostProcessor åŠ¨æ€æ³¨å…¥ ID ç”Ÿæˆå™¨</a></li><li><a href="https://mp.weixin.qq.com/s/xQQbl6VNF2eCgmQPrMyc4w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šè‡ªå®šä¹‰ Filter ä¼˜é›…è·å–è¯·æ±‚å‚æ•°å’Œå“åº”ç»“æœ</a></li><li><a href="https://mp.weixin.qq.com/s/coKjuefWMmCA4bSkRDIRVA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/pet_rA7-O1JD3QfQ1fqxAQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/2OXArNObVejXLvMOmE3oqw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/hdioIIwPA2lv2khfRmKhOQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/vbccn0kTdyOlmznDr3RItw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šJUnit5+MockMvc+Mockito åšå¥½å•å…ƒæµ‹è¯•</a></li><li><a href="https://mp.weixin.qq.com/s/s8PQXLT8Ni3dLqsOgf3syA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåŠ è½½å’Œè¯»å–èµ„æºæ–‡ä»¶å†…å®¹</a></li><li><a href="https://mp.weixin.qq.com/s/dGPhS5vdbnFdiTxkpr2mLg" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/springboot-action-messagesource/">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/126069965" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      å’±ä»¬ä»Šå¤©ä¸€èµ·æ¥èŠèŠ SpringBoot ä¸­çš„å›½é™…åŒ–ç»„ä»¶ MessageSourceã€‚
    
    </summary>
    
    
      <category term="spring" scheme="https://www.howardliu.cn/categories/spring/"/>
    
    
      <category term="SpringBoot å®æˆ˜" scheme="https://www.howardliu.cn/tags/SpringBoot-%E5%AE%9E%E6%88%98/"/>
    
      <category term="SpringBoot" scheme="https://www.howardliu.cn/tags/SpringBoot/"/>
    
      <category term="spring" scheme="https://www.howardliu.cn/tags/spring/"/>
    
      <category term="SpringBoot æ‰‹å†Œ" scheme="https://www.howardliu.cn/tags/SpringBoot-%E6%89%8B%E5%86%8C/"/>
    
  </entry>
  
  <entry>
    <title>å°å¿ƒ transmittable-thread-local çš„è¿™ä¸ªå‘</title>
    <link href="https://www.howardliu.cn/transmittable-thread-local-make-trouble/"/>
    <id>https://www.howardliu.cn/transmittable-thread-local-make-trouble/</id>
    <published>2022-07-30T02:55:46.000Z</published>
    <updated>2022-07-30T02:55:46.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/dog-7330712_1920.jpeg" alt="å°å¿ƒ transmittable-thread-local çš„è¿™ä¸ªå‘"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>transmittable-thread-local æ˜¯é˜¿é‡Œå¼€æºä¸€ä¸ªçº¿ç¨‹æ± å¤ç”¨åœºæ™¯ä¸‹ï¼Œå¤„ç†å¼‚æ­¥æ‰§è¡Œæ—¶ä¸Šä¸‹æ–‡ä¼ é€’æ•°æ®é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚å¯ä»¥ä»å®˜æ–¹æ–‡æ¡£<a href="https://github.com/alibaba/transmittable-thread-local" target="_blank" rel="noopener">https://github.com/alibaba/transmittable-thread-local</a>è·å–æ›´å¤šä¿¡æ¯ã€‚</p><a id="more"></a><p>æœ¬æ–‡ä¸»è¦æ˜¯å˜æ›´ transmittable-thread-local ä½¿ç”¨æ–¹å¼æ—¶å‡ºç°çš„ä¸€ä¸ªå¼‚å¸¸ã€‚</p><h2 id="å¼‚å¸¸ç°åœº"><a href="#å¼‚å¸¸ç°åœº" class="headerlink" title="å¼‚å¸¸ç°åœº"></a>å¼‚å¸¸ç°åœº</h2><p>çœ‹å¼‚å¸¸ä¹‹å‰ï¼Œå…ˆç®€å•è¯´ä¸‹é¡¹ç›®å¤§æ¦‚æƒ…å†µã€‚</p><p>é¡¹ç›®æ˜¯ Java æ ˆï¼Œä½¿ç”¨äº† SpringBoot+MyBatis çš„æ¡†æ¶ç»“æ„ï¼Œæ„å»ºå·¥å…·æ˜¯ Mavenã€‚å› ä¸ºé¡¹ç›®ä¸­ä½¿ç”¨äº†æ¯”è¾ƒå¤šçš„å¤šçº¿ç¨‹é€»è¾‘ï¼Œæ‰€ä»¥å¼•å…¥äº† transmittable-thread-localï¼Œè§£å†³ä¸Šä¸‹æ–‡ä¼ é€’æ•°æ®é—®é¢˜ã€‚åæ¥åšé¡¹ç›®å‡çº§ï¼Œæ¥å…¥å…¬å¸çš„ç›‘æ§ç³»ç»Ÿï¼Œå¯åŠ¨æ—¶å¢åŠ äº†å¯åŠ¨å‚æ•°<code>-javaagent:/path/to/transmittable-thread-local-2.12.1.jar</code>ï¼Œé€šè¿‡é›¶ä¾µå…¥çš„æ–¹å¼è§£å†³å¤šçº¿ç¨‹ä¸Šä¸‹æ–‡ä¼ å€¼é—®é¢˜ã€‚</p><p>äºæ˜¯ï¼Œæœ‰äº›é€»è¾‘å‡ºé”™äº†ã€‚</p><p>æˆ‘ä»¬çœ‹çœ‹å¼‚å¸¸æ ˆï¼ˆæ—¥å¿—åšäº†åˆ æ”¹ï¼Œéšè—é¡¹ç›®ä¿¡æ¯ï¼‰ï¼š</p><pre><code class="log">org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type &#39;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&#39; available: expected single matching bean but found 3: executor1,executor2,executor3    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1200)    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:420)    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:349)    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342)    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1127)    â€¦â€¦    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)    â€¦â€¦</code></pre><p>å¼‚å¸¸æ—¥å¿—å¾ˆæ¸…æ¥šï¼Œå°±æ˜¯é€šè¿‡<code>AbstractApplicationContext.getBean</code>è·å– Bean çš„æ—¶å€™ï¼Œå› ä¸ºå­˜åœ¨å¤šä¸ªåŒç±»å‹çš„<code>ThreadPoolTaskExecutor</code>ï¼ŒSpring å®¹å™¨ä¸çŸ¥é“è¿”å›å“ªä¸ª Beanï¼Œå°±æŠ›å‡ºäº†<code>NoUniqueBeanDefinitionException</code>å¼‚å¸¸ã€‚</p><h2 id="æ’æŸ¥é—®é¢˜"><a href="#æ’æŸ¥é—®é¢˜" class="headerlink" title="æ’æŸ¥é—®é¢˜"></a>æ’æŸ¥é—®é¢˜</h2><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹è°ƒç”¨ä»£ç ï¼š</p><pre><code class="java">public static void doSth(Object subtag, Object extra, long time) {    ApplicationContextContainer.getBean(ThreadPoolTaskExecutor.class)            .execute(() -&gt; {                // ä¸€äº›ä¸šåŠ¡ä»£ç             });}@Componentpublic class ApplicationContextContainer implements ApplicationContextAware {    private static ApplicationContext applicationContext;    public static &lt;T&gt; T getBean(Class&lt;T&gt; clazz) {        return applicationContext.getBean(clazz);    }    @Override    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {        ApplicationContextContainer.applicationContext = applicationContext;    }}</code></pre><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œ<code>applicationContext.getBean</code>æ—¶åªä¼ å…¥äº† class ç±»å‹ï¼Œæ²¡æœ‰æŒ‡æ˜ Bean çš„åå­—ã€‚æ¨æµ‹æ˜¯é¡¹ç›®ä¸­å®šä¹‰äº†å¤šä¸ª<code>ThreadPoolTaskExecutor</code>ç±»å‹çš„ Beanï¼Œåå­—åˆ†åˆ«æ˜¯ executor1ã€executor2ã€executor3ï¼ˆåå­—æ”¹è¿‡äº†ï¼Œå¤§å®¶å†™ä»£ç æ—¶å°½é‡ä½¿ç”¨è§åçŸ¥æ„çš„èµ·åæ–¹å¼ï¼‰ã€‚</p><pre><code class="java">@Configurationpublic class ExecutorConfig {    @Bean(value = &quot;executor1&quot;)    public Executor executor1() {        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();        // ä¸€äº›åˆå§‹åŒ–æ–¹æ³•        taskExecutor.initialize();        return taskExecutor;    }    @Bean(value = &quot;executor2&quot;)    public Executor executor2() {        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();        // ä¸€äº›åˆå§‹åŒ–æ–¹æ³•        taskExecutor.initialize();        return TtlExecutors.getTtlExecutor(taskExecutor);    }    @Bean(value = &quot;executor3&quot;)    public Executor executor3() {        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();        // ä¸€äº›åˆå§‹åŒ–æ–¹æ³•        taskExecutor.initialize();        return TtlExecutors.getTtlExecutor(taskExecutor);    }}</code></pre><p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥å‘ç°ï¼Œç¡®å®æœ‰ executor1ã€executor2ã€executor3 ä¸‰ä¸ª<code>Executor</code>ï¼Œexecutor1 æ˜¯<code>ThreadPoolTaskExecutor</code>ç±»å‹çš„ï¼Œexecutor2 å’Œ executor3 æ˜¯ç»è¿‡<code>TtlExecutors.getTtlExecutor</code>åŒ…è£…çš„<code>ThreadPoolTaskExecutor</code>ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹<code>TtlExecutors.getTtlExecutor</code>æ–¹æ³•ï¼š</p><pre><code class="java">public static Executor getTtlExecutor(@Nullable Executor executor) {    if (TtlAgent.isTtlAgentLoaded() || null == executor || executor instanceof TtlEnhanced) {        return executor;    }    return new ExecutorTtlWrapper(executor, true);}</code></pre><p>æ ¹æ®é”™è¯¯åæ¨ï¼Œç»è¿‡<code>TtlExecutors.getTtlExecutor</code>ä¹‹åè¿”å›çš„è¿˜æ˜¯<code>ThreadPoolTaskExecutor</code>ç±»å‹ã€‚ä¹Ÿå°±æ˜¯ä¸Šé¢ä»£ç èµ°äº†<code>if</code>è¯­å¥ï¼Œç›´æ¥è¿”å›äº†è¾“å…¥å‚æ•°ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™é‡Œå°±ç¢°åˆ°äº†ä¸¤ä¸ªå¼€å‘åå¤§æœªè§£ä¹‹è°œä¸­çš„ä¸¤ä¸ªï¼š</p><ol><li>ä»£ç æ²¡æ”¹ï¼Œä¹‹å‰å¥½å¥½åœ°ï¼Œæ€ä¹ˆå°±æŠ¥é”™äº†ï¼›</li><li>æœ¬åœ°å¥½ä½¿ï¼Œä¸ºä»€ä¹ˆæ”¾åœ¨æœåŠ¡å™¨ä¸Šå°±æŠ¥é”™äº†ã€‚</li></ol><h2 id="å®šä½é—®é¢˜"><a href="#å®šä½é—®é¢˜" class="headerlink" title="å®šä½é—®é¢˜"></a>å®šä½é—®é¢˜</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œä»£ç çš„ç»ˆç‚¹ä¸æ˜¯ç„å­¦ã€‚æˆ‘ä»¬ç°åœ¨ç”¨çš„è®¡ç®—æœºè¿˜ä¸ä¼šæ’’è°ï¼Œåªè¦æŠ¥é”™äº†ï¼Œå°±ä¸€å®šæ˜¯æœ‰é—®é¢˜ã€‚</p><p>æˆ‘ä»¬ä»”ç»†çœ‹çœ‹<code>TtlExecutors.getTtlExecutor</code>æ–¹æ³•ä¸­çš„<code>if</code>åˆ¤æ–­ï¼š</p><ul><li>TtlAgent.isTtlAgentLoaded()ï¼šè¿™ä¸ªæ˜¯åˆ¤æ–­ ttlAgentLoaded æ ‡è¯†ï¼Œè¿™ä¸ªåæ–‡å†è¯´ï¼›</li><li>null == executorï¼šè¾“å…¥å‚æ•°ä¸º nullï¼Œæ˜¾ç„¶ä¸ç¬¦åˆï¼›</li><li>executor instanceof TtlEnhancedï¼šè¾“å…¥å‚æ•°æ˜¯<code>TtlEnhanced</code>ç±»å‹ï¼Œè¾“å…¥çš„æ˜¯<code>ThreadPoolTaskExecutor</code>ç±»å‹ï¼Œä¸ç¬¦åˆã€‚</li></ul><p>æ‰€ä»¥ï¼Œé‡ç‚¹çœ‹çœ‹ ttlAgentLoaded æ ‡è¯†ï¼š</p><pre><code class="java">public static boolean isTtlAgentLoaded() {    return ttlAgentLoaded;}</code></pre><p>ä»å…¨å±€æ‰¾åˆ°ä¿®æ”¹<code>ttlAgentLoaded</code>çš„åœ°æ–¹æ˜¯ï¼š</p><pre><code class="java">public final class TtlAgent {    public static void premain(final String agentArgs, @NonNull final Instrumentation inst) {        kvs = splitCommaColonStringToKV(agentArgs);        Logger.setLoggerImplType(getLogImplTypeFromAgentArgs(kvs));        final Logger logger = Logger.getLogger(TtlAgent.class);        try {            logger.info(&quot;[TtlAgent.premain] begin, agentArgs: &quot; + agentArgs + &quot;, Instrumentation: &quot; + inst);            final boolean disableInheritableForThreadPool = isDisableInheritableForThreadPool();            // çœç•¥éç›¸å…³ä»£ç             ttlAgentLoaded = true;        } catch (Exception e) {            String msg = &quot;Fail to load TtlAgent , cause: &quot; + e.toString();            logger.log(Level.SEVERE, msg, e);            throw new IllegalStateException(msg, e);        }    }    // çœç•¥éç›¸å…³ä»£ç }</code></pre><p>æœ‰ä¸€å®š javaagent çŸ¥è¯†çš„åº”è¯¥çŸ¥é“ï¼Œ<code>premain</code>æ–¹æ³•æ˜¯ java å¯åŠ¨æ—¶ï¼ŒåŠ è½½ javaagent åæ‰§è¡Œçš„æ–¹æ³•ã€‚</p><p>è¿™å°±å»åˆäº†ã€‚</p><p>æŠ¥é”™ä¹‹å‰çš„æœåŠ¡å™¨ä»£ç ï¼Œ<code>ExecutorConfig</code>ç±»ä¸­å®šä¹‰çš„ executor1 æ˜¯<code>ThreadPoolTaskExecutor</code>ç±»å‹ï¼Œexecutor2 å’Œ executor3 æ˜¯<code>ExecutorTtlWrapper</code>ç±»å‹ï¼Œä½¿ç”¨<code>applicationContext.getBean(clazz)</code>èƒ½å¤Ÿå¾—åˆ°åå­—æ˜¯ executor1 çš„ Beanã€‚</p><p>ç„¶åä½¿ç”¨<code>-javaagent:/path/to/transmittable-thread-local-2.12.1.jar</code>æ–¹å¼å®ç°é›¶ä¾µå…¥çš„<code>transmittable-thread-local</code>æ³¨å…¥èƒ½åŠ›ã€‚<code>ExecutorConfig</code>ç±»ä¸­å®šä¹‰çš„ executor2 å’Œ executor3 æ˜¯<code>ThreadPoolTaskExecutor</code>ç±»å‹ï¼Œä½¿ç”¨<code>applicationContext.getBean(clazz)</code>å°±ä¼šæŸ¥åˆ°ä¸‰ä¸ª<code>ThreadPoolTaskExecutor</code>ç±»å‹çš„ Beanï¼ŒSpring å®¹å™¨æ²¡æœ‰åŠæ³•åˆ¤æ–­è¿”å›å“ªä¸€ä¸ªï¼Œäºæ˜¯æŠ›å‡ºäº†<code>NoUniqueBeanDefinitionException</code>å¼‚å¸¸ã€‚</p><p>æœ¬åœ°å¯åŠ¨æ˜¯åŠ ä¸Š<code>-javaagent:/path/to/transmittable-thread-local-2.12.1.jar</code>å‘½ä»¤ï¼Œé—®é¢˜å¤ç°ã€‚</p><h2 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h2><p>è§£å†³ä¸Šé¢çš„æŠ¥é”™æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä½¿ç”¨<code>applicationContext.getBean(beanName, clazz)</code>æ–¹æ³•ï¼Œé€šè¿‡è¾“å…¥æŒ‡å®šçš„ Bean çš„åå­—å’Œç±»å‹ï¼Œè·å–ç¡®å®š Beanï¼Œä»£ç ä¿®æ”¹ä¸ºï¼š</p><pre><code class="java">public static void doSth(Object subtag, Object extra, long time) {    ApplicationContextContainer.getBean(&quot;executor1&quot;, ThreadPoolTaskExecutor.class)            .execute(() -&gt; {                // ä¸€äº›ä¸šåŠ¡ä»£ç             });}</code></pre><p>æµæ°´çº¿å‘ç‰ˆå›å½’æµ‹è¯•ï¼Œé—®é¢˜è§£å†³ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/transmittable-thread-local-make-trouble/">å°å¿ƒ transmittable-thread-local çš„è¿™ä¸ªå‘</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/126069634" target="_blank" rel="noopener">å°å¿ƒ transmittable-thread-local çš„è¿™ä¸ªå‘</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      æœ¬æ–‡ä¸»è¦æ˜¯å˜æ›´ transmittable-thread-local ä½¿ç”¨æ–¹å¼æ—¶å‡ºç°çš„ä¸€ä¸ªå¼‚å¸¸ã€‚
    
    </summary>
    
    
      <category term="debug" scheme="https://www.howardliu.cn/categories/debug/"/>
    
    
      <category term="debug" scheme="https://www.howardliu.cn/tags/debug/"/>
    
      <category term="transmittable" scheme="https://www.howardliu.cn/tags/transmittable/"/>
    
      <category term="ttl" scheme="https://www.howardliu.cn/tags/ttl/"/>
    
  </entry>
  
  <entry>
    <title>Switch å—ã€Switch è¡¨è¾¾å¼ã€Switch æ¨¡å¼åŒ¹é…ï¼Œè¶Šæ¥è¶Šå¥½ç”¨çš„ Switch</title>
    <link href="https://www.howardliu.cn/java-switch/"/>
    <id>https://www.howardliu.cn/java-switch/</id>
    <published>2022-06-19T04:00:56.000Z</published>
    <updated>2022-06-19T04:00:56.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/beach-7262493_1920.jpeg" alt="Switch å—ã€Switch è¡¨è¾¾å¼ã€Switch æ¨¡å¼åŒ¹é…ï¼Œè¶Šæ¥è¶Šå¥½ç”¨çš„ Switch"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä¸ if-else ä¸€æ ·ï¼Œswitch è¯­æ³•æ˜¯ç”¨æ¥åšæ¡ä»¶åˆ¤æ–­çš„ã€‚å½“æ¡ä»¶æ¸…æ™°ç®€æ´æ—¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°æå‡ä»£ç å¯è¯»æ€§ã€‚switch è¯­æ³•ä» Java5 å¼€å§‹ï¼ŒJava12 å¢åŠ äº† Switch è¡¨è¾¾å¼ï¼ˆJava14 æä¾›æ­£å¼ç‰ˆï¼‰ï¼ŒJava17 å¢åŠ  Switch æ¨¡å¼åŒ¹é…ï¼ˆé¢„è§ˆç‰ˆï¼‰ã€‚</p><p>æœ¬æ–‡çš„ç›®æ ‡æ˜¯æœŸæœ›è¯»è€…å¯ä»¥æŒæ¡ Switch è¯­æ³•çš„æ‰€æœ‰èƒ½åŠ›ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ä¿¡æ‰‹æ‹ˆæ¥ã€‚</p><a id="more"></a><h2 id="if-else-ä¸-switch-è¯­æ³•"><a href="#if-else-ä¸-switch-è¯­æ³•" class="headerlink" title="if-else ä¸ switch è¯­æ³•"></a>if-else ä¸ switch è¯­æ³•</h2><p>æˆ‘ä»¬å…ˆæ¥ä¸ªç®€å•çš„ä¾‹å­çœ‹çœ‹ if-else å’Œ switch è¯­æ³•çš„ä½¿ç”¨ï¼š</p><pre><code class="java">public static void demoOfIf(int num) {    if (num == 0) {        System.out.println(&quot;0&quot;);    } else if (num == 1) {        System.out.println(&quot;1&quot;);    } else if (num == 2) {        System.out.println(&quot;2&quot;);    } else {        System.out.println(&quot;3&quot;);    }}public static void demoOfSwitch(int num) {    switch (num) {        case 0: {            System.out.println(&quot;0&quot;);            break;        }        case 1: {            System.out.println(&quot;1&quot;);            break;        }        case 2: {            System.out.println(&quot;2&quot;);            break;        }        default: {            System.out.println(&quot;3&quot;);        }    }}</code></pre><p>ä¸Šé¢çš„ç¤ºä¾‹å¾ˆç®€å•ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥ç€é‡å­¦ä¹ ä¸€ä¸‹ Swith è¯­æ³•ã€‚</p><h2 id="Switch-å—é€šç”¨è¯­æ³•"><a href="#Switch-å—é€šç”¨è¯­æ³•" class="headerlink" title="Switch å—é€šç”¨è¯­æ³•"></a>Switch å—é€šç”¨è¯­æ³•</h2><pre><code class="java">switch(integral-selector) {case value1: statement1; break;case value2: statement2; break;// â€¦â€¦default: default-statement;}</code></pre><p>switch è¯­å¥æ˜¯ä¸€ç§å¤šè·¯é€‰æ‹©çš„ç®€æ´è¡¨è¾¾å¼ï¼Œåœ¨ Java7 ä¹‹å‰ï¼Œswitch è¯­å¥çš„è¡¨è¾¾å¼å¿…é¡»æ˜¯æ•´æ•°å€¼ï¼Œè¿™æ ·ä¼šæœ‰å¾ˆå¤šçš„é™åˆ¶ã€‚äºæ˜¯åœ¨ Java7 ä¸­å¢åŠ äº† String æ ¼å¼çš„æ”¯æŒï¼Œä½¿åº”ç”¨åœºæ™¯æ›´åŠ ä¸°å¯Œã€‚</p><p>æ¯ä¸ª case æ‰§è¡Œè¯­å¥æœ«å°¾éƒ½æœ‰ä¸€ä¸ª<code>break</code>å…³é”®å­—ï¼Œå®ƒä¼šè®©æ‰§è¡Œæµç¨‹è·³åˆ° switch çš„æœ«å°¾ã€‚å¦‚æœä¸åŠ <code>break</code>ï¼Œåé¢çš„ case è¯­å¥ä¼šç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°ç¬¬ä¸€ä¸ª<code>break</code>å…³é”®å­—ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="java">public static void noBreak(int num) {    switch (num) {        case 0: {            System.out.println(&quot;0&quot;);        }        case 1: {            System.out.println(&quot;1&quot;);        }        case 2: {            System.out.println(&quot;2&quot;);            break;        }        default: {            System.out.println(&quot;3&quot;);        }    }}</code></pre><p>æ‰§è¡Œ<code>noBreak(0)</code>çš„ç»“æœä¼šæ˜¯ï¼š</p><pre><code class="log">012</code></pre><p>åŸºäºè¿™ç§ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åˆå¹¶å¤šä¸ªå€¼çš„æ‰§è¡Œé€»è¾‘ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§å†™æ³•ï¼š</p><pre><code class="java">public static void noBreak2(int num) {    switch (num) {        case 0:        case 1:        case 2: {            System.out.println(&quot;0 or 1 or 2&quot;);            break;        }        default: {            System.out.println(&quot;3&quot;);        }    }}</code></pre><p>å½“å‚æ•°æ˜¯ 0 æˆ– 1 æˆ– 2 æ—¶ï¼Œç»“æœç›¸åŒï¼Œéƒ½æ˜¯ï¼š</p><pre><code class="log">0 or 1 or 2</code></pre><h2 id="Switch-è¡¨è¾¾å¼"><a href="#Switch-è¡¨è¾¾å¼" class="headerlink" title="Switch è¡¨è¾¾å¼"></a>Switch è¡¨è¾¾å¼</h2><p>Switch è¯­å¥å‡ºç°çš„å§¿åŠ¿æ˜¯æ¡ä»¶åˆ¤æ–­ã€æµç¨‹æ§åˆ¶ç»„ä»¶ï¼Œä¸ç°åœ¨å¾ˆæµè¡Œçš„æ–°è¯­è¨€å¯¹æ¯”ï¼Œå…¶å†™æ³•æ˜¾å¾—éå¸¸ç¬¨æ‹™ï¼Œæ‰€ä»¥ Java æ¨å‡ºäº† Switch è¡¨è¾¾å¼è¯­æ³•ï¼Œå¯ä»¥è®©æˆ‘ä»¬å†™å‡ºæ›´åŠ ç®€åŒ–çš„ä»£ç ã€‚è¿™ä¸ªæ‰©å±•åœ¨ Java12 ä¸­ä½œä¸ºé¢„è§ˆç‰ˆé¦–æ¬¡å¼•å…¥ï¼Œéœ€è¦åœ¨ç¼–è¯‘æ—¶å¢åŠ <code>-enable-preview</code>å¼€å¯ï¼Œåœ¨ Java14 ä¸­æ­£å¼æä¾›ï¼ŒåŠŸèƒ½ç¼–å·æ˜¯ <a href="https://openjdk.java.net/jeps/361" target="_blank" rel="noopener">JEP 361</a>ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬é€šè¿‡ switch è¯­æ³•ç®€å•è®¡ç®—å·¥ä½œæ—¥ã€ä¼‘æ¯æ—¥ï¼Œåœ¨ Java12 ä¹‹å‰éœ€è¦è¿™æ ·å†™ï¼š</p><pre><code class="java">@Testvoid testSwitch() {    final DayOfWeek day = DayOfWeek.from(LocalDate.now());    String typeOfDay = &quot;&quot;;    switch (day) {        case MONDAY:        case TUESDAY:        case WEDNESDAY:        case THURSDAY:        case FRIDAY:            typeOfDay = &quot;Working Day&quot;;            break;        case SATURDAY:        case SUNDAY:            typeOfDay = &quot;Rest Day&quot;;            break;    }    Assertions.assertFalse(typeOfDay.isEmpty());}</code></pre><p>åœ¨ Java12 ä¸­çš„ Switch è¡¨è¾¾å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç®€åŒ–ï¼š</p><pre><code class="java">@Testvoid testSwitchExpression() {    final DayOfWeek day = DayOfWeek.SATURDAY;    final String typeOfDay = switch (day) {        case MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; &quot;Working Day&quot;;        case SATURDAY, SUNDAY -&gt; &quot;Day Off&quot;;    };    Assertions.assertEquals(&quot;Day Off&quot;, typeOfDay);}</code></pre><p>æ˜¯ä¸æ˜¯å¾ˆæ¸…çˆ½ã€‚ä¸è¿‡ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹ä¸è¶³çš„æ˜¯ï¼Œå¦‚æœæ˜¯éœ€è¦æ‰§è¡Œä¸€æ®µä¸šåŠ¡é€»è¾‘ï¼Œç„¶åè¿”å›ä¸€ä¸ªç»“æœå‘¢ï¼Ÿäºæ˜¯ Java13 ä½¿ç”¨<code>yield</code>å…³é”®å­—è¡¥é½äº†è¿™ä¸ªåŠŸèƒ½ï¼š</p><pre><code class="java">@Testvoid testSwitchExpression13() {    final DayOfWeek day = DayOfWeek.SATURDAY;    final String typeOfDay = switch (day) {        case MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; {            System.out.println(&quot;Working Day: &quot; + day);            yield &quot;Working Day&quot;;        }        case SATURDAY, SUNDAY -&gt; {            System.out.println(&quot;Day Off: &quot; + day);            yield &quot;Day Off&quot;;        }    };    Assertions.assertEquals(&quot;Day Off&quot;, typeOfDay);}</code></pre><h2 id="Switch-æ¨¡å¼åŒ¹é…"><a href="#Switch-æ¨¡å¼åŒ¹é…" class="headerlink" title="Switch æ¨¡å¼åŒ¹é…"></a>Switch æ¨¡å¼åŒ¹é…</h2><p>åˆ° Java17 æ—¶ï¼Œåˆæä¾›äº† Switch æ¨¡å¼åŒ¹é…åŠŸèƒ½ã€‚ä¸ instanceof æ¨¡å¼åŒ¹é…æœ‰äº›ç±»ä¼¼ï¼Œæ˜¯èƒ½å¤Ÿåœ¨ Switch è¡¨è¾¾å¼å®ç°ç±»å‹è‡ªåŠ¨è½¬æ¢ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="java">static String formatterPatternSwitch(Object o) {    return switch (o) {        case null -&gt; &quot;null&quot;;        case Integer i -&gt; String.format(&quot;int %d&quot;, i);        case Long l -&gt; String.format(&quot;long %d&quot;, l);        case Double d -&gt; String.format(&quot;double %f&quot;, d);        case String s -&gt; String.format(&quot;String %s&quot;, s);        default -&gt; o.getClass().getSimpleName() + &quot; &quot; + o;    };}public static void main(String[] args) {    System.out.println(formatterPatternSwitch(null));    System.out.println(formatterPatternSwitch(&quot;1&quot;));    System.out.println(formatterPatternSwitch(2));    System.out.println(formatterPatternSwitch(3L));    System.out.println(formatterPatternSwitch(4.0));    System.out.println(formatterPatternSwitch(new AtomicLong(5)));}</code></pre><p>ç»“æœæ˜¯ï¼š</p><pre><code class="log">nullString 1int 2long 3double 4.000000AtomicLong 5</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸åªæ˜¯ç±»å‹è‡ªåŠ¨è½¬æ¢ï¼Œè¿˜å¯ä»¥ç›´æ¥åˆ¤æ–­æ˜¯å¦æ˜¯<code>null</code>ï¼Œçœäº†å‰ç½®åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯<code>null</code>äº†ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-switch/">Switch å—ã€Switch è¡¨è¾¾å¼ã€Switch æ¨¡å¼åŒ¹é…ï¼Œè¶Šæ¥è¶Šå¥½ç”¨çš„ Switch</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/126069533" target="_blank" rel="noopener">Switch å—ã€Switch è¡¨è¾¾å¼ã€Switch æ¨¡å¼åŒ¹é…ï¼Œè¶Šæ¥è¶Šå¥½ç”¨çš„ Switch</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      ä¸ if-else ä¸€æ ·ï¼Œswitch è¯­æ³•æ˜¯ç”¨æ¥åšæ¡ä»¶åˆ¤æ–­çš„ã€‚å½“æ¡ä»¶æ¸…æ™°ç®€æ´æ—¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°æå‡ä»£ç å¯è¯»æ€§ã€‚switch è¯­æ³•ä» Java5 å¼€å§‹ï¼ŒJava12 å¢åŠ äº† Switch è¡¨è¾¾å¼ï¼ˆJava14 æä¾›æ­£å¼ç‰ˆï¼‰ï¼ŒJava17 å¢åŠ  Switch æ¨¡å¼åŒ¹é…ï¼ˆé¢„è§ˆç‰ˆï¼‰ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="switch" scheme="https://www.howardliu.cn/tags/switch/"/>
    
  </entry>
  
  <entry>
    <title>2022 å¹´ Java è¡Œä¸šåˆ†ææŠ¥å‘Š</title>
    <link href="https://www.howardliu.cn/java-developer-productivity-report-2022/"/>
    <id>https://www.howardliu.cn/java-developer-productivity-report-2022/</id>
    <published>2022-06-19T03:23:42.000Z</published>
    <updated>2022-06-19T03:23:42.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/sea-5382487_1920.jpeg" alt="2022 å¹´ Java è¡Œä¸šåˆ†ææŠ¥å‘Š"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>å‰æ®µæ—¶é—´ä»‹ç»äº†ä» Java8 åˆ° Java17 æ¯ä¸ªç‰ˆæœ¬æ¯”è¾ƒæœ‰ç‰¹ç‚¹çš„æ–°ç‰¹æ€§ï¼ˆæ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ä¸“æ ï¼‰ï¼Œä»Šå¤©çœ‹åˆ° JRebel å‘å¸ƒäº†ã€Š2022 å¹´ Java å‘å±•è¶‹åŠ¿å’Œåˆ†æã€‹ï¼Œäºæ˜¯å€Ÿæ­¤åˆ†æä¸€ä¸‹ Java è¡Œä¸šçš„ç°çŠ¶ï¼Œå¸Œæœ›ç»™å¤§å®¶ä¸€äº›å‚è€ƒã€‚</p><a id="more"></a><blockquote><p>JRebel æ˜¯é€šè¿‡è°ƒç ”é—®å·çš„æ–¹å¼æ€»ç»“çš„æŠ¥å‘Šï¼Œæ¶‰åŠäº†ä¸åŒå›½å®¶ã€ä¸åŒå²—ä½ã€ä¸åŒå…¬å¸è§„æ¨¡ã€ä¸åŒè¡Œä¸šï¼Œç›¸å¯¹æ¥è¯´ï¼Œè¯¥è°ƒæŸ¥æŠ¥å‘Šæ˜¯æœ‰ä¸€å®šå‚è€ƒæ„ä¹‰çš„ã€‚</p></blockquote><h2 id="Java-è¯­è¨€åŠå¼€å‘è¶‹åŠ¿"><a href="#Java-è¯­è¨€åŠå¼€å‘è¶‹åŠ¿" class="headerlink" title="Java è¯­è¨€åŠå¼€å‘è¶‹åŠ¿"></a>Java è¯­è¨€åŠå¼€å‘è¶‹åŠ¿</h2><h3 id="Java8-çš„å æ¯”è¿˜æ˜¯æ¯”è¾ƒé«˜"><a href="#Java8-çš„å æ¯”è¿˜æ˜¯æ¯”è¾ƒé«˜" class="headerlink" title="Java8 çš„å æ¯”è¿˜æ˜¯æ¯”è¾ƒé«˜"></a>Java8 çš„å æ¯”è¿˜æ˜¯æ¯”è¾ƒé«˜</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å¤§å®¶éƒ½åœ¨ä½¿ç”¨çš„ Java ç‰ˆæœ¬ï¼ˆåŒ…æ‹¬ JVM è¯­è¨€ï¼šKotlinã€Groovyã€Scalaï¼‰ï¼š</p><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/6.png" alt="Java å„ç‰ˆæœ¬è¯­è¨€å æ¯”"></p><p>ä»ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒJava8 å æ¯” 37%ï¼ŒJava11 å æ¯” 29%ï¼Œç”šè‡³æœ‰ 12%çš„è¢«è°ƒæŸ¥è€…ä½¿ç”¨äº†é«˜äº Java12 çš„ç‰ˆæœ¬ã€‚</p><p>Java8 æ˜¯ 2014 å¹´å‘å¸ƒï¼Œç›¸è¾ƒäºä¹‹å‰ç‰ˆæœ¬ï¼Œå¢åŠ äº† Lambda è¡¨è¾¾å¼ã€Stream æµå¼å¤„ç†ç­‰ä¸€ç§ä¼˜ç§€çš„ APIã€‚è‡³ä»Šå·² 8 å¹´æ—¶é—´ï¼ŒJava ç‰ˆæœ¬ä¹Ÿæ˜¯ä» 8 ä¸€ç›´å‡åˆ°äº† 17ã€‚ç‰ˆæœ¬å·ä¸€ç›´åœ¨å¢åŠ ï¼Œå´æ²¡æœ‰å¢åŠ ç‰¹åˆ«å¸å¼•äººçš„è¯­è¨€ç‰¹æ€§ã€‚</p><p>å“ªäº›å› ç´ æ˜¯å¤§å®¶å‡çº§çš„åŠ¨åŠ›å‘¢ï¼Ÿ</p><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/9.png" alt="å‡çº§çš„åŠ¨åŠ›"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸»è¦çš„å‡çº§å› ç´ åŒ…æ‹¬ LTS ç‰ˆæœ¬ï¼ˆ25%ï¼‰ã€å®‰å…¨æ€§ï¼ˆ23%ï¼‰ã€æ€§èƒ½ï¼ˆ20%ï¼‰ï¼Œæ–°ç‰¹æ€§ï¼ˆ18%ï¼‰å’Œéšå¤§æµï¼ˆ14%ï¼‰å æ¯”ä½ä¸€äº›ã€‚</p><p>ä»è¿™ç‚¹æˆ‘ä»¬ä¹Ÿå°±çŸ¥é“ä¸ºä»€ä¹ˆ Java11 ä¹‹åçš„ç‰ˆæœ¬å æ¯”å¹¶ä¸é«˜äº†ï¼Œéšç€ Java17 çš„å‘å¸ƒï¼Œå¯èƒ½ Java8 å’Œ Java11 çš„å æ¯”ä¼šé™ä½ã€‚å®‰å…¨æ€§æ–¹é¢ï¼Œé™¤éæ˜¯ä¸¥é‡çš„æ¼æ´ï¼Œä¸€èˆ¬ Java å¼€å‘å›¢é˜Ÿä¼šé€šè¿‡è¡¥ä¸çš„æ–¹å¼å‡çº§ï¼Œä¸ä¼šå½±å“å¤§ç‰ˆæœ¬å·å æ¯”ã€‚</p><p>æ€§èƒ½æ–¹é¢ï¼ŒJava å›¢é˜Ÿä¸€ç›´åœ¨ä¸æ–­ä¼˜åŒ–ï¼Œéšç€ G1ã€ZGCã€Shenandoah ç­‰ä¸€ä¼—ä¼˜ç§€çš„ GC è¢«æ·»åŠ è¿›æ¥ï¼Œè¿™ä¹Ÿæˆä¸ºå¤§å®¶ä» Java8 å‡çº§çš„é‡è¦åŸå› ã€‚</p><p>å°±åŠŸèƒ½ç‰¹æ€§è€Œè¨€ï¼ŒJava11 ä¹‹åå¢åŠ äº† Record ç±»å‹ã€å¯†å°ç±»ã€instanceof æ¨¡å¼åŒ¹é…ã€Swtich è¡¨è¾¾å¼å’Œæ¨¡å¼åŒ¹é…ç­‰ä¸€äº›è¯­æ³•ç³–ã€‚è¿™äº›æ–°ç‰¹æ€§ï¼Œä¹Ÿèƒ½å¤Ÿæå‡å‡çº§åˆ° Java17 çš„æ„æ„¿ã€‚</p><h3 id="å‡çº§-Java17-çš„æ„æ„¿è¿˜æ˜¯æ¯”è¾ƒå¼ºçš„"><a href="#å‡çº§-Java17-çš„æ„æ„¿è¿˜æ˜¯æ¯”è¾ƒå¼ºçš„" class="headerlink" title="å‡çº§ Java17 çš„æ„æ„¿è¿˜æ˜¯æ¯”è¾ƒå¼ºçš„"></a>å‡çº§ Java17 çš„æ„æ„¿è¿˜æ˜¯æ¯”è¾ƒå¼ºçš„</h3><p>Java17 æ˜¯ 2021 å¹´ä¸‹åŠå¹´å‘å¸ƒçš„ LTS ç‰ˆæœ¬ï¼ˆé•¿æœŸæ”¯æŒç‰ˆï¼‰ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹å¤§å®¶å‡çº§çš„æ„æ„¿ï¼š</p><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/10.png" alt="å‡çº§ Java17 çš„æ„æ„¿"></p><p>ä»ç»“æœå¯ä»¥çœ‹å‡ºæ¥ï¼Œæœ‰ 37%çš„äººä¼šåœ¨æœªæ¥ 6 ä¸ªæœˆå†…å‡çº§ï¼Œæœ‰ 25%çš„äººä¼šåœ¨ 6-12 ä¸ªæœˆå†…å‡çº§ï¼Œä¸ä¼šå‡çº§çš„å æ¯”ä»…å  8%ã€‚</p><p>å¯è§ï¼Œæœ‰ 62%çš„äººä¼šåœ¨æœªæ¥ä¸€å¹´å†…å‡çº§åˆ° Java17ï¼Œå¤§å®¶çš„å‡çº§æ„æ„¿è¿˜æ˜¯æ¯”è¾ƒå¼ºçš„ã€‚</p><h3 id="OracleJDK-å’Œ-OpenJDK-å æ®è¿‡åŠå¸‚åœº"><a href="#OracleJDK-å’Œ-OpenJDK-å æ®è¿‡åŠå¸‚åœº" class="headerlink" title="OracleJDK å’Œ OpenJDK å æ®è¿‡åŠå¸‚åœº"></a>OracleJDK å’Œ OpenJDK å æ®è¿‡åŠå¸‚åœº</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¸‚é¢ä¸Šæœ‰å¾ˆå¤šçš„ JDK ç‰ˆæœ¬ï¼Œåœ¨ Oracle èµ·è¯‰ Google ä¾µæƒä¹‹å‰ï¼Œéä¼ä¸šç‰¹ä¾›çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šç”¨çš„éƒ½æ˜¯ OracleJDKï¼Œåæ¥å› ä¸ºå®¹å™¨ä¸­ä½¿ç”¨ JDK ç‰ˆæœ¬çš„ç‰ˆæƒé—®é¢˜ï¼Œå®¹å™¨ä¸­å¤§éƒ¨åˆ†ä½¿ç”¨äº† OpenJDKã€‚</p><p>ä»é—®å·ç»“æœä¹Ÿåæ˜ äº†è¿™ç§æƒ…å†µï¼š</p><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/13.png" alt="JRE/JDK å„ç§ç‰ˆæœ¬çš„å¸‚åœºä»½é¢"></p><p>OracleJDK çš„ç‰ˆæœ¬å æ¯” 36%ï¼ŒOpenJDK çš„ç‰ˆæœ¬å æ¯” 43%ï¼Œå…¶ä¸­åŒ…æ‹¬æ ‡å‡† OpenJDK å’Œ AdoptOpenJDK ç‰ˆæœ¬ã€‚</p><p>æœ‰äº›åŒå­¦ä¼šç–‘æƒ‘ OracleJDK å’Œ OpenJDK çš„åŒºåˆ«åœ¨å“ªï¼Ÿæˆ‘ä»¬æ—¥å¸¸ç”¨åˆ°çš„éƒ¨åˆ†ï¼Œæ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚</p><h3 id="Java-åº”ç”¨æ¶æ„è¶‹åŠ¿"><a href="#Java-åº”ç”¨æ¶æ„è¶‹åŠ¿" class="headerlink" title="Java åº”ç”¨æ¶æ„è¶‹åŠ¿"></a>Java åº”ç”¨æ¶æ„è¶‹åŠ¿</h3><p>è¿™ä¸ªé—®é¢˜çš„ç»“æœæœ‰äº›å‡ºä¹æˆ‘çš„é¢„æ–™ï¼š</p><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/14.png" alt="Java åº”ç”¨æ¶æ„è¶‹åŠ¿"></p><p>å„ç§æ¶æ„é£æ ¼ä¸­ï¼Œå¾®æœåŠ¡æ¶æ„ä»…å  32%ï¼Œå•ä½“æ¶æ„å æ¯” 22%ï¼Œæ¨¡å—åŒ–å•ä½“æ¶æ„å æ¯” 13%ï¼ŒSOA æ¶æ„å æ¯” 12%ã€‚</p><p>ä»ç»“æœæ¥çœ‹ï¼Œè¿™ä¸ªé—®å·çš„å¯¹æ¶æ„é£æ ¼çš„å®šä¹‰å’Œåˆ†ç±»æ¯”è¾ƒç»†è…»ã€‚</p><p>å¾ˆå¤šå…¬å¸æŠŠç³»ç»Ÿçš„æœåŠ¡åŒ–ã€æ¨¡å—åŒ–ä¹Ÿç»Ÿç§°ä¸ºäº†å¾®æœåŠ¡ï¼Œè¿™æ˜¯ä¸€ç§å¾ˆä¸¥é‡çš„é”™è¯¯ï¼Œåœ¨ä¹‹å‰çš„æ–‡ç«  <a href="https://mp.weixin.qq.com/s/b7my-EHc0fGOE3veeQyxBg" target="_blank" rel="noopener">ã€Šå¾®æœåŠ¡æ¶æ„çš„é™·é˜±ï¼šä»å•ä½“åˆ°åˆ†å¸ƒå¼å•ä½“ã€‹</a> ä¸­ä»‹ç»è¿‡è¿™ç§é”™è¯¯ã€‚</p><p>æ¨èé˜…è¯»ï¼š</p><ul><li><a href="https://mp.weixin.qq.com/s/09ILTzijUr3knHBj13t_kQ" target="_blank" rel="noopener">ã€Šä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿã€‹</a></li><li><a href="https://mp.weixin.qq.com/s/n1eKTlLP_BbyBkKG4OyLSw" target="_blank" rel="noopener">ã€Šå¾®æœåŠ¡ç¼–ç¨‹èŒƒå¼ã€‹</a></li><li><a href="https://mp.weixin.qq.com/s/NcftJ1jNAd-DHpzBXKk8RA" target="_blank" rel="noopener">ã€Šä»å•ä½“æ¶æ„åˆ°å¾®æœåŠ¡æ¶æ„ã€‹</a>ã€‚</li></ul><blockquote><p>è¿™é‡Œä¸å¯¹æ¶æ„é£æ ¼åšå‡ºè¯„ä»·ï¼Œæ¶æ„åªæœ‰åˆé€‚ä¸å¦ï¼Œæ²¡æœ‰ä¼˜åŠ£ä¹‹åˆ†ã€‚</p></blockquote><h2 id="å¾®æœåŠ¡æ¶æ„è¶‹åŠ¿"><a href="#å¾®æœåŠ¡æ¶æ„è¶‹åŠ¿" class="headerlink" title="å¾®æœåŠ¡æ¶æ„è¶‹åŠ¿"></a>å¾®æœåŠ¡æ¶æ„è¶‹åŠ¿</h2><p>æ—¢ç„¶å¾®æœåŠ¡æ¶æ„å æ¯”é«˜ä¸€äº›ï¼Œæˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹å¾®æœåŠ¡æ¶æ„çš„åº”ç”¨è¶‹åŠ¿ã€‚</p><h3 id="å¾®æœåŠ¡æ¶æ„çš„åº”ç”¨çŠ¶æ€"><a href="#å¾®æœåŠ¡æ¶æ„çš„åº”ç”¨çŠ¶æ€" class="headerlink" title="å¾®æœåŠ¡æ¶æ„çš„åº”ç”¨çŠ¶æ€"></a>å¾®æœåŠ¡æ¶æ„çš„åº”ç”¨çŠ¶æ€</h3><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/17.png" alt="å¾®æœåŠ¡æ¶æ„ä½¿ç”¨çŠ¶æ€"></p><p>ä»ç»“æœæ¥çœ‹ï¼Œæœ‰ 44%çš„äººå›¢é˜Ÿå·²ç»æ˜¯å®Œå…¨å¾®æœåŠ¡æ¶æ„äº†ï¼Œè¿˜æœ‰ 44%çš„å›¢é˜Ÿåœ¨å‘å¾®æœåŠ¡æ¶æ„è¿ç§»ã€‚å¯è§ï¼Œåœ¨ Java è¡Œä¸šä¸­ï¼Œå¾®æœåŠ¡æ¶æ„æ˜¯å¾—åˆ°å¤§å®¶æ™®éè®¤å¯çš„ã€‚</p><blockquote><p>ä½†æ˜¯è¿™ä¸ªç»“æœä¸ä¸Šé¢çš„æ¶æ„é£æ ¼å æ¯”ç»“æœæœ‰å‡ºå…¥ï¼Œå¯èƒ½æ˜¯é—®å·é¢˜ç›®è®¾è®¡é—®é¢˜ï¼Œæˆ–è€…é—®é¢˜å›ç­”è€…çš„ä¸»è§‚åŸå› ï¼Œä¸èƒ½å¤Ÿè‹›æ±‚ç»“æœå‡†ç¡®æ€§ã€‚</p></blockquote><h3 id="æ¯ä¸ªåº”ç”¨ä¸­å¾®æœåŠ¡çš„æ•°é‡"><a href="#æ¯ä¸ªåº”ç”¨ä¸­å¾®æœåŠ¡çš„æ•°é‡" class="headerlink" title="æ¯ä¸ªåº”ç”¨ä¸­å¾®æœåŠ¡çš„æ•°é‡"></a>æ¯ä¸ªåº”ç”¨ä¸­å¾®æœåŠ¡çš„æ•°é‡</h3><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/18.png" alt="æ¯ä¸ªåº”ç”¨ä¸­å¾®æœåŠ¡çš„æ•°é‡"></p><p>æ—¢ç„¶æ˜¯å¾®æœåŠ¡æ¶æ„ï¼Œæ¯ä¸ªåº”ç”¨ä¸­æœåŠ¡æ•°é‡å¿…ç„¶è¶…è¿‡ 1 ä¸ªã€‚ä»ç»“æœå¯ä»¥çœ‹å‡ºæ¥ï¼Œæœ‰ 54%çš„åº”ç”¨ä¸­å°‘äº 10 ä¸ªæœåŠ¡ï¼Œè¿˜æœ‰ 22%çš„åº”ç”¨æœåŠ¡æ•°é‡è¶…è¿‡ 20 ä¸ªã€‚</p><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/18-1.png" alt="å¾®æœåŠ¡æ•°é‡ä¸å…¬å¸è§„æ¨¡çš„å…³ç³»"></p><p>æŒ‰ç…§å…¬å¸è§„æ¨¡ç»´åº¦ï¼Œè¶Šæ˜¯å¤§å…¬å¸ï¼Œæ¯ä¸ªåº”ç”¨ä¸­æœåŠ¡æ•°é‡è¶Šå¤šï¼Œç»“æœç¬¦åˆåº·å¨å®šå¾‹çš„ã€‚ä»å¤§å®¶æ™®éå®è·µç»“æœçœ‹ï¼Œå½“å›¢é˜Ÿè§„æ¨¡è¾ƒå°æ—¶ï¼Œè¦å°½é‡å‡å°‘å¾®æœåŠ¡æ•°é‡ã€‚å¸‚é¢ä¸Šå¾ˆå¤šè€å¸ˆä¼šå‘Šè¯‰æˆ‘ä»¬ï¼Œå¾®æœåŠ¡æ¶æ„è¦æŒ‰ç…§ä¸šåŠ¡åŸŸæ‹†åˆ†ï¼Œä½†æ˜¯ä½ è¦çŸ¥é“ï¼Œå¦‚æœå›¢é˜Ÿè§„æ¨¡ä¸å¤§ï¼Œå³ä½¿æ‹†åˆ†äº†ä¸šåŠ¡åŸŸï¼Œå¯èƒ½æœ€ç»ˆå¼€å‘è°ƒè¯•ç»´æŠ¤ä¹Ÿåªæœ‰ä½ ä¸€ä¸ªã€‚</p><h3 id="SpringBoot-å‡ ä¹éœ¸å äº†æ•´ä¸ªå¾®æœåŠ¡å¸‚åœº"><a href="#SpringBoot-å‡ ä¹éœ¸å äº†æ•´ä¸ªå¾®æœåŠ¡å¸‚åœº" class="headerlink" title="SpringBoot å‡ ä¹éœ¸å äº†æ•´ä¸ªå¾®æœåŠ¡å¸‚åœº"></a>SpringBoot å‡ ä¹éœ¸å äº†æ•´ä¸ªå¾®æœåŠ¡å¸‚åœº</h3><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/22.png" alt="å¾®æœåŠ¡æ¡†æ¶çš„ä½¿ç”¨åº¦"></p><p>ä»ç»“æœçœ‹ï¼ŒSpringBoot å‡ ä¹éœ¸å äº†æ•´ä¸ªå¾®æœåŠ¡å¸‚åœºã€‚æ‰€ä»¥ï¼Œå¤§å®¶åœ¨æ—¥å¸¸å·¥ä½œå­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯ä¸»è¦çœ‹çœ‹ SpringBoot æ ˆå§ã€‚</p><p>åœ¨å›½å†…ï¼ŒSpringBoot æŠ€æœ¯æ ˆè¿˜ä¼šç»†åˆ†ä¸º SpringNetflixCloud æ ˆã€SpringAlibabaCloud æ ˆã€SpringBoot+Dubbo æ ˆç­‰ã€‚</p><p>ä¸åŒçš„æŠ€æœ¯æ ˆä¸­ç»„ä»¶æœ‰äº›å·®å¼‚ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŒæ¡çš„ä¸æ˜¯ç®€å•çš„åº”ç”¨ï¼Œè¿˜è¦äº†è§£å…¶ä¸­çš„åŸç†ã€‚åŸç†æŒæ¡äº†ï¼Œä¸åŒçš„ç»„ä»·åªæ˜¯åœ¨åº”ç”¨å±‚é¢çš„å·®å¼‚ã€‚</p><h3 id="å¯åŠ¨æ—¶é—´åœ¨å¢é•¿"><a href="#å¯åŠ¨æ—¶é—´åœ¨å¢é•¿" class="headerlink" title="å¯åŠ¨æ—¶é—´åœ¨å¢é•¿"></a>å¯åŠ¨æ—¶é—´åœ¨å¢é•¿</h3><p>éšç€å…¬å¸ä¸šåŠ¡çš„å¢é•¿ï¼Œåº”ç”¨ä¸­ä¼šå¢åŠ å„ç§å„æ ·çš„æ–°åŠŸèƒ½ã€‚é—®å·ä¸­æœ‰ä¸ªé—®é¢˜æ˜¯å…³äºéšç€æ—¶é—´æ¨ç§»ï¼Œå¾®æœåŠ¡å¯åŠ¨æ—¶é—´çš„å˜åŒ–ï¼š</p><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/24.png" alt="å¯åŠ¨æ—¶é—´åœ¨å¢é•¿"></p><p>å¯è§ï¼Œæœ‰ 60%çš„æœåŠ¡å¯åŠ¨æ—¶é—´éƒ½åœ¨å¢åŠ ï¼Œç”šè‡³æœ‰ 13%çš„åº”ç”¨å¯åŠ¨æ—¶é—´å¢é•¿è¶…è¿‡ 50%ï¼Œæœ‰ 30%çš„åº”ç”¨å¯åŠ¨æ—¶é—´å¢é•¿èŒƒå›´åœ¨ 10%-50%ã€‚</p><p>ä¸ºä»€ä¹ˆå¯åŠ¨æ—¶é—´ä¼šå¢é•¿å‘¢ï¼Ÿè¿™ä¸ªä¸å…¬å¸ä¸šåŠ¡å¢é•¿åï¼Œä»£ç å¢åŠ äº†å¾ˆå¤šæ–°åŠŸèƒ½æœ‰å…³ã€‚éšç€åŠŸèƒ½å¢åŠ ã€ç±»çš„å¢åŠ ï¼Œç³»ç»Ÿä½“ç§¯å¢å¤§ã€åŠ è½½ç±»æ•°é‡å¢å¤§ï¼Œå¯åŠ¨æ—¶é—´ä¼šéšä¹‹å¢åŠ ã€‚è¿™ä¼šå¼•èµ·ç³»ç»Ÿçš„è…åŒ–ï¼Œå½“è…åŒ–åˆ°ä¸€å®šç¨‹åº¦ï¼Œå¯èƒ½å°±éœ€è¦é‡æ„äº†ã€‚æˆ–è€…éšç€ä¸šåŠ¡å¢é•¿ï¼ŒåŸæ¥çš„å¾®æœåŠ¡è¾¹ç•Œåˆ’åˆ†ä¸åˆé€‚äº†ï¼Œéœ€è¦é‡æ–°åˆ’åˆ†ç³»ç»Ÿè¾¹ç•Œï¼Œæ‹†åˆ†å¾®æœåŠ¡ã€‚</p><h3 id="å¯åŠ¨éœ€è¦å¤šé•¿æ—¶é—´"><a href="#å¯åŠ¨éœ€è¦å¤šé•¿æ—¶é—´" class="headerlink" title="å¯åŠ¨éœ€è¦å¤šé•¿æ—¶é—´"></a>å¯åŠ¨éœ€è¦å¤šé•¿æ—¶é—´</h3><p>æ—¢ç„¶å¾®æœåŠ¡æ€»ä½“çš„å¯åŠ¨æ—¶é—´åœ¨å¢é•¿ï¼Œé‚£å¯åŠ¨æ—¶é—´ä¸€èˆ¬æ˜¯å¤šä¹…å‘¢ï¼Ÿ</p><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/24.png" alt="å¯åŠ¨éœ€è¦å¤šé•¿æ—¶é—´"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰ 9%çš„æœåŠ¡åœ¨ 1 åˆ†é’Ÿå†…å¯åŠ¨æˆåŠŸï¼Œæœ‰ 26%çš„æœåŠ¡å¯åŠ¨æ—¶é—´éœ€è¦ 10 åˆ†é’Ÿä»¥ä¸Šã€‚</p><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/24-1.png" alt="ä¸åŒå…¬å¸è§„æ¨¡æœåŠ¡å¯åŠ¨æ—¶é—´åˆ†å¸ƒ"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºæ¥ï¼Œäººå‘˜è§„æ¨¡å¤§äº 100 äººçš„å…¬å¸ä¸­ï¼ŒæœåŠ¡å¯åŠ¨æ—¶é—´æ™®éé•¿äºå°‘äº 100 äººçš„å…¬å¸ã€‚äº§ç”Ÿè¿™ç§æƒ…å†µçš„åŸå› æœ‰è¿™ä¹ˆå‡ ä¸ªï¼š</p><ol><li>å…¬å¸è§„æ¨¡å¤§ä¸€äº›ï¼Œå¯èƒ½ä¸šåŠ¡å¤æ‚ä¸€äº›ï¼ŒæœåŠ¡ä¸­çš„ä»£ç ã€ç±»åº“æ›´å¤šä¸€äº›ï¼›</li><li>å…¬å¸è§„æ¨¡å¤§ä¸€äº›ï¼Œä¾èµ–çš„ç»„ä»¶æ›´å¤šä¸€äº›ï¼Œåœ¨æœåŠ¡å¯åŠ¨æ—¶ï¼Œéœ€è¦ä¸å„ç§ä¸­é—´ä»¶å»ºç«‹é“¾æ¥ï¼Œç„¶åå½¼æ­¤äº¤æ¢æˆåŠŸå¿ƒè·³ï¼Œè‡ªç„¶éœ€è¦æ—¶é—´æ›´å¤šã€‚</li></ol><p>é‡‡ç”¨å¾®æœåŠ¡å…¶ä¸­ä¸€ä¸ªå¥½å¤„æ˜¯æœåŠ¡è¶³å¤Ÿå°ï¼Œå¯åŠ¨æ—¶é—´æ¯”è¾ƒå°‘ã€‚ä½†æ˜¯ï¼Œä»ä¸Šé¢ä¸¤ä¸ªé—®å·ç»“æœæ¥çœ‹ï¼Œæ™®éæƒ…å†µæ˜¯å¯åŠ¨æ—¶é—´æ¯”è¾ƒé•¿ï¼Œè€Œä¸”åœ¨å˜å¾—æ›´é•¿ã€‚</p><h2 id="Java-æŠ€æœ¯è¶‹åŠ¿"><a href="#Java-æŠ€æœ¯è¶‹åŠ¿" class="headerlink" title="Java æŠ€æœ¯è¶‹åŠ¿"></a>Java æŠ€æœ¯è¶‹åŠ¿</h2><h3 id="Java-åº”ç”¨è¶…è¿‡åŠæ•°ä½¿ç”¨äº†å®¹å™¨éƒ¨ç½²"><a href="#Java-åº”ç”¨è¶…è¿‡åŠæ•°ä½¿ç”¨äº†å®¹å™¨éƒ¨ç½²" class="headerlink" title="Java åº”ç”¨è¶…è¿‡åŠæ•°ä½¿ç”¨äº†å®¹å™¨éƒ¨ç½²"></a>Java åº”ç”¨è¶…è¿‡åŠæ•°ä½¿ç”¨äº†å®¹å™¨éƒ¨ç½²</h3><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/27.png" alt="Java åº”ç”¨è¶…è¿‡åŠæ•°ä½¿ç”¨äº†å®¹å™¨éƒ¨ç½²"></p><p>ä»é—®å·ç»“æœå¯ä»¥çœ‹åˆ°ï¼ŒDocker ä½¿ç”¨ç‡æ˜¯ 41%ï¼ŒKubernetes ä½¿ç”¨ç‡æ˜¯ 26%ï¼ŒVMware ä½¿ç”¨ç‡æ˜¯ 16%ï¼ŒVagrant ä½¿ç”¨ç‡æ˜¯ 3%ï¼Œå³æœ‰ 86%å·²ç»å®ç°äº†è™šæ‹ŸåŒ–ï¼Œå…¶ä¸­ Dockerã€Kubernetes å æ¯”æœ€é«˜ã€‚</p><p>æ‰€ä»¥åœ¨ Java å‡çº§ç‰ˆæœ¬ç‰¹æ€§ä¸­ï¼Œå®ç°äº†å®¹å™¨æ„ŸçŸ¥çš„èƒ½åŠ›ï¼Œä½¿ Java æœåŠ¡å®¹å™¨åŒ–æ›´å®¹æ˜“ä¸€äº›ã€‚</p><h3 id="PaaS-å¹³å°è¿˜å¾—çœ‹-AWS"><a href="#PaaS-å¹³å°è¿˜å¾—çœ‹-AWS" class="headerlink" title="PaaS å¹³å°è¿˜å¾—çœ‹ AWS"></a>PaaS å¹³å°è¿˜å¾—çœ‹ AWS</h3><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/29.png" alt="PaaS å¹³å°"></p><p>JRebel çš„è¿™ä¸ªé—®å·è°ƒæŸ¥æ˜¯å…¨çƒæ€§è´¨çš„ï¼Œä»å…¨çƒèŒƒå›´çœ‹ï¼ŒAWS å½“ä¹‹æ— æ„§çš„ NO.1ã€‚AWS ä½œä¸ºäºšé©¬é€Šæ›¾ç»çš„é™„å±äº§ä¸šï¼Œå·²ç»æˆä¸ºäº†äºšé©¬é€Šçš„é‡è¦ä¸šåŠ¡ä¹‹ä¸€ã€‚</p><p>ä¸äºšé©¬é€Šçš„ç»å†ç±»ä¼¼ï¼Œé˜¿é‡Œå·´å·´ä»ç”µå•†åˆ‡å…¥ï¼Œç„¶åå¸ƒå±€äº‘æœåŠ¡ï¼ˆé˜¿é‡Œäº‘ï¼‰ã€‚å¦‚æœè¿˜æ˜¯èµ°äºšé©¬é€Šçš„è€è·¯ï¼ŒåŠ¿å¿…æ²¡æ³•è¶…è¶Šã€‚ä¸è¿‡é˜¿é‡Œä»å¾ˆå¤šå¹´å‰å¼€å§‹å¸ƒå±€ CPU å’ŒèŠ¯ç‰‡é¢†åŸŸï¼Œå¦‚æœèƒ½å¤Ÿæœ‰æ‰€çªç ´ï¼Œå°±å¯ä»¥ç ´å¼€è¥¿æ–¹æŠ€æœ¯çš„å°é”ï¼Œä¾æ‰˜æˆ‘å›½çš„å‘å±•æ½œåŠ›ï¼Œæœªå¿…ä¸èƒ½æ’¼åŠ¨äºšé©¬é€Šçš„ PaaS æœåŠ¡å•†åœ°ä½ã€‚</p><h3 id="è¿‘åŠæ•°æœåŠ¡ç«¯ä½¿ç”¨-Tomcat-å®¹å™¨"><a href="#è¿‘åŠæ•°æœåŠ¡ç«¯ä½¿ç”¨-Tomcat-å®¹å™¨" class="headerlink" title="è¿‘åŠæ•°æœåŠ¡ç«¯ä½¿ç”¨ Tomcat å®¹å™¨"></a>è¿‘åŠæ•°æœåŠ¡ç«¯ä½¿ç”¨ Tomcat å®¹å™¨</h3><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/30.png" alt="åº”ç”¨æœåŠ¡å™¨"></p><p>å‰é¢å…³äºå¾®æœåŠ¡çš„é—®é¢˜ä¸­ï¼ŒSpringBoot æ˜¯ä¼—å¤šå¾®æœåŠ¡æ¡†æ¶ä¸­çš„é¦–é€‰ï¼ŒSpringBoot é»˜è®¤çš„åº”ç”¨å®¹å™¨æ˜¯ Tomcatã€‚åŠ ä¹‹ Tomcat çš„å¼€æºæ–¹å¼ï¼Œå°†è¿‘åŠæ•°åº”ç”¨æœåŠ¡å™¨é€‰æ‹© Tomcat ä¹Ÿæ˜¯é¢„æ–™ä¹‹ä¸­ã€‚</p><h3 id="Maven-æ˜¯ä¸»è¦çš„æ„å»ºå·¥å…·"><a href="#Maven-æ˜¯ä¸»è¦çš„æ„å»ºå·¥å…·" class="headerlink" title="Maven æ˜¯ä¸»è¦çš„æ„å»ºå·¥å…·"></a>Maven æ˜¯ä¸»è¦çš„æ„å»ºå·¥å…·</h3><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/31.png" alt="æ„å»ºå…±å»º"></p><p>Maven å’Œ Gradle åˆ°åº•è¯¥ç”¨å“ªä¸ªï¼Ÿè¿™ä¸ªé—®é¢˜ä¼¼ä¹äº‰è®ºè®¸ä¹…ã€‚ä»é—®å·ç»“æœçœ‹ï¼ŒMaven å æœ‰ç‡æ˜¯ 68%ï¼ŒGradle å æœ‰ç‡æ˜¯ 23%ï¼ŒMaven è¿˜æ˜¯æœ‰ç»å¯¹çš„ä¼˜åŠ¿ã€‚</p><p>Gradle é‡‡ç”¨äº†çº¦å®šå¤§äºé…ç½®çš„æ–¹å¼ï¼Œä¸ SpringBoot çš„ç†å¿µä¸€è‡´ã€‚ä½†æ˜¯ä»å¸‚åœºæ¥å—åº¦å’Œå‘å±•è€Œè¨€ï¼Œå¹¶æ²¡æœ‰å½¢æˆæ›¿æ¢ Maven çš„é£æ½®ã€‚Android é¡¹ç›®é»˜è®¤ä½¿ç”¨ Gradleï¼Œèƒ½å¤Ÿçœ‹å‡º Google å¯¹ Gradle çš„æ¨å´‡ï¼Œä¹Ÿä»ä¾§é¢å°è¯ Gradle çš„ä¼˜ç§€ã€‚ä½†æ˜¯ï¼ŒGradle å¹¶æ²¡æœ‰ç»å¯¹ä¼˜åŠ¿ã€‚</p><h3 id="è¿‘åŠæ•°å¼€å‘è€…ä½¿ç”¨-IntelliJ-IDEA"><a href="#è¿‘åŠæ•°å¼€å‘è€…ä½¿ç”¨-IntelliJ-IDEA" class="headerlink" title="è¿‘åŠæ•°å¼€å‘è€…ä½¿ç”¨ IntelliJ IDEA"></a>è¿‘åŠæ•°å¼€å‘è€…ä½¿ç”¨ IntelliJ IDEA</h3><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/32.png" alt="IDE"></p><p>æˆ‘æ˜¯ä» 2015 å¹´å¼€å§‹ä½¿ç”¨ IntelliJ IDEAï¼Œè¯•ç”¨ä¹‹åç«‹é©¬æŠ›å¼ƒäº† Eclipseã€‚é¦–å…ˆæ˜¯å¿«æ·é”®çš„è®¾è®¡ï¼Œå¯ä»¥å¾ˆå¤§ç¨‹åº¦æ‘†è„±é¼ æ ‡ã€‚å†…ç½®çš„æ’ä»¶å¸‚åœºï¼Œå¯ä»¥æ‰¾åˆ°ä»»ä½•éœ€è¦çš„æ’ä»¶ï¼Œæå‡ç¼–ç¨‹ä½“éªŒã€‚æ›´å…³é”®çš„æ˜¯ï¼ŒJetBrains å…¬å¸å‡ºå“çš„ IDEï¼Œå¯ä»¥æ— ç¼å¯¹æ¥ï¼Œå®ç°ä¸åŒè¯­è¨€çš„ç¼–ç¨‹æ”¯æŒã€‚</p><p>Eclips ä¹Ÿä¸æ˜¯ä¸€æ— æ˜¯å¤„ï¼Œå®ƒçš„æ’ä»¶ä½“ç³»ä¹Ÿæ˜¯ç›¸å½“ä¸°å¯Œï¼Œå¾ˆå¤šä½ä»£ç å¼€å‘å·¥å…·éƒ½æ˜¯åŸºäº Eclipse å¼€å‘çš„ã€‚å¦‚æœæ˜¯æ™®é€šå¼€å‘ï¼Œæ¨èä½¿ç”¨ IntelliJ IDEAï¼›å¦‚æœæƒ³è¦åšä½ä»£ç å·¥å…·ï¼Œå¯ä»¥è€ƒè™‘å¯¹ Eclipse è¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚</p><h2 id="å¼€å‘è€…ç”Ÿäº§åŠ›è¶‹åŠ¿"><a href="#å¼€å‘è€…ç”Ÿäº§åŠ›è¶‹åŠ¿" class="headerlink" title="å¼€å‘è€…ç”Ÿäº§åŠ›è¶‹åŠ¿"></a>å¼€å‘è€…ç”Ÿäº§åŠ›è¶‹åŠ¿</h2><p>è¿™ä¸€éƒ¨åˆ†å±äº JRebel æœ‰ç§å¿ƒçš„éƒ¨åˆ†ï¼ŒJRebel ä¸€ä¸ªä¼˜åŠ¿åŠŸèƒ½æ˜¯æä¾›çƒ­éƒ¨ç½²èƒ½åŠ›ï¼Œæ‰€ä»¥ä¼šåœ¨é—®å·ä¸­è¯¢é—®è¢«è°ƒæŸ¥è€…é‡æ–°éƒ¨ç½²åº”ç”¨çš„æ—¶é—´ã€‚</p><h3 id="é‡æ–°éƒ¨ç½²åº”ç”¨çš„æ—¶é—´"><a href="#é‡æ–°éƒ¨ç½²åº”ç”¨çš„æ—¶é—´" class="headerlink" title="é‡æ–°éƒ¨ç½²åº”ç”¨çš„æ—¶é—´"></a>é‡æ–°éƒ¨ç½²åº”ç”¨çš„æ—¶é—´</h3><p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½åªæ”¹åŠ¨ä¸€è¡Œä»£ç ï¼Œç„¶åéªŒè¯åŠŸèƒ½æ˜¯ä¸æ˜¯æ­£å¸¸ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦é‡æ–°éƒ¨ç½²åº”ç”¨ã€‚JRebel ç»Ÿè®¡äº†é‡æ–°éƒ¨ç½²éœ€è¦èŠ±è´¹çš„æ—¶é—´ã€‚</p><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/38.png" alt="é‡æ–°éƒ¨ç½²åº”ç”¨çš„æ—¶é—´"></p><p>ä»ç»“æœä¸Šçœ‹ï¼Œé‡æ–°éƒ¨ç½²éœ€è¦è¶…è¿‡ 3 åˆ†é’Ÿæ—¶é—´çš„å  50%ï¼Œå…¶ä¸­ 21%çš„æ¯”ç‡éœ€è¦ 10 åˆ†é’Ÿä»¥ä¸Šã€‚é‚£è¿™æ®µæ—¶é—´ï¼Œå¤§å®¶ä¼šå¹²ä»€ä¹ˆï¼Ÿ</p><h3 id="å¦‚æœèŠ‚çœé‡æ–°éƒ¨ç½²çš„æ—¶é—´ä½ ä¼šåšä»€ä¹ˆï¼Ÿ"><a href="#å¦‚æœèŠ‚çœé‡æ–°éƒ¨ç½²çš„æ—¶é—´ä½ ä¼šåšä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¦‚æœèŠ‚çœé‡æ–°éƒ¨ç½²çš„æ—¶é—´ä½ ä¼šåšä»€ä¹ˆï¼Ÿ"></a>å¦‚æœèŠ‚çœé‡æ–°éƒ¨ç½²çš„æ—¶é—´ä½ ä¼šåšä»€ä¹ˆï¼Ÿ</h3><p><img src="https://static.howardliu.cn/jrebel-2022-java-developer-productivity-report/41.png" alt="é‡æ–°éƒ¨ç½²æ—¶å¤§å®¶åœ¨åšä»€ä¹ˆ"></p><p>æœ‰ 28%ä¼šå¢åŠ æ–°åŠŸèƒ½ï¼›æœ‰ 20%ä¼šä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼›æœ‰ 19%ä¼šå®Œå–„æµ‹è¯•è¦†ç›–ã€‚è¿™äº›éƒ½æ˜¯æ­£å‘çš„ï¼Œå¤§æ¦‚ç‡çš„æ˜¯é‚£äº›å›ç­”å…¶ä»–çš„ï¼šå–å’–å•¡ã€å–å•¤é…’ã€å¼€è¶´ã€ç¡è§‰ã€é’“é±¼â€¦â€¦</p><p>ä¸è¿‡ä¹Ÿæ˜¯ç¬¦åˆæˆ‘ä»¬å·¥ä½œçš„åŸå› ï¼šæˆ‘ä»¬å·¥ä½œæ˜¯ä¸ºäº†ç”Ÿæ´»ï¼Œè€Œä¸æ˜¯ä¸ºäº†åŠ ç­ã€‚æ‰€ä»¥ï¼Œå‡å¦‚æ¯å¤©ç»™ä½  1 å°æ—¶çš„è‡ªç”±æ—¶é—´ï¼Œä½ ä¼šç”¨æ¥åšä»€ä¹ˆå‘¢ï¼Ÿæ¬¢è¿è¯„è®ºåŒºè®¨è®ºã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><ol><li>å¾®æœåŠ¡çš„ä½¿ç”¨æƒ…å†µæ¥çœ‹ï¼Œå¯åŠ¨æ—¶é—´å’Œé‡æ–°éƒ¨ç½²æ—¶é—´ä¸æ˜¯ä¼˜å…ˆè€ƒè™‘çš„å› ç´ ã€‚å¤šæ•°é€‰æ‹©å¾®æœåŠ¡æ¶æ„çš„åŸå› æ— éæœ‰ä¸¤ä¸ªï¼š<ol><li>çœ‹ä¸­å¾®æœåŠ¡æ¶æ„æµè¡Œè¶‹åŠ¿ï¼Œå¬è¯´è¿™ä¸ªå¾ˆå¥½ï¼Œé‚£å°±å¼€å§‹ç”¨ï¼Œè‡³äºæ˜¯å¾®æœåŠ¡æ¶æ„è¿˜æ˜¯åˆ†å¸ƒå¼å•ä½“æ¶æ„ï¼Œå°±ä¸é‡è¦äº†ï¼›</li><li>å¾®æœåŠ¡çš„ä¼˜åŠ¿èƒ½å¤Ÿå¼¥è¡¥å¸¦æ¥çš„å¼Šç«¯ï¼Œæ¯”å¦‚ä¸šåŠ¡è¿­ä»£é€Ÿåº¦ç­‰ï¼›</li></ol></li><li>å¾®æœåŠ¡æ”¶åº·å¨å®šå¾‹å½±å“æ¯”è¾ƒå¤§ï¼›</li><li>æŠ€æœ¯åœ¨ä¸æ–­é©æ–°ï¼Œä½†æ˜¯å¤§å®¶ä¼šæ¯”è¾ƒç†æ€§åœ°æ¥å—ã€‚å…¬å¸è§„æ¨¡è¶Šå¤§ï¼Œè¶Šè¶‹äºé€‰æ‹©æˆç†Ÿçš„æŠ€æœ¯ï¼›</li><li>å®¹å™¨å·²ç»æ˜¯å¤§åŠ¿ï¼Œéœ€è¦æŒæ¡ã€‚</li></ol><p>æŠ€æœ¯ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬éœ€è¦å­¦ä¹ çš„ä¸œè¥¿è¶Šæ¥è¶Šå¤šï¼Œå¾ˆå¤šæ—¶å€™æ„Ÿè§‰å­¦ä¸åŠ¨äº†ã€‚ä½†æ—¢ç„¶é€‰æ‹©äº†è¿™ä¸ªè¡Œä¸šï¼Œæ‹¿ç€é«˜äºå…¶ä»–è¡Œä¸šçš„è–ªèµ„ï¼Œä¹Ÿæ‰¿æ‹…ç€å„ç§è£å‘˜çš„é£é™©ï¼Œæ€»å½’æ˜¯è¦æœ‰ä¸€äº›æŠ€èƒ½å‚èº«ï¼Œæ‰ä¸è‡³äºè¢«å†å²çš„è½¦è½®ç¢¾æˆç²‰æœ«ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://www.i-programmer.info/news/80-java/15317-wheres-java-going-in-2022.html" target="_blank" rel="noopener">https://www.i-programmer.info/news/80-java/15317-wheres-java-going-in-2022.html</a></li><li><a href="https://www.jrebel.com/resources/java-developer-productivity-report-2022" target="_blank" rel="noopener">https://www.jrebel.com/resources/java-developer-productivity-report-2022</a></li></ul><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-developer-productivity-report-2022">2022 å¹´ Java è¡Œä¸šåˆ†ææŠ¥å‘Š</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/125356270" target="_blank" rel="noopener">2022 å¹´ Java è¡Œä¸šåˆ†ææŠ¥å‘Š</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      å‰æ®µæ—¶é—´ä»‹ç»äº†ä» Java8 åˆ° Java17 æ¯ä¸ªç‰ˆæœ¬æ¯”è¾ƒæœ‰ç‰¹ç‚¹çš„æ–°ç‰¹æ€§ï¼ˆæ”¶å½•åœ¨ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹ä¸“æ ï¼‰ï¼Œä»Šå¤©çœ‹åˆ° JRebel å‘å¸ƒäº†ã€Š2022 å¹´ Java å‘å±•è¶‹åŠ¿å’Œåˆ†æã€‹ï¼Œäºæ˜¯å€Ÿæ­¤åˆ†æä¸€ä¸‹ Java è¡Œä¸šçš„ç°çŠ¶ï¼Œå¸Œæœ›ç»™å¤§å®¶ä¸€äº›å‚è€ƒã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava17 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java-17-features/"/>
    <id>https://www.howardliu.cn/java-17-features/</id>
    <published>2022-05-14T02:37:39.000Z</published>
    <updated>2022-05-14T02:37:39.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/black-redstart-g4e4e89b2d_1920.jpeg" alt="Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava17 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚ä» <a href="https://res.cloudinary.com/snyk/image/upload/v1623860216/reports/jvm-ecosystem-report-2021.pdf" target="_blank" rel="noopener">ã€ŠJVM Ecosystem Report 2021ã€‹</a> ä¸­å¯ä»¥çœ‹å‡ºï¼Œç›®å‰å¼€å‘ç¯å¢ƒä¸­æœ‰è¿‘åŠçš„ç¯å¢ƒä½¿ç”¨ Java8ï¼Œæœ‰è¿‘åŠçš„äººè½¬ç§»åˆ°äº† Java11ï¼Œéšç€ Java17 çš„å‘å¸ƒï¼Œç›¸ä¿¡æ¯”ä¾‹ä¼šæœ‰æ‰€å˜åŒ–ã€‚</p><p>å› æ­¤ï¼Œå‡†å¤‡å‡ºä¸€ä¸ªç³»åˆ—ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œé˜è¿°å„ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Java17 æ˜¯åœ¨ 2021 å¹´ 9 æœˆå‘å¸ƒçš„ä¸€ä¸ª LTS ç‰ˆæœ¬ï¼ˆé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼‰ï¼Œä¸Šä¸€ä¸ªé•¿æœŸæ”¯æŒç‰ˆæ˜¯ Java11ï¼Œäº 2018 å¹´ 9 æœˆå‘å¸ƒã€‚ä»ç›®å‰æ¥çœ‹ï¼ŒJava11 åœ¨å¸‚åœºå æœ‰ç‡å·²ç»è¿‡åŠï¼Œå¦‚æœé”™è¿‡äº†å‡çº§ Java11ï¼Œæˆ‘ä»¬å¯ä¸è¦é”™è¿‡è¿™æ¬¡çš„å‡çº§ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ Java17 ä¸ºæˆ‘ä»¬å¸¦æ¥äº†å“ªäº›æ–°å¢ç‰¹æ€§ï¼š</p><ul><li>JEP 306ï¼šæ¢å¤ä¸¥æ ¼çš„æµ®ç‚¹è¯­ä¹‰</li><li>JEP 356ï¼šå¢å¼ºå‹ä¼ªéšæœºæ•°ç”Ÿæˆå™¨</li><li>JEP 382ï¼šæ–°çš„ macOS æ¸²æŸ“ç®¡é“</li><li>JEP 391ï¼šmacOS/AArch64 ç«¯å£</li><li>JEP 398ï¼šå¼ƒç”¨ Applet API</li><li>JEP 403ï¼šå¼ºå°è£… JDK å†…éƒ¨ API</li><li>JEP 406ï¼šSwitch çš„æ¨¡å¼åŒ¹é…ï¼ˆé¢„è§ˆï¼‰</li><li>JEP 407ï¼šåˆ é™¤ RMI æ¿€æ´»æœºåˆ¶</li><li>JEP 409ï¼šå¯†å°ç±»</li><li>JEP 410ï¼šåˆ é™¤å®éªŒæ€§çš„ AOT å’Œ JIT ç¼–è¯‘å™¨</li><li>JEP 411ï¼šå¼ƒç”¨å®‰å…¨ç®¡ç†å™¨</li><li>JEP 412ï¼šå¤–éƒ¨å‡½æ•°å’Œå†…å­˜ APIï¼ˆå­µåŒ–ï¼‰</li><li>JEP 414ï¼šVector APIï¼ˆç¬¬äºŒç‰ˆå­µåŒ–ï¼‰</li><li>JEP 415ï¼šä¸Šä¸‹æ–‡ç‰¹å®šçš„ååºåˆ—åŒ–è¿‡æ»¤å™¨</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚</p><h2 id="æ¢å¤ä¸¥æ ¼çš„æµ®ç‚¹è¯­ä¹‰ï¼ˆJEP-306ï¼‰"><a href="#æ¢å¤ä¸¥æ ¼çš„æµ®ç‚¹è¯­ä¹‰ï¼ˆJEP-306ï¼‰" class="headerlink" title="æ¢å¤ä¸¥æ ¼çš„æµ®ç‚¹è¯­ä¹‰ï¼ˆJEP 306ï¼‰"></a>æ¢å¤ä¸¥æ ¼çš„æµ®ç‚¹è¯­ä¹‰ï¼ˆJEP 306ï¼‰</h2><p>è¿™ä¸ªç‰¹æ€§æ˜¯åˆ©å¥½ç§‘å­¦è®¡ç®—ä¸­çš„æµ®ç‚¹è¿ç®—ï¼Œä¿è¯æµ®ç‚¹è¿ç®—ä¸­çš„ strict æˆ– strictfp åœ¨æ¯ä¸ªå¹³å°ä¸Šéƒ½èƒ½å¤Ÿå¾—åˆ°ç›¸åŒçš„ç»“æœï¼Œä¹Ÿå°±æ˜¯å¯ä»¥æŠŠ strictfp æ‰”äº†ã€‚</p><p>åœ¨ Java1.2 ä¹‹å‰ï¼Œç²¾ç¡®æµ®ç‚¹è®¡ç®—æ˜¯é€šè¿‡è¿‚å›çš„æ–¹å¼å®ç°çš„ã€‚å¤§çº¦ä» 2001 å¹´å¼€å§‹ï¼Œå¥”è…¾ 4 å’Œæ›´é«˜ç‰ˆæœ¬çš„å¤„ç†å™¨ä¸­æä¾›äº† SSE2 æ‰©å±•ï¼ˆæ•°æ®æµå•æŒ‡ä»¤å¤šæ•°æ®æ‰©å±•æŒ‡ä»¤é›† 2ï¼‰ï¼Œå¯ä»¥ç›´æ¥æ”¯æŒä¸¥æ ¼çš„ JVM æµ®ç‚¹è¿ç®—ï¼Œä¸éœ€è¦é¢å¤–çš„å¼€é”€ã€‚é‚£ä¸ªæ—¶å€™ Intel å’Œ AMD è¿˜ä¸æ”¯æŒè¿™ç§æ‰©å±•ï¼Œäºæ˜¯ Java1.2 çš„æµ®ç‚¹è¿ç®—å°±åˆ†å‰äº†ã€‚</p><p>åˆ°åæ¥ Intel å’Œ AMD ä¹Ÿå¼€å§‹æ”¯æŒ SSE2 å’Œæ›´é«˜ç‰ˆæœ¬çš„æ‰©å±•æŒ‡ä»¤é›†ï¼ŒJava è¯­è¨€å°±å¯ä»¥æ¢å¤åˆ°ä¸¥æ ¼çš„æµ®ç‚¹è¿ç®—äº†ã€‚è¿ Java ä¹‹çˆ¶ James Gosling åœ¨ Twitter ä¹Ÿå‘æ–‡åº†ç¥ï¼š</p><p><img src="https://static.howardliu.cn/java/jep306-jamesgosling-twitter.png" alt="æ¢å¤ä¸¥æ ¼çš„æµ®ç‚¹è¯­ä¹‰ï¼ˆJEP 306ï¼‰"></p><h2 id="å¢å¼ºä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆJEP-356ï¼‰"><a href="#å¢å¼ºä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆJEP-356ï¼‰" class="headerlink" title="å¢å¼ºä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆJEP 356ï¼‰"></a>å¢å¼ºä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆJEP 356ï¼‰</h2><p>è¿™ä¸ªç‰¹æ€§æ˜¯ä¸ºä¼ªéšæœºæ•°ç”Ÿæˆå™¨ RPNGï¼ˆPseudo-Random Number Generatorsï¼‰å¢åŠ äº†æ–°çš„æ¥å£ç±»å‹å’Œå®ç°ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°äº’æ¢ä½¿ç”¨ä¸åŒçš„ç®—æ³•ï¼Œè€Œä¸”å®ƒè¿˜ä¸ºåŸºäºæµçš„ç¼–ç¨‹æ–¹å¼æä¾›äº†æ›´å¥½çš„æ”¯æŒã€‚è¿™ä¸ªç‰¹æ€§çš„ç›®æ ‡æœ‰å››ä¸ªï¼š</p><ul><li>åœ¨åº”ç”¨ç¨‹åºä¸­æ›´å®¹æ˜“åœ°äº¤æ›¿ä½¿ç”¨å„ç§ PRNG ç®—æ³•ï¼›</li><li>æ”¹è¿›äº†å¯¹åŸºäºæµçš„ç¼–ç¨‹çš„æ”¯æŒï¼Œæä¾›äº† PRNG å¯¹è±¡æµï¼›</li><li>æ¶ˆé™¤ç°æœ‰ PRNG ç±»ä¸­çš„é‡å¤ä»£ç ï¼›</li><li>ä¿ç•™<code>java.util.Random</code>ç±»çš„ç°æœ‰è¡Œä¸ºï¼Œåšå¥½å‘ä¸‹å…¼å®¹ã€‚</li></ul><p>æ–°å¢äº†<code>java.util.random.RandomGenerator</code>æ¥å£ï¼Œä½œä¸ºæ‰€æœ‰ PRNG ç®—æ³•çš„ç»Ÿä¸€ APIï¼Œæä¾›äº†å·¥å‚ç±»<code>java.util.random.RandomGeneratorFactory</code>ï¼Œå€ŸåŠ©<code>java.util.ServiceLoader.load()</code>çš„èƒ½åŠ›åŠ è½½å„ç§ PRNG ç®—æ³•å®ç°ï¼Œå¯ä»¥æ„é€ <code>RandomGenerator</code>å®ä¾‹ã€‚</p><p>æˆ‘ä»¬éå†ä¸€ä¸‹çœ‹çœ‹æœ‰å“ªäº› PRNG ç®—æ³•ï¼š</p><pre><code class="java">RandomGeneratorFactory.all().forEach(factory -&gt; {    System.out.println(factory.group() + &quot;:&quot; + factory.name());});</code></pre><p>ç»“æœæ˜¯ï¼š</p><pre><code class="log">LXM:L32X64MixRandomLXM:L128X128MixRandomLXM:L64X128MixRandomLegacy:SecureRandomLXM:L128X1024MixRandomLXM:L64X128StarStarRandomXoshiro:Xoshiro256PlusPlusLXM:L64X256MixRandomLegacy:RandomXoroshiro:Xoroshiro128PlusPlusLXM:L128X256MixRandomLegacy:SplittableRandomLXM:L64X1024MixRandom</code></pre><p><code>Legacy:Random</code>å°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„<code>java.util.Random</code>ï¼Œæˆ‘ä»¬æ¥è¯•è¯•çœ‹ï¼š</p><pre><code class="java">RandomGenerator randomGenerator = RandomGeneratorFactory.of(&quot;Random&quot;)        .create(System.currentTimeMillis());System.out.println(randomGenerator.getClass());System.out.println(randomGenerator.nextInt(10));</code></pre><p>ç»“æœæ˜¯ï¼š</p><pre><code class="log">class java.util.Random6 ï¼ˆè¿™ä¸ªå€¼éšä¸åŒçš„è¿è¡Œç»“æœä¸åŒï¼‰</code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æµå¼ç¼–ç¨‹æ–¹å¼æ‰¹é‡è·å–éšæœºæ•°ï¼š</p><pre><code class="java">final IntStream ints = RandomGeneratorFactory.of(&quot;L128X128MixRandom&quot;)        .create()        .ints(10, 0, 100);System.out.println(Arrays.toString(ints.toArray()));</code></pre><p>ç»“æœä¼šå¾—åˆ° 10 ä¸ªéšæœºæ•°å­—æ•°ç»„ï¼ˆæ¯æ¬¡è¿è¡Œç»“æœä¸åŒï¼‰ï¼š</p><pre><code class="log">[50, 16, 73, 4, 79, 32, 55, 34, 40, 53]</code></pre><h2 id="æ–°çš„-MacOS-æ¸²æŸ“åº“ï¼ˆJEP-382ï¼‰"><a href="#æ–°çš„-MacOS-æ¸²æŸ“åº“ï¼ˆJEP-382ï¼‰" class="headerlink" title="æ–°çš„ MacOS æ¸²æŸ“åº“ï¼ˆJEP 382ï¼‰"></a>æ–°çš„ MacOS æ¸²æŸ“åº“ï¼ˆJEP 382ï¼‰</h2><p>MacOS ä¸ºäº†æå‡å›¾å½¢æ¸²æŸ“æ€§èƒ½ï¼Œåœ¨ 2018 å¹´ 9 æœˆæ”¾å¼ƒä¹‹å‰çš„ OpenGL æ¸²æŸ“åº“ï¼Œé€‰ç”¨äº† Apple Metalã€‚ä» Java17 å¼€å§‹ï¼ŒSwing API å†…éƒ¨ç”¨äºæ¸²æŸ“ Java 2D çš„ API å¼€å§‹ä½¿ç”¨æ–°çš„ Apple Metal åŠ é€Ÿæ¸²æŸ“ APIã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªåŠŸèƒ½ä¸å¯ç”¨ï¼Œéœ€è¦ä¸»åŠ¨å¼€å¯ï¼š</p><pre><code class="sh">-Dsun.java2d.metal=true</code></pre><p>è¿™ä¸ªç‰¹æ€§æ”¹åŠ¨æ˜¯å±äº API å†…éƒ¨å®ç°ï¼Œä½¿ç”¨ä¸Šæ²¡æœ‰ä»»ä½•å·®åˆ«ã€‚è€Œä¸”å¯¹ MacOS çš„ç³»ç»Ÿç‰ˆæœ¬æœ‰è¦æ±‚ï¼Œéœ€è¦åœ¨ MacOS10.14 ç‰ˆæœ¬æˆ–ä»¥ä¸Šï¼Œå¦åˆ™è¿˜æ˜¯ä¼šä½¿ç”¨ OpenGL æ¸²æŸ“å›¾å½¢ã€‚</p><h2 id="MacOS-AArch64-ç«¯å£ï¼ˆJEP-391ï¼‰"><a href="#MacOS-AArch64-ç«¯å£ï¼ˆJEP-391ï¼‰" class="headerlink" title="MacOS/AArch64 ç«¯å£ï¼ˆJEP 391ï¼‰"></a>MacOS/AArch64 ç«¯å£ï¼ˆJEP 391ï¼‰</h2><p>è‹¹æœåœ¨ 2020 å¹´ 6 æœˆçš„ WWDC çš„æ¼”è®²ä¸­å®£å¸ƒï¼Œå°†å¼€å¯é•¿æœŸå°† Macintosh ç³»åˆ—ä» x64 è¿‡æ¸¡åˆ° AArch64 çš„è®¡åˆ’ï¼Œè¯¥ç‰¹æ€§ä¸»è¦æ˜¯ä¸ºäº†é€‚åº”è¿™ç§æ”¹å˜ã€‚</p><p>Linux çš„ AArch64 æ”¯æŒæ˜¯åœ¨ Java9 æä¾›çš„ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a>ï¼‰ï¼ŒWindows çš„ AArch64 æ”¯æŒæ˜¯åœ¨ Java16 æä¾›çš„ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a>ï¼‰ã€‚</p><p>åœ¨ Java12 çš„æ—¶å€™å¯¹ AArch64 çš„æ”¯æŒåº“è¿›è¡Œäº†ç»Ÿä¸€ï¼Œåªä¿ç•™äº†ä¸€å¥—ç»´æŠ¤ä»£ç ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a>ï¼‰ã€‚</p><h2 id="å¼ºå°è£…-JDK-å†…éƒ¨-APIï¼ˆJEP-403ï¼‰"><a href="#å¼ºå°è£…-JDK-å†…éƒ¨-APIï¼ˆJEP-403ï¼‰" class="headerlink" title="å¼ºå°è£… JDK å†…éƒ¨ APIï¼ˆJEP 403ï¼‰"></a>å¼ºå°è£… JDK å†…éƒ¨ APIï¼ˆJEP 403ï¼‰</h2><p>åœ¨ Java16 ä¸­ä¸ºäº†æ”¹è¿› JDK çš„å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå¯¹å†…éƒ¨ API è¿›è¡Œäº†å°è£…ï¼Œä½†æ˜¯ä¹Ÿç•™äº†åé—¨ï¼Œå¯ä»¥ä½¿ç”¨å¯åŠ¨å‚æ•°<code>--illegal-access</code>æ§åˆ¶å†…éƒ¨ API çš„å°è£…ç¨‹åº¦ã€‚ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a>ï¼‰</p><p>åˆ°äº† Java17 ä¸­ï¼Œé™¤äº†<code>sun.misc.Unsafe</code>å¯ä»¥ä½¿ç”¨ï¼Œå…¶ä»–çš„å†…éƒ¨ API éƒ½å˜æˆäº†å¼ºå°è£…æ¨¡å¼ï¼Œè€Œä¸”<code>--illegal-access</code>å‘½ä»¤ä¹Ÿè¢«ç§»é™¤ï¼Œå¦‚æœè¿˜åœ¨å‘½ä»¤ä¸­æ·»åŠ è¯¥å‚æ•°ï¼Œä¼šç›´æ¥æŠ¥é”™ï¼š</p><pre><code class="log">~ $ java -versionopenjdk version &quot;17.0.1&quot; 2021-10-19OpenJDK Runtime Environment (build 17.0.1+12-39)OpenJDK 64-Bit Server VM (build 17.0.1+12-39, mixed mode, sharing)~ $ java --illegal-accessUnrecognized option: --illegal-accessError: Could not create the Java Virtual Machine.Error: A fatal exception has occurred. Program will exit.</code></pre><h2 id="å¯†å°ç±»ï¼ˆJEP-409ï¼‰"><a href="#å¯†å°ç±»ï¼ˆJEP-409ï¼‰" class="headerlink" title="å¯†å°ç±»ï¼ˆJEP 409ï¼‰"></a>å¯†å°ç±»ï¼ˆJEP 409ï¼‰</h2><p>å¯†å°ç±»ç‰¹æ€§æ˜¯åœ¨ Java15 æä¾›é¢„è§ˆç‰ˆï¼ŒJava16 æä¾›ç¬¬äºŒç‰ˆé¢„è§ˆï¼Œç»ˆäºåœ¨ Java17 ä¸­æˆä¸ºæ­£å¼åŠŸèƒ½ã€‚è¯¥ç‰¹æ€§é™åˆ¶å“ªäº›å…¶ä»–ç±»æˆ–æ¥å£å¯ä»¥æ‰©å±•æˆ–å®ç°å¯†å°ç»„ä»¶ã€‚</p><p>JEP 409 å¹¶æ²¡æœ‰å¯¹å¯†å°ç±»æœ‰æ–°çš„ç‰¹æ€§ï¼Œå¯ä»¥å‚è€ƒ <a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a>ã€<a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a>ï¼Œè¿™é‡Œä¸å†é‡å¤ã€‚</p><h2 id="ä¸Šä¸‹æ–‡ç‰¹å®šçš„ååºåˆ—åŒ–è¿‡æ»¤å™¨ï¼ˆJEP-415ï¼‰"><a href="#ä¸Šä¸‹æ–‡ç‰¹å®šçš„ååºåˆ—åŒ–è¿‡æ»¤å™¨ï¼ˆJEP-415ï¼‰" class="headerlink" title="ä¸Šä¸‹æ–‡ç‰¹å®šçš„ååºåˆ—åŒ–è¿‡æ»¤å™¨ï¼ˆJEP 415ï¼‰"></a>ä¸Šä¸‹æ–‡ç‰¹å®šçš„ååºåˆ—åŒ–è¿‡æ»¤å™¨ï¼ˆJEP 415ï¼‰</h2><p>Java å¯¹è±¡åºåˆ—åŒ–æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½ï¼Œå¯ä»¥é€æ˜åŒ–è¿œç¨‹å¤„ç†ï¼Œä¹Ÿä¿ƒè¿›äº† JavaEE çš„æˆåŠŸã€‚åºåˆ—åŒ–è¿‡ç¨‹æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ååºåˆ—åŒ–è¿‡ç¨‹å¯èƒ½å­˜åœ¨å±é™©ï¼š</p><ul><li>è®¸å¤šæƒ…å†µä¸‹ä¼ å…¥çš„æ•°æ®æµå†…å®¹æ˜¯é€šè¿‡æœªçŸ¥æˆ–æœªç»èº«ä»½éªŒè¯çš„å®¢æˆ·ç«¯è·å–çš„ï¼›</li><li>åºåˆ—åŒ–æ•°æ®æµä¸­å¯èƒ½æºå¸¦å¸¦æœ‰æ”»å‡»è€…ç²¾å¿ƒæ„é€ çš„æ¶æ„ä»£ç ã€‚</li></ul><p>ç»ˆäºåœ¨ Java17 ä¸­å¢åŠ äº†ååºåˆ—åŒ–è¿‡æ»¤å™¨ï¼Œå…è®¸åº”ç”¨ç¨‹åºä½¿ç”¨ JVM èŒƒå›´çš„è¿‡æ»¤å™¨å·¥å‚ï¼Œé…ç½®ç‰¹å®šäºä¸Šä¸‹æ–‡å’ŒåŠ¨æ€é€‰æ‹©çš„ååºåˆ—åŒ–è¿‡æ»¤å™¨ï¼Œè¯¥å·¥å‚ç”¨äºä¸ºæ¯ä¸ªååºåˆ—åŒ–æ“ä½œé€‰æ‹©ä¸€ä¸ªè¿‡æ»¤å™¨ã€‚</p><p>ç®€å•ç‚¹è¯´ï¼Œå°±æ˜¯æå‰è¯´å¥½å¯ä»¥ååºåˆ—åŒ–å“ªäº›ç±»ï¼Œå¦‚æœåºåˆ—åŒ–æ•°æ®æµä¸­åŒ…å«ä¸è¢«å…è®¸çš„ç±»å¯¹è±¡ï¼Œå°±ç›´æ¥æŠ¥é”™ã€‚</p><h2 id="é¢„è§ˆåŠŸèƒ½"><a href="#é¢„è§ˆåŠŸèƒ½" class="headerlink" title="é¢„è§ˆåŠŸèƒ½"></a>é¢„è§ˆåŠŸèƒ½</h2><h3 id="Switch-çš„æ¨¡å¼åŒ¹é…ï¼ˆJEP-406ï¼‰"><a href="#Switch-çš„æ¨¡å¼åŒ¹é…ï¼ˆJEP-406ï¼‰" class="headerlink" title="Switch çš„æ¨¡å¼åŒ¹é…ï¼ˆJEP 406ï¼‰"></a>Switch çš„æ¨¡å¼åŒ¹é…ï¼ˆJEP 406ï¼‰</h3><p>è¿™ä¸ªç‰¹æ€§åŠŸèƒ½å¾ˆèµï¼Œåœ¨ Java14 ä¸­æ­£å¼æä¾› Switch è¡¨è¾¾å¼ç‰¹æ€§ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a>ï¼‰ï¼Œæœ¬æ¬¡æä¾›çš„æ˜¯ Switch æ¨¡å¼åŒ¹é…ä¸ instanceof æ¨¡å¼åŒ¹é…æœ‰äº›ç±»ä¼¼ï¼Œæ˜¯èƒ½å¤Ÿåœ¨ Switch è¡¨è¾¾å¼å®ç°ç±»å‹è‡ªåŠ¨è½¬æ¢ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="java">static String formatterPatternSwitch(Object o) {    return switch (o) {        case null -&gt; &quot;null&quot;;        case Integer i -&gt; String.format(&quot;int %d&quot;, i);        case Long l -&gt; String.format(&quot;long %d&quot;, l);        case Double d -&gt; String.format(&quot;double %f&quot;, d);        case String s -&gt; String.format(&quot;String %s&quot;, s);        default -&gt; o.getClass().getSimpleName() + &quot; &quot; + o;    };}public static void main(String[] args) {    System.out.println(formatterPatternSwitch(null));    System.out.println(formatterPatternSwitch(&quot;1&quot;));    System.out.println(formatterPatternSwitch(2));    System.out.println(formatterPatternSwitch(3L));    System.out.println(formatterPatternSwitch(4.0));    System.out.println(formatterPatternSwitch(new AtomicLong(5)));}</code></pre><p>ç»“æœæ˜¯ï¼š</p><pre><code class="log">nullString 1int 2long 3double 4.000000AtomicLong 5</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸åªæ˜¯ç±»å‹è‡ªåŠ¨è½¬æ¢ï¼Œè¿˜å¯ä»¥ç›´æ¥åˆ¤æ–­æ˜¯å¦æ˜¯<code>null</code>ï¼Œçœäº†å‰ç½®åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯<code>null</code>äº†ã€‚</p><p>æœŸå¾…è¿™ä¸ªåŠŸèƒ½æ—©æ—¥è½¬æ­£ã€‚</p><h2 id="å­µåŒ–åŠŸèƒ½"><a href="#å­µåŒ–åŠŸèƒ½" class="headerlink" title="å­µåŒ–åŠŸèƒ½"></a>å­µåŒ–åŠŸèƒ½</h2><h3 id="å¤–éƒ¨å‡½æ•°å’Œå†…å­˜-APIï¼ˆJEP-412ï¼‰"><a href="#å¤–éƒ¨å‡½æ•°å’Œå†…å­˜-APIï¼ˆJEP-412ï¼‰" class="headerlink" title="å¤–éƒ¨å‡½æ•°å’Œå†…å­˜ APIï¼ˆJEP 412ï¼‰"></a>å¤–éƒ¨å‡½æ•°å’Œå†…å­˜ APIï¼ˆJEP 412ï¼‰</h3><p>Java ç¨‹åºå¯ä»¥é€šè¿‡è¯¥ API ä¸ Java è¿è¡Œæ—¶ä¹‹å¤–çš„ä»£ç å’Œæ•°æ®äº’æ“ä½œã€‚é€šè¿‡æœ‰æ•ˆåœ°è°ƒç”¨å¤–éƒ¨å‡½æ•°ï¼ˆå³ JVM å¤–éƒ¨çš„ä»£ç ï¼‰ï¼Œå¹¶é€šè¿‡å®‰å…¨åœ°è®¿é—®å¤–éƒ¨å†…å­˜ï¼ˆå³ä¸ç”± JVM ç®¡ç†çš„å†…å­˜ï¼‰ï¼Œè¯¥ API ä½¿ Java ç¨‹åºèƒ½å¤Ÿè°ƒç”¨æœ¬æœºåº“å¹¶å¤„ç†æœ¬æœºæ•°æ®ï¼Œè€Œä¸ä¼šæœ‰ JNI çš„è„†å¼±æ€§å’Œå±é™©ã€‚</p><p>é€šè¿‡æ›´åŠ ä¼˜é›…çš„æ–¹å¼è®¿é—®å¤–éƒ¨å‡½æ•°æ˜¯ä» Java14 å¼€å§‹çš„ï¼Œç»å†äº†å¤šä¸ªå­µåŒ–ç‰ˆæœ¬ï¼š</p><ul><li>Java14 çš„ JEP 370ï¼šå¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆå­µåŒ–ï¼‰</li><li>Java15 çš„ JEP 383ï¼šå¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆç¬¬äºŒç‰ˆå­µåŒ–åŠŸèƒ½ï¼‰</li><li>Java16 çš„ JEP 389ï¼šå¤–éƒ¨é“¾æ¥å™¨ APIï¼ˆå­µåŒ–åŠŸèƒ½ï¼‰</li><li>Java16 çš„ JEP 393ï¼šå¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆç¬¬ä¸‰ç‰ˆå­µåŒ–åŠŸèƒ½ï¼‰</li><li>Java17 çš„ JEP 412ï¼šå¤–éƒ¨å‡½æ•°å’Œå†…å­˜ API</li></ul><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œè™½ç„¶ä¸€ç›´åœ¨å­µåŒ–ï¼Œä½†æ˜¯åŠŸèƒ½è¶Šæ¥è¶Šå¼ºå¤§ï¼Œè¿™ä¸€æ—¦å­µå‡ºæ¥ï¼Œå²‚ä¸æ˜¯è¶…çº§ç¥å…½äº†ã€‚</p><p>è¿™ä¸€ç³»åˆ—çš„åŠŸèƒ½éƒ½æ˜¯ä¸ºäº†èƒ½å¤Ÿåœ¨ Java ç±»ä¸­è°ƒç”¨ C è¯­è¨€ç±»åº“ï¼š</p><pre><code class="java">private static final SymbolLookup libLookup;static {    // loads a particular C library    var path = JEP412.class.getResource(&quot;/print_name.so&quot;).getPath();    System.load(path);    libLookup = SymbolLookup.loaderLookup();}</code></pre><p>ç¬¬ä¸€æ­¥ï¼Œéœ€è¦åŠ è½½æˆ‘ä»¬å¸Œæœ›é€šè¿‡ API è°ƒç”¨çš„ç›®æ ‡åº“ã€‚<br>ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šç›®æ ‡æ–¹æ³•çš„ç­¾åï¼Œå¹¶æœ€ç»ˆè°ƒç”¨å®ƒï¼š</p><pre><code class="java">public String getPrintNameFormat(String name) {    var printMethod = libLookup.lookup(&quot;printName&quot;);    if (printMethod.isPresent()) {        var methodReference = CLinker.getInstance()            .downcallHandle(                printMethod.get(),                MethodType.methodType(MemoryAddress.class, MemoryAddress.class),                FunctionDescriptor.of(CLinker.C_POINTER, CLinker.C_POINTER)            );        try {            var nativeString = CLinker.toCString(name, newImplicitScope());            var invokeReturn = methodReference.invoke(nativeString.address());            var memoryAddress = (MemoryAddress) invokeReturn;            return CLinker.toJavaString(memoryAddress);        } catch (Throwable throwable) {            throw new RuntimeException(throwable);        }    }    throw new RuntimeException(&quot;printName function not found.&quot;);}</code></pre><blockquote><p>ä¸Šé¢è¿™æ®µä»£ç æ‘˜è‡ª<a href="https://www.baeldung.com/java-17-new-features" target="_blank" rel="noopener">https://www.baeldung.com/java-17-new-features</a>ã€‚</p></blockquote><h3 id="Vector-APIï¼ˆJEP-414ï¼Œç¬¬äºŒç‰ˆå­µåŒ–ï¼‰"><a href="#Vector-APIï¼ˆJEP-414ï¼Œç¬¬äºŒç‰ˆå­µåŒ–ï¼‰" class="headerlink" title="Vector APIï¼ˆJEP 414ï¼Œç¬¬äºŒç‰ˆå­µåŒ–ï¼‰"></a>Vector APIï¼ˆJEP 414ï¼Œç¬¬äºŒç‰ˆå­µåŒ–ï¼‰</h3><p>Vector å‘é‡è®¡ç®— API æ˜¯ä¸ºäº†å¤„ç† SIMDï¼ˆSingle Instruction Multiple Dataï¼Œå•æŒ‡ä»¤å¤šæ•°æ®ï¼‰ç±»å‹çš„æ“ä½œï¼Œå³å¹¶è¡Œæ‰§è¡Œçš„å„ç§æŒ‡ä»¤é›†ã€‚å®ƒåˆ©ç”¨æ”¯æŒå‘é‡æŒ‡ä»¤çš„ä¸“ç”¨ CPU ç¡¬ä»¶ï¼Œå¹¶å…è®¸ä»¥ç®¡é“çš„å½¢å¼æ‰§è¡Œæ­¤ç±»æŒ‡ä»¤ã€‚è¿™ç§è¿ç®—æ–¹å¼å¯ä»¥è®©å¼€å‘äººå‘˜å®ç°æ›´é«˜æ•ˆçš„ä»£ç ï¼Œå……åˆ†åˆ©ç”¨åº•å±‚ç¡¬ä»¶çš„æ½œåŠ›ã€‚æ—¥å¸¸ä½¿ç”¨åŒ…æ‹¬ç§‘å­¦ä»£æ•°çº¿æ€§åº”ç”¨ç¨‹åºã€å›¾åƒå¤„ç†ã€å­—ç¬¦å¤„ç†ã€ç¹é‡çš„ç®—æœ¯åº”ç”¨ç¨‹åºï¼Œä»¥åŠä»»ä½•éœ€è¦å¯¹å¤šä¸ªç‹¬ç«‹æ“ä½œæ•°åº”ç”¨ä¸€ä¸ªè¿ç®—çš„åº”ç”¨ç¨‹åºã€‚</p><p>Vector å‘é‡è®¡ç®— API æ˜¯åœ¨ Java16 å¼•å…¥ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a>ï¼‰ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶å€ŸåŠ© CPU å‘é‡è¿ç®—æŒ‡ä»¤ï¼Œå®ç°æ›´ä¼˜çš„è®¡ç®—èƒ½åŠ›ã€‚åœ¨ Java17 ä¸­ï¼Œé’ˆå¯¹æ€§èƒ½å’Œå®ç°è¿›è¡Œäº†æ”¹è¿›ï¼ŒåŒ…æ‹¬å­—èŠ‚å‘é‡ä¸å¸ƒå°”æ•°ç»„ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚</p><p>åŸæ¥çš„å‘é‡è¿ç®—æˆ‘ä»¬éœ€è¦è¿™æ ·å†™ï¼š</p><pre><code class="java">for (var i = 0; i &lt; a.length; i++) {    c[i] = a[i] * b[i];}</code></pre><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="java">final VectorSpecies&lt;Float&gt; SPECIES = FloatVector.SPECIES_PREFERRED;for (var i = 0; i &lt; a.length; i += SPECIES.length()) {    var m = SPECIES.indexInRange(i, a.length);    var va = FloatVector.fromArray(SPECIES, a, i, m);    var vb = FloatVector.fromArray(SPECIES, b, i, m);    var vc = va.mul(vb);    vc.intoArray(c, i, m);}</code></pre><h2 id="å¼ƒç”¨å’Œåˆ é™¤"><a href="#å¼ƒç”¨å’Œåˆ é™¤" class="headerlink" title="å¼ƒç”¨å’Œåˆ é™¤"></a>å¼ƒç”¨å’Œåˆ é™¤</h2><h3 id="å¯ç”¨-Applet-APIï¼ˆJEP-398ï¼‰"><a href="#å¯ç”¨-Applet-APIï¼ˆJEP-398ï¼‰" class="headerlink" title="å¯ç”¨ Applet APIï¼ˆJEP 398ï¼‰"></a>å¯ç”¨ Applet APIï¼ˆJEP 398ï¼‰</h3><p>Applet æ˜¯ç”¨ Java ç¼–å†™å¯ä»¥åµŒå…¥åˆ°ç½‘é¡µä¸­çš„å°åº”ç”¨ï¼Œå±äºå·²ç»è¿‡æ—¶çš„æŠ€æœ¯ï¼Œå¾ˆå¤šæµè§ˆå™¨å·²ç»å–æ¶ˆæ”¯æŒã€‚Applet API åœ¨ Java9 çš„æ—¶å€™æ ‡è®°äº†è¿‡æœŸï¼Œåœ¨ Java17 æ ‡è®°ä¸ºåˆ é™¤ï¼ˆ<code>@Deprecated(since = &quot;9&quot;, forRemoval = true)</code>ï¼‰ã€‚</p><p>è®°å¾—æˆ‘ä¸Šå­¦çš„æ—¶å€™ï¼Œè¯¾æœ¬ä¸Šè¿˜æœ‰è¿™éƒ¨åˆ†å†…å®¹ã€‚</p><h3 id="åˆ é™¤-RMI-æ¿€æ´»æœºåˆ¶ï¼ˆJEP-407ï¼‰"><a href="#åˆ é™¤-RMI-æ¿€æ´»æœºåˆ¶ï¼ˆJEP-407ï¼‰" class="headerlink" title="åˆ é™¤ RMI æ¿€æ´»æœºåˆ¶ï¼ˆJEP 407ï¼‰"></a>åˆ é™¤ RMI æ¿€æ´»æœºåˆ¶ï¼ˆJEP 407ï¼‰</h3><p>RMI æ¿€æ´»æœºåˆ¶åœ¨ Java15 æ ‡è®°äº†è¿‡æœŸï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a>ï¼‰ï¼Œåˆ° Java17 æ­£å¼åˆ é™¤ã€‚è¿™é‡Œåªæ˜¯åˆ é™¤äº† RMI æ¿€æ´»æœºåˆ¶ï¼Œå¯¹äºå…¶ä»– RMI åŠŸèƒ½ä¸å—å½±å“ã€‚</p><h3 id="åˆ é™¤å®éªŒæ€§çš„-AOT-å’Œ-JIT-ç¼–è¯‘å™¨ï¼ˆJEP-410ï¼‰"><a href="#åˆ é™¤å®éªŒæ€§çš„-AOT-å’Œ-JIT-ç¼–è¯‘å™¨ï¼ˆJEP-410ï¼‰" class="headerlink" title="åˆ é™¤å®éªŒæ€§çš„ AOT å’Œ JIT ç¼–è¯‘å™¨ï¼ˆJEP 410ï¼‰"></a>åˆ é™¤å®éªŒæ€§çš„ AOT å’Œ JIT ç¼–è¯‘å™¨ï¼ˆJEP 410ï¼‰</h3><p>åœ¨ Java9 çš„ JEP 295 ä¸­ï¼Œå¼•å…¥äº†å®éªŒæ€§çš„æå‰ç¼–è¯‘ jaotc å·¥å…·ï¼Œä½†æ˜¯è¿™ä¸ªç‰¹æ€§è‡ªä»å¼•å…¥ä¾èµ–ç”¨å¤„éƒ½ä¸å¤ªå¤§ï¼Œè€Œä¸”éœ€è¦å¤§é‡çš„ç»´æŠ¤å·¥ä½œï¼Œæ‰€ä»¥åœ¨ Java17 ä¸­å†³å®šåˆ é™¤è¿™ä¸ªç‰¹æ€§ã€‚</p><p>ä½†æ˜¯ä¿ç•™äº†å®éªŒæ€§çš„ Java çº§ JVM ç¼–è¯‘å™¨æ¥å£ï¼ˆJVMCIï¼‰ï¼Œè¿™æ ·å¼€å‘äººå‘˜ä¹Ÿå¯ä»¥ç»§ç»­ä½¿ç”¨å¤–éƒ¨æ„å»ºçš„ç¼–è¯‘å™¨ç‰ˆæœ¬ï¼Œå¹¶ä½¿ç”¨ Graal ç¼–è¯‘å™¨ï¼ˆGraalVMï¼‰è¿›è¡Œ JIT ç¼–è¯‘ã€‚</p><h3 id="å¼ƒç”¨å®‰å…¨ç®¡ç†å™¨ï¼ˆJEP-411ï¼‰"><a href="#å¼ƒç”¨å®‰å…¨ç®¡ç†å™¨ï¼ˆJEP-411ï¼‰" class="headerlink" title="å¼ƒç”¨å®‰å…¨ç®¡ç†å™¨ï¼ˆJEP 411ï¼‰"></a>å¼ƒç”¨å®‰å…¨ç®¡ç†å™¨ï¼ˆJEP 411ï¼‰</h3><p>Security Manager åœ¨ JDK1.0 æ—¶å°±å·²ç»å¼•å…¥ï¼Œä½†æ˜¯å®ƒä¸€ç›´éƒ½ä¸æ˜¯ä¿æŠ¤æœåŠ¡ç«¯ä»¥åŠå®¢æˆ·ç«¯ Java ä»£ç çš„ä¸»è¦æ‰‹æ®µï¼Œå¯¹äºå¦‚æ­¤é¸¡è‚‹çš„åŠŸèƒ½ï¼Œæœ€ç»ˆå†³å®šæ ‡è®°ä¸ºåˆ é™¤ï¼ˆ<code>@Deprecated(since=&quot;17&quot;, forRemoval=true)</code>ï¼‰ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java17 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä» <a href="https://openjdk.java.net/projects/jdk/17/" target="_blank" rel="noopener">https://openjdk.java.net/projects/jdk/17/</a> æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>Java17 æ˜¯ LTSï¼ˆé•¿æœŸæ”¯æŒç‰ˆï¼‰ï¼Œä¸Šä¸ª LTS ç‰ˆæœ¬æ˜¯ Java11ï¼Œå¾ˆå¤šå›¢é˜Ÿå·²ç»åœ¨ç”Ÿäº§ä¸Šåˆ‡æ¢ï¼Œç›¸ä¿¡æ¥ä¸‹æ¥ä¼šæœ‰ä¸€äº›å›¢é˜Ÿåœ¨æµ‹è¯•ç¯å¢ƒå°é²œã€‚</p><p>æœ‰äººè®¤ä¸º Java8 æ˜¯ç¥ï¼Œæœ‰äººåˆ™å–œæ¬¢ä¸æ–­åœ°å°é²œï¼Œä½ æ˜¯å“ªç§å‘¢ï¼Ÿæ¬¢è¿åœ¨ç•™è¨€è¯´ä¸‹ä½ åœ¨ç”¨å“ªä¸ªç‰ˆæœ¬ï¼Ÿ</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-17-features/">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava17 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/124830768" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava17 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      Java17 æ˜¯åœ¨ 2021 å¹´ 9 æœˆå‘å¸ƒçš„ä¸€ä¸ª LTS ç‰ˆæœ¬ï¼ˆé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼‰ï¼Œä¸Šä¸€ä¸ªé•¿æœŸæ”¯æŒç‰ˆæ˜¯ Java11ï¼Œäº 2018 å¹´ 9 æœˆå‘å¸ƒã€‚ä»ç›®å‰æ¥çœ‹ï¼ŒJava11 åœ¨å¸‚åœºå æœ‰ç‡å·²è¿›è¿‡åŠï¼Œå¦‚æœé”™è¿‡äº†å‡çº§ Java11ï¼Œæˆ‘ä»¬å¯ä¸è¦é”™è¿‡è¿™æ¬¡çš„å‡çº§ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ Java17 ä¸ºæˆ‘ä»¬å¸¦æ¥äº†å“ªäº›æ–°å¢ç‰¹æ€§ï¼šJEP 306ï¼šæ¢å¤ä¸¥æ ¼çš„æµ®ç‚¹è¯­ä¹‰ï¼›JEP 356ï¼šå¢å¼ºå‹ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼›JEP 382ï¼šæ–°çš„ macOS æ¸²æŸ“ç®¡é“ï¼›JEP 391ï¼šmacOS/AArch64 ç«¯å£ï¼›JEP 398ï¼šå¼ƒç”¨ Applet APIï¼›JEP 403ï¼šå¼ºå°è£… JDK å†…éƒ¨ APIï¼›JEP 406ï¼šSwitch çš„æ¨¡å¼åŒ¹é…ï¼ˆé¢„è§ˆï¼‰ï¼›JEP 407ï¼šåˆ é™¤ RMI æ¿€æ´»æœºåˆ¶ï¼›JEP 409ï¼šå¯†å°ç±»ï¼›JEP 410ï¼šåˆ é™¤å®éªŒæ€§çš„ AOT å’Œ JIT ç¼–è¯‘å™¨ï¼›JEP 411ï¼šå¼ƒç”¨å®‰å…¨ç®¡ç†å™¨ï¼›JEP 412ï¼šå¤–éƒ¨å‡½æ•°å’Œå†…å­˜ APIï¼ˆå­µåŒ–ï¼‰ï¼›JEP 414ï¼šVector APIï¼ˆç¬¬äºŒç‰ˆå­µåŒ–ï¼‰ï¼›JEP 415ï¼šä¸Šä¸‹æ–‡ç‰¹å®šçš„ååºåˆ—åŒ–è¿‡æ»¤å™¨ï¼›æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java17" scheme="https://www.howardliu.cn/tags/Java17/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava16 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java-16-features/"/>
    <id>https://www.howardliu.cn/java-16-features/</id>
    <published>2022-04-18T23:48:47.000Z</published>
    <updated>2022-04-18T23:48:47.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/yellow-5219524_1920.jpeg" alt="Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava16 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚ä» <a href="https://res.cloudinary.com/snyk/image/upload/v1623860216/reports/jvm-ecosystem-report-2021.pdf" target="_blank" rel="noopener">ã€ŠJVM Ecosystem Report 2021ã€‹</a> ä¸­å¯ä»¥çœ‹å‡ºï¼Œç›®å‰å¼€å‘ç¯å¢ƒä¸­æœ‰è¿‘åŠçš„ç¯å¢ƒä½¿ç”¨ Java8ï¼Œæœ‰è¿‘åŠçš„äººè½¬ç§»åˆ°äº† Java11ï¼Œéšç€ Java17 çš„å‘å¸ƒï¼Œç›¸ä¿¡æ¯”ä¾‹ä¼šæœ‰æ‰€å˜åŒ–ã€‚</p><p>å› æ­¤ï¼Œå‡†å¤‡å‡ºä¸€ä¸ªç³»åˆ—ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œé˜è¿°å„ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Java16 æ˜¯åœ¨ 2021 å¹´ 3 æœˆå‘å¸ƒçš„ä¸€ä¸ªçŸ­æœŸç‰ˆæœ¬ï¼Œæ–°å¢ç‰¹æ€§å¦‚ä¸‹ï¼š</p><ul><li>JEP 338ï¼šå‘é‡ APIï¼ˆå­µåŒ–åŠŸèƒ½ï¼‰</li><li>JEP 347ï¼šå¯ç”¨ C++ 14 è¯­è¨€ç‰¹æ€§</li><li>JEP 357ï¼šä» Mercurial è¿ç§»åˆ° Git</li><li>JEP 369ï¼šè¿ç§»åˆ° GitGitHub</li><li>JEP 376ï¼šZGC çš„å¹¶å‘çº¿ç¨‹å †æ ˆå¤„ç†</li><li>JEP 380ï¼šæ”¯æŒ Unix å¥—æ¥å­—</li><li>JEP 386ï¼šAlpine Linux ç§»æ¤</li><li>JEP 387ï¼šå¼¹æ€§å…ƒç©ºé—´</li><li>JEP 388ï¼šWindows/AArch64 ç§»æ¤</li><li>JEP 389ï¼šå¤–éƒ¨é“¾æ¥å™¨ APIï¼ˆå­µåŒ–åŠŸèƒ½ï¼‰</li><li>JEP 390ï¼šå¯¹åŸºäºå€¼çš„ç±»è®¾ç½®â€œå¼ƒç”¨ç§»é™¤â€è­¦å‘Š</li><li>JEP 392ï¼šæ‰“åŒ…å·¥å…·</li><li>JEP 393ï¼šå¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆç¬¬ä¸‰ç‰ˆå­µåŒ–åŠŸèƒ½ï¼‰</li><li>JEP 394ï¼šinstanceof æ¨¡å¼åŒ¹é…</li><li>JEP 395ï¼šRecord ç±»å‹</li><li>JEP 396ï¼šé»˜è®¤å¼ºå°è£… JDK å†…éƒ¨å…ƒç´ </li><li>JEP 397ï¼šå¯†å°ç±»ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆåŠŸèƒ½ï¼‰</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚</p><h2 id="å¯ç”¨-C-14-è¯­è¨€ç‰¹æ€§ï¼ˆJEP-347ï¼‰"><a href="#å¯ç”¨-C-14-è¯­è¨€ç‰¹æ€§ï¼ˆJEP-347ï¼‰" class="headerlink" title="å¯ç”¨ C++ 14 è¯­è¨€ç‰¹æ€§ï¼ˆJEP 347ï¼‰"></a>å¯ç”¨ C++ 14 è¯­è¨€ç‰¹æ€§ï¼ˆJEP 347ï¼‰</h2><p>åœ¨ JDK15 ä¹‹å‰ï¼ŒJDK ä¸­ä½¿ç”¨çš„ C++è¯­è¨€é™åˆ¶åœ¨ C++98/03 ç‰ˆæœ¬ï¼Œæ²¡æœ‰åŠæ³•ä½¿ç”¨æ›´é«˜çº§çš„ç‰¹æ€§ï¼Œä» JDK16 å¼€å§‹ï¼Œå¯ä»¥æ”¯æŒ C++14 çš„è¯­è¨€ç‰¹æ€§ã€‚</p><p>è¿™ä¸€ç‚¹æ›´æ–°å¯¹åº”ç”¨å¼€å‘è€…å¯èƒ½å…³ç³»ä¸å¤§ï¼Œä½†æ˜¯å¯¹äºåº•å±‚ç»„ä»¶çš„å¼€å‘è€…æ„ä¹‰é‡å¤§ã€‚Java çš„ç‰ˆæœ¬æ›´æ–°è¿…é€Ÿï¼ŒC++çš„ç‰¹æ€§ä¹Ÿæ˜¯é£é€Ÿæ›´æ–°ï¼Œå¦‚æœ JDK è¿˜æ˜¯é™åˆ¶åœ¨ C++98/03 ç‰ˆæœ¬ï¼Œæ²¡æœ‰åŠæ³•ä½¿ç”¨ C++11/14 ä¸­çš„é«˜çº§ç‰¹æ€§ï¼Œä¹Ÿæ˜¯ä¸€ç§æŸå¤±ã€‚</p><h2 id="ä»-Mercurial-è¿ç§»åˆ°-Gitï¼ˆJEP-357ã€JEP-369ï¼‰"><a href="#ä»-Mercurial-è¿ç§»åˆ°-Gitï¼ˆJEP-357ã€JEP-369ï¼‰" class="headerlink" title="ä» Mercurial è¿ç§»åˆ° Gitï¼ˆJEP 357ã€JEP 369ï¼‰"></a>ä» Mercurial è¿ç§»åˆ° Gitï¼ˆJEP 357ã€JEP 369ï¼‰</h2><p>è¿™æ˜¯ä¸¤ä¸ªææ¡ˆï¼ŒJEP 357 æ˜¯å°† OpenJDK ç¤¾åŒºçš„æºä»£ç ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œä» Mercurialï¼ˆhgï¼‰è¿ç§»åˆ° Gitï¼ŒJEP 369 æ˜¯å°† OpenJDK é¡¹ç›®å®šå‘åˆ° GitHub ä¸­çš„ä»“åº“ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä» OpenJDK çš„ JIRA å·¥å…·ä¸­ï¼Œä»£ç æäº¤å’Œ Issue é¢„è§ˆçš„éƒ½æ˜¯åœ¨ <a href="https://github.com/openjdk" target="_blank" rel="noopener">https://github.com/openjdk</a> ä¸­ï¼Œæœ‰ä¸€éƒ¨åˆ†æ˜¯ä» <a href="https://git.openjdk.java.net" target="_blank" rel="noopener">https://git.openjdk.java.net</a> é‡å®šå‘åˆ° GitHubã€‚</p><p>Mercurialï¼ˆhgï¼‰æ˜¯ä¸€ä¸ª Python ç¼–å†™çš„è·¨å¹³å°çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œä¸ Git æ˜¯åŒä¸€æ—¶ä»£å¼€å§‹çš„å·¥å…·ï¼ŒåŠŸèƒ½ä¹Ÿæ˜¯å¾ˆå¼ºå¤§ï¼Œåªæ˜¯åœ¨å‘å±•è¿‡ç¨‹ä¸­ï¼Œæœ‰äº›æ–¹é¢ç¨å¼±äº Gitï¼Œæ¯”å¦‚å…ƒæ•°æ®çš„å ç”¨ã€ä¸ç°ä»£å·¥å…·é“¾çš„é›†æˆã€‚æ‰€ä»¥ OpenJDK è½¬è€ŒæŠ•å‘äº† Git çš„æ€€æŠ±ã€‚</p><h2 id="ZGC-çš„å¹¶å‘çº¿ç¨‹å †æ ˆå¤„ç†ï¼ˆJEP-376ï¼‰"><a href="#ZGC-çš„å¹¶å‘çº¿ç¨‹å †æ ˆå¤„ç†ï¼ˆJEP-376ï¼‰" class="headerlink" title="ZGC çš„å¹¶å‘çº¿ç¨‹å †æ ˆå¤„ç†ï¼ˆJEP 376ï¼‰"></a>ZGC çš„å¹¶å‘çº¿ç¨‹å †æ ˆå¤„ç†ï¼ˆJEP 376ï¼‰</h2><p>ZGC æ˜¯åœ¨ Java11 å¼•å…¥çš„ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 æ–°ç‰¹æ€§</a>ï¼‰ï¼Œåœ¨ Java15 ä¸­æ­£å¼ç‰¹æ€§ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 æ–°ç‰¹æ€§</a>ï¼‰ï¼Œå¯ä»¥ç”¨å‘½ä»¤<code>-XX:+UseZGC</code>å¯ç”¨ ZGCã€‚</p><p>ZGC æ˜¯ä¸€ä¸ªå¹¶å‘çš„åƒåœ¾å›æ”¶å™¨ï¼Œå¯ä»¥æå¤§åœ°æå‡ GC çš„æ€§èƒ½ï¼Œæ”¯æŒä»»æ„å †å¤§å°è€Œä¿æŒç¨³å®šçš„ä½å»¶è¿Ÿã€‚åœ¨ 128G å †å¤§å°çš„æµ‹è¯•ä¸­ï¼ŒZGC ä¼˜åŠ¿æ˜æ˜¾ï¼Œæ‰¾äº†ä¸€å¼ ç½‘ä¸Šçš„å›¾ç‰‡ï¼š</p><p><img src="https://static.howardliu.cn/java/java-11-1.png" alt="ZGCï¼šå¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨"></p><p>ZGC çš„ç›®æ ‡æ˜¯å®ç°åƒåœ¾å›æ”¶ä¸ç¨‹åºåŒæ—¶è¿è¡Œï¼Œå°† STW é™ä½ä¸º 0ï¼Œå³ä¸å­˜åœ¨ä¸­æ–­ã€‚ç›®å‰åœ¨æ ‡è®°ã€é‡å®šä½ã€å‚è€ƒå¤„ç†ã€ç±»å¸è½½å’Œè·Ÿå¤„ç†é˜¶æ®µåˆ é™¤å®‰å…¨ç‚¹å¤„ç†ã€‚ç›®å‰ ZGC ä¸­ä»ç„¶ä¾é å®‰å…¨ç‚¹æ‰§è¡Œçš„åŒ…æ‹¬éƒ¨åˆ†çš„æ ¹å¤„ç†å’Œæœ‰æ—¶é—´é™åˆ¶çš„æ ‡è®°ç»ˆæ­¢æ“ä½œã€‚è¿™äº›æ ¹å¤„ç†ä¸­æœ‰ä¸€é¡¹å°±æ˜¯ Java çº¿ç¨‹å †æ ˆå¤„ç†ã€‚éšç€çº¿ç¨‹æ•°é‡å¢åŠ ï¼Œåœé¡¿æ—¶é—´å¢é•¿ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å®ç°å¹¶å‘çš„å †æ ˆå¤„ç†ã€‚ç›®æ ‡åŒ…æ‹¬ï¼š</p><ul><li>ZGC çš„å®‰å…¨ç‚¹ä¸å†åŒ…å«çº¿ç¨‹å †æ ˆå¤„ç†ã€‚</li><li>ä½¿å †æ ˆå¤„ç†å˜å¾—æƒ°æ€§ã€åä½œã€å¹¶å‘å’Œå¢é‡ã€‚</li><li>ä» ZGC å®‰å…¨ç‚¹ä¸­åˆ é™¤æ‰€æœ‰å…¶ä»–çº¿ç¨‹æ ¹å¤„ç†ã€‚</li><li>æä¾›ä¸€ç§æœºåˆ¶ï¼Œå…¶ä»– HotSpot å­ç³»ç»Ÿï¼ˆå¦‚ Loom å’Œ JFRï¼‰å¯ä»¥é€šè¿‡è¯¥æœºåˆ¶æƒ°æ€§åœ°å¤„ç†å †æ ˆã€‚</li></ul><h2 id="æ”¯æŒ-Unix-å¥—æ¥å­—ï¼ˆJEP-380ï¼‰"><a href="#æ”¯æŒ-Unix-å¥—æ¥å­—ï¼ˆJEP-380ï¼‰" class="headerlink" title="æ”¯æŒ Unix å¥—æ¥å­—ï¼ˆJEP 380ï¼‰"></a>æ”¯æŒ Unix å¥—æ¥å­—ï¼ˆJEP 380ï¼‰</h2><p>å¯¹äºæœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼ŒUnix å¥—æ¥å­—æ¯” TCP/IP æ›´åŠ å®‰å…¨é«˜æ•ˆã€‚Unix å¥—æ¥å­—ä¸€ç›´æ˜¯å¤§å¤šæ•° Unix å¹³å°çš„ä¸€ä¸ªç‰¹æ€§ï¼Œç°åœ¨åœ¨ Windows 10 å’Œ Windows Server 2019 ä¹Ÿæä¾›äº†æ”¯æŒã€‚</p><p>æ‰€ä»¥åœ¨ Java16 ä¸­ä¸º<code>java.nio.channels</code>åŒ…çš„<code>SocketChannel</code>å’Œ<code>ServerSocketChannel</code>æ·»åŠ äº† Unixï¼ˆAF_UNIXï¼‰å¥—æ¥å­—æ”¯æŒã€‚Unix å¥—æ¥å­—ç”¨äºåŒä¸€ä¸»æœºä¸Šçš„è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰, åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šç±»ä¼¼äº TCP/IPï¼ŒåŒºåˆ«åœ¨äºå¥—æ¥å­—æ˜¯é€šè¿‡æ–‡ä»¶ç³»ç»Ÿè·¯å¾„åè€Œä¸æ˜¯ Internet åè®®ï¼ˆIPï¼‰åœ°å€å’Œç«¯å£å·å¯»å€çš„ã€‚å¯¹äºæœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼ŒUnix å¥—æ¥å­—æ¯” TCP/IP ç¯å›è¿æ¥æ›´å®‰å…¨ã€æ›´æœ‰æ•ˆã€‚</p><h2 id="Alpine-Linux-ç§»æ¤ã€Windows-AArch64-ç§»æ¤ï¼ˆJEP-386ã€JEP-388ï¼‰"><a href="#Alpine-Linux-ç§»æ¤ã€Windows-AArch64-ç§»æ¤ï¼ˆJEP-386ã€JEP-388ï¼‰" class="headerlink" title="Alpine Linux ç§»æ¤ã€Windows/AArch64 ç§»æ¤ï¼ˆJEP 386ã€JEP 388ï¼‰"></a>Alpine Linux ç§»æ¤ã€Windows/AArch64 ç§»æ¤ï¼ˆJEP 386ã€JEP 388ï¼‰</h2><p>è¿™äº›ç§»æ¤çš„ä»·å€¼ä¸åœ¨äºç§»æ¤æœ¬èº«ï¼Œè€Œåœ¨äºæ”¯æŒå¹³å°çš„å¤šæ ·æ€§ã€‚Java çš„å£å·æ˜¯ä¸€æ¬¡ç¼–å†™åˆ°å¤„è¿è¡Œã€‚æ—¢ç„¶è¦åˆ°å¤„è¿è¡Œï¼Œå°±å¾—æ”¯æŒå„ç§å¹³å°ã€‚è€Œä¸”ï¼Œé’ˆå¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿæ”¯æŒï¼Œè¿˜èƒ½ç»™æˆ‘ä»¬æä¾›æ›´å¤šçš„é€‰æ‹©ã€‚</p><p>Alpine Linux æ˜¯ä¸€ä¸ªç‹¬ç«‹éå•†ä¸šçš„ Linux å‘è¡Œç‰ˆï¼Œä½“ç³»éå¸¸å°ï¼Œä¸€ä¸ªå®¹å™¨éœ€è¦ä¸è¶…è¿‡ 8MB çš„ç©ºé—´ï¼Œç£ç›˜æœ€å°ä»…éœ€ 130MB å­˜å‚¨ã€‚å¦‚æœæˆ‘ä»¬é€šè¿‡ jlink ç”Ÿäº§ JDKï¼ŒDocket é•œåƒå¯ä»¥å‡å°åˆ° 38MBï¼Œè¿™æ ·åœ¨å¾®æœåŠ¡éƒ¨ç½²è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å‡å°‘å¾ˆå¤šç£ç›˜å ç”¨ï¼Œä¹Ÿèƒ½å‡å°‘é•œåƒä¼ è¾“ã€éƒ¨ç½²æ—¶é—´ã€‚</p><h2 id="å¼¹æ€§å…ƒç©ºé—´ï¼ˆJEP-387ï¼‰"><a href="#å¼¹æ€§å…ƒç©ºé—´ï¼ˆJEP-387ï¼‰" class="headerlink" title="å¼¹æ€§å…ƒç©ºé—´ï¼ˆJEP 387ï¼‰"></a>å¼¹æ€§å…ƒç©ºé—´ï¼ˆJEP 387ï¼‰</h2><p>è¿™æ˜¯åœ¨ HotSpot ä¸­çš„ç©ºé—´åˆ†é…ä¸Šçš„ä¼˜åŒ–ï¼Œå°†æœªä½¿ç”¨çš„å…ƒç©ºé—´ï¼ˆmetaspaceï¼Œä¹Ÿå«ç±»çš„å…ƒç©ºé—´ï¼‰ä¸­çš„å†…å®¹å­˜è¿”å›ç»™æ“ä½œç³»ç»Ÿã€‚</p><p>åº”ç”¨ç¨‹åºå¦‚æœå­˜åœ¨å¤§é‡ç±»åŠ è½½å’Œç±»å¸è½½çš„åŠ¨ä½œæ—¶ï¼Œä¼šå ç”¨å¤§é‡çš„å…ƒç©ºé—´å†…å­˜ï¼Œè¿™éƒ¨åˆ†å†…å­˜å¾—ä¸åˆ°é‡Šæ”¾ï¼Œé€ æˆå†…å­˜åˆ©ç”¨ç‡ä½ã€‚ç°åœ¨çš„åº”ç”¨ç³»ç»Ÿä¸ºäº†åº”å¯¹é«˜å¹¶å‘çš„æµé‡ï¼ŒåŠ¨è¾„éƒ¨ç½²æ•°åä¸Šç™¾å°å®ä¾‹ï¼Œè¿™å°†é€ æˆæå¤§çš„èµ„æºæµªè´¹ã€‚</p><p>å…ƒç©ºé—´çš„å†…å­˜æ–¹å¼ä½¿ç”¨çš„æ˜¯åŸºäºåŒºåŸŸçš„å†…å­˜ç®¡ç†æ–¹å¼ï¼ˆRegion-based memory managementï¼‰ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªåˆ†é…çš„å¯¹è±¡éƒ½è¢«åˆ†é…åˆ°ä¸€ä¸ªåŒºåŸŸä¸­ã€‚è¿™é‡Œçš„åŒºåŸŸæœ‰ä¸åŒçš„å«æ³•ï¼šzoneï¼ˆåŒºåŸŸï¼‰ã€arenaï¼ˆç«æŠ€åœºï¼‰ã€memory contextï¼ˆå†…å­˜ä¸Šä¸‹æ–‡ï¼‰ç­‰ã€‚</p><p>å½“ç±»è¢«å›æ”¶åï¼Œå…¶å…ƒç©ºé—´åŒºåŸŸä¸­çš„å†…å­˜å—ä¼šè¿”å›è‡ªç”±åˆ—è¡¨ä¸­ï¼Œä»¥ä¾¿ä»¥åé‡æ–°ä½¿ç”¨ã€‚å½“ç„¶ï¼Œå¯èƒ½å¾ˆé•¿ä½¿ç”¨ä¸ä¼šè¢«é‡æ–°ä½¿ç”¨ã€‚è¿™æ ·å°±ä¼šé€ æˆå…ƒç©ºé—´ä¸­å¾ˆå¤šçš„å†…å­˜ç¢ç‰‡ï¼Œè¿™äº›éƒ½æ˜¯è¢«æ ‡è®°ä¸ºå ç”¨çš„å†…å­˜ã€‚å¦‚æœæ²¡æœ‰ç¢ç‰‡çš„å†…å­˜ç©ºé—´ï¼Œæ˜¯å¯ä»¥è¿”å›ç»™æ“ä½œç³»ç»Ÿçš„ã€‚</p><p>åœ¨ JEP 387 ç‰¹æ€§ä¸­ï¼Œæå‡ºä½¿ç”¨åŸºäºä¼™ä¼´çš„å†…å­˜åˆ†é…ç®—æ³•ï¼ˆBuddy memory allocationï¼‰æ”¹å–„å…ƒç©ºé—´çš„å†…å­˜ä½¿ç”¨ï¼Œè¿™ç§æ–¹å¼æ˜¯ä¸€ç§åœ¨ Linux å†…æ ¸ä¸­ç»è¿‡éªŒè¯çš„æˆç†Ÿç®—æ³•ã€‚è¿™ç§ç®—æ³•æ˜¯åœ¨å¾ˆå°çš„å—ï¼ˆchunkï¼‰ä¸­åˆ†é…å†…å­˜ï¼Œè¿™ä¼šé™ä½ç±»åŠ è½½å™¨çš„å¼€é”€ã€‚</p><p>åŒæ—¶ï¼ŒJEP 387 å¢åŠ äº†å†…å­˜å»¶è¿Ÿæäº¤ç»™å†…å­˜åŒºåŸŸçš„ç‰¹æ€§ï¼Œè¿™æ ·å°±ä¼šå‡å°‘é‚£ç§ç”³è¯·äº†å†…å­˜å´ä¸ä½¿ç”¨çš„æƒ…å†µã€‚</p><p>æœ€åï¼ŒJEP 387 å°†å…ƒç©ºé—´çš„å†…å­˜åŒºåŸŸè®¾è®¡ä¸ºä¸åŒå¤§å°ï¼Œå¯ä»¥æ»¡è¶³ä¸åŒå¤§å°éœ€æ±‚çš„å†…å­˜ç”³è¯·ã€‚</p><p>è¿™äº›æ“ä½œä¸ Java13 ä¸­å¯¹ ZGC çš„å¢å¼ºç‰¹æ€§å¾ˆç±»ä¼¼ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a>ï¼‰ã€‚ä»–å±±ä¹‹çŸ³å¯ä»¥æ”»ç‰ï¼Œæˆ‘ä»¬ä¸å¦¨å­¦ä¹ ä¸€ä¸‹è¿™äº›æ–¹å¼ï¼Œå¯¹æˆ‘ä»¬åœ¨ä»¥åçš„å¼€å‘ä¸­æä¾›æ€è·¯ã€‚</p><h2 id="å¯¹åŸºäºå€¼çš„ç±»è®¾ç½®â€œå¼ƒç”¨ç§»é™¤â€è­¦å‘Šï¼ˆJEP-390ï¼‰"><a href="#å¯¹åŸºäºå€¼çš„ç±»è®¾ç½®â€œå¼ƒç”¨ç§»é™¤â€è­¦å‘Šï¼ˆJEP-390ï¼‰" class="headerlink" title="å¯¹åŸºäºå€¼çš„ç±»è®¾ç½®â€œå¼ƒç”¨ç§»é™¤â€è­¦å‘Šï¼ˆJEP 390ï¼‰"></a>å¯¹åŸºäºå€¼çš„ç±»è®¾ç½®â€œå¼ƒç”¨ç§»é™¤â€è­¦å‘Šï¼ˆJEP 390ï¼‰</h2><p>å°†åŸºäºå€¼çš„ç±»çš„å…¬å…±æ„é€ å‡½æ•°è®¾ç½®å¯ç”¨ç§»é™¤è­¦å‘Šã€‚</p><p>æ¯”å¦‚<code>Interger</code>çš„æ„é€ å‡½æ•°ä¸Šè®¾ç½®äº†<code>@Deprecated(since=&quot;9&quot;, forRemoval = true)</code>ã€‚å¦‚æœæŸä¸ªç±»ä½¿ç”¨äº†<code>Integer integer = new Integer(1);</code>è¿™ç§å†™æ³•ï¼Œé€šè¿‡<code>javac</code>å‘½ä»¤ç¼–è¯‘æ—¶ï¼Œä¼šæ”¶åˆ°<code>è­¦å‘Šï¼š[removal] Integer ä¸­çš„ Integer(int) å·²è¿‡æ—¶ï¼Œä¸”æ ‡è®°ä¸ºå¾…åˆ é™¤</code>è¿™ç§è­¦å‘Šä¿¡æ¯ã€‚</p><p>åŸºäºå€¼çš„ç±»åœ¨ç±»å®šä¹‰ä¸Šéƒ½ä¼šæœ‰<code>@jdk.internal.ValueBased</code>æ³¨è§£ï¼Œæ¯”å¦‚<code>java.lang.Integer</code>ã€<code>java.lang.Double</code>ç­‰ã€‚è¿™æ ·çš„æ”¹åŠ¨æ˜¯ä¸º Valhalla é¡¹ç›®åšå‡†å¤‡ã€‚</p><h2 id="æ‰“åŒ…å·¥å…·ï¼ˆJEP-392ï¼‰"><a href="#æ‰“åŒ…å·¥å…·ï¼ˆJEP-392ï¼‰" class="headerlink" title="æ‰“åŒ…å·¥å…·ï¼ˆJEP 392ï¼‰"></a>æ‰“åŒ…å·¥å…·ï¼ˆJEP 392ï¼‰</h2><p>æ‰“åŒ…å·¥å…·æ˜¯åœ¨ Java14 ä¸­å¼•å…¥çš„å­µåŒ–åŠŸèƒ½ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a>ï¼‰ï¼Œå¯ä»¥æ‰“åŒ…æˆè‡ªåŒ…å«çš„ Java åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚ Windows çš„ exe å’Œ msiã€Mac çš„ pkg å’Œ dmgã€Linux çš„ deb å’Œ rpm ç­‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>jlink</code>åˆ›å»ºä¸€ä¸ªæœ€å°å¯è¿è¡Œçš„æ¨¡å—åŒ…ï¼Œç„¶åä½¿ç”¨<code>jpackage</code>å°†å…¶æ„å»ºæˆå®‰è£…åŒ…ï¼š</p><pre><code class="shell">jpackage --name myapp --input lib --main-jar main.jar</code></pre><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œå› ä¸ºå·²ç»æˆä¸ºæ­£å¼åŠŸèƒ½ï¼Œæ¨¡å—åä»<code>jdk.incubator.jpackage</code>æ”¹ä¸º<code>jdk.jpackage</code>ã€‚</p><h2 id="instanceof-æ¨¡å¼åŒ¹é…ï¼ˆJEP-394ï¼‰"><a href="#instanceof-æ¨¡å¼åŒ¹é…ï¼ˆJEP-394ï¼‰" class="headerlink" title="instanceof æ¨¡å¼åŒ¹é…ï¼ˆJEP 394ï¼‰"></a>instanceof æ¨¡å¼åŒ¹é…ï¼ˆJEP 394ï¼‰</h2><p>instanceof æ¨¡å¼åŒ¹é…é¦–å…ˆåœ¨ Java14 ä¸­æä¾›é¢„è§ˆåŠŸèƒ½ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 ç‰¹æ€§</a>ï¼‰ï¼Œå¯ä»¥æä¾›<code>instanceof</code>æ›´åŠ ç®€æ´é«˜æ•ˆçš„å®ç°ï¼Œåœ¨ Java15 ä¸­è¿›è¡Œäº†ç¬¬äºŒæ¬¡é¢„è§ˆï¼Œç”¨äºæ”¶é›†åé¦ˆï¼Œç»ˆäºæ˜¯å¤šå¹´çš„åª³å¦‡ç†¬æˆå©†ï¼Œåœ¨ Java16 ä¸­æˆä¸ºæ­£å¼åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬å†ç®€å•å¤ä¹ ä¸€ä¸‹<code>instanceof</code>æ¨¡å¼åŒ¹é…çš„åŠŸèƒ½ï¼ˆè¯¦ç»†ä½¿ç”¨å¯ä»¥ç§»æ­¥ <a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 ç‰¹æ€§</a>ï¼‰ï¼š</p><pre><code class="java">@Testvoid test1() {    final Object obj1 = &quot;Hello, World!&quot;;    int result = 0;    if (obj1 instanceof String str) {        result = str.length();    } else if (obj1 instanceof Number num) {        result = num.intValue();    }    Assertions.assertEquals(13, result);}</code></pre><h2 id="Record-ç±»å‹ï¼ˆJEP-395ï¼‰"><a href="#Record-ç±»å‹ï¼ˆJEP-395ï¼‰" class="headerlink" title="Record ç±»å‹ï¼ˆJEP 395ï¼‰"></a>Record ç±»å‹ï¼ˆJEP 395ï¼‰</h2><p>Record ç±»å‹ç”¨æ¥å¢å¼º Java è¯­è¨€ç‰¹æ€§ï¼Œå……å½“ä¸å¯å˜æ•°æ®è½½ä½“ã€‚ä¸ instanceof æ¨¡å¼åŒ¹é…ä¸€æ ·ï¼ŒRecord ç±»å‹ä¹Ÿæ˜¯åœ¨ Java14 ä¸­æä¾›é¢„è§ˆåŠŸèƒ½ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 æ–°ç‰¹æ€§</a>ï¼‰ï¼Œåœ¨ Java15 ä¸­è¿›è¡Œäº†ç¬¬äºŒæ¬¡é¢„è§ˆï¼Œç”¨äºæ”¶é›†åé¦ˆã€‚</p><p>æˆ‘ä»¬å†ç®€å•å¤ä¹ ä¸€ä¸‹ Record ç±»å‹çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>Person</code>ç±»ï¼š</p><pre><code class="java">public record Person(String name, String address) {}</code></pre><p>æˆ‘ä»¬è½¬æ¢ä¸ºä¹‹å‰çš„å®šä¹‰ä¼šæ˜¯ä¸€å¨ä¸‹é¢è¿™ç§ä»£ç ï¼š</p><pre><code class="java">public final class PersonBefore14 {    private final String name;    private final String address;    public PersonBefore14(String name, String address) {        this.name = name;        this.address = address;    }    public String name() {        return name;    }    public String address() {        return address;    }    @Override    public boolean equals(Object o) {        if (this == o) {            return true;        }        if (o == null || getClass() != o.getClass()) {            return false;        }        PersonBefore14 that = (PersonBefore14) o;        return Objects.equals(name, that.name) &amp;&amp; Objects.equals(address, that.address);    }    @Override    public int hashCode() {        return Objects.hash(name, address);    }    @Override    public String toString() {        return &quot;PersonBefore14{&quot; +                &quot;name=&#39;&quot; + name + &#39;\&#39;&#39; +                &quot;, address=&#39;&quot; + address + &#39;\&#39;&#39; +                &#39;}&#39;;    }}</code></pre><p>Record ç±»å‹ç‰¹æ€§æœ‰å››ä¸ªç‰¹æ€§ï¼š</p><ol><li>è®¾è®¡ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç»“æ„ï¼Œè¡¨è¾¾ç®€å•çš„ä¿¡æ¯èšåˆï¼›</li><li>å¸®åŠ©å¼€å‘äººå‘˜ä¸“æ³¨äºå»ºæ¨¡ä¸å¯å˜æ•°æ®ï¼Œè€Œä¸æ˜¯å¯æ‰©å±•çš„è¡Œä¸ºï¼›</li><li>è‡ªåŠ¨å®ç°æ•°æ®é©±åŠ¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚<code>equals</code>ã€<code>getter</code>ã€<code>setter</code>ç­‰æ–¹æ³•ï¼›</li><li>ä¿ç•™é•¿æœŸå­˜åœ¨çš„ Java è§„èŒƒï¼Œæ¯”å¦‚è¿ç§»å…¼å®¹æ€§ã€‚</li></ol><p>æˆ‘ä»¬ä¸èƒ½å°† Record ç±»å‹ç®€å•çš„ç†è§£ä¸ºå»é™¤â€œæ ·æ¿åŒ–â€ä»£ç çš„åŠŸèƒ½ï¼Œå®ƒä¸æ˜¯è§£å†³ JavaBean å‘½åçº¦å®šçš„ä¸­å¾ˆå¤šæ¨¡æ¿åŒ–æ–¹æ³•çš„å†—ä½™ç¹æ‚é—®é¢˜ï¼Œå®ƒçš„ç›®æ ‡ä¸æ˜¯ç±»ä¼¼ Lombok ç­‰å·¥å…·è‡ªåŠ¨ç”Ÿæˆä»£ç çš„åŠŸèƒ½ï¼Œæ˜¯ä»å¼€å‘äººå‘˜ä¸“æ³¨æ¨¡å‹çš„è§’åº¦å‡ºå‘çš„ã€‚</p><h2 id="é»˜è®¤å¼ºå°è£…-JDK-å†…éƒ¨å…ƒç´ ï¼ˆJEP-396ï¼‰"><a href="#é»˜è®¤å¼ºå°è£…-JDK-å†…éƒ¨å…ƒç´ ï¼ˆJEP-396ï¼‰" class="headerlink" title="é»˜è®¤å¼ºå°è£… JDK å†…éƒ¨å…ƒç´ ï¼ˆJEP 396ï¼‰"></a>é»˜è®¤å¼ºå°è£… JDK å†…éƒ¨å…ƒç´ ï¼ˆJEP 396ï¼‰</h2><p>è¿™ä¸ªåŠŸèƒ½ç‰¹æ€§æ˜¯ä¸ºäº†æ”¹è¿› JDK çš„å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæ˜¯ Jigsaw é¡¹ç›®çš„ä¸»è¦ç›®æ ‡ä¹‹ä¸€ã€‚æ‰€ä»¥åœ¨ Java16 ä¸­ï¼Œé»˜è®¤å¼ºå°è£… JDK çš„ç»å¤§éƒ¨åˆ†å†…éƒ¨ APIï¼Œæœ‰äº›å…³é”®æ€§çš„ APIï¼Œæ¯”å¦‚<code>sun.misc.Unsafe</code>æš‚æ—¶å¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¯åŠ¨å‚æ•°<code>--illegal-access</code>æ§åˆ¶å†…éƒ¨ API çš„å°è£…ç¨‹åº¦ï¼š</p><ul><li><code>--illegal-access=permit</code>ï¼šJDK 8 ä¸­å­˜åœ¨çš„æ¯ä¸ªåŒ…å¯¹æœªå‘½åæ¨¡å—ä¸­çš„ä»£ç å¼€æ”¾ã€‚ä¹Ÿå°±æ˜¯æ”¾å¿ƒå¤§èƒ†åœ°ä½¿ç”¨ã€‚Java9 ä¸­é»˜è®¤å°±æ˜¯è¿™ä¸ªç­‰çº§ï¼›</li><li><code>--illegal-access=warn</code>ï¼šä¸è®¸å¯ç›¸åŒï¼Œä¸åŒä¹‹å¤„åœ¨äºæ¯æ¬¡éæ³•åå°„è®¿é—®æ“ä½œéƒ½ä¼šå‘å‡ºè­¦å‘Šæ¶ˆæ¯ï¼›</li><li><code>--illegal-access=debug</code>ï¼šä¸ warn ç›¸åŒï¼Œä¸åŒçš„æ˜¯ï¼Œæ¯ä¸ªéæ³•åå°„è®¿é—®æ“ä½œéƒ½ä¼šå‘å‡ºè­¦å‘Šæ¶ˆæ¯å’Œå †æ ˆè·Ÿè¸ªï¼›</li><li><code>--illegal-access=deny</code>ï¼šç¦ç”¨æ‰€æœ‰éæ³•è®¿é—®æ“ä½œï¼Œä½†ç”±å…¶ä»–å‘½ä»¤è¡Œé€‰é¡¹ï¼ˆä¾‹å¦‚<code>--add-opens</code>ï¼‰å¯ç”¨çš„æ“ä½œé™¤å¤–ã€‚</li></ul><h2 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h2><h3 id="å¯†å°ç±»-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP-397ï¼‰"><a href="#å¯†å°ç±»-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP-397ï¼‰" class="headerlink" title="å¯†å°ç±»-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP 397ï¼‰"></a>å¯†å°ç±»-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP 397ï¼‰</h3><p>å¯†å°ç±»é¦–æ¬¡åœ¨ Java15 ä¸­é¢„è§ˆï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 æ–°ç‰¹æ€§</a>ï¼‰ï¼Œåœ¨ Java16 ä¸­è¿›è¡Œç¬¬äºŒæ¬¡é¢„è§ˆï¼Œæˆ‘ä»¬åœ¨å¤ä¹ ä¸€ä¸‹åŠŸèƒ½ï¼š</p><pre><code class="java">public sealed interface JungleAnimal permits Monkey, Snake  {}public final class Monkey implements JungleAnimal {}public non-sealed class Snake implements JungleAnimal {}</code></pre><p><code>sealed</code>å…³é”®å­—ä¸<code>permits</code>å…³é”®å­—ç»“åˆä½¿ç”¨ï¼Œä»¥ç¡®å®šå…è®¸å“ªäº›ç±»å®ç°æ­¤æ¥å£ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæ˜¯<code>Monkey</code>å’Œ<code>Snake</code>ã€‚</p><ul><li><code>sealed</code>ï¼šå¿…é¡»ä½¿ç”¨<code>permits</code>å…³é”®å­—å®šä¹‰å…è®¸ç»§æ‰¿çš„å­ç±»ï¼›</li><li><code>final</code>ï¼šæœ€ç»ˆç±»ï¼Œä¸å†æœ‰å­ç±»ï¼›</li><li><code>non-sealed</code>ï¼šæ™®é€šç±»ï¼Œä»»ä½•ç±»éƒ½å¯ä»¥ç»§æ‰¿å®ƒã€‚</li></ul><h2 id="å­µåŒ–"><a href="#å­µåŒ–" class="headerlink" title="å­µåŒ–"></a>å­µåŒ–</h2><h3 id="å‘é‡-APIï¼ˆJEP-338ï¼‰"><a href="#å‘é‡-APIï¼ˆJEP-338ï¼‰" class="headerlink" title="å‘é‡ APIï¼ˆJEP 338ï¼‰"></a>å‘é‡ APIï¼ˆJEP 338ï¼‰</h3><p>è¿™æ˜¯ä¸ºå‘é‡è®¡ç®—ä¸“é—¨å®šä¹‰çš„ APIï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶å¯é åœ°ç¼–è¯‘ä¸ºæ”¯æŒçš„ CPU æ¶æ„ä¸Šçš„æœ€ä½³å‘é‡ç¡¬ä»¶æŒ‡ä»¤ï¼Œä»è€Œè·å¾—ä¼˜äºåŒç­‰æ ‡é‡è®¡ç®—çš„æ€§èƒ½ï¼Œå……åˆ†åˆ©ç”¨å•æŒ‡ä»¤å¤šæ•°æ®ï¼ˆSIMDï¼‰æŠ€æœ¯ï¼ˆå¤§å¤šæ•°ç°ä»£ CPU ä¸Šéƒ½å¯ä»¥ä½¿ç”¨çš„ä¸€ç§æŒ‡ä»¤ï¼‰ã€‚è¯¥ API å°†ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè½»æ¾åœ°ç”¨ Java ç¼–å†™å¯ç§»æ¤çš„é«˜æ€§èƒ½å‘é‡ç®—æ³•ã€‚</p><p>å°½ç®¡ HotSpot æ”¯æŒè‡ªåŠ¨å‘é‡åŒ–ï¼Œä½†æ˜¯å¯è½¬æ¢çš„æ ‡é‡æ“ä½œé›†æœ‰é™ä¸”æ˜“å—ä»£ç æ›´æ”¹çš„å½±å“ã€‚</p><pre><code class="java">final int[] a = {1, 2, 3, 4};final int[] b = {5, 6, 7, 8};final int[] c = new int[3];IntVector vectorA = IntVector.fromArray(IntVector.SPECIES_128, a, 0);IntVector vectorB = IntVector.fromArray(IntVector.SPECIES_128, b, 0);IntVector vectorC = vectorA.mul(vectorB);vectorC.intoArray(c, 0);</code></pre><p>è¿™ä¸ªåŠŸèƒ½åœ¨ Java17 ä¸­è¿›è¡Œäº†ç¬¬äºŒæ¬¡å­µåŒ–ï¼ŒåŸºäºä½¿ç”¨å®‰å…¨çš„è€ƒè™‘ï¼Œæˆ‘ä»¬åœ¨çŸ­æ—¶é—´å†…ç”¨ä¸ä¸Šè¿™ä¸ªç‰¹æ€§äº†ã€‚</p><h3 id="å¤–éƒ¨é“¾æ¥å™¨-APIï¼ˆJEP-389ï¼‰"><a href="#å¤–éƒ¨é“¾æ¥å™¨-APIï¼ˆJEP-389ï¼‰" class="headerlink" title="å¤–éƒ¨é“¾æ¥å™¨ APIï¼ˆJEP 389ï¼‰"></a>å¤–éƒ¨é“¾æ¥å™¨ APIï¼ˆJEP 389ï¼‰</h3><p>è¿™ä¸ªç‰¹æ€§æä¾›äº†é™æ€ç±»å‹ã€çº¯ Java è®¿é—®åŸç”Ÿä»£ç çš„ APIï¼Œå¤§å¤§ç®€åŒ–ç»‘å®šåŸç”Ÿåº“çš„åŸæœ¬å¤æ‚ä¸”å®¹æ˜“å‡ºé”™çš„è¿‡ç¨‹ã€‚ä» Java1.1 å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŸç”Ÿæ¥å£ï¼ˆJNIï¼‰è°ƒç”¨åŸç”Ÿæ–¹æ³•ï¼Œä½†æ˜¯å¹¶ä¸å¥½ç”¨ï¼Œç°åœ¨æä¾›äº†å¤–éƒ¨é“¾æ¥å™¨ APIï¼Œå¯ä»¥ä¸å†ä½¿ç”¨ JNI ç²˜åˆä»£ç äº†ã€‚</p><p>å’Œå‘é‡ API ä¸€æ ·ï¼Œæš‚æ—¶ç”¨ä¸ä¸Šäº†ï¼Œç­‰å•¥æ—¶å€™è½¬æ­£äº†ï¼Œå’±ä»¬é‡ç‚¹è¯´è¯´æ€ä¹ˆç©ã€‚</p><h3 id="å¤–éƒ¨å­˜å‚¨å™¨è®¿é—®-API-å­µåŒ–ç¬¬ä¸‰ç‰ˆï¼ˆJEP-393ï¼‰"><a href="#å¤–éƒ¨å­˜å‚¨å™¨è®¿é—®-API-å­µåŒ–ç¬¬ä¸‰ç‰ˆï¼ˆJEP-393ï¼‰" class="headerlink" title="å¤–éƒ¨å­˜å‚¨å™¨è®¿é—® API-å­µåŒ–ç¬¬ä¸‰ç‰ˆï¼ˆJEP 393ï¼‰"></a>å¤–éƒ¨å­˜å‚¨å™¨è®¿é—® API-å­µåŒ–ç¬¬ä¸‰ç‰ˆï¼ˆJEP 393ï¼‰</h3><p>å¤–éƒ¨å­˜å‚¨å™¨è®¿é—® API åœ¨ Java14 å¼€å§‹å­µåŒ–ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 æ–°ç‰¹æ€§</a>ï¼‰ï¼Œåœ¨ Java15 ä¸­å­µåŒ–ç¬¬äºŒç‰ˆï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 æ–°ç‰¹æ€§</a>ï¼‰ï¼Œåœ¨ Java16 ä¸­è¿›è¡Œç¬¬ä¸‰ç‰ˆå­µåŒ–ã€‚</p><p>å¤–éƒ¨å­˜å‚¨å™¨è®¿é—® API ä½¿ Java ç¨‹åºèƒ½å¤Ÿå®‰å…¨æœ‰æ•ˆåœ°å¯¹å„ç§å¤–éƒ¨å­˜å‚¨å™¨ï¼ˆä¾‹å¦‚æœ¬æœºå­˜å‚¨å™¨ã€æŒä¹…æ€§å­˜å‚¨å™¨ã€æ‰˜ç®¡å †å­˜å‚¨å™¨ç­‰ï¼‰è¿›è¡Œæ“ä½œã€‚å¤–éƒ¨å†…å­˜é€šå¸¸æ˜¯è¯´é‚£äº›ç‹¬ç«‹ JVM ä¹‹å¤–çš„å†…å­˜åŒºåŸŸï¼Œå¯ä»¥ä¸å— JVM åƒåœ¾æ”¶é›†çš„å½±å“ï¼Œé€šå¸¸èƒ½å¤Ÿå¤„ç†è¾ƒå¤§çš„å†…å­˜ã€‚</p><p>è¿™æ¬¡å¸¦æ¥çš„ç‰¹æ€§åŒ…æ‹¬ï¼š</p><ul><li><code>MemorySegment</code>å’Œ<code>MemoryAddress</code>æ¥å£ä¹‹é—´æ›´åŠ æ¸…æ™°çš„èŒè´£åˆ†ç¦»ï¼›</li><li>å¢åŠ äº†æ–°æ¥å£<code>MemoryAccess</code>ï¼Œæä¾›äº†å¸¸è§çš„é™æ€å†…å­˜è®¿é—®å™¨ï¼Œä»¥ä¾¿åœ¨ç®€å•çš„æƒ…å†µä¸‹å°½é‡å‡å°‘å¯¹<code>VarHandle</code> çš„éœ€æ±‚ï¼›</li><li>æ”¯æŒå…±äº« segmentsï¼Œå¹¶æä¾›å‘æ¸…ç†å™¨æ³¨å†Œ segments çš„èƒ½åŠ›ã€‚</li></ul><p>è¿™äº›æ–°çš„ API è™½ç„¶ä¸ä¼šç›´æ¥å½±å“å¤šæ•°çš„åº”ç”¨ç±»å¼€å‘äººå‘˜ï¼Œä½†æ˜¯ä»–ä»¬å¯ä»¥åœ¨å†…å­˜çš„ç¬¬ä¸‰æ–¹åº“ä¸­æä¾›æ”¯æŒï¼ŒåŒ…æ‹¬åˆ†å¸ƒå¼ç¼“å­˜ã€éç»“æ„åŒ–æ–‡æ¡£å­˜å‚¨ã€å¤§å‹å­—èŠ‚ç¼“å†²åŒºã€å†…å­˜æ˜ å°„æ–‡ä»¶ç­‰ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java16 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä» <a href="https://openjdk.java.net/projects/jdk/16/" target="_blank" rel="noopener">https://openjdk.java.net/projects/jdk/16/</a> æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-16-features/">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava16 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/124264210" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava16 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      Java16 æ˜¯åœ¨ 2021 å¹´ 3 æœˆå‘å¸ƒçš„ä¸€ä¸ªçŸ­æœŸç‰ˆæœ¬ï¼Œæ–°å¢ç‰¹æ€§å¦‚ä¸‹ï¼šJEP 338ï¼šå‘é‡ APIï¼ˆå­µåŒ–åŠŸèƒ½ï¼‰ã€JEP 347ï¼šå¯ç”¨ C++ 14 è¯­è¨€ç‰¹æ€§ã€JEP 357ï¼šä» Mercurial è¿ç§»åˆ° Gitã€JEP 369ï¼šè¿ç§»åˆ° GitGitHubã€JEP 376ï¼šZGC çš„å¹¶å‘çº¿ç¨‹å †æ ˆå¤„ç†ã€JEP 380ï¼šæ”¯æŒ Unix å¥—æ¥å­—ã€JEP 386ï¼šAlpine Linux ç§»æ¤ã€JEP 387ï¼šå¼¹æ€§å…ƒç©ºé—´ã€JEP 388ï¼šWindows/AArch64 ç§»æ¤ã€JEP 389ï¼šå¤–éƒ¨é“¾æ¥å™¨ APIï¼ˆå­µåŒ–åŠŸèƒ½ï¼‰ã€JEP 390ï¼šå¯¹åŸºäºå€¼çš„ç±»è®¾ç½®â€œå¼ƒç”¨ç§»é™¤â€è­¦å‘Šã€JEP 392ï¼šæ‰“åŒ…å·¥å…·ã€JEP 393ï¼šå¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆç¬¬ä¸‰ç‰ˆå­µåŒ–åŠŸèƒ½ï¼‰ã€JEP 394ï¼šinstanceof æ¨¡å¼åŒ¹é…ã€JEP 395ï¼šRecord ç±»å‹ã€JEP 396ï¼šé»˜è®¤å¼ºå°è£… JDK å†…éƒ¨å…ƒç´ ã€JEP 397ï¼šå¯†å°ç±»ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆåŠŸèƒ½ï¼‰ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java16" scheme="https://www.howardliu.cn/tags/Java16/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava15 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java-15-features/"/>
    <id>https://www.howardliu.cn/java-15-features/</id>
    <published>2022-03-07T14:04:28.000Z</published>
    <updated>2022-03-07T14:04:28.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/eyes-5248678_1920.jpeg" alt="Java15 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚ä» <a href="https://res.cloudinary.com/snyk/image/upload/v1623860216/reports/jvm-ecosystem-report-2021.pdf" target="_blank" rel="noopener">ã€ŠJVM Ecosystem Report 2021ã€‹</a> ä¸­å¯ä»¥çœ‹å‡ºï¼Œç›®å‰å¼€å‘ç¯å¢ƒä¸­æœ‰è¿‘åŠçš„ç¯å¢ƒä½¿ç”¨ Java8ï¼Œæœ‰è¿‘åŠçš„äººè½¬ç§»åˆ°äº† Java11ï¼Œéšç€ Java17 çš„å‘å¸ƒï¼Œç›¸ä¿¡æ¯”ä¾‹ä¼šæœ‰æ‰€å˜åŒ–ã€‚</p><p>å› æ­¤ï¼Œå‡†å¤‡å‡ºä¸€ä¸ªç³»åˆ—ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œé˜è¿°å„ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Java15 æ˜¯åœ¨ 2020 å¹´ 9 æœˆå‘å¸ƒçš„ä¸€ä¸ªçŸ­æœŸç‰ˆæœ¬ï¼Œæ–°å¢ç‰¹æ€§å¦‚ä¸‹ï¼š</p><ul><li>JEP 339ï¼šEdwards-Curve æ•°å­—ç­¾åç®—æ³•</li><li>JEP 360ï¼šå¯†å°çš„ç±»å’Œæ¥å£ï¼ˆé¢„è§ˆåŠŸèƒ½ï¼‰</li><li>JEP 371ï¼šéšè—ç±»</li><li>JEP 372ï¼šç§»é™¤ Nashorn JavaScript å¼•æ“</li><li>JEP 373ï¼šé‡æ–°å®ç° DatagramSocket æ¥å£</li><li>JEP 374ï¼šç¦ç”¨åå‘é”</li><li>JEP 375ï¼šinstanceof åŒ¹é…æ¨¡å¼ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆåŠŸèƒ½ï¼‰</li><li>JEP 377ï¼šZGCï¼šå¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨</li><li>JEP 378ï¼šæ–‡æœ¬å—</li><li>JEP 379ï¼šShenandoahï¼šä½æš‚åœæ—¶é—´åƒåœ¾æ”¶é›†å™¨</li><li>JEP 381ï¼šç§»é™¤ Solaris å’Œ SPARC ç«¯å£ API</li><li>JEP 383ï¼šå¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆç¬¬äºŒç‰ˆå­µåŒ–åŠŸèƒ½ï¼‰</li><li>JEP 384ï¼šRecord ç±»å‹ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆåŠŸèƒ½ï¼‰</li><li>JEP 385ï¼šåºŸé™¤ RMI Activation</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚</p><h2 id="Edwards-Curve-æ•°å­—ç­¾åç®—æ³•ï¼ˆJEP-339ï¼‰"><a href="#Edwards-Curve-æ•°å­—ç­¾åç®—æ³•ï¼ˆJEP-339ï¼‰" class="headerlink" title="Edwards-Curve æ•°å­—ç­¾åç®—æ³•ï¼ˆJEP 339ï¼‰"></a>Edwards-Curve æ•°å­—ç­¾åç®—æ³•ï¼ˆJEP 339ï¼‰</h2><p>Edwards-Curve æ•°å­—ç­¾åç®—æ³•ï¼ˆEdDSAï¼‰ï¼Œä¸€ç§æ ¹æ® RFC 8032 è§„èŒƒæ‰€æè¿°çš„ Edwards-Curve æ•°å­—ç­¾åç®—æ³•ï¼ˆEdDSAï¼‰å®ç°åŠ å¯†ç­¾åã€‚</p><p>EdDSA æ˜¯ä¸€ç§ç°ä»£çš„æ¤­åœ†æ›²çº¿æ–¹æ¡ˆï¼Œä¸ JDK ä¸­çš„ç°æœ‰ç­¾åæ–¹æ¡ˆç›¸æ¯”ï¼ŒEdDSA å…·æœ‰æ›´é«˜çš„å®‰å…¨æ€§å’Œæ€§èƒ½ï¼Œå› æ­¤å¤‡å—å…³æ³¨ã€‚å®ƒå·²ç»åœ¨ OpenSSL å’Œ BoringSSL ç­‰åŠ å¯†åº“ä¸­å¾—åˆ°æ”¯æŒï¼Œç›®å‰åœ¨åŒºå—é“¾é¢†åŸŸç”¨çš„æ¯”è¾ƒå¤šã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹å®˜æ–¹ç»™çš„ä¾‹å­ï¼š</p><pre><code class="java">byte[] msg = &quot;Hello, World!&quot;.getBytes(StandardCharsets.UTF_8);// example: generate a key pair and signKeyPairGenerator kpg = KeyPairGenerator.getInstance(&quot;Ed25519&quot;);KeyPair kp = kpg.generateKeyPair();// algorithm is pure Ed25519Signature sig = Signature.getInstance(&quot;Ed25519&quot;);sig.initSign(kp.getPrivate());sig.update(msg);System.out.println(Hex.encodeHexString(sig.sign()));// example: use KeyFactory to contruct a public keyKeyFactory kf = KeyFactory.getInstance(&quot;EdDSA&quot;);NamedParameterSpec paramSpec = new NamedParameterSpec(&quot;Ed25519&quot;);EdECPublicKeySpec pubSpec = new EdECPublicKeySpec(paramSpec, new EdECPoint(true, new BigInteger(&quot;1&quot;)));PublicKey pubKey = kf.generatePublic(pubSpec);System.out.println(pubKey.getAlgorithm());System.out.println(Hex.encodeHexString(pubKey.getEncoded()));System.out.println(pubKey.getFormat());</code></pre><p>ä¾‹å­ä¸­ Ed25519 æ˜¯ä½¿ç”¨ SHA-512ï¼ˆSHA-2ï¼‰å’Œ Curve25519 çš„ EdDSA ç­¾åæ–¹æ¡ˆã€‚æ—¨åœ¨æä¾›ä¸é«˜è´¨é‡ 128 ä½å¯¹ç§°å¯†ç ç›¸å½“çš„æŠ—æ”»å‡»èƒ½åŠ›ï¼Œå…¬é’¥é•¿åº¦ä¸º 256 ä½ï¼Œç­¾åé•¿åº¦ä¸º 512 ä½ã€‚</p><h2 id="éšè—ç±»ï¼ˆJEP-371ï¼‰"><a href="#éšè—ç±»ï¼ˆJEP-371ï¼‰" class="headerlink" title="éšè—ç±»ï¼ˆJEP 371ï¼‰"></a>éšè—ç±»ï¼ˆJEP 371ï¼‰</h2><p>Java15 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ç‰¹æ€§ï¼šéšè—ç±»ï¼ˆHidden Classesï¼‰ï¼Œä¸€ä¸ªä¸“ä¸ºæ¡†æ¶è€Œè®¾è®¡çš„ç‰¹æ€§ã€‚å¤§å¤šæ•°å¼€å‘äººå‘˜ä¸ä¼šç›´æ¥ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡åŠ¨æ€å­—èŠ‚ç æˆ– JVM è¯­è¨€æ¥ä½¿ç”¨éšè—ç±»ã€‚</p><p>éšè—ç±»æœ‰ä¸‹é¢ä¸‰ä¸ªç‰¹ç‚¹ï¼š</p><ol><li>ä¸å¯å‘ç°ï¼šåœ¨è¿è¡Œæ—¶ç”Ÿæˆå†…éƒ¨ç±»å¯¹è±¡ï¼›</li><li>è®¿é—®æ§åˆ¶ï¼šåªèƒ½é€šè¿‡åå°„è®¿é—®ï¼Œä¸èƒ½ç›´æ¥è¢«å…¶ä»–å­—èŠ‚ç è®¿é—®ï¼›</li><li>è¾ƒçŸ­çš„ç”Ÿå‘½å‘¨æœŸï¼šå¯ç‹¬ç«‹äºå…¶ä»–ç±»åŠ è½½ã€å¸è½½ï¼Œä¸”æ•ˆç‡å¾ˆé«˜ï¼Œèƒ½å¤Ÿå‡å°‘æ¡†æ¶çš„å†…å­˜å ç”¨ã€‚</li></ol><p>éšè—ç±»çš„åŠŸèƒ½ç‰¹æ€§è¿˜æ˜¯æ¯”è¾ƒæœ‰æ„æ€çš„ï¼Œä¼šæ¶‰åŠç±»åŠ è½½ã€å¸è½½ã€ä¸å¯è§ã€åå°„ç­‰å¾ˆå¤šå†…å®¹ï¼Œåç»­ä¼šå¼€æ–‡å•ç‹¬èŠï¼Œæ–‡ç« ä¼šæ”¾åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ä¸“æ ä¸­ã€‚</p><h2 id="é‡æ–°å®ç°-DatagramSocket-æ¥å£ï¼ˆJEP-373ï¼‰"><a href="#é‡æ–°å®ç°-DatagramSocket-æ¥å£ï¼ˆJEP-373ï¼‰" class="headerlink" title="é‡æ–°å®ç° DatagramSocket æ¥å£ï¼ˆJEP 373ï¼‰"></a>é‡æ–°å®ç° DatagramSocket æ¥å£ï¼ˆJEP 373ï¼‰</h2><p>è€çš„ DatagramSocket API åœ¨ Java15 ä¸­è¢«é‡å†™ï¼Œæ˜¯ç»§ Java14 é‡å†™ Socket API çš„åç»­ä¸èµ°ã€‚è¿™ä¸ªç‰¹æ€§æ˜¯ Loom é¡¹ç›®çš„å…ˆå†³æ¡ä»¶ã€‚</p><p>ç›®å‰ï¼Œ<code>DatagramSocket</code>å’Œ<code>MulticastSocket</code>å°†æ‰€æœ‰çš„å¥—æ¥å­—å§”æ‰˜ä¸º<code>java.net.DatagramSocketImpl</code>çš„å®ç°ï¼Œæ ¹æ®ä¸åŒçš„å¹³å°ï¼ŒUnix å¹³å°ä½¿ç”¨<code>PlainDatagramSocketImpl</code>ï¼ŒWindows å¹³å°ä½¿ç”¨<code>TwoStackPlainDatagramSocketImpl</code>å’Œ<code>DualPlainDatagramSocketImpl</code>ã€‚æŠ½è±¡ç±»<code>DatagramSocketImpl</code>æ˜¯ Java1.1 æä¾›çš„ï¼ŒåŠŸèƒ½å¾ˆå°‘ä¸”æœ‰ä¸€äº›è¿‡æ—¶æ–¹æ³•ï¼Œé˜»ç¢äº† NOI çš„å®ç°ã€‚</p><p>ç±»ä¼¼äº Java14 ä¸­å¯¹ Socket API çš„é‡å†™ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 æ–°ç‰¹æ€§</a>ï¼‰ï¼Œä¼šåœ¨<code>DatagramSocket</code>å†…éƒ¨å°è£…ä¸€ä¸ª<code>DatagramSocket</code>å®ä¾‹ï¼Œå°†æ‰€æœ‰è°ƒç”¨ç›´æ¥å§”æ‰˜ç»™è¯¥å®ä¾‹ã€‚åŒ…è£…å®ä¾‹æˆ–è€…ä½¿ç”¨ NIO çš„<code>DatagramChannel::socket</code>åˆ›å»ºå¥—æ¥å­—ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨åŸå§‹<code>DatagramSocket</code>ç±»çš„å®ç°<code>DatagramSocketImpl</code>å®ç°åŠŸèƒ½ï¼ˆç”¨äºå®ç°å‘åå…¼å®¹ï¼‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹æ–°çš„ä¾èµ–å›¾ï¼š</p><p><img src="https://static.howardliu.cn/java/ReimplementDS.png" alt="DatagramSocket"></p><h2 id="ç¦ç”¨åå‘é”ï¼ˆJEP-374ï¼‰"><a href="#ç¦ç”¨åå‘é”ï¼ˆJEP-374ï¼‰" class="headerlink" title="ç¦ç”¨åå‘é”ï¼ˆJEP 374ï¼‰"></a>ç¦ç”¨åå‘é”ï¼ˆJEP 374ï¼‰</h2><p>åœ¨ Java15 ä¸­ï¼Œé»˜è®¤ç¦ç”¨åå‘é”ï¼Œå¼ƒç”¨äº†æ‰€æœ‰ç›¸å…³å‘½ä»¤è¡Œé€‰é¡¹ã€‚</p><p>åå‘é”æ˜¯ HotSpot ä¸­ä¸€ç§ç”¨äºå‡å°‘éç«äº‰é”å®šå¼€é”€çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œä¸è¿‡åœ¨å¦‚ä»Šçš„åº”ç”¨ç¨‹åºä¸­ï¼Œä¼˜åŒ–å¢ç›Šä¸å¤ªæ˜æ˜¾äº†ã€‚</p><p>æ ¹æ®å®˜æ–¹è¯´æ³•ï¼Œä½¿ç”¨åå‘é”å¢ç›Šæœ€å¤šçš„æ˜¯å¤§é‡ä½¿ç”¨æ—©æœŸåŒæ­¥ç»„ä»¶ï¼ˆæ¯”å¦‚<code>Hashtable</code>ã€<code>Vector</code>ç­‰ï¼‰ï¼Œéšç€æ–°çš„ API å®ç°å’Œé’ˆå¯¹å¤šçº¿ç¨‹åœºæ™¯å¼•å…¥çš„æ”¯æŒå¹¶å‘çš„æ•°æ®ç»“æ„ï¼Œåå‘é”çš„é”å®šåŠæ’¤é”€ï¼Œä¼šå¸¦æ¥æ€§èƒ½çš„å¼€é”€ï¼Œä»è€Œæ˜¯ä¼˜åŒ–æ”¶ç›Šé™ä½ã€‚</p><p>è€Œä¸”éšç€è¶Šæ¥è¶Šå¤šçš„åŠŸèƒ½ç‰¹æ€§å¼•å…¥ï¼Œåå‘é”åœ¨åŒæ­¥å­ç³»ç»Ÿä¸­å¼•å…¥çš„å¤§é‡ä»£ç ï¼Œä¾µå…¥ HotSpot å…¶ä»–ç»„ä»¶ï¼Œå¸¦æ¥ä»£ç çš„å¤æ‚æ€§å’Œç»´æŠ¤æˆæœ¬ï¼Œæˆä¸ºä»£ç ä¼˜åŒ–çš„é˜»ç¢ã€‚æ‰€ä»¥å®˜æ–¹è¦å°†å…¶ç§»é™¤ã€‚</p><p>ä¸è¿‡ï¼Œæœ‰äº›åº”ç”¨åœ¨ç¦ç”¨åå‘é”åä¼šå‡ºç°æ€§èƒ½ä¸‹é™ï¼Œå¯ä»¥ä½¿ç”¨<code>-XX:+UseBiasedLocking</code>æ‰‹åŠ¨å¼€å¯ã€‚</p><h2 id="ZGCï¼šå¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆJEP-377ï¼‰"><a href="#ZGCï¼šå¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆJEP-377ï¼‰" class="headerlink" title="ZGCï¼šå¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆJEP 377ï¼‰"></a>ZGCï¼šå¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼ˆJEP 377ï¼‰</h2><p>ZGC æ˜¯åœ¨ Java11 å¼•å…¥çš„ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 æ–°ç‰¹æ€§</a>ï¼‰ï¼Œä¸€ç›´å¤„äºè¯•éªŒé˜¶æ®µï¼Œæƒ³è¦ä½“éªŒï¼Œéœ€è¦åœ¨å‚æ•°ä¸­ä½¿ç”¨<code>-XX:+UnlockExperimentalVMOptions -XX:+UseZGC</code>ç»„åˆå¯ç”¨ï¼Œåœ¨ Java15 ä¸­ï¼ŒZGC æˆä¸ºæ­£å¼ç‰¹æ€§ï¼Œæƒ³è¦ä½¿ç”¨å¯ä»¥ç›´æ¥ç”¨å‘½ä»¤<code>-XX:+UseZGC</code>å°±è¡Œã€‚</p><p>ZGC æ˜¯ä¸€ä¸ªé‡æ–°è®¾è®¡çš„å¹¶å‘çš„åƒåœ¾å›æ”¶å™¨ï¼Œå¯ä»¥æå¤§çš„æå‡ GC çš„æ€§èƒ½ï¼Œæ”¯æŒä»»æ„å †å¤§å°è€Œä¿æŒç¨³å®šçš„ä½å»¶è¿Ÿã€‚ä» <a href="https://openjdk.java.net/jeps/333" target="_blank" rel="noopener">https://openjdk.java.net/jeps/333</a> ç»™å‡ºçš„æ•°æ®å¯ä»¥çœ‹å‡ºæ¥ï¼Œåœ¨ 128G å †å¤§å°çš„æµ‹è¯•ä¸­ï¼ŒZGC ä¼˜åŠ¿æ˜æ˜¾ï¼Œæ‰¾äº†ä¸€å¼ ç½‘ä¸Šçš„å›¾ç‰‡ï¼š</p><p><img src="https://static.howardliu.cn/java/java-11-1.png" alt="ZGCï¼šå¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨"></p><p>è™½ç„¶ ZGC æ„¿æ™¯å¾ˆå¥½ï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼Œæ‰€ä»¥é»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨è¿˜æ˜¯ G1ã€‚</p><h2 id="Shenandoahï¼šä½æš‚åœæ—¶é—´åƒåœ¾æ”¶é›†å™¨ï¼ˆJEP-379ï¼‰"><a href="#Shenandoahï¼šä½æš‚åœæ—¶é—´åƒåœ¾æ”¶é›†å™¨ï¼ˆJEP-379ï¼‰" class="headerlink" title="Shenandoahï¼šä½æš‚åœæ—¶é—´åƒåœ¾æ”¶é›†å™¨ï¼ˆJEP 379ï¼‰"></a>Shenandoahï¼šä½æš‚åœæ—¶é—´åƒåœ¾æ”¶é›†å™¨ï¼ˆJEP 379ï¼‰</h2><p>Shenandoah æ˜¯åœ¨ Java12 å¼•å…¥çš„ï¼ˆå‚è§ï¼‰<a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a>ï¼Œæœ¬æ¬¡å’Œ ZGC ä¸€èµ·è½¬æ­£ã€‚åŒæ ·çš„ï¼Œæƒ³è¦ä½¿ç”¨ Shenandoahï¼Œä¸å†éœ€è¦å‚æ•°<code>-XX:+UnlockExperimentalVMOptions -XX:+UseShenandoahGC</code>ç»„åˆï¼Œåªä½¿ç”¨<code>-XX:+UseShenandoahGC</code>å³å¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒShenandoah åªåœ¨ OpenJDK ä¸­æä¾›ï¼ŒOracleJDK ä¸­å¹¶ä¸åŒ…å«ã€‚</p><h2 id="æ–‡æœ¬å—ï¼ˆJEP-378ï¼‰"><a href="#æ–‡æœ¬å—ï¼ˆJEP-378ï¼‰" class="headerlink" title="æ–‡æœ¬å—ï¼ˆJEP 378ï¼‰"></a>æ–‡æœ¬å—ï¼ˆJEP 378ï¼‰</h2><p>æ–‡æœ¬å—æ˜¯åƒå‘¼ä¸‡å”¤ç»ˆäºè½¬æ­£ï¼Œåœ¨ Java13 ä¸­é¦–æ¬¡å¼•å…¥ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a>ï¼‰ï¼Œåœ¨ Java14 ä¸­åˆå¢åŠ äº†é¢„è§ˆç‰¹æ€§ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a>ï¼‰ï¼Œç»ˆäºåœ¨ Java15 ç¡®å®šä¸‹æ¥ï¼Œå¯ä»¥æ”¾å¿ƒä½¿ç”¨äº†ã€‚</p><p>æˆ‘ä»¬å†å¤ä¹ ä¸€ä¸‹ï¼š</p><pre><code class="java">@Testvoid testTextBlock() {    final String singleLine = &quot;ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ï¼Œå…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ã€‚è¿™è¡Œæ²¡æœ‰æ¢è¡Œï¼Œè€Œä¸”æˆ‘çš„åé¢å¤šäº†ä¸€ä¸ªç©ºæ ¼ \n è¿™æ¬¡æ¢è¡Œäº†&quot;;    final String textBlockSingleLine = &quot;&quot;&quot;            ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ï¼Œå…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ã€‚\            è¿™è¡Œæ²¡æœ‰æ¢è¡Œï¼Œè€Œä¸”æˆ‘çš„åé¢å¤šäº†ä¸€ä¸ªç©ºæ ¼ã€s            è¿™æ¬¡æ¢è¡Œäº†&quot;&quot;&quot;;    Assertions.assertEquals(singleLine, textBlockSingleLine);}</code></pre><p>è¿™ä¸ªåŠŸèƒ½ç‰¹æ€§æ˜¯ä»£ç å¯è¯»æ€§çš„ä¼˜åŒ–ã€‚</p><h2 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h2><h3 id="å¯†å°ç±»å’Œæ¥å£ï¼ˆJEP-360ï¼‰"><a href="#å¯†å°ç±»å’Œæ¥å£ï¼ˆJEP-360ï¼‰" class="headerlink" title="å¯†å°ç±»å’Œæ¥å£ï¼ˆJEP 360ï¼‰"></a>å¯†å°ç±»å’Œæ¥å£ï¼ˆJEP 360ï¼‰</h3><p>ç›®å‰ï¼ŒJava æ²¡æœ‰æä¾›å¯¹ç»§æ‰¿çš„ç»†ç²’åº¦æ§åˆ¶ï¼Œåªæœ‰ publicã€protectedã€privateã€åŒ…å†…æ§åˆ¶å››ç§éå¸¸ç²—ç²’åº¦çš„æ§åˆ¶æ–¹å¼ã€‚</p><p>ä¸ºæ­¤ï¼Œå¯†å°ç±»çš„ç›®æ ‡æ˜¯å…è®¸å•ä¸ªç±»å£°æ˜å“ªäº›ç±»å‹å¯ä»¥ç”¨ä½œå…¶å­ç±»å‹ã€‚è¿™ä¹Ÿé€‚ç”¨äºæ¥å£ï¼Œå¹¶ç¡®å®šå“ªäº›ç±»å‹å¯ä»¥å®ç°å®ƒä»¬ã€‚è¯¥åŠŸèƒ½ç‰¹æ€§æ–°å¢äº†<code>sealed</code>å’Œ<code>non-sealed</code>ä¿®é¥°ç¬¦å’Œ<code>permits</code>å…³é”®å­—ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹å®šä¹‰ï¼š</p><pre><code class="java">public sealed class Person permits Student, Worker, Teacher {}public sealed class Student extends Person        permits Pupil, JuniorSchoolStudent, HighSchoolStudent, CollegeStudent, GraduateStudent {}public final class Pupil extends Student {}public non-sealed class Worker extends Person {}public class OtherClass extends Worker {}public final class Teacher extends Person {}</code></pre><p>æˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ª<code>sealed</code>ä¿®é¥°çš„ç±»<code>Person</code>ï¼Œä½¿ç”¨<code>permits</code>æŒ‡å®šè¢«ç»§æ‰¿çš„å­ç±»ï¼Œè¿™äº›å­ç±»å¿…é¡»æ˜¯ä½¿ç”¨<code>final</code>æˆ–<code>sealed</code>æˆ–<code>non-sealed</code>ä¿®é¥°çš„ç±»ã€‚å…¶ä¸­<code>Student</code>æ˜¯ä½¿ç”¨<code>sealed</code>ä¿®é¥°ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦ä½¿ç”¨<code>permits</code>æŒ‡å®šè¢«ç»§æ‰¿çš„å­ç±»ã€‚<code>Worker</code>ç±»ä½¿ç”¨<code>non-sealed</code>ä¿®é¥°ï¼Œæˆä¸ºæ™®é€šç±»ï¼Œå…¶ä»–ç±»éƒ½å¯ä»¥ç»§æ‰¿å®ƒã€‚<code>Teacher</code>ä½¿ç”¨<code>final</code>ä¿®é¥°ï¼Œä¸å¯å†è¢«ç»§æ‰¿ã€‚</p><p>ä»ç±»å›¾ä¸Šçœ‹æ²¡æœ‰å¤ªå¤šåŒºåˆ«ï¼š</p><p><img src="https://static.howardliu.cn/java/sealed-class.png" alt="å¯†å°ç±»å’Œæ¥å£"></p><p>ä½†æ˜¯ä»åŠŸèƒ½ç‰¹æ€§ä¸Šï¼Œèµ·åˆ°äº†å¾ˆå¥½çš„çº¦æŸä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„å®šä¹‰å¯ä»¥å…¬å¼€ä½¿ç”¨ï¼Œä½†åˆä¸æƒ³è¢«éç‰¹å®šç±»ç»§æ‰¿çš„ç±»äº†ã€‚</p><h3 id="instanceof-æ¨¡å¼åŒ¹é…-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP-375ï¼‰"><a href="#instanceof-æ¨¡å¼åŒ¹é…-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP-375ï¼‰" class="headerlink" title="instanceof æ¨¡å¼åŒ¹é…-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP 375ï¼‰"></a>instanceof æ¨¡å¼åŒ¹é…-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP 375ï¼‰</h3><p>instanceof æ¨¡å¼åŒ¹é…é¦–å…ˆåœ¨ Java14 ä¸­æä¾›é¢„è§ˆåŠŸèƒ½ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 ç‰¹æ€§</a>ï¼‰ï¼Œå¯ä»¥æä¾›<code>instanceof</code>æ›´åŠ ç®€æ´é«˜æ•ˆçš„å®ç°ï¼Œåœ¨ Java15 ä¸­æ²¡æœ‰æ–°å¢ç‰¹æ€§ï¼Œä¸»è¦æ˜¯ä¸ºäº†å†æ¬¡æ”¶é›†åé¦ˆï¼Œæ ¹æ®ç»“æœçœ‹ï¼Œå¤§å®¶è¿˜æ˜¯å¾ˆæœŸå¾…è¿™ä¸ªåŠŸèƒ½ï¼Œåœ¨ Java16 ä¸­æ­£å¼æä¾›ã€‚</p><p>æˆ‘ä»¬å†ç®€å•çœ‹ä¸‹<code>instanceof</code>çš„æ”¹è¿›ï¼š</p><pre><code class="java">@Testvoid test1() {    final Object obj1 = &quot;Hello, World!&quot;;    int result = 0;    if (obj1 instanceof String str) {        result = str.length();    } else if (obj1 instanceof Number num) {        result = num.intValue();    }    Assertions.assertEquals(13, result);}</code></pre><h3 id="Record-ç±»å‹-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP-384ï¼‰"><a href="#Record-ç±»å‹-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP-384ï¼‰" class="headerlink" title="Record ç±»å‹-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP 384ï¼‰"></a>Record ç±»å‹-é¢„è§ˆç¬¬äºŒç‰ˆï¼ˆJEP 384ï¼‰</h3><p>Record ç±»å‹ç”¨æ¥å¢å¼º Java è¯­è¨€ç‰¹æ€§ï¼Œå……å½“ä¸å¯å˜æ•°æ®è½½ä½“ã€‚åœ¨ Java14 ä¸­æä¾›é¢„è§ˆåŠŸèƒ½ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 æ–°ç‰¹æ€§</a>ï¼‰ï¼Œåœ¨ Java15 ä¸­æä¾›ç¬¬äºŒæ¬¡é¢„è§ˆï¼Œè¿™æ¬¡é¢„è§ˆçš„ç›®æ ‡æ˜¯æ”¶é›†ç”¨æˆ·åé¦ˆã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>Person</code>ç±»ï¼š</p><pre><code class="java">public record Person(String name, String address) {}</code></pre><p>æˆ‘ä»¬è½¬æ¢ä¸ºä¹‹å‰çš„å®šä¹‰ä¼šæ˜¯ä¸€å¨ä¸‹é¢è¿™ç§ä»£ç ï¼š</p><pre><code class="java">public final class PersonBefore14 {    private final String name;    private final String address;    public PersonBefore14(String name, String address) {        this.name = name;        this.address = address;    }    public String name() {        return name;    }    public String address() {        return address;    }    @Override    public boolean equals(Object o) {        if (this == o) {            return true;        }        if (o == null || getClass() != o.getClass()) {            return false;        }        PersonBefore14 that = (PersonBefore14) o;        return Objects.equals(name, that.name) &amp;&amp; Objects.equals(address, that.address);    }    @Override    public int hashCode() {        return Objects.hash(name, address);    }    @Override    public String toString() {        return &quot;PersonBefore14{&quot; +                &quot;name=&#39;&quot; + name + &#39;\&#39;&#39; +                &quot;, address=&#39;&quot; + address + &#39;\&#39;&#39; +                &#39;}&#39;;    }}</code></pre><p>Record ç±»å‹ç‰¹æ€§æœ‰å››ä¸ªç‰¹æ€§ï¼š</p><ol><li>è®¾è®¡ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç»“æ„ï¼Œè¡¨è¾¾ç®€å•çš„ä¿¡æ¯èšåˆï¼›</li><li>å¸®åŠ©å¼€å‘äººå‘˜ä¸“æ³¨äºå»ºæ¨¡ä¸å¯å˜æ•°æ®ï¼Œè€Œä¸æ˜¯å¯æ‰©å±•çš„è¡Œä¸ºï¼›</li><li>è‡ªåŠ¨å®ç°æ•°æ®é©±åŠ¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚<code>equals</code>ã€<code>getter</code>ã€<code>setter</code>ç­‰æ–¹æ³•ï¼›</li><li>ä¿ç•™é•¿æœŸå­˜åœ¨çš„ Java è§„èŒƒï¼Œæ¯”å¦‚è¿ç§»å…¼å®¹æ€§ã€‚</li></ol><p>æˆ‘ä»¬ä¸èƒ½å°† Record ç±»å‹ç®€å•çš„ç†è§£ä¸ºå»é™¤â€œæ ·æ¿åŒ–â€ä»£ç çš„åŠŸèƒ½ï¼Œå®ƒä¸æ˜¯è§£å†³ JavaBean å‘½åçº¦å®šçš„ä¸­å¾ˆå¤šæ¨¡æ¿åŒ–æ–¹æ³•çš„å†—ä½™ç¹æ‚é—®é¢˜ï¼Œå®ƒçš„ç›®æ ‡ä¸æ˜¯ç±»ä¼¼ Lombok ç­‰å·¥å…·è‡ªåŠ¨ç”Ÿæˆä»£ç çš„åŠŸèƒ½ï¼Œæ˜¯ä»å¼€å‘äººå‘˜ä¸“æ³¨æ¨¡å‹çš„è§’åº¦å‡ºå‘çš„ã€‚</p><h2 id="å­µåŒ–"><a href="#å­µåŒ–" class="headerlink" title="å­µåŒ–"></a>å­µåŒ–</h2><h3 id="å¤–éƒ¨å­˜å‚¨å™¨è®¿é—®-API-å­µåŒ–ç¬¬äºŒç‰ˆï¼ˆJEP-383ï¼‰"><a href="#å¤–éƒ¨å­˜å‚¨å™¨è®¿é—®-API-å­µåŒ–ç¬¬äºŒç‰ˆï¼ˆJEP-383ï¼‰" class="headerlink" title="å¤–éƒ¨å­˜å‚¨å™¨è®¿é—® API-å­µåŒ–ç¬¬äºŒç‰ˆï¼ˆJEP 383ï¼‰"></a>å¤–éƒ¨å­˜å‚¨å™¨è®¿é—® API-å­µåŒ–ç¬¬äºŒç‰ˆï¼ˆJEP 383ï¼‰</h3><p>å¤–éƒ¨å­˜å‚¨å™¨è®¿é—® API åœ¨ Java14 å¼€å§‹å­µåŒ–ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 æ–°ç‰¹æ€§</a>ï¼‰ï¼Œåœ¨ Java15 ä¸­ç»§ç»­å­µåŒ–çŠ¶æ€ï¼Œè¿™ä¸ªç‰ˆæœ¬ä¸­å¢åŠ äº†å‡ ä¸ªç‰¹æ€§ï¼š</p><ul><li>æ–°çš„<code>VarHandle</code>APIï¼Œç”¨äºå®šåˆ¶å†…å­˜è®¿é—®å¥æŸ„ï¼›</li><li>æ”¯æŒ<code>Spliterator</code>æ¥å£å®ç°å¹¶è¡Œå¤„ç†å†…å­˜æ®µï¼›</li><li>å¢å¼ºäº†å¯¹æ˜ å°„å†…å­˜æ®µçš„æ”¯æŒï¼›</li><li>èƒ½å¤Ÿåƒæœ¬æœºè°ƒç”¨ä¸€æ ·æ“ä½œæˆ–é—´æ¥æ“ä½œå†…å­˜åœ°å€ã€‚</li></ul><p>å¤–éƒ¨å†…å­˜é€šå¸¸æ˜¯è¯´é‚£äº›ç‹¬ç«‹ JVM ä¹‹å¤–çš„å†…å­˜åŒºåŸŸï¼Œå¯ä»¥ä¸å— JVM åƒåœ¾æ”¶é›†çš„å½±å“ï¼Œé€šå¸¸èƒ½å¤Ÿå¤„ç†è¾ƒå¤§çš„å†…å­˜ã€‚</p><p>è¿™äº›æ–°çš„ API è™½ç„¶ä¸ä¼šç›´æ¥å½±å“å¤šæ•°çš„åº”ç”¨ç±»å¼€å‘äººå‘˜ï¼Œä½†æ˜¯ä»–ä»¬å¯ä»¥åœ¨å†…å­˜çš„ç¬¬ä¸‰æ–¹åº“ä¸­æä¾›æ”¯æŒï¼ŒåŒ…æ‹¬åˆ†å¸ƒå¼ç¼“å­˜ã€éç»“æ„åŒ–æ–‡æ¡£å­˜å‚¨ã€å¤§å‹å­—èŠ‚ç¼“å†²åŒºã€å†…å­˜æ˜ å°„æ–‡ä»¶ç­‰ã€‚</p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="ç§»é™¤-Nashorn-JavaScript-å¼•æ“ï¼ˆJEP-372ï¼‰"><a href="#ç§»é™¤-Nashorn-JavaScript-å¼•æ“ï¼ˆJEP-372ï¼‰" class="headerlink" title="ç§»é™¤ Nashorn JavaScript å¼•æ“ï¼ˆJEP 372ï¼‰"></a>ç§»é™¤ Nashorn JavaScript å¼•æ“ï¼ˆJEP 372ï¼‰</h3><p>Nashorn JavaScript å¼•æ“æœ€åˆåœ¨ Java8 ä¸­å¼•å…¥ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 æ–°ç‰¹æ€§</a>ï¼‰ï¼Œåœ¨ Java11 è¢«æ ‡è®°ä¸ºè¿‡æœŸï¼Œåœ¨ Java15 ä¸­è¢«åˆ é™¤ï¼ŒåŒ…æ‹¬ Nashorn JavaScript å¼•æ“ã€APIã€jjs å·¥å…·ç­‰å†…å®¹ã€‚</p><p>Nashorn JavaScript å¼•æ“æ˜¯ä¸€ä¸ª JavaScript è„šæœ¬å¼•æ“ï¼Œç”¨æ¥å–ä»£ Rhino è„šæœ¬å¼•æ“ï¼Œå¯¹ ECMAScript-262 5.1 æœ‰å®Œæ•´çš„æ”¯æŒï¼Œå¢å¼ºäº† Java å’Œ JavaScript çš„å…¼å®¹æ€§ï¼Œè€Œä¸”æœ‰å¾ˆå¼ºçš„æ€§èƒ½ã€‚</p><p>éšç€ GraalVM å’Œå…¶ä»–è™šæ‹ŸæœºæŠ€æœ¯æœ€è¿‘çš„å¼•å…¥ï¼ŒNashorn å¼•æ“ä¸å†åœ¨ JDK ç”Ÿæ€ç³»ç»Ÿä¸­å æœ‰ä¸€å¸­ä¹‹åœ°ã€‚è€Œä¸”ï¼ŒECMAScript è„šæœ¬è¯­è¨€ç»“æ„ã€API æ”¹å˜é€Ÿåº¦å¤ªå¿«ï¼ŒNashorn JavaScript å¼•æ“ç»´æŠ¤æˆæœ¬å¤ªé«˜ï¼Œæ‰€ä»¥ï¼Œç›´æ¥åˆ äº†ã€‚</p><h3 id="ç§»é™¤-Solaris-å’Œ-SPARC-ç«¯å£-APIï¼ˆJEP-381ï¼‰"><a href="#ç§»é™¤-Solaris-å’Œ-SPARC-ç«¯å£-APIï¼ˆJEP-381ï¼‰" class="headerlink" title="ç§»é™¤ Solaris å’Œ SPARC ç«¯å£ APIï¼ˆJEP 381ï¼‰"></a>ç§»é™¤ Solaris å’Œ SPARC ç«¯å£ APIï¼ˆJEP 381ï¼‰</h3><p>Solaris å’Œ SPARC éƒ½å·²è¢« Linux æ“ä½œç³»ç»Ÿå’Œè‹±ç‰¹å°”å¤„ç†å™¨å–ä»£ã€‚æ”¾å¼ƒå¯¹ Solaris å’Œ SPARC ç«¯å£çš„æ”¯æŒå°†ä½¿ OpenJDK ç¤¾åŒºçš„è´¡çŒ®è€…èƒ½å¤ŸåŠ é€Ÿå¼€å‘æ–°åŠŸèƒ½ï¼Œä»è€Œæ¨åŠ¨å¹³å°å‘å‰å‘å±•ã€‚</p><p>Solaris å’Œ SPARC ç«¯å£ API åœ¨ Java14 ä¸­æ ‡è®°è¿‡æ—¶ï¼Œåœ¨ Java15 ä¸­å½»åº•ç§»é™¤ã€‚ä»…ä»…åŠå¹´å°±ç—›ä¸‹æ€æ‰‹ï¼Œå¯è§ç¤¾åŒºå¯¹äºç»´æŠ¤è¿™äº› API æ·±å—æŠ˜ç£¨ã€‚</p><h3 id="åºŸé™¤-RMI-Activationï¼ˆJEP-385ï¼‰"><a href="#åºŸé™¤-RMI-Activationï¼ˆJEP-385ï¼‰" class="headerlink" title="åºŸé™¤ RMI Activationï¼ˆJEP 385ï¼‰"></a>åºŸé™¤ RMI Activationï¼ˆJEP 385ï¼‰</h3><p>RMI Activation åœ¨ Java15 ä¸­æ ‡è®°ä¸ºåºŸé™¤ï¼Œä¼šåœ¨æœªæ¥ç‰ˆæœ¬åˆ é™¤ã€‚ä¹‹æ‰€ä»¥è¢«åˆ é™¤ï¼Œæ˜¯å› ä¸ºåœ¨ç°ä»£çš„ web åº”ç”¨ä¸­ï¼Œå·²ç»ä¸éœ€è¦è¿™ç§æ¿€æ´»æœºåˆ¶ï¼Œç»§ç»­ç»´æŠ¤ï¼Œå¢åŠ äº† Java å¼€å‘äººå‘˜çš„ç»´æŠ¤è´Ÿæ‹…ã€‚åœ¨ Java8 çš„æ—¶å€™ï¼Œå·²ç»å°†å…¶è®¾ç½®ä¸ºéå¿…é€‰é¡¹ã€‚</p><p>ä»å¼€å‘ç³»ç»Ÿçš„è§’åº¦çœ‹ï¼Œè™½ç„¶ RMI Activation æ˜¯ä¸€ä¸ªè¿˜ä¸é”™çš„è®¾è®¡ï¼Œä½†æ˜¯å·²ç»æœ‰å…¶ä»–æ›¿ä»£æ–¹æ¡ˆï¼Œç»§ç»­ç»´æŠ¤å¼€å‘ä¸‹å»ï¼Œæˆæœ¬æ”¶ç›Šå®Œå…¨ä¸åŒ¹é…ï¼ŒåŠæ—©èˆå¼ƒï¼Œå¯ä»¥é€‰æ‹©æ›´åŠ ä¼˜ç§€çš„æ–¹æ¡ˆã€‚æœ‰äº›ç±»ä¼¼äºé›¶è¾¹é™…æˆæœ¬çš„æ€æƒ³ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java15 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä» <a href="https://openjdk.java.net/projects/jdk/15/" target="_blank" rel="noopener">https://openjdk.java.net/projects/jdk/15/</a> æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-15-features/">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava15 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/123541149" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava15 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      Java15 æ˜¯åœ¨ 2020 å¹´ 9 æœˆå‘å¸ƒçš„ä¸€ä¸ªçŸ­æœŸç‰ˆæœ¬ï¼Œæ–°å¢ç‰¹æ€§å¦‚ä¸‹ï¼šEdwards-Curve æ•°å­—ç­¾åç®—æ³•ï¼›å¯†å°çš„ç±»å’Œæ¥å£ï¼ˆé¢„è§ˆåŠŸèƒ½ï¼‰ï¼›éšè—ç±»ï¼›ç§»é™¤ Nashorn JavaScript å¼•æ“ï¼›é‡æ–°å®ç° DatagramSocket æ¥å£ï¼›ç¦ç”¨åå‘é”ï¼›instanceof åŒ¹é…æ¨¡å¼ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆåŠŸèƒ½ï¼‰ï¼›ZGCï¼šå¯ä¼¸ç¼©ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ï¼›æ–‡æœ¬å—ï¼›Shenandoahï¼šä½æš‚åœæ—¶é—´åƒåœ¾æ”¶é›†å™¨ï¼›ç§»é™¤ Solaris å’Œ SPARC ç«¯å£ APIï¼›å¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆç¬¬äºŒç‰ˆå­µåŒ–åŠŸèƒ½ï¼‰ï¼›Record ç±»å‹ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆåŠŸèƒ½ï¼‰ï¼›åºŸé™¤ RMI Activationï¼›æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java15" scheme="https://www.howardliu.cn/tags/Java15/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava14 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java-14-features/"/>
    <id>https://www.howardliu.cn/java-14-features/</id>
    <published>2022-03-05T03:37:11.000Z</published>
    <updated>2022-03-05T03:37:11.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/tree-blossoms-7022041_1920.jpeg" alt="Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava14 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚ä» <a href="https://res.cloudinary.com/snyk/image/upload/v1623860216/reports/jvm-ecosystem-report-2021.pdf" target="_blank" rel="noopener">ã€ŠJVM Ecosystem Report 2021ã€‹</a> ä¸­å¯ä»¥çœ‹å‡ºï¼Œç›®å‰å¼€å‘ç¯å¢ƒä¸­æœ‰è¿‘åŠçš„ç¯å¢ƒä½¿ç”¨ Java8ï¼Œæœ‰è¿‘åŠçš„äººè½¬ç§»åˆ°äº† Java11ï¼Œéšç€ Java17 çš„å‘å¸ƒï¼Œç›¸ä¿¡æ¯”ä¾‹ä¼šæœ‰æ‰€å˜åŒ–ã€‚</p><p>å› æ­¤ï¼Œå‡†å¤‡å‡ºä¸€ä¸ªç³»åˆ—ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œé˜è¿°å„ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>æœ¬æ–‡è®²è§£ä¸€ä¸‹ Java14 çš„ç‰¹æ€§ï¼Œè¿™ä¸ªç‰ˆæœ¬å¸¦æ¥äº†ä¸å°‘æ–°ç‰¹æ€§ã€åŠŸèƒ½å®ç”¨æ€§çš„å¢å¼ºã€GC çš„å°è¯•ã€æ€§èƒ½ä¼˜åŒ–ç­‰ï¼š</p><ul><li>JEP 305ï¼šinstanceof æ¨¡å¼åŒ¹é… ï¼ˆé¢„è§ˆç‰ˆï¼‰</li><li>JEP 343ï¼šæ‰“åŒ…å·¥å…· ï¼ˆå­µåŒ–ï¼‰</li><li>JEP 345ï¼šG1 çš„å¯è¯†åˆ« NUMA ç³»ç»Ÿçš„å†…å­˜åˆ†é…</li><li>JEP 349ï¼šJFR äº‹ä»¶æµ</li><li>JEP 352ï¼šéåŸå­æ€§çš„å­—èŠ‚ç¼“å†²åŒºæ˜ å°„</li><li>JEP 358ï¼šNullPointerException çš„å‹å¥½æç¤ºä¿¡æ¯</li><li>JEP 359ï¼šRecord å£°æ˜ ï¼ˆé¢„è§ˆç‰ˆï¼‰</li><li>JEP 361ï¼šSwitch è¡¨è¾¾å¼è½¬æ­£ ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆï¼‰</li><li>JEP 362ï¼šå¼ƒç”¨ Solaris å’Œ SPARC ç«¯å£</li><li>JEP 363ï¼šåˆ é™¤ CMS åƒåœ¾å›æ”¶å™¨</li><li>JEP 364ï¼šZGC æ”¯æŒ MacOS</li><li>JEP 365ï¼šZGC æ”¯æŒ Windows</li><li>JEP 366ï¼šå¼ƒç”¨ ParallelScavenge å’Œ SerialOld GC çš„ç»„åˆ</li><li>JEP 367ï¼šç§»é™¤ Pack200 Tools å’Œ API</li><li>JEP 368ï¼šæ–‡æœ¬å— ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆï¼‰</li><li>JEP 370ï¼šå¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆå­µåŒ–ï¼‰</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚</p><h2 id="Switch-è¡¨è¾¾å¼è½¬æ­£ï¼ˆJEP-361ï¼‰"><a href="#Switch-è¡¨è¾¾å¼è½¬æ­£ï¼ˆJEP-361ï¼‰" class="headerlink" title="Switch è¡¨è¾¾å¼è½¬æ­£ï¼ˆJEP 361ï¼‰"></a>Switch è¡¨è¾¾å¼è½¬æ­£ï¼ˆJEP 361ï¼‰</h2><p>Switch è¡¨è¾¾å¼åœ¨ Java12 å’Œ Java13 éƒ½å¤„äºåŠŸèƒ½é¢„è§ˆé˜¶æ®µï¼Œåˆ° Java14 ç»ˆäºè½¬æ­£äº†ï¼Œä»å¦ä¸€ä¸ªè§’åº¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½äº†ã€‚</p><p>æˆ‘ä»¬ä»¥â€œåˆ¤æ–­æ˜¯å¦å·¥ä½œæ—¥â€çš„ä¾‹å­å±•ç¤ºä¸€ä¸‹ï¼Œåœ¨ Java14 ä¹‹å‰ï¼š</p><pre><code class="java">@Testvoid testSwitch() {    final DayOfWeek day = DayOfWeek.from(LocalDate.now());    String typeOfDay = &quot;&quot;;    switch (day) {        case MONDAY:        case TUESDAY:        case WEDNESDAY:        case THURSDAY:        case FRIDAY:            typeOfDay = &quot;Working Day&quot;;            break;        case SATURDAY:        case SUNDAY:            typeOfDay = &quot;Rest Day&quot;;            break;    }    Assertions.assertFalse(typeOfDay.isEmpty());}</code></pre><p>åœ¨ Java14 ä¸­ï¼š</p><pre><code class="java">@Testvoid testSwitchExpression() {    final DayOfWeek day = DayOfWeek.SATURDAY;    final String typeOfDay = switch (day) {        case MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; {            System.out.println(&quot;Working Day: &quot; + day);            yield &quot;Working Day&quot;;        }        case SATURDAY, SUNDAY -&gt; &quot;Day Off&quot;;    };    Assertions.assertEquals(&quot;Day Off&quot;, typeOfDay);}</code></pre><p>æ³¨æ„çœ‹ï¼Œä¾‹å­ä¸­æˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ç§å†™æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡<code>yield</code>å…³é”®å­—è¡¨ç¤ºè¿”å›ç»“æœï¼Œä¸€ç§æ˜¯åœ¨<code>-&gt;</code>ä¹‹åç›´æ¥è¿”å›ã€‚</p><h2 id="é¢„è§ˆåŠŸèƒ½"><a href="#é¢„è§ˆåŠŸèƒ½" class="headerlink" title="é¢„è§ˆåŠŸèƒ½"></a>é¢„è§ˆåŠŸèƒ½</h2><p>å’Œå‰é¢çš„ç‰ˆæœ¬ä¸€æ ·ï¼ŒJava14 ä¸­ä¹Ÿæä¾›äº†ä¸€äº›é¢„è§ˆåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¢„è§ˆç¯å¢ƒä¸­è¯•ç”¨ä¸€ä¸‹ã€‚</p><p>è¿™æ¬¡çš„é¢„è§ˆåŠŸèƒ½åŒ…æ‹¬æ–‡æœ¬å—ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆï¼‰ã€instanceof æ¨¡å¼åŒ¹é…ã€Record å£°æ˜ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«è¯´ä¸€ä¸‹ã€‚</p><h3 id="æ–‡æœ¬å—ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆï¼ŒJEP-368ï¼‰"><a href="#æ–‡æœ¬å—ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆï¼ŒJEP-368ï¼‰" class="headerlink" title="æ–‡æœ¬å—ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆï¼ŒJEP 368ï¼‰"></a>æ–‡æœ¬å—ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆï¼ŒJEP 368ï¼‰</h3><p>æ–‡æœ¬å—åœ¨ Java13 ä¸­é¦–æ¬¡å‡ºç°ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13</a>ï¼‰ï¼Œæœ¬æ¬¡åˆæä¾›äº†ä¸¤ä¸ªæ‰©å±•ï¼š</p><ul><li><code>\</code>ï¼šè¡¨ç¤ºå½“å‰è¯­å¥æœªæ¢è¡Œï¼Œä¸ shell è„šæœ¬ä¸­çš„ä¹ æƒ¯ä¸€è‡´ï¼›</li><li><code>\s</code>ï¼šè¡¨ç¤ºå•ä¸ªç©ºæ ¼ã€‚</li></ul><p>æˆ‘ä»¬çœ‹ä¸ªä¾‹å­ï¼š</p><pre><code class="java">@Testvoid testTextBlock() {    final String singleLine = &quot;ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ï¼Œå…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ã€‚ä¸æ²¡æœ‰æ¢è¡Œï¼Œè€Œä¸”æˆ‘çš„åé¢å¤šäº†ä¸€ä¸ªç©ºæ ¼ &quot;;    final String textBlockSingleLine = &quot;&quot;&quot;            ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ï¼Œå…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ã€‚\            ä¸æ²¡æœ‰æ¢è¡Œï¼Œè€Œä¸”æˆ‘çš„åé¢å¤šäº†ä¸€ä¸ªç©ºæ ¼ã€s&quot;&quot;&quot;;    Assertions.assertEquals(singleLine, textBlockSingleLine);}</code></pre><p>ä¸ªäººæ„Ÿè§‰ã€æ˜¯æ¯”è¾ƒå®ç”¨çš„ï¼Œè¿™ä¸ªåŠŸèƒ½åœ¨ Java15 ä¸­è½¬æ­£ï¼Œå€¼å¾—æœŸå¾…ã€‚</p><h3 id="instanceof-æ¨¡å¼åŒ¹é…ï¼ˆJEP-305ï¼‰"><a href="#instanceof-æ¨¡å¼åŒ¹é…ï¼ˆJEP-305ï¼‰" class="headerlink" title="instanceof æ¨¡å¼åŒ¹é…ï¼ˆJEP 305ï¼‰"></a>instanceof æ¨¡å¼åŒ¹é…ï¼ˆJEP 305ï¼‰</h3><p><code>instanceof</code>ä¸»è¦ç”¨æ¥æ£€æŸ¥å¯¹è±¡ç±»å‹ï¼Œä½œä¸ºç±»å‹å¼ºè½¬å‰çš„å®‰å…¨æ£€æŸ¥ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="java">@Testvoid test() {    final Object obj1 = &quot;Hello, World!&quot;;    int result = 0;    if (obj1 instanceof String) {        String str = (String) obj1;        result = str.length();    } else if (obj1 instanceof Number) {        Number num = (Number) obj1;        result = num.intValue();    }    Assertions.assertEquals(13, result);}</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ¯æ¬¡åˆ¤æ–­ç±»å‹ä¹‹åï¼Œéœ€è¦å£°æ˜ä¸€ä¸ªåˆ¤æ–­ç±»å‹çš„å˜é‡ï¼Œç„¶åå°†åˆ¤æ–­å‚æ•°å¼ºåˆ¶è½¬æ¢ç±»å‹ï¼Œèµ‹å€¼ç»™æ–°å£°æ˜çš„å˜é‡ã€‚è¿™ç§å†™æ³•æ˜¾å¾—ç¹çä¸”å¤šä½™ã€‚</p><p>äºæ˜¯åœ¨ Java14 ä¸­å¯¹<code>instanceof</code>è¿›è¡Œäº†æ”¹è¿›ï¼š</p><pre><code class="java">@Testvoid test1() {    final Object obj1 = &quot;Hello, World!&quot;;    int result = 0;    if (obj1 instanceof String str) {        result = str.length();    } else if (obj1 instanceof Number num) {        result = num.intValue();    }    Assertions.assertEquals(13, result);}</code></pre><p>ä¸ä»…å¦‚æ­¤ï¼Œ<code>instanceof</code>æ¨¡å¼åŒ¹é…çš„ä½œç”¨åŸŸè¿˜å¯ä»¥æ‰©å±•ã€‚åœ¨<code>if</code>æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“<code>&amp;&amp;</code>ä¸åˆ¤æ–­æ˜¯ä¼šæ‰§è¡Œæ‰€æœ‰çš„è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä½¿ç”¨<code>instanceof</code>æ¨¡å¼åŒ¹é…å®šä¹‰çš„å±€éƒ¨å˜é‡ç»§ç»­åˆ¤æ–­ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="java">if (obj1 instanceof String str &amp;&amp; str.length() &gt; 20) {    result = str.length();}</code></pre><p>ä¸åŸæ¥çš„å†™æ³•å¯¹æ¯”ï¼ŒJava14 æä¾›çš„å†™æ³•ä»£ç æ›´åŠ ç®€æ´ã€å¯è¯»æ€§æ›´é«˜ï¼Œèƒ½å¤Ÿæå‡ºå¾ˆå¤šå†—ä½™ç¹ççš„ä»£ç ï¼Œéå¸¸å®ç”¨çš„ä¸€ä¸ªç‰¹æ€§ï¼Œè¿™ä¸ªåŠŸèƒ½ä¼šåœ¨ Java16 ä¸­è½¬æ­£ã€‚</p><h3 id="Record-å£°æ˜ï¼ˆJEP-359ï¼‰"><a href="#Record-å£°æ˜ï¼ˆJEP-359ï¼‰" class="headerlink" title="Record å£°æ˜ï¼ˆJEP 359ï¼‰"></a>Record å£°æ˜ï¼ˆJEP 359ï¼‰</h3><p>åœ¨ Java14 é¢„è§ˆåŠŸèƒ½ä¸­æ–°å¢äº†ä¸€ä¸ªå…³é”®å­—<code>record</code>ï¼Œå®ƒæ˜¯å®šä¹‰ä¸å¯å˜æ•°æ®ç±»å‹å°è£…ç±»çš„å…³é”®å­—ï¼Œä¸»è¦ç”¨åœ¨ç‰¹å®šé¢†åŸŸç±»ä¸Šã€‚è¿™ä¸ªå…³é”®å­—æœ€ç»ˆä¼šåœ¨ Java16 ä¸­æ­£å¼æä¾›ã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨ Java å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ POJO ä½œä¸ºæ•°æ®å­˜å‚¨å¯¹è±¡ï¼Œæ ¹æ®è§„èŒƒï¼ŒPOJO ä¸­é™¤äº†å±æ€§æ˜¯ä¸ªæ€§åŒ–çš„ï¼Œå…¶ä»–çš„æ¯”å¦‚<code>getter</code>ã€<code>setter</code>ã€<code>equals</code>ã€<code>hashCode</code>ã€<code>toString</code>éƒ½æ˜¯æ¨¡æ¿åŒ–çš„å†™æ³•ï¼Œæ‰€ä»¥ä¸ºäº†ç®€ä¾¿ï¼Œå¾ˆå¤šç±»ä¼¼ Lombok çš„ç»„ä»¶æä¾› Java ç±»ç¼–è¯‘æ—¶å¢å¼ºï¼Œé€šè¿‡åœ¨ç±»ä¸Šå®šä¹‰<code>@Data</code>æ³¨è§£è‡ªåŠ¨æ·»åŠ è¿™äº›æ¨¡æ¿åŒ–æ–¹æ³•ã€‚åœ¨ Java14 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨<code>record</code>è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>Person</code>ç±»ï¼š</p><pre><code class="java">public record Person(String name, String address) {}</code></pre><p>æˆ‘ä»¬è½¬æ¢ä¸ºä¹‹å‰çš„å®šä¹‰ä¼šæ˜¯ä¸€å¨ä¸‹é¢è¿™ç§ä»£ç ï¼š</p><pre><code class="java">public final class PersonBefore14 {    private final String name;    private final String address;    public PersonBefore14(String name, String address) {        this.name = name;        this.address = address;    }    public String name() {        return name;    }    public String address() {        return address;    }    @Override    public boolean equals(Object o) {        if (this == o) {            return true;        }        if (o == null || getClass() != o.getClass()) {            return false;        }        PersonBefore14 that = (PersonBefore14) o;        return Objects.equals(name, that.name) &amp;&amp; Objects.equals(address, that.address);    }    @Override    public int hashCode() {        return Objects.hash(name, address);    }    @Override    public String toString() {        return &quot;PersonBefore14{&quot; +                &quot;name=&#39;&quot; + name + &#39;\&#39;&#39; +                &quot;, address=&#39;&quot; + address + &#39;\&#39;&#39; +                &#39;}&#39;;    }}</code></pre><p>æˆ‘ä»¬å¯ä»¥å‘ç° Record ç±»æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š</p><ol><li>ä¸€ä¸ªæ„é€ æ–¹æ³•</li><li>getter æ–¹æ³•åä¸å±æ€§åç›¸åŒ</li><li>æœ‰<code>equals()</code>ã€<code>hashCode()</code>æ–¹æ³•</li><li>æœ‰<code>toString()</code>æ–¹æ³•</li><li>ç±»å¯¹è±¡å’Œå±æ€§è¢«<code>final</code>ä¿®é¥°ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°æ˜¯åŒ…å«æ‰€æœ‰å±æ€§çš„ï¼Œè€Œä¸”æ²¡æœ‰ setter æ–¹æ³•</li></ol><p>åœ¨<code>Class</code>ç±»ä¸­ä¹Ÿæ–°å¢äº†å¯¹åº”çš„å¤„ç†æ–¹æ³•ï¼š</p><ul><li><code>getRecordComponents()</code>ï¼šè¿”å›ä¸€ç»„<code>java.lang.reflect.RecordComponent</code>å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œè¯¥æ•°ç»„çš„å…ƒç´ ä¸<code>Record</code>ç±»ä¸­çš„ç»„ä»¶ç›¸å¯¹åº”ï¼Œå…¶é¡ºåºä¸åœ¨è®°å½•å£°æ˜ä¸­å‡ºç°çš„é¡ºåºç›¸åŒï¼Œå¯ä»¥ä»è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ª<code>RecordComponent</code>ä¸­æå–åˆ°ç»„ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶åç§°ã€ç±»å‹ã€æ³›å‹ç±»å‹ã€æ³¨é‡ŠåŠå…¶è®¿é—®æ–¹æ³•ã€‚</li><li><code>isRecord()</code>ï¼šè¿”å›æ‰€åœ¨ç±»æ˜¯å¦æ˜¯ Record ç±»å‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚</li></ul><p>çœ‹èµ·æ¥ï¼ŒRecord ç±»å’Œ Enum å¾ˆåƒï¼Œéƒ½æ˜¯ä¸€å®šçš„æ¨¡æ¿ç±»ï¼Œé€šè¿‡è¯­æ³•ç³–å®šä¹‰ï¼Œåœ¨ Java ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œå°†å…¶ç¼–è¯‘æˆç‰¹å®šçš„æ ¼å¼ï¼ŒåŠŸèƒ½å¾ˆå¥½ï¼Œä½†å¦‚æœæ²¡æœ‰ä¹ æƒ¯ä½¿ç”¨ï¼Œå¯èƒ½ä¼šè§‰å¾—é™åˆ¶å¤ªå¤šã€‚</p><h2 id="NullPointerException-çš„å‹å¥½æç¤ºä¿¡æ¯ï¼ˆJEP-358ï¼‰"><a href="#NullPointerException-çš„å‹å¥½æç¤ºä¿¡æ¯ï¼ˆJEP-358ï¼‰" class="headerlink" title="NullPointerException çš„å‹å¥½æç¤ºä¿¡æ¯ï¼ˆJEP 358ï¼‰"></a>NullPointerException çš„å‹å¥½æç¤ºä¿¡æ¯ï¼ˆJEP 358ï¼‰</h2><p>åœ¨æ²¡æœ‰è€ƒè™‘å®Œå…¨åœºæ™¯çš„æƒ…å†µä¸‹ï¼Œå¾ˆå®¹æ˜“ç¢°åˆ°ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ˆNullPointerExceptionï¼Œç®€ç§° NPEï¼‰ã€‚ä¸€èˆ¬ç¢°åˆ°è¿™ä¸ªå¼‚å¸¸ï¼Œæ ¹æ®å¼‚å¸¸æ ˆä¿¡æ¯æˆ‘ä»¬å¾ˆå®¹æ˜“å®šä½åˆ°å‘ç”Ÿå¼‚å¸¸çš„ä»£ç è¡Œï¼Œæ¯”å¦‚ï¼š</p><pre><code class="java">@Testvoid test1() {    Student s = null;    Assertions.assertThrows(NullPointerException.class, ()-&gt; s.getName())            .fillInStackTrace()            .printStackTrace();}</code></pre><p>å¦‚æœæ˜¯åœ¨ Java14 ä¹‹å‰ï¼Œè¿™ä¸ªæ—¶å€™æ‰“å°å‡ºæ¥çš„å¼‚å¸¸ä¿¡æ¯æ˜¯ï¼š</p><pre><code class="log">Exception in thread &quot;main&quot; java.lang.NullPointerException    at cn.howardliu.tutorials.java14.NpeTest.test1(NpeTest.java:20)</code></pre><p>å¯¹äºä¸Šé¢ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å®šä½åˆ°<code>s</code>æ˜¯<code>null</code>ï¼Œä½†æ˜¯ä¸‹é¢è¿™ä¸ªä¾‹å­å‘¢ï¼š</p><pre><code class="java">@Testvoid test2() {    Student s = new Student();    s.setName(&quot;çœ‹å±±&quot;);    Assertions.assertThrows(NullPointerException.class, ()-&gt; s.getClazz().getNo())            .fillInStackTrace()            .printStackTrace();}</code></pre><p>æˆ‘ä»¬å¾ˆéš¾åˆ¤æ–­<code>s</code>æˆ–è€…<code>s</code>ä¸­çš„<code>clazz</code>æ˜¯<code>null</code>ï¼Œéœ€è¦æŸ¥çœ‹ä¸Šä¸‹æ–‡ä»£ç ï¼Œæˆ–è€…å¤æ‚æƒ…å†µè¿˜éœ€è¦æ·»åŠ æ—¥å¿—è¾…åŠ©å®šä½é—®é¢˜ã€‚</p><p>åœ¨ Java14 ä¸­ï¼Œå¯¹ NullPointerException å¼‚å¸¸æ ˆä¿¡æ¯åšäº†å¢å¼ºï¼Œé€šè¿‡åˆ†æç¨‹åºçš„å­—èŠ‚ç ä¿¡æ¯ï¼Œèƒ½å¤Ÿåšåˆ°å‡†ç¡®åœ°å®šä½åˆ°å‡ºç° NullPointerException çš„å˜é‡ï¼Œå¹¶ä¸”æ ¹æ®å®é™…æºä»£ç æ‰“å°å‡ºè¯¦ç»†å¼‚å¸¸ä¿¡æ¯ã€‚æ­¤æ—¶ï¼Œä¸Šé¢ä¾‹å­çš„å¼‚å¸¸ä¿¡æ¯æ˜¯ï¼š</p><pre><code class="log">java.lang.NullPointerException: Cannot invoke &quot;cn.howardliu.tutorials.java14.NpeTest$Clazz.getNo()&quot; because the return value of &quot;cn.howardliu.tutorials.java14.NpeTest$Student.getClazz()&quot; is null    at cn.howardliu.tutorials.java14.NpeTest.test2(NpeTest.java:30)</code></pre><p>è¿™æ ·ä¸€ç›®äº†ç„¶ã€‚</p><h2 id="å­µåŒ–åŠŸèƒ½"><a href="#å­µåŒ–åŠŸèƒ½" class="headerlink" title="å­µåŒ–åŠŸèƒ½"></a>å­µåŒ–åŠŸèƒ½</h2><p>å­µåŒ–åŠŸèƒ½æ˜¯ Java å¼€å‘å›¢é˜Ÿè®©æˆ‘ä»¬æå‰å°é²œã€å…¬æµ‹çš„åŠŸèƒ½ï¼Œåœ¨ Java9 æ¨¡å—åŒ–ä¹‹åï¼Œå­µåŒ–åŠŸèƒ½ä¼šæ”¾åœ¨<code>jdk.incubator.</code>ä¸­ã€‚</p><h3 id="å¤–éƒ¨å­˜å‚¨å™¨è®¿é—®-APIï¼ˆJEP-370ï¼‰"><a href="#å¤–éƒ¨å­˜å‚¨å™¨è®¿é—®-APIï¼ˆJEP-370ï¼‰" class="headerlink" title="å¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆJEP 370ï¼‰"></a>å¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆJEP 370ï¼‰</h3><p>Java å¯¹è±¡æ˜¯é©»ç•™åœ¨å †ä¸Šï¼Œä½†æ˜¯æœ‰æ—¶å€™å› ä¸ºå…¶ç®—æ³•æˆ–è€…å†…å­˜ç»“æ„çš„åŸå› ï¼Œä½¿ç”¨æ•ˆç‡ä½ä¸‹ã€æ€§èƒ½ä½ä¸‹ã€å—åƒåœ¾æ”¶é›†å™¨ GC ç®—æ³•å½±å“ã€‚æ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šä½¿ç”¨æœ¬æœºå†…å­˜æˆ–è€…ç§°ä¸ºç›´æ¥å†…å­˜ã€‚</p><p>åœ¨ Java14 ä¹‹å‰ï¼Œä½¿ç”¨ç›´æ¥å†…å­˜æˆ‘ä»¬ä¼šç”¨åˆ°<code>ByteBuffer</code>æˆ–è€…<code>Unsafe</code>ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªéƒ½å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚</p><ul><li><code>ByteBuffer</code>ç®¡ç†å†…å­˜æœ€å¤§ä¸èƒ½å¤Ÿè¶…è¿‡ 2Gï¼›</li><li><code>ByteBuffer</code>ç®¡ç†çš„è¿™éƒ¨åˆ†å†…å­˜éœ€è¦ä½¿ç”¨åƒåœ¾æ”¶é›†å™¨å›æ”¶å†…å­˜ï¼Œä½¿ç”¨ä¸å½“å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ï¼›</li><li><code>Unsafe</code>æ˜¯éæ ‡å‡†çš„ Java APIï¼Œå¯èƒ½ä¼šå› ä¸ºä¸åˆæ³•çš„å†…å­˜ä½¿ç”¨è‡´ä½¿ç³»ç»Ÿå´©æºƒã€‚</li></ul><p>â€œå¤©ä¸‹è‹¦ç§¦ä¹…çŸ£â€ï¼Œäºæ˜¯åœ¨ Java14 ä¸­æä¾›äº†æ–°çš„ APIï¼š</p><ul><li><code>MemorySegment</code>ï¼šç”¨æ¥ç”³è¯·å†…å­˜åŒºåŸŸï¼Œå¯ä»¥æ˜¯å †å†…å­˜ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹å¤–å†…å­˜ï¼›</li><li><code>MemoryAddress</code>ï¼šä»<code>MemorySegment</code>å®ä¾‹è·å–å·²ç”³è¯·å†…å­˜çš„å†…å­˜åœ°å€ç”¨äºæ‰§è¡Œæ“ä½œï¼Œä¾‹å¦‚ä»åº•å±‚å†…å­˜æ®µçš„å†…å­˜ä¸­æ£€ç´¢æ•°æ®ï¼›</li><li><code>MemoryLayout</code>ï¼šç”¨æ¥æè¿°å†…å­˜æ®µçš„å†…å®¹ï¼Œå®ƒå…è®¸æˆ‘ä»¬å®šä¹‰å¦‚ä½•å°†å†…å­˜åˆ†è§£ä¸ºå…ƒç´ ï¼Œå¹¶æä¾›æ¯ä¸ªå…ƒç´ çš„å¤§å°ã€‚</li></ul><p>è¿™éƒ¨åˆ†åŠŸèƒ½æˆªæ­¢åˆ° Java17 è¿˜æ˜¯å­µåŒ–åŠŸèƒ½ï¼Œè€Œä¸”å†…å®¹æ¯”è¾ƒå¤šï¼Œåç»­ä¼šå•ç‹¬å¼€ä¸€ç¯‡ä»‹ç»ã€‚</p><h3 id="æ‰“åŒ…å·¥å…·ï¼ˆJEP-343ï¼‰"><a href="#æ‰“åŒ…å·¥å…·ï¼ˆJEP-343ï¼‰" class="headerlink" title="æ‰“åŒ…å·¥å…·ï¼ˆJEP 343ï¼‰"></a>æ‰“åŒ…å·¥å…·ï¼ˆJEP 343ï¼‰</h3><p>ä¸€èˆ¬æ¥è¯´ï¼ŒJava ç¨‹åºä¼šä»¥ä¸€ä¸ª Jar çš„å½¢å¼æä¾›ï¼Œweb æœåŠ¡å¯èƒ½æ˜¯ war æˆ–è€… ear åŒ…ï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬çš„ Java ç¨‹åºå¯èƒ½æ˜¯åœ¨è‡ªå·±çš„ PC æœºï¼ˆæ¯”å¦‚ Windows æˆ–è€… MacOSï¼‰ä¸Šè¿è¡Œï¼ŒæœŸæœ›å¯ä»¥é€šè¿‡åŒå‡»æ‰“å¼€çš„æ–¹å¼ã€‚</p><p>äºæ˜¯ Java14 å¼•å…¥äº†<code>å¼•å…¥äº† jdk.incubator.jpackage.jmod</code>ï¼ŒåŸºäº JavaFX javapackager toolï¼Œå…¶ç›®çš„å°±æ˜¯åˆ›å»ºä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥å°† jar åŒ…æ„å»ºæˆ exeã€pkgã€dmgã€debã€rpm æ ¼å¼çš„å®‰è£…æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>jlink</code>åˆ›å»ºä¸€ä¸ªæœ€å°å¯è¿è¡Œçš„æ¨¡å—åŒ…ï¼Œç„¶åä½¿ç”¨<code>jpackage</code>å°†å…¶æ„å»ºæˆå®‰è£…åŒ…ï¼š</p><pre><code class="shell">jpackage --name myapp --input lib --main-jar main.jar</code></pre><h2 id="JVM-åŠŸèƒ½"><a href="#JVM-åŠŸèƒ½" class="headerlink" title="JVM åŠŸèƒ½"></a>JVM åŠŸèƒ½</h2><h3 id="ZGC-æ”¯æŒ-MacOS-å’Œ-Windows-ç³»ç»Ÿï¼ˆJEP-364ã€JEP-365ï¼‰"><a href="#ZGC-æ”¯æŒ-MacOS-å’Œ-Windows-ç³»ç»Ÿï¼ˆJEP-364ã€JEP-365ï¼‰" class="headerlink" title="ZGC æ”¯æŒ MacOS å’Œ Windows ç³»ç»Ÿï¼ˆJEP 364ã€JEP 365ï¼‰"></a>ZGC æ”¯æŒ MacOS å’Œ Windows ç³»ç»Ÿï¼ˆJEP 364ã€JEP 365ï¼‰</h3><p>ZGC æœ€åˆæ˜¯åœ¨ Java11 ä¸­å¼•å…¥ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a>ï¼‰ï¼Œåœ¨åç»­ç‰ˆæœ¬ä¸­ï¼Œä¸æ–­å‡çº§ä¼˜åŒ–ï¼Œå®ç°å¯ä¼¸ç¼©ã€ä½å»¶è¿Ÿçš„ç›®æ ‡ï¼Œä½¿ç”¨äº†å†…å­˜è¯»å±éšœã€æŸ“è‰²æŒ‡é’ˆã€å†…å­˜å¤šé‡æ˜ å°„ç­‰æŠ€æœ¯ã€‚åœ¨ä¹‹å‰ï¼ŒZGC åªæ”¯æŒ Linux/x64 å¹³å°ï¼Œåœ¨ Java14 ä¹‹åï¼Œæ”¯æŒäº† macOS/x64 å’Œ Windows/x64 ç³»ç»Ÿä¸­ã€‚</p><p>å¼€å¯å‚æ•°ï¼š</p><pre><code class="shell">-XX:+UnlockExperimentalVMOptions -XX:+UseZGC</code></pre><h3 id="G1-çš„å¯è¯†åˆ«-NUMA-ç³»ç»Ÿçš„å†…å­˜åˆ†é…ï¼ˆJEP-345ï¼‰"><a href="#G1-çš„å¯è¯†åˆ«-NUMA-ç³»ç»Ÿçš„å†…å­˜åˆ†é…ï¼ˆJEP-345ï¼‰" class="headerlink" title="G1 çš„å¯è¯†åˆ« NUMA ç³»ç»Ÿçš„å†…å­˜åˆ†é…ï¼ˆJEP 345ï¼‰"></a>G1 çš„å¯è¯†åˆ« NUMA ç³»ç»Ÿçš„å†…å­˜åˆ†é…ï¼ˆJEP 345ï¼‰</h3><p>Java14 æ”¹è¿›äº†éä¸€è‡´æ€§å†…å­˜è®¿é—®ï¼ˆNon-uniform Memory Accessï¼ŒNUMAï¼‰ç³»ç»Ÿä¸Šçš„ G1 åƒåœ¾æ”¶é›†å™¨çš„æ•´ä½“æ€§èƒ½ï¼Œä¸»è¦æ˜¯å¯¹å¹´è½»ä»£çš„å†…å­˜åˆ†é…åšå‡ºä¼˜åŒ–ï¼Œä»è€Œæå‡ CPU è®¡ç®—è¿‡ç¨‹ä¸­å†…å­˜è®¿é—®é€Ÿåº¦ã€‚</p><p>NUMA ä¸»è¦æ˜¯æŒ‡åœ¨å¤šæ’æ§½ç‰©ç†è®¡ç®—æœºä½“ç³»ä¸­ï¼Œå¤„ç†å™¨ä¸€èˆ¬æ˜¯å¤šæ ¸ï¼Œä¸”è¶Šæ¥è¶Šå¤šå…·å¤‡ NUMA è®¿é—®ä½“ç³»ç»“æ„ï¼Œå³å†…å­˜ä¸æ¯ä¸ªæ’æ§½æˆ–å†…æ ¸ä¹‹é—´çš„è·ç¦»ä¸ç­‰ã€‚å¥—æ¥å­—ä¹‹é—´çš„å†…å­˜è®¿é—®æœ‰ä¸åŒçš„æ€§èƒ½ç‰¹å¾ï¼Œæ›´è¿œçš„å¥—æ¥å­—è®¿é—®ä¼šæœ‰æ›´å¤šçš„æ—¶é—´æ¶ˆè€—ã€‚è¿™æ ·çš„ç»“æœæ˜¯ï¼Œæ¯ä¸ªæ ¸å¯¹äºæŸä¸€åŒºåŸŸçš„å†…å­˜è®¿é—®é€Ÿåº¦ä¼šéšæ ¸ä¸ç‰©ç†å†…å­˜çš„ä½ç½®è¿œè¿‘æœ‰æ‰€å·®å¼‚ã€‚</p><p>Java åˆ†é…å†…å­˜æ—¶ï¼ŒG1 ä¼šç”³è¯·ä¸€å— regionï¼Œä½œä¸ºå¯¹è±¡å­˜æ”¾åŒºåŸŸã€‚å¦‚æœèƒ½å¤Ÿæ„ŸçŸ¥ NUMAï¼Œå°±å¯ä»¥ä¼˜å…ˆåœ¨å½“å‰çº¿ç¨‹ç»‘å®šçš„ NUMA èŠ‚ç‚¹ç©ºé—²å†…å­˜æ‰§è¡Œç”³è¯·å†…å­˜æ“ä½œï¼Œç”¨äºæå‡è®¿é—®é€Ÿåº¦ã€‚</p><p>å¯ç”¨å‚æ•°æ˜¯<code>-XX:+UseNUMA</code>ã€‚</p><h3 id="JFR-äº‹ä»¶æµï¼ˆJEP-349ï¼‰"><a href="#JFR-äº‹ä»¶æµï¼ˆJEP-349ï¼‰" class="headerlink" title="JFR äº‹ä»¶æµï¼ˆJEP 349ï¼‰"></a>JFR äº‹ä»¶æµï¼ˆJEP 349ï¼‰</h3><p>é£è¡Œè®°å½•å™¨ï¼ˆFlight Recorderï¼‰æ˜¯åœ¨ Java11 ä¸­å¼•å…¥ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a>ï¼‰ã€‚</p><p>æœ¬æ¬¡å¢å¼ºå¯ä»¥å®ç° JFR æ•°æ®çš„å…¬å¼€è®¿é—®ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨<code>jdk.jfr.consumer</code>ä¸­çš„æ–¹æ³•æŒç»­è¯»å–æˆ–æµå¼ä¼ è¾“è¯»å–è®°å½•ï¼Œç”¨äºæŒç»­ç›‘æ§ã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç°æœ‰ç›‘æ§ç³»ç»Ÿé›†æˆï¼Œå®ç° JFR æ•°æ®çš„æŒç»­ç›‘å¬ï¼Œä¸ç”¨éå¾—ç­‰ç€æ”¶é›†å®Œæˆåå†è§£æåˆ†æã€‚</p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h2 id="éåŸå­æ€§çš„å­—èŠ‚ç¼“å†²åŒºæ˜ å°„ï¼ˆJEP-352ï¼‰"><a href="#éåŸå­æ€§çš„å­—èŠ‚ç¼“å†²åŒºæ˜ å°„ï¼ˆJEP-352ï¼‰" class="headerlink" title="éåŸå­æ€§çš„å­—èŠ‚ç¼“å†²åŒºæ˜ å°„ï¼ˆJEP 352ï¼‰"></a>éåŸå­æ€§çš„å­—èŠ‚ç¼“å†²åŒºæ˜ å°„ï¼ˆJEP 352ï¼‰</h2><p>å¯¹<code>FileChannel</code>è¿›è¡Œæ‰©å±•ï¼Œå®šä¹‰äº†<code>jdk.nio.mapmode.ExtendedMapMode</code>ï¼Œç”¨æ¥åˆ›å»º<code>MappedByteBuffer</code>å®ä¾‹ï¼Œå¯ä»¥å¯¹éåŸå­æ€§çš„å­—èŠ‚ç¼“å†²åŒºæ˜ å°„ï¼ˆNon-Volatile Mapped Byte Buffersï¼ŒNVMï¼‰å®ç°æŒä¹…åŒ–ã€‚</p><h3 id="åˆ é™¤-CMS-åƒåœ¾å›æ”¶å™¨ï¼ˆJEP-363ï¼‰"><a href="#åˆ é™¤-CMS-åƒåœ¾å›æ”¶å™¨ï¼ˆJEP-363ï¼‰" class="headerlink" title="åˆ é™¤ CMS åƒåœ¾å›æ”¶å™¨ï¼ˆJEP 363ï¼‰"></a>åˆ é™¤ CMS åƒåœ¾å›æ”¶å™¨ï¼ˆJEP 363ï¼‰</h3><p>CMS æ˜¯è€å¹´ä»£åƒåœ¾å›æ”¶ç®—æ³•ï¼Œé€šè¿‡æ ‡è®°-æ¸…é™¤çš„æ–¹å¼è¿›è¡Œå†…å­˜å›æ”¶ï¼Œåœ¨å†…å­˜å›æ”¶è¿‡ç¨‹ä¸­èƒ½å¤Ÿä¸ç”¨æˆ·çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œã€‚åœ¨ G1 ä¹‹å‰ï¼ŒCMS å‡ ä¹å æ®äº† GC çš„å…¨éƒ¨æ±Ÿå±±ã€‚åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬æ˜¯ CMS ä¸ Parallel New æ­é…ä½¿ç”¨ã€‚</p><p>CMS ç”±äºå…¶ç®—æ³•ç‰¹æ€§ï¼Œä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡å’Œæµ®åŠ¨åƒåœ¾ï¼Œéšç€æ—¶é—´æ¨ç§»ï¼Œå¯èƒ½å‡ºç°çš„æƒ…å†µæ˜¯ï¼Œè™½ç„¶è€å¹´ä»£è¿˜æœ‰ç©ºé—´ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ³•åˆ†é…è¶³å¤Ÿå†…å­˜ç»™å¤§å¯¹è±¡ã€‚</p><p>æ‰€ä»¥åœ¨ Java9 ä¸­å¼€å§‹æ”¾å¼ƒä½¿ç”¨ CMSï¼Œåœ¨ Java14 ä¸­å½»åº•åˆ é™¤ï¼Œå¹¶åˆ é™¤ä¸ CMS æœ‰å…³çš„å‚æ•°ã€‚ä» Java14 å¼€å§‹ï¼ŒCMS æˆä¸ºäº†å†å²ã€‚</p><h3 id="å¼ƒç”¨-ParallelScavenge-å’Œ-SerialOld-GC-çš„ç»„åˆï¼ˆJEP-366ï¼‰"><a href="#å¼ƒç”¨-ParallelScavenge-å’Œ-SerialOld-GC-çš„ç»„åˆï¼ˆJEP-366ï¼‰" class="headerlink" title="å¼ƒç”¨ ParallelScavenge å’Œ SerialOld GC çš„ç»„åˆï¼ˆJEP 366ï¼‰"></a>å¼ƒç”¨ ParallelScavenge å’Œ SerialOld GC çš„ç»„åˆï¼ˆJEP 366ï¼‰</h3><p>Parallel Scavenge æ˜¯å¹¶è¡Œæ”¶é›†ç®—æ³•ï¼ŒSerialOld æä¾›è€å¹´ä»£ä¸²è¡Œæ”¶é›†ï¼Œè¿™ç§å¹´è½»ä»£ä½¿ç”¨å¹¶è¡Œç®—æ³•ã€è€å¹´ä»£ä½¿ç”¨ä¸²è¡Œç®—æ³•çš„æ··æ­çš„æ–¹å¼ï¼Œä½¿ç”¨åœºæ™¯å°‘ä¸”æœ‰é£é™©ã€‚ä½†æ˜¯å´éœ€è¦å¤§é‡å·¥ä½œé‡ç»´æŠ¤ï¼Œæ‰€ä»¥åœ¨ Java14 ä¸­ï¼Œåˆ é™¤äº†è¿™ä¸¤ç§ GC ç»„åˆã€‚</p><p>åˆ é™¤ç»„åˆçš„æ–¹å¼æ˜¯é€šè¿‡å¯ç”¨ç»„åˆå‚æ•°<code>-XX:+UseParallelGC -XX:-UseParallelOldGC</code>ï¼Œå¹¶åœ¨å•ç‹¬ä½¿ç”¨<code>-XX:-UseParallelOldGC</code>æ—¶ä¼šæ”¶åˆ°è­¦å‘Šä¿¡æ¯ã€‚</p><h3 id="ç§»é™¤-Pack200-Tools-å’Œ-APIï¼ˆJEP-367ï¼‰"><a href="#ç§»é™¤-Pack200-Tools-å’Œ-APIï¼ˆJEP-367ï¼‰" class="headerlink" title="ç§»é™¤ Pack200 Tools å’Œ APIï¼ˆJEP 367ï¼‰"></a>ç§»é™¤ Pack200 Tools å’Œ APIï¼ˆJEP 367ï¼‰</h3><p>these were deprecated for removal in Java 11, and now removed</p><p>åˆ é™¤<code>java.util.jar</code>åŒ…ä¸­çš„<code>pack200</code>å’Œ<code>unpack200</code>å·¥å…·ä»¥åŠ Pack200 APIã€‚è¿™äº›å·¥å…·å’Œ API å·²åœ¨ Java11 æ—¶æ ‡è®°å¼ƒç”¨ï¼Œåˆ é™¤ä¹Ÿæ˜¯æ„æ–™ä¹‹ä¸­ã€‚</p><h3 id="å¼ƒç”¨-Solaris-å’Œ-SPARC-ç«¯å£ï¼ˆJEP-362ï¼‰"><a href="#å¼ƒç”¨-Solaris-å’Œ-SPARC-ç«¯å£ï¼ˆJEP-362ï¼‰" class="headerlink" title="å¼ƒç”¨ Solaris å’Œ SPARC ç«¯å£ï¼ˆJEP 362ï¼‰"></a>å¼ƒç”¨ Solaris å’Œ SPARC ç«¯å£ï¼ˆJEP 362ï¼‰</h3><p>Solaris å’Œ SPARC éƒ½å·²è¢« Linux æ“ä½œç³»ç»Ÿå’Œè‹±ç‰¹å°”å¤„ç†å™¨å–ä»£ã€‚æ”¾å¼ƒå¯¹ Solaris å’Œ SPARC ç«¯å£çš„æ”¯æŒå°†ä½¿ OpenJDK ç¤¾åŒºçš„è´¡çŒ®è€…èƒ½å¤ŸåŠ é€Ÿå¼€å‘æ–°åŠŸèƒ½ï¼Œä»è€Œæ¨åŠ¨å¹³å°å‘å‰å‘å±•ã€‚</p><p>è¿™äº› API åœ¨ Java14 ä¸­æ ‡è®°å¼ƒç”¨ï¼Œåœ¨ Java15 ä¸­å½»åº•åˆ é™¤ã€‚è¿™æ ·åšï¼Œä¹Ÿæ˜¯ä¸ºäº†è®©å¾ˆå¤šæ­£åœ¨è¿›è¡Œçš„é¡¹ç›®å°½æ—©é€‚åº”æ–°çš„æ¶æ„ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java14 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä» <a href="https://openjdk.java.net/projects/jdk/14/" target="_blank" rel="noopener">https://openjdk.java.net/projects/jdk/14/</a> æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-14-features/">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava14 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/123340900" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava14 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      æœ¬æ–‡è®²è§£ä¸€ä¸‹ Java14 çš„ç‰¹æ€§ï¼Œè¿™ä¸ªç‰ˆæœ¬å¸¦æ¥äº†ä¸å°‘æ–°ç‰¹æ€§ã€åŠŸèƒ½å®ç”¨æ€§çš„å¢å¼ºã€GC çš„å°è¯•ã€æ€§èƒ½ä¼˜åŒ–ç­‰ï¼šJEP 305ï¼šinstanceof æ¨¡å¼åŒ¹é… ï¼ˆé¢„è§ˆç‰ˆï¼‰ï¼›JEP 343ï¼šæ‰“åŒ…å·¥å…· ï¼ˆå­µåŒ–ï¼‰ï¼›JEP 345ï¼šG1 çš„å¯è¯†åˆ« NUMA ç³»ç»Ÿçš„å†…å­˜åˆ†é…ï¼›JEP 349ï¼šJFR äº‹ä»¶æµï¼›JEP 352ï¼šéåŸå­æ€§çš„å­—èŠ‚ç¼“å†²åŒºæ˜ å°„ï¼›JEP 358ï¼šNullPointerException çš„å‹å¥½æç¤ºä¿¡æ¯ï¼›JEP 359ï¼šRecord å£°æ˜ ï¼ˆé¢„è§ˆç‰ˆï¼‰ï¼›JEP 361ï¼šSwitch è¡¨è¾¾å¼è½¬æ­£ ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆï¼‰ï¼›JEP 362ï¼šå¼ƒç”¨ Solaris å’Œ SPARC ç«¯å£ï¼›JEP 363ï¼šåˆ é™¤ CMS åƒåœ¾å›æ”¶å™¨ï¼›JEP 364ï¼šZGC æ”¯æŒ MacOSï¼›JEP 365ï¼šZGC æ”¯æŒ Windowsï¼›JEP 366ï¼šå¼ƒç”¨ ParallelScavenge å’Œ SerialOld GC çš„ç»„åˆï¼›JEP 367ï¼šç§»é™¤ Pack200 Tools å’Œ APIï¼›JEP 368ï¼šæ–‡æœ¬å— ï¼ˆç¬¬äºŒç‰ˆé¢„è§ˆï¼‰ï¼›JEP 370ï¼šå¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆå­µåŒ–ï¼‰ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java14" scheme="https://www.howardliu.cn/tags/Java14/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava13 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java-13-features/"/>
    <id>https://www.howardliu.cn/java-13-features/</id>
    <published>2022-02-14T13:41:37.000Z</published>
    <updated>2022-02-14T13:41:37.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/bird-6965228_1920.jpeg" alt="Java13 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚ä» <a href="https://res.cloudinary.com/snyk/image/upload/v1623860216/reports/jvm-ecosystem-report-2021.pdf" target="_blank" rel="noopener">ã€ŠJVM Ecosystem Report 2021ã€‹</a> ä¸­å¯ä»¥çœ‹å‡ºï¼Œç›®å‰å¼€å‘ç¯å¢ƒä¸­æœ‰è¿‘åŠçš„ç¯å¢ƒä½¿ç”¨ Java8ï¼Œæœ‰è¿‘åŠçš„äººè½¬ç§»åˆ°äº† Java11ï¼Œéšç€ Java17 çš„å‘å¸ƒï¼Œç›¸ä¿¡æ¯”ä¾‹ä¼šæœ‰æ‰€å˜åŒ–ã€‚</p><p>å› æ­¤ï¼Œå‡†å¤‡å‡ºä¸€ä¸ªç³»åˆ—ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œé˜è¿°å„ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>æœ¬æ–‡è®²è§£ä¸€ä¸‹ Java13 çš„ç‰¹æ€§ï¼Œè¿™ä¸ªç‰ˆæœ¬åœ¨è¯­æ³•ç‰¹æ€§ä¸Šå¢åŠ ä¸å¤šï¼Œå€¼å¾—å…³æ³¨çš„æ˜¯ä¸¤ä¸ªé¢„è§ˆåŠŸèƒ½ï¼šSwitch è¡¨è¾¾å¼å’Œæ–‡æœ¬å—ï¼Œå¦å¤–å¯ä»¥å…³ä¹çš„æ˜¯æ€§èƒ½ä¼˜åŒ–æ–¹é¢çš„ï¼šåŠ¨æ€ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰å­˜æ¡£ã€ZGC åŠ¨æ€é‡Šæ”¾æœªä½¿ç”¨å†…å­˜ã€Socket API é‡æ„ã€‚è¿™äº›æ–¹é¢å¯ä»¥çœ‹å‡ºï¼ŒJava çš„å‡çº§æ–¹å‘æœ‰ä¸¤ä¸ªï¼Œä¸€æ˜¯å¢åŠ åŠŸèƒ½ï¼Œå¢åŠ æ–°çš„è¯­æ³•ç‰¹æ€§ï¼›äºŒæ˜¯å¢å¼ºåŠŸèƒ½ï¼Œæå‡å·²æœ‰åŠŸèƒ½æ€§èƒ½ã€‚</p><h2 id="é¢„è§ˆåŠŸèƒ½"><a href="#é¢„è§ˆåŠŸèƒ½" class="headerlink" title="é¢„è§ˆåŠŸèƒ½"></a>é¢„è§ˆåŠŸèƒ½</h2><p>Java13 å¼•å…¥äº†ä¸¤ä¸ªæ–°çš„è¯­æ³•ç‰¹æ€§ï¼šSwitch è¡¨è¾¾å¼å’Œæ–‡æœ¬å—ã€‚è¿™äº›é¢„è§ˆåŠŸèƒ½æ˜¯ä¸ºäº†è®©å¼€å‘è€…å°é²œçš„åŒæ—¶ï¼Œå¯ä»¥å¿«é€Ÿè°ƒæ•´ï¼Œåé¦ˆå¥½å°±ç•™ä¸‹ï¼Œä¸å¥½å°±ç§»é™¤ã€‚ç›®å‰æ¥çœ‹ï¼Œè¿™äº›ç‰¹æ€§è¿˜æ˜¯æŒºé¦™çš„ã€‚</p><p><img src="https://static.howardliu.cn/Illustration/zhenxiangdinglv.jpeg" alt="çœŸé¦™å®šå¾‹"></p><h3 id="Switch-è¡¨è¾¾å¼"><a href="#Switch-è¡¨è¾¾å¼" class="headerlink" title="Switch è¡¨è¾¾å¼"></a>Switch è¡¨è¾¾å¼</h3><p>åœ¨ Java12 ä¸­ Switch è¡¨è¾¾å¼é¦–æ¬¡ä»¥é¢„è§ˆç‰ˆçš„èº«ä»½å‡ºç°ï¼Œåœ¨ Java13 ä¸­åˆåšäº†å¢å¼ºï¼Œåœ¨ Java14 æ­£å¼æä¾›ã€‚Java13 æ·»åŠ äº†<code>yield</code>å…³é”®å­—ï¼Œç”¨æ¥è¿”å›å€¼ã€‚</p><p><code>yield</code>ä¸<code>return</code>çš„åŒºåˆ«åœ¨äºï¼Œ<code>yield</code>åªä¼šè·³å‡º<code>switch</code>å—ï¼Œ<code>return</code>æ˜¯è·³å‡ºå½“å‰æ–¹æ³•æˆ–å¾ªç¯ã€‚</p><p>æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œåœ¨ Java12 ä¹‹å‰ï¼Œè¦åˆ¤æ–­æ—¥æœŸå¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="java">@Testvoid testSwitch() {    final DayOfWeek day = DayOfWeek.from(LocalDate.now());    String typeOfDay = &quot;&quot;;    switch (day) {        case MONDAY:        case TUESDAY:        case WEDNESDAY:        case THURSDAY:        case FRIDAY:            typeOfDay = &quot;Working Day&quot;;            break;        case SATURDAY:        case SUNDAY:            typeOfDay = &quot;Rest Day&quot;;            break;    }    Assertions.assertFalse(typeOfDay.isEmpty());}</code></pre><p>åœ¨ Java12 æä¾›çš„ Switch è¡¨è¾¾å¼é¢„è§ˆåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸€ä¸‹ï¼š</p><pre><code class="java">@Testvoid testSwitchExpression() {    final DayOfWeek day = DayOfWeek.SATURDAY;    final String typeOfDay = switch (day) {        case MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; &quot;Working Day&quot;;        case SATURDAY, SUNDAY -&gt; &quot;Day Off&quot;;    };    Assertions.assertEquals(&quot;Day Off&quot;, typeOfDay);}</code></pre><p>è¿™æ ·å¯ä»¥å®ç°åˆ¤æ–­ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ³•åœ¨è¡¨è¾¾å¼ä¸­å®ç°å…¶ä»–é€»è¾‘äº†ã€‚äºæ˜¯ Java13 è¡¥é½äº†è¿™ä¸ªåŠŸèƒ½ï¼š</p><pre><code class="java">@Testvoid testSwitchExpression13() {    final DayOfWeek day = DayOfWeek.SATURDAY;    final String typeOfDay = switch (day) {        case MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; {            System.out.println(&quot;Working Day: &quot; + day);            yield &quot;Working Day&quot;;        }        case SATURDAY, SUNDAY -&gt; {            System.out.println(&quot;Day Off: &quot; + day);            yield &quot;Day Off&quot;;        }    };    Assertions.assertEquals(&quot;Day Off&quot;, typeOfDay);}</code></pre><p>è¿™é‡Œéœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œæ—¢ç„¶æ˜¯é¢„è§ˆåŠŸèƒ½ï¼Œä¼šä¸æ­£å¼æä¾›åŠŸèƒ½æœ‰äº›å‡ºå…¥ã€‚ä¸Šé¢çš„ä»£ç æ˜¯åœ¨ Java14 ç¯å¢ƒä¸­ç¼–å†™ï¼Œä¸ Java13 å‘å¸ƒçš„åŠŸèƒ½æè¿°æœ‰äº›å·®å¼‚ï¼Œè¿™ç‚¹ä¸å¿…æ·±ç©¶ï¼Œå·²ç»åºŸå¼ƒçš„çº¦æŸå°±æ˜¯ä¸å­˜åœ¨ã€‚</p><h3 id="æ–‡æœ¬å—"><a href="#æ–‡æœ¬å—" class="headerlink" title="æ–‡æœ¬å—"></a>æ–‡æœ¬å—</h3><p>ä¸€ç›´ä»¥æ¥ï¼ŒJava ä¸­çš„å­—ç¬¦ä¸²å®šä¹‰éƒ½æ˜¯ä»¥åŒå¼•å·æ‹¬èµ·æ¥çš„å½¢å¼ï¼Œä¸æ”¯æŒå¤šè¡Œä¹¦å†™ï¼Œæ‰€ä»¥åœ¨éœ€è¦å¤šè¡Œå­—ç¬¦ä¸²ä¸­ï¼Œéœ€è¦ä½¿ç”¨è½¬ä¹‰ç¬¦è¡¨ç¤ºï¼Œæ—¢ä¸å¥½çœ‹ã€è¿˜ä¸å¥½è¯»ï¼Œæ›´ä¸å¥½ç»´æŠ¤ã€‚</p><p>åƒå‘¼ä¸‡å”¤å§‹å‡ºæ¥ï¼Œç»ˆäºæœ‰äº†æ–‡æœ¬å—åŠŸèƒ½ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦å†™ä¸€æ®µ Json æ ¼å¼çš„æ•°æ®ï¼ŒJava13 ä¹‹å‰éœ€è¦å†™æˆï¼š</p><pre><code class="java">String json = &quot;{\n&quot;        + &quot;  \&quot;wechat\&quot;: \&quot;hellokanshan\&quot;,\n&quot;        + &quot;  \&quot;wechatName\&quot;: \&quot;çœ‹å±±ã€&quot;,\n&quot;        + &quot;  \&quot;mp\&quot;: \&quot;kanshanshuo\&quot;,\n&quot;        + &quot;  \&quot;mpName\&quot;: \&quot;çœ‹å±±çš„å°å±‹ã€&quot;\n&quot;        + &quot;}\n&quot;;</code></pre><p>ä½†æ˜¯åœ¨ Java13 é¢„è§ˆç‰ˆä¸­å¯ä»¥å†™ä½œï¼š</p><pre><code class="java">String json2 = &quot;&quot;&quot;        {          &quot;wechat&quot;: &quot;hellokanshan&quot;,          &quot;wechatName&quot;: &quot;çœ‹å±±&quot;,          &quot;mp&quot;: &quot;kanshanshuo&quot;,          &quot;mpName&quot;: &quot;çœ‹å±±çš„å°å±‹&quot;        }        &quot;&quot;&quot;;</code></pre><p>å°‘äº†å¾ˆå¤šçš„+ã€æ¢è¡Œã€è½¬ç§»ç­‰å­—ç¬¦ï¼Œçœ‹ç€æ›´åŠ ç›´è§‚ã€‚</p><p>è¿™ä¸ªåŠŸèƒ½åœ¨ Java15 ä¸­æ­£å¼æä¾›ã€‚</p><h2 id="åŠ¨æ€ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰å­˜æ¡£"><a href="#åŠ¨æ€ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰å­˜æ¡£" class="headerlink" title="åŠ¨æ€ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰å­˜æ¡£"></a>åŠ¨æ€ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰å­˜æ¡£</h2><p>CDS æ˜¯ Java5 å¼•å…¥çš„ä¸€ç§ç±»é¢„å¤„ç†æ–¹å¼ï¼Œå¯ä»¥å°†ä¸€ç»„ç±»å…±äº«åˆ°ä¸€ä¸ªå½’æ¡£æ–‡ä»¶ä¸­ï¼Œå€ŸåŠ©å†…å­˜æ˜ å°„åŠ è½½ç±»æ•°æ®ï¼Œå‡å°‘å¯åŠ¨æ—¶é—´ï¼Œå¹¶å¯å®ç°åœ¨å¤š JVM ä¹‹é—´å…±äº«çš„åŠŸèƒ½ã€‚åœ¨ Java10 å¯¹å…¶è¿›è¡Œæ‰©å±•ï¼Œå¢å¤§äº† CDS ä½¿ç”¨èŒƒå›´ï¼Œå³ AppCDSï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 æ–°ç‰¹æ€§</a>ï¼‰ã€‚åˆ°äº† Java12ï¼Œå°† CDS å½’æ¡£æ–‡ä»¶ä½œä¸ºäº†é»˜è®¤åŠŸèƒ½å¼€æ”¾å‡ºæ¥ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 æ–°ç‰¹æ€§</a>ï¼‰ã€‚</p><p>ä½†æ˜¯è¿™ä¸ªåŠŸèƒ½åœ¨ä½¿ç”¨çš„æ—¶å€™è¿˜æ˜¯æœ‰äº›éº»çƒ¦ã€‚ä¸ºäº†ç”Ÿæˆå½’æ¡£æ–‡ä»¶ï¼Œå¼€å‘äººå‘˜å¿…é¡»å…ˆå¯¹åº”ç”¨ç¨‹åºè¿›è¡Œè¯•è¿è¡Œï¼Œåˆ›å»ºä¸€ä¸ªç±»åˆ—è¡¨ï¼Œç„¶åå°†å…¶è½¬å‚¨åˆ°å½’æ¡£æ–‡ä»¶ä¸­ã€‚ç„¶åï¼Œè¿™ä¸ªå½’æ¡£æ‰å¯ä»¥ç”¨æ¥åœ¨ JVM ä¹‹é—´å…±äº«å…ƒæ•°æ®ã€‚</p><p>Java13 ç®€åŒ–äº†è¿™ä¸ªè¿‡ç¨‹ï¼šå…è®¸ Java åº”ç”¨åœ¨è¿è¡Œç»“æŸååŠ¨æ€å½’æ¡£ï¼Œå³å°†å·²è¢«åŠ è½½ä½†ä¸å±äº CDS çš„ç±»ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰ç±»å’Œå¼•ç”¨åº“çš„ç±»ï¼‰åŠ¨æ€æ·»åŠ åˆ° CDS å½’æ¡£æ–‡ä»¶ä¸­ã€‚ä¸ç”¨å†æä¾›å½’æ¡£ç±»çš„åˆ—è¡¨ï¼Œé€šè¿‡æ›´åŠ ç®€æ´çš„æ–¹å¼åˆ›å»ºåŒ…å«åº”ç”¨ç¨‹åºçš„å½’æ¡£ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>-XX:ArchiveClassesAtExit</code>å‚æ•°æ§åˆ¶åº”ç”¨ç¨‹åºé€€å‡ºæ—¶åˆ›å»º CDS å½’æ¡£æ–‡ä»¶ï¼š</p><pre><code class="shell">java -XX:ArchiveClassesAtExit=&lt;archive filename&gt; -cp &lt;app jar&gt; AppName</code></pre><p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>-XX:SharedArchiveFile</code>æ¥ä½¿ç”¨åŠ¨æ€å­˜æ¡£åŠŸèƒ½ï¼š</p><pre><code class="shell">java -XX:SharedArchiveFile=&lt;archive filename&gt; -cp &lt;app jar&gt; AppName</code></pre><h2 id="ZGC-å¢å¼ºï¼šé‡Šæ”¾æœªä½¿ç”¨å†…å­˜"><a href="#ZGC-å¢å¼ºï¼šé‡Šæ”¾æœªä½¿ç”¨å†…å­˜" class="headerlink" title="ZGC å¢å¼ºï¼šé‡Šæ”¾æœªä½¿ç”¨å†…å­˜"></a>ZGC å¢å¼ºï¼šé‡Šæ”¾æœªä½¿ç”¨å†…å­˜</h2><p>ZGC æ˜¯ Java11 ä¸­å¼•å…¥çš„ä¸€ä¸ªå¯ä¼¸ç¼©ã€ä½å»¶è¿Ÿçš„åƒåœ¾æ”¶é›†å™¨ï¼Œä¸»è¦ç›®æ ‡åŒ…æ‹¬ï¼šGC åœé¡¿æ—¶é—´ä¸è¶…è¿‡ 10msï¼›å¯ä»¥å¤„ç†ä»å‡ ç™¾ MB çš„å°å †ï¼Œåˆ°å‡ ä¸ª TB çš„å¤§å †ï¼›åº”ç”¨ååèƒ½åŠ›ä¸ä¼šä¸‹é™è¶…è¿‡ 15%ç­‰ï¼ˆå‚è§ <a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a>ï¼‰ã€‚</p><p>ä½†æ˜¯ ZGC å¹¶æ²¡æœ‰åƒ Hotspot ä¸­çš„ G1 å’Œ Shenandoah é‚£æ ·ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾æœªä½¿ç”¨çš„å†…å­˜ï¼Œå¯¹äºå¤šæ•°åº”ç”¨ç¨‹åºæ¥è¯´ï¼ŒCPU å’Œå†…å­˜éƒ½æ˜¯ç¨€ç¼ºèµ„æºï¼Œå°¤å…¶æ˜¯ç°åœ¨äº‘ä¸Šç¯å¢ƒå’Œè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå¦‚æœåº”ç”¨ç¨‹åºå ç”¨çš„å†…å­˜é•¿æœŸå¤„äºç©ºé—²çŠ¶æ€ï¼Œè¿˜ç´§æ¡ä½ä¸é‡Šæ”¾ï¼Œå°±æ˜¯æå¤§çš„æµªè´¹ã€‚</p><p>åœ¨ Java13 ä¸­å¯¹å…¶è¿›è¡Œæ”¹è¿›ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>å¯é‡Šæ”¾ç©ºé—²å†…å­˜</li><li>æ”¯æŒçš„æœ€å¤§å †å¤§å°ä» 4TB æ‰©å¤§åˆ° 16TB</li></ul><p>æˆ‘ä»¬æ¥çœ‹ä¸‹ ZGC çš„å†…éƒ¨é€»è¾‘ã€‚</p><p>ZGC å †ç”±ä¸€ç»„ç§°ä¸º ZPages çš„å †åŒºåŸŸç»„æˆï¼Œæ¯ä¸ª ZPage éƒ½ä¸æäº¤çš„å †å†…å­˜çš„å¯å˜æ•°é‡ç›¸å…³è”ã€‚å½“ ZGC å‹ç¼©å †æ—¶ï¼ŒZPages è¢«é‡Šæ”¾å¹¶æ’å…¥åˆ°é¡µé¢ç¼“å­˜ ZPageCache ä¸­ï¼Œé¡µé¢ç¼“å­˜ä¸­çš„ ZPages å¯ä»¥é‡æ–°ä½¿ç”¨ï¼Œä»¥æ»¡è¶³æ–°çš„å †åˆ†é…ã€‚</p><p>ZPageCache ä¸­çš„ ZPages é›†åˆä»£è¡¨å †ä¸­æœªä½¿ç”¨çš„éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†å¯ä»¥é‡Šæ”¾å›æ“ä½œç³»ç»Ÿã€‚ZPageCache ä¸­çš„ ZPages æ ¹æ® LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰æ’åºï¼Œå¹¶æŒ‰ç…§å¤§ä¸­å°è¿›è¡Œåˆ†ç»„ã€‚è¿™æ ·çš„è¯å°±å¯ä»¥æ ¹æ®ç®—æ³•æŒ‰é¡ºåºé‡Šæ”¾æœªä½¿ç”¨çš„å†…å­˜ã€‚</p><p>Java13 è¿˜æä¾›äº†<code>-XX:ZUncommitDelay=&lt;seconds&gt;</code>å‘½ä»¤ï¼Œç”¨äºæŒ‡å®šé‡Šæ”¾å¤šé•¿æ—¶é—´ï¼ˆé»˜è®¤æ˜¯ 5 åˆ†é’Ÿï¼‰æœªä½¿ç”¨çš„å†…å­˜ï¼Œè¿™ä¸ªå‚æ•°ç±»ä¼¼äº Shenandoah ä¸­çš„<code>-XX:ShenandoahUncommitDelay=&lt;milliseconds&gt;</code>ã€‚</p><p>åœ¨ Java13 ä¸­ï¼ŒZGC å†…å­˜é‡Šæ”¾åŠŸèƒ½é»˜è®¤å¼€å¯ï¼Œå¯é€šè¿‡å‚æ•°<code>-XX:-ZUncommit</code>å…³é—­è¯¥åŠŸèƒ½ã€‚ç”±äº ZGC é‡Šæ”¾å†…å­˜æ—¶ï¼Œä¸ä¼šä½äºæœ€å°å †å†…å­˜ï¼Œå³å½“æœ€å°å †å†…å­˜ï¼ˆ-Xmsï¼‰ä¸æœ€å¤§å †å†…å­˜ï¼ˆ-Xmxï¼‰ä¸€æ ·æ—¶ï¼Œä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚</p><h2 id="Socket-API-é‡æ„"><a href="#Socket-API-é‡æ„" class="headerlink" title="Socket API é‡æ„"></a>Socket API é‡æ„</h2><p>Java ä¸­çš„ Socket æ˜¯ä» Java1.0 å¼€å§‹å°±æœ‰çš„ï¼Œæ˜¯ Java ä¸­ä¸å¯æˆ–ç¼ºçš„ç½‘ç»œ APIï¼Œç®—èµ·æ¥å·²ç»æœå½¹ 20 å¤šå¹´äº†ã€‚åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œä¿¡æ¯æŠ€æœ¯å·²ç»å‘ç”Ÿäº†å¾ˆå¤šå˜åŒ–ï¼Œè¿™äº›ä¸Šå¤ API æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œè€Œä¸”ä¸å®¹æ˜“ç»´æŠ¤å’Œè°ƒè¯•ã€‚</p><p>Java çš„ Socket API ä¸»è¦åŒ…æ‹¬<code>java.net.ServerSocket</code>å’Œ<code>java.net.Socket</code>ï¼Œ<code>ServerSocket</code>ç”¨æ¥ç›‘å¬è¿æ¥è¯·æ±‚çš„ç«¯å£ï¼Œè¿æ¥æˆåŠŸåè¿”å›çš„æ˜¯<code>Socket</code>å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡æ“ä½œ<code>Socket</code>å¯¹è±¡å®ç°æ•°æ®å‘é€å’Œè¯»å–ã€‚Java æ˜¯é€šè¿‡<code>SocketImpl</code>å®ç°è¿™äº›åŠŸèƒ½ã€‚</p><p>åœ¨ Java13 ä¹‹å‰ï¼Œé€šè¿‡<code>SocketImpl</code>çš„å­ç±»<code>PlainSocketImpl</code>å®ç°ã€‚åœ¨ Java13 ä¸­ï¼Œå¼•å…¥<code>NioSocketImpl</code>å®ç°ï¼Œè¯¥å®ç°ä»¥ NIO ä¸ºåŸºç¡€ï¼Œä¸é«˜é€Ÿç¼“å†²æœºåˆ¶é›†æˆï¼Œå®ç°éé˜»å¡å¼ç½‘ç»œã€‚</p><p>å¦‚æœæƒ³ç”¨å›<code>PlainSocketImpl</code>ï¼Œå¯ä»¥è®¾ç½®å¯åŠ¨å‚æ•°<code>-Djdk.net.usePlainSocketImpl=true</code>å³å¯ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java13 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä»<a href="https://openjdk.java.net/projects/jdk/13/" target="_blank" rel="noopener">https://openjdk.java.net/projects/jdk/13/</a>æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-13-features/">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava13 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/122932951" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava13 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      æœ¬æ–‡è®²è§£ä¸€ä¸‹ Java13 çš„ç‰¹æ€§ï¼Œè¿™ä¸ªç‰ˆæœ¬åœ¨è¯­æ³•ç‰¹æ€§ä¸Šå¢åŠ ä¸å¤šï¼Œå€¼å¾—å…³æ³¨çš„æ˜¯ä¸¤ä¸ªé¢„è§ˆåŠŸèƒ½ï¼šSwitch è¡¨è¾¾å¼å’Œæ–‡æœ¬å—ï¼Œå¦å¤–å¯ä»¥å…³ä¹çš„æ˜¯æ€§èƒ½ä¼˜åŒ–æ–¹é¢çš„ï¼šåŠ¨æ€ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰å­˜æ¡£ã€ZGC åŠ¨æ€é‡Šæ”¾æœªä½¿ç”¨å†…å­˜ã€Socket API é‡æ„ã€‚è¿™äº›æ–¹é¢å¯ä»¥çœ‹å‡ºï¼ŒJava çš„å‡çº§æ–¹å‘æœ‰ä¸¤ä¸ªï¼Œä¸€æ˜¯å¢åŠ åŠŸèƒ½ï¼Œå¢åŠ æ–°çš„è¯­æ³•ç‰¹æ€§ï¼›äºŒæ˜¯å¢å¼ºåŠŸèƒ½ï¼Œæå‡å·²æœ‰åŠŸèƒ½æ€§èƒ½ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java13" scheme="https://www.howardliu.cn/tags/Java13/"/>
    
  </entry>
  
  <entry>
    <title>ä»æ˜¥è¿è¿å¾™å›¾çœ‹åˆ°çš„ä¸€äº›ä¸œè¥¿</title>
    <link href="https://www.howardliu.cn/2022-spring-festival/"/>
    <id>https://www.howardliu.cn/2022-spring-festival/</id>
    <published>2022-01-29T11:51:31.000Z</published>
    <updated>2022-01-29T11:51:31.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/bird-g81ab0101d_1920_20220129150731.jpeg" alt="ä»æ˜¥è¿è¿å¾™å›¾çœ‹åˆ°çš„ä¸€äº›ä¸œè¥¿"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>è…ŠæœˆäºŒåä¸ƒå®°é¸¡èµ¶å¤§é›†ï¼Œå“åº”å›½å®¶å·å¬ï¼Œå°±åœ°è¿‡å¹´ã€‚</p><p>éš¾å…æ€ä¹¡ï¼Œäºæ˜¯ç¿»äº†ç¿»ç™¾åº¦åœ°å›¾æä¾›çš„è¿å¾™æ•°æ®ã€‚æˆ‘ä»¬ä»è¿å‡ºåœ°å’Œè¿å¾™è¶‹åŠ¿çœ‹ä¸€çœ‹è¿™å‡ å¹´çš„æ˜¥è¿å˜åŒ–ã€‚</p><a id="more"></a><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä» 2020 å¹´åˆ°ç°åœ¨ï¼ˆ2022 å¹´ï¼‰çš„æ˜¥è¿è¿å¾™å›¾ï¼š</p><p><img src="https://static.howardliu.cn/raving/2020-spring-festival-travel-rush.png" alt="2020 å¹´æ˜¥è¿è¿å¾™å›¾"></p><p><img src="https://static.howardliu.cn/raving/2021-spring-festival-travel-rush.png" alt="2021 å¹´æ˜¥è¿è¿å¾™å›¾"></p><p><img src="https://static.howardliu.cn/raving/2022-spring-festival-travel-rush.png" alt="2022 å¹´æ˜¥è¿è¿å¾™å›¾"></p><p>ä»ä¸‰å¼ å›¾ä¸­ï¼Œæˆ‘ä»¬ä¸éš¾çœ‹å‡ºä¸€äº›è§„å¾‹ï¼Œå¾…æˆ‘æ…¢æ…¢é“æ¥ã€‚</p><h2 id="æ˜¥è¿çƒ­é—¨è¿å‡ºåœ°"><a href="#æ˜¥è¿çƒ­é—¨è¿å‡ºåœ°" class="headerlink" title="æ˜¥è¿çƒ­é—¨è¿å‡ºåœ°"></a>æ˜¥è¿çƒ­é—¨è¿å‡ºåœ°</h2><p>è¿™å‡ å¹´ä¸­ï¼Œæ¯”è¾ƒçƒ­é—¨çš„è¿å‡ºåœ°æœ‰åŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ã€æ·±åœ³ï¼Œç¨å¾®çƒ­é—¨çš„æ˜¯æ­å·ã€æ­¦æ±‰ã€é‡åº†ã€é•¿æ²™ã€è¥¿å®‰ç­‰ã€‚ä¸éš¾çœ‹å‡ºï¼Œçƒ­é—¨è¿å‡ºåœ°å¯¹åº”ç€ä¸€çº¿ã€æ–°ä¸€çº¿åŸå¸‚ã€‚è¿™äº›åŸå¸‚çš„å¤–æ¥åŠ¡å·¥äººå‘˜æ¯”è¾ƒå¤šï¼Œåœ¨æ˜¥èŠ‚é€‰æ‹©å›å®¶è¿‡å¹´ã€‚</p><p><img src="https://static.howardliu.cn/raving/bsgs.jpg" alt="åŒ—ä¸Šå¹¿æ·±"></p><p>å…¶ä¸­ï¼ŒåŒ—ä¸Šå¹¿æ·±æ˜¯ä¸€çº¿åŸå¸‚ï¼Œå¾ˆå¤šäººæˆ–ä¸ºç”Ÿæ´»ã€æˆ–ä¸ºæ¢¦æƒ³ï¼Œé€‰æ‹©äº†ä¸€çº¿åŸå¸‚æ‰“æ‹¼ã€‚è¾›è‹¦ä¸€å¹´ï¼Œè¶ç€å¹´å…³å›åˆ°å®¶ï¼Œæ— è®ºå®¶ä¹¡æ˜¯å¥½æ˜¯å­¬ï¼Œæ€»å½’æ˜¯ä¸€ä¸ªå¹³é™çš„æ¸¯æ¹¾ã€‚è‡³äºå¹´åï¼Œæ˜¯é€‰æ‹©ä»¥æ¢¦ä¸ºé©¬æ½‡æ´’å¤©æ¶¯ï¼Œè¿˜æ˜¯é€‰æ‹©èƒŒèµ·è¡Œå›Šæ¼‚æ³Šä»–ä¹¡ï¼Œéƒ½æ˜¯å¹´åçš„äº‹æƒ…ã€‚</p><p><img src="https://static.howardliu.cn/raving/2020city.jpg" alt="2020 å¹´åŸå¸‚è´­ä¹°æ’è¡Œ"></p><p>å½“äººä»¬åœ¨å¯»æ‰¾å·¥ä½œå’Œç”Ÿæ´»çš„å¹³è¡¡ç‚¹æ—¶ï¼Œå¾ˆå¤šåŸå¸‚ä¹Ÿæ˜¯å¿«é€Ÿå‘å±•ï¼Œæˆä¸ºäº†æ–°ä¸€çº¿åŸå¸‚ï¼Œæˆä¸ºäº†ä¸­å›½å‘å±•çš„æ–°å…´åŠ¨åŠ›åŸå¸‚ï¼Œä¹Ÿç»™äº†æˆ‘ä»¬æ›´å¤šçš„é€‰æ‹©ã€‚äººä»¬ä¸åœ¨å•çº¯çš„è€ƒè™‘æ”¶å…¥ï¼Œä¼šæ›´å¤šçš„è€ƒè™‘æ„Ÿå—ã€å®¶äººï¼Œæ›´å¤šçš„è€ƒè™‘å¹¸ç¦ã€‚</p><p>æ— è®ºæˆ‘ä»¬åœ¨å“ªï¼Œåšä»€ä¹ˆï¼Œéƒ½æ˜¯ä¸ºäº†è¿½æ±‚å¹¸ç¦ï¼Œå¹¸ç¦æ‰æ˜¯æˆ‘ä»¬å¿ƒåº•æœ€æœŸæœ›çš„ä¸œè¥¿ã€‚</p><p><img src="https://static.howardliu.cn/raving/happy.jpg" alt="å¹¸ç¦"></p><h2 id="ç–«æƒ…å¯¹è¿å¾™çš„å½±å“åœ¨å‡å¼±"><a href="#ç–«æƒ…å¯¹è¿å¾™çš„å½±å“åœ¨å‡å¼±" class="headerlink" title="ç–«æƒ…å¯¹è¿å¾™çš„å½±å“åœ¨å‡å¼±"></a>ç–«æƒ…å¯¹è¿å¾™çš„å½±å“åœ¨å‡å¼±</h2><p><img src="https://static.howardliu.cn/raving/2019-spring-festival-line-chart.png" alt="2019 å¹´æ˜¥è¿è¿å¾™è¶‹åŠ¿å›¾"></p><p>ç–«æƒ…å‘ç”Ÿå‰ï¼ˆ2019 å¹´ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¹´å‰è¿ç§»æµé‡æŒç»­å¢é•¿ï¼Œå¤§å¹´åˆä¸€ç¨å¾®å°‘äº†ä¸€ç‚¹ï¼Œåˆ°åˆå…­å‡æœŸç»“æŸï¼Œè¿ç§»é‡è¾¾åˆ°å³°å€¼ã€‚æˆ‘ä»¬ä»¥æ­¤ä¸ºå‚ç…§ï¼Œçœ‹ä¸‹ç–«æƒ…çš„å½±å“ã€‚</p><p><img src="https://static.howardliu.cn/raving/2020-spring-festival-line-chart.png" alt="2020 å¹´æ˜¥è¿è¿å¾™è¶‹åŠ¿å›¾"></p><p>2020 å¹´ç–«æƒ…çˆ†å‘ï¼Œæ­¦æ±‰å°åŸï¼Œæ˜¥èŠ‚æœŸé—´å…¨å›½äººæ°‘ä¸Šä¸‹é½å¿ƒï¼Œå…±æŠ—ç–«æƒ…ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæ˜¥è¿æµåŠ¨åŸºæœ¬ä¸Šåœæ­¢ã€‚ä½œä¸ºæ™®é€šæ°‘ä¼—ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåšåˆ°ï¼Œå°±æ˜¯å¾…åœ¨å®¶é‡Œï¼Œä¸ç»™å›½å®¶æ·»éº»çƒ¦ã€‚</p><p><img src="https://static.howardliu.cn/raving/2021-spring-festival-line-chart.png" alt="2021 å¹´æ˜¥è¿è¿å¾™è¶‹åŠ¿å›¾"></p><p>2021 å¹´æ˜¯ç–«æƒ…ç¬¬äºŒå¹´ï¼Œå’±ä»¬å›½å®¶æå‡ºçš„â€œæ¸…é›¶â€æ”¿ç­–å–å¾—äº†å¥½æˆç»©ï¼Œç”Ÿæ´»å·¥ä½œåŸºæœ¬ä¸Šæ¢å¤æ­£å¸¸ï¼Œä¹Ÿæœ‰äº†åä¸€å°é•¿å‡å‡ºè¡Œæ—…æ¸¸å¤è‹çš„åœºæ™¯ã€‚å¤–å›½å‹äººä»¬èº²åœ¨å®¶é‡Œçœ‹æˆ‘ä»¬å µåœ¨è·¯ä¸Šï¼Œå¿ƒé‡Œä¸€å®šæ˜¯å„ç§ç¾¡æ…•ã€‚è€Œä¸”ï¼Œåœ¨å¹´åº•å¼€å§‹å…¨å‘˜æ¥ç§ç–«è‹—ï¼Œç»™æˆ‘ä»¬å¢åŠ ä¸€å±‚ä¿éšœã€‚</p><p>ä¸è¿‡ç”±äºå†¬å¤©å¤©æ°”è½¬å†·ï¼Œç—…æ¯’çš„å­˜æ´»èƒ½åŠ›å¢å¼ºï¼Œä¸ºäº†ä¿ä½æ¥ä¹‹ä¸æ˜“çš„æˆ˜æœã€‚å„åœ°å€¡å¯¼å°±åœ°è¿‡å¹´ã€‚æ‰€ä»¥èƒ½å¤Ÿçœ‹åˆ°ï¼Œæ˜¥è¿çš„æµé‡æ¯” 2019 å¹´å‡å°‘äº†å°†è¿‘ä¸€åŠã€‚</p><p><img src="https://static.howardliu.cn/raving/2022-spring-festival-line-chart.png" alt="2022 å¹´æ˜¥è¿è¿å¾™è¶‹åŠ¿å›¾"></p><p>ä»Šå¹´çš„æ˜¥è¿åˆšåˆšå¼€å§‹ï¼Œæˆ‘ä»¬åªèƒ½å¤Ÿæ ¹æ®è¶‹åŠ¿æ¨æµ‹ä¸€ä¸‹ï¼Œåˆ°ä»Šå¤©ä¸ºæ­¢ï¼Œè¿å¾™æµé‡çš„å‘å±•åŸºæœ¬ä¸Šå’Œ 2019 å¹´ç›¸ä¼¼ã€‚è¿™ä¸å¾—ä¸è¯´åœ¨æŠ—ç–«æ–¹é¢ï¼Œ2021 å¹´å–å¾—äº†å¥½æˆç»©ã€‚å…¨æ°‘æ¥ç§åŠ å¼ºé’ˆç–«è‹—ï¼Œå„åœ°çš„æ¸…é›¶æ”¿ç­–ä¹Ÿæ˜¯ä¸¥æ ¼æ‰§è¡Œã€‚è™½ç„¶å¹´åº•æœ‰äº›åœ°æ–¹å‡ºç°äº†æœ¬åœŸç–«æƒ…ï¼Œä½†æ˜¯éƒ½æ˜¯åœ¨æ§åˆ¶èŒƒå›´å†…ï¼Œæ²¡æœ‰çˆ†å‘çš„å¾å…†ã€‚æœ‰äº† 2021 å¹´æ˜¥è¿ã€äº”ä¸€ã€åä¸€ç­‰å„ç§å‡æœŸè¿å¾™çš„ç»éªŒï¼Œå„åœ°é‡‡å–â€œæœ‰æ¸©åº¦çš„ä¸¥æ ¼æ§åˆ¶â€ï¼Œè®©è¿œåœ¨ä»–ä¹¡æƒ³åœ¨æ˜¥èŠ‚å›å®¶çš„æ¸¸å­ä»¬ï¼Œä¸€è§£ä¹¡æ„ã€‚</p><p>å¯ä»¥é¢„è§ï¼Œç­‰åˆ°äº† 2023 å¹´æ˜¥è¿çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½å°±ä¸å†çº ç»“èƒ½ä¸èƒ½å›ã€è®©ä¸è®©å›ï¼Œåªéœ€è¦å¸¦ç€å¿…è¦çš„è¯æ˜ï¼Œæ­£å¸¸è®¡åˆ’å½’ä¹¡æ—¥æœŸå°±å¥½ã€‚</p><p>æŒ‰ç…§ä¹ ä¿—ï¼Œç»™å¤§å®¶æ‹œä¸ªæ—©å¹´ï¼Œæ„¿å¤§å®¶æ–°å¹´èƒœæ—§å¹´ï¼Œæ¬¢æ„‰ä¸”èƒœæ„ï¼Œä¸‡äº‹å°½å¯æœŸã€‚</p><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/2022-spring-festival/">ä»æ˜¥è¿è¿å¾™å›¾çœ‹åˆ°çš„ä¸€äº›ä¸œè¥¿</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">ä»æ˜¥è¿è¿å¾™å›¾çœ‹åˆ°çš„ä¸€äº›ä¸œè¥¿</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      è…ŠæœˆäºŒåä¸ƒå®°é¸¡èµ¶å¤§é›†ï¼Œå“åº”å›½å®¶å·å¬ï¼Œå°±åœ°è¿‡å¹´ã€‚éš¾å…æ€ä¹¡ï¼Œäºæ˜¯ç¿»äº†ç¿»ç™¾åº¦åœ°å›¾æä¾›çš„è¿å¾™æ•°æ®ã€‚æˆ‘ä»¬ä»è¿å‡ºåœ°å’Œè¿å¾™è¶‹åŠ¿çœ‹ä¸€çœ‹è¿™å‡ å¹´çš„æ˜¥è¿å˜åŒ–ã€‚
    
    </summary>
    
    
      <category term="é—²èŠ" scheme="https://www.howardliu.cn/categories/%E9%97%B2%E8%81%8A/"/>
    
    
      <category term="é—²èŠ" scheme="https://www.howardliu.cn/tags/%E9%97%B2%E8%81%8A/"/>
    
      <category term="æ˜¥è¿" scheme="https://www.howardliu.cn/tags/%E6%98%A5%E8%BF%90/"/>
    
      <category term="è¿å¾™" scheme="https://www.howardliu.cn/tags/%E8%BF%81%E5%BE%99/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava12 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java-12-features/"/>
    <id>https://www.howardliu.cn/java-12-features/</id>
    <published>2022-01-15T05:10:35.000Z</published>
    <updated>2022-01-15T05:10:35.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/lily-gf02d5baa4_1920.jpg" alt="Java12 çš„æ–°ç‰¹æ€§"></p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚ä» <a href="https://res.cloudinary.com/snyk/image/upload/v1623860216/reports/jvm-ecosystem-report-2021.pdf" target="_blank" rel="noopener">ã€ŠJVM Ecosystem Report 2021ã€‹</a> ä¸­å¯ä»¥çœ‹å‡ºï¼Œç›®å‰å¼€å‘ç¯å¢ƒä¸­æœ‰è¿‘åŠçš„ç¯å¢ƒä½¿ç”¨ Java8ï¼Œæœ‰è¿‘åŠçš„äººè½¬ç§»åˆ°äº† Java11ï¼Œéšç€ Java17 çš„å‘å¸ƒï¼Œç›¸ä¿¡æ¯”ä¾‹ä¼šæœ‰æ‰€å˜åŒ–ã€‚</p><p>å› æ­¤ï¼Œå‡†å¤‡å‡ºä¸€ä¸ªç³»åˆ—ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œé˜è¿°å„ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>æœ¬æ–‡è®²è§£ä¸€ä¸‹ Java12 çš„ç‰¹æ€§ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªé•¿æœŸæ”¯æŒç‰ˆ Java11 ä¹‹åçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¢åŠ çš„åŠŸèƒ½ä¹Ÿä¸å°‘ï¼Œé™¤äº†ä¸€äº›å°å¹…åº¦çš„ API å¢å¼ºï¼Œå¢åŠ äº†å¦ä¸€ä¸ªè¯•éªŒé˜¶æ®µçš„åƒåœ¾æ”¶é›†å™¨ Shenandoahã€å¯¹ G1 åšäº†ä¼˜åŒ–ã€å¢åŠ å¾®åŸºå‡†å¥—ä»¶ç­‰ã€‚</p><h2 id="è¯­æ³•ç‰¹æ€§"><a href="#è¯­æ³•ç‰¹æ€§" class="headerlink" title="è¯­æ³•ç‰¹æ€§"></a>è¯­æ³•ç‰¹æ€§</h2><p>Java12 æä¾›äº†å¾ˆå¤šçš„è¯­æ³•ç‰¹æ€§ï¼Œæ—¢æœ‰å°è€Œç¾çš„å¢å¼º APIï¼Œåˆæœ‰ç‰¹åˆ«æ–¹ä¾¿çš„å·¥å…·æ‰©å±•ã€‚æœ¬èŠ‚æˆ‘ä»¬è·Ÿç€ä»£ç çœ‹çœ‹æ¯”è¾ƒå¥½ç©çš„åŠŸèƒ½ã€‚</p><h3 id="String-çš„å¢å¼ºæ–¹æ³•ï¼šindent-å’Œ-transform"><a href="#String-çš„å¢å¼ºæ–¹æ³•ï¼šindent-å’Œ-transform" class="headerlink" title="String çš„å¢å¼ºæ–¹æ³•ï¼šindent å’Œ transform"></a>String çš„å¢å¼ºæ–¹æ³•ï¼šindent å’Œ transform</h3><p>åœ¨ Java12 ä¸­ï¼ŒString åˆå¢å¼ºäº†ä¸¤ä¸ªæ–¹æ³•ã€‚ä¹‹æ‰€ä»¥è¯´åˆï¼Œæ˜¯å› ä¸ºåœ¨ Java11 ä¸­å·²ç»å¢åŠ è¿‡å°è€Œç¾çš„æ–¹æ³•ï¼Œæƒ³è¦è¯¦ç»†äº†è§£çš„å¯ä»¥æŸ¥çœ‹ <a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 æ–°ç‰¹æ€§</a>ã€‚</p><p>è¿™æ¬¡å¢åŠ çš„æ–¹æ³•æ˜¯<code>indent</code>ï¼ˆç¼©è¿›ï¼‰å’Œ<code>transform</code>ï¼ˆè½¬æ¢ï¼‰ã€‚</p><p>é¡¾åæ€ä¹‰ï¼Œ<code>indent</code>æ–¹æ³•æ˜¯å¯¹å­—ç¬¦ä¸²æ¯è¡Œï¼ˆä½¿ç”¨<code>\r</code>æˆ–<code>\n</code>åˆ†éš”ï¼‰æ•°æ®ç¼©è¿›æŒ‡å®šç©ºç™½å­—ç¬¦ï¼Œå‚æ•°æ˜¯ int ç±»å‹ã€‚</p><p>å¦‚æœå‚æ•°å¤§äº 0ï¼Œå°±ç¼©è¿›æŒ‡å®šæ•°é‡çš„ç©ºæ ¼ï¼›å¦‚æœå‚æ•°å°äº 0ï¼Œå°±å°†å·¦ä¾§çš„ç©ºå­—ç¬¦åˆ é™¤æŒ‡å®šæ•°é‡ï¼Œå³å³ç§»ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹æºç ï¼š</p><pre><code class="java">public String indent(int n) {    if (isEmpty()) {        return &quot;&quot;;    }    Stream&lt;String&gt; stream = lines();    if (n &gt; 0) {        final String spaces = &quot; &quot;.repeat(n);        stream = stream.map(s -&gt; spaces + s);    } else if (n == Integer.MIN_VALUE) {        stream = stream.map(s -&gt; s.stripLeading());    } else if (n &lt; 0) {        stream = stream.map(s -&gt; s.substring(Math.min(-n, s.indexOfNonWhitespace())));    }    return stream.collect(Collectors.joining(&quot;\n&quot;, &quot;&quot;, &quot;\n&quot;));}</code></pre><p>è¿™é‡Œä¼šä½¿ç”¨åˆ° Java11 å¢åŠ çš„<code>lines</code>ã€<code>repeat</code>ã€<code>stripLeading</code>ç­‰æ–¹æ³•ã€‚<code>indent</code>æœ€åä¼šå°†å¤šè¡Œæ•°æ®é€šè¿‡<code>Collectors.joining(&quot;\n&quot;, &quot;&quot;, &quot;\n&quot;)</code>æ–¹æ³•æ‹¼æ¥ï¼Œç»“æœä¼šæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ul><li><code>\r</code>ä¼šè¢«æ›¿æ¢æˆ<code>\n</code>ï¼›</li><li>å¦‚æœåŸå­—ç¬¦ä¸²æ˜¯å¤šè¡Œæ•°æ®ï¼Œæœ€åä¸€è¡Œçš„ç»“å°¾æ²¡æœ‰<code>\n</code>ï¼Œæœ€åä¼šè¡¥ä¸Šä¸€ä¸ª<code>\n</code>ï¼Œå³å¤šäº†ä¸€ä¸ªç©ºè¡Œã€‚</li></ul><p>æˆ‘ä»¬çœ‹ä¸‹æµ‹è¯•ä»£ç ï¼š</p><pre><code class="java">@Testvoid testIndent() {    final String text = &quot;\t\t\t ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚\n \u0020\u2005Java12 çš„ æ–°ç‰¹æ€§ã€‚\r æ¬¢è¿ä¸‰è¿+å…³æ³¨å“Ÿ&quot;;    assertEquals(&quot;    \t\t\t ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚\n     \u0020\u2005Java12 çš„ æ–°ç‰¹æ€§ã€‚\n    æ¬¢è¿ä¸‰è¿+å…³æ³¨å“Ÿã€n&quot;, text.indent(4));    assertEquals(&quot;\t ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚\n\u2005Java12 çš„ æ–°ç‰¹æ€§ã€‚\n æ¬¢è¿ä¸‰è¿+å…³æ³¨å“Ÿã€n&quot;, text.indent(-2));    final String text2 = &quot;å±±æ°´æœ‰ç›¸é€¢&quot;;    assertEquals(&quot;å±±æ°´æœ‰ç›¸é€¢&quot;, text2);}</code></pre><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹<code>transform</code>æ–¹æ³•ï¼Œæºç ä¸€ç›®äº†ç„¶ï¼š</p><pre><code class="java">public &lt;R&gt; R transform(Function&lt;? super String, ? extends R&gt; f) {    return f.apply(this);}</code></pre><p>é€šè¿‡ä¼ å…¥çš„<code>Function</code>å¯¹å½“å‰å­—ç¬¦ä¸²è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢ç»“æœç”±<code>Function</code>å†³å®šã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦å¯¹å­—ç¬¦ä¸²åè½¬ï¼š</p><pre><code class="java">@Testvoid testTransform() {    final String text = &quot;çœ‹å±±æ˜¯å±±&quot;;    final String reverseText = text.transform(s -&gt; new StringBuilder(s).reverse().toString());    assertEquals(&quot;å±±æ˜¯å±±çœ‹&quot;, reverseText);}</code></pre><p>å…¶å®è¿™ä¸ªæ–¹æ³•åœ¨ Java8 ä¸­æä¾›çš„<code>Optional</code>å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼ˆå®Œæ•´çš„ Optional åŠŸèƒ½å¯ä»¥æŸ¥çœ‹ <a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">Optional çš„ 6 ç§æ“ä½œ</a>ï¼‰ï¼š</p><pre><code class="java">@Testvoid testTransform() {    final String text = &quot;çœ‹å±±æ˜¯å±±&quot;;    final String reverseText2 = Optional.of(text)            .map(s -&gt; new StringBuilder(s).reverse().toString())            .orElse(&quot;&quot;);    assertEquals(&quot;å±±æ˜¯å±±çœ‹&quot;, reverseText2);}</code></pre><h3 id="Files-çš„å¢å¼ºæ–¹æ³•ï¼šmismatch"><a href="#Files-çš„å¢å¼ºæ–¹æ³•ï¼šmismatch" class="headerlink" title="Files çš„å¢å¼ºæ–¹æ³•ï¼šmismatch"></a>Files çš„å¢å¼ºæ–¹æ³•ï¼šmismatch</h3><p>åœ¨ Java12 ä¸­ï¼Œ<code>Files</code>å¢åŠ äº†<code>mismatch</code>æ–¹æ³•ï¼Œç”¨äºå¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶ä¸­çš„ä¸ç›¸åŒå­—ç¬¦çš„ä½ç½®ï¼Œå¦‚æœå†…å®¹ç›¸åŒï¼Œè¿”å›<code>-1L</code>ï¼Œæ˜¯<code>long</code>ç±»å‹çš„ã€‚</p><p>æˆ‘ä»¬æ¥ç®€å•çœ‹ä¸‹æ€ä¹ˆç”¨ï¼š</p><pre><code class="java">@Testvoid testMismatch() throws IOException {    final Path pathA = Files.createFile(Paths.get(&quot;a.txt&quot;));    final Path pathB = Files.createFile(Paths.get(&quot;b.txt&quot;));    // å†™å…¥ç›¸åŒå†…å®¹    Files.write(pathA, &quot;çœ‹å±±&quot;.getBytes(), StandardOpenOption.WRITE);    Files.write(pathB, &quot;çœ‹å±±&quot;.getBytes(), StandardOpenOption.WRITE);    final long mismatch1 = Files.mismatch(pathA, pathB);    Assertions.assertEquals(-1L, mismatch1);    // è¿½åŠ ä¸åŒå†…å®¹    Files.write(pathA, &quot;æ˜¯å±±&quot;.getBytes(), StandardOpenOption.APPEND);    Files.write(pathB, &quot;ä¸æ˜¯å±±&quot;.getBytes(), StandardOpenOption.APPEND);    final long mismatch2 = Files.mismatch(pathA, pathB);    Assertions.assertEquals(6L, mismatch2);    Files.deleteIfExists(pathA);    Files.deleteIfExists(pathB);}</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“ç¬¬ä¸€æ¬¡åœ¨ä¸¤ä¸ªæ–‡ä»¶ä¸­å†™å…¥ç›¸åŒå†…å®¹ï¼Œæ‰§è¡Œ<code>mismatch</code>æ–¹æ³•è¿”å›çš„æ˜¯<code>-1L</code>ã€‚å½“ç¬¬äºŒæ¬¡è¿½åŠ è¿›å»ä¸åŒçš„å†…å®¹åï¼Œè¿”å›çš„æ˜¯<code>6L</code>ã€‚ä¹‹æ‰€ä»¥æ˜¯ 6ï¼Œæ˜¯å› ä¸ºæµ‹è¯•ä»£ç ä¸­ä½¿ç”¨çš„å­—ç¬¦é›†æ˜¯<code>UTF-8</code>ï¼Œå¤§éƒ¨åˆ†æ±‰å­æ˜¯å ç”¨ 3 ä¸ªå­—ç¬¦ï¼Œå‰ä¸¤ä¸ªå­—ç›¸åŒï¼Œä»ç¬¬ä¸‰ä¸ªå­—å¼€å§‹ä¸åŒï¼Œä¸‹æ ‡ä» 0 å¼€å§‹ï¼Œæ‰€ä»¥å¼€å§‹ä½ç½®æ˜¯ 6ã€‚</p><h3 id="Collectors-çš„å¢å¼ºæ–¹æ³•ï¼šteeing"><a href="#Collectors-çš„å¢å¼ºæ–¹æ³•ï¼šteeing" class="headerlink" title="Collectors çš„å¢å¼ºæ–¹æ³•ï¼šteeing"></a>Collectors çš„å¢å¼ºæ–¹æ³•ï¼šteeing</h3><p>æˆ‘ä»¬çœ‹ä¸‹<code>teeing</code>çš„å®šä¹‰ï¼š</p><pre><code class="java">public static &lt;T, R1, R2, R&gt; Collector&lt;T, ?, R&gt; teeing(    Collector&lt;? super T, ?, R1&gt; downstream1,    Collector&lt;? super T, ?, R2&gt; downstream2,    BiFunction&lt;? super R1, ? super R2, R&gt; merger)</code></pre><p>è¿™ä¸ªæ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œå‰ä¸¤ä¸ªæ˜¯<code>Collector</code>å¯¹è±¡ï¼Œç”¨äºå¯¹è¾“å…¥æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯<code>BiFunction</code>ï¼Œç”¨äºå°†å‰ä¸¤ä¸ªå¤„ç†åçš„ç»“æœä½œä¸ºå‚æ•°ä¼ å…¥<code>BiFunction</code>ä¸­ï¼Œè¿ç®—å¾—åˆ°ç»“æœã€‚</p><p>æˆ‘ä»¬æ¥çœ‹ä¸‹ä¾‹å­ï¼š</p><pre><code class="java">@Testvoid testTeeing() {    var result = Stream.of(&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;)            .collect(Collectors.teeing(                    Collectors.filtering(n -&gt; n.contains(&quot;u&quot;), Collectors.toList()),                    Collectors.filtering(n -&gt; n.contains(&quot;n&quot;), Collectors.toList()),                    (list1, list2) -&gt; List.of(list1, list2)            ));    assertEquals(2, result.size());    assertTrue(isEqualCollection(List.of(&quot;Sunday&quot;, &quot;Tuesday&quot;), result.get(0)));    assertTrue(isEqualCollection(List.of(&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Wednesday&quot;), result.get(1)));}</code></pre><p>æˆ‘ä»¬å¯¹è¾“å…¥çš„å‡ ä¸ªå­—ç¬¦ä¸²è¿›è¡Œè¿‡æ»¤ï¼Œç„¶åå°†è¿‡æ»¤ç»“æœç»„æˆä¸€ä¸ªæ–°çš„é˜Ÿåˆ—ã€‚</p><h3 id="æ–°å·¥å…·ï¼šCompactNumberFormat"><a href="#æ–°å·¥å…·ï¼šCompactNumberFormat" class="headerlink" title="æ–°å·¥å…·ï¼šCompactNumberFormat"></a>æ–°å·¥å…·ï¼šCompactNumberFormat</h3><p>è¿™ä¸ªå·¥å…·æ¯”è¾ƒå¥½ç©ï¼Œå¯ä»¥å¯¹æ•°å­—è¿›è¡ŒæŒ‰éœ€æ ¼å¼åŒ–ã€‚æä¾›äº†<code>public static NumberFormat getCompactNumberInstance(Locale locale, NumberFormat.Style formatStyle)</code>æ–¹æ³•ç”¨äºåˆå§‹åŒ–ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æŒ‡å®šåŒºåŸŸï¼Œä¸åŒåŒºåŸŸå±•ç¤ºçš„ç»“æœä¸åŒï¼Œæ¯”å¦‚ä¸­å›½å±•ç¤ºæ±‰å­—ã€ç¾å›½å±•ç¤ºè‹±æ–‡ï¼›</li><li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å®šå±•ç¤ºç»“æœçš„æ¨¡å¼ï¼Œåˆ†ä¸º<code>SHORT</code>å’Œ<code>LONG</code>ï¼Œä¸è¿‡å¯¹äºä¸­æ–‡å±•ç¤ºï¼Œä¼¼ä¹æ²¡å•¥åŒºåˆ«ã€‚</li></ul><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹ä¾‹å­ï¼š</p><pre><code class="java">@Testvoid testFormat() {    final NumberFormat zhShort = NumberFormat.getCompactNumberInstance(Locale.CHINA, Style.SHORT);    assertEquals(&quot;1 ä¸‡&quot;, zhShort.format(10_000));    assertEquals(&quot;1 å…†&quot;, zhShort.format(1L &lt;&lt; 40));    final NumberFormat zhLong = NumberFormat.getCompactNumberInstance(Locale.CHINA, Style.LONG);    assertEquals(&quot;1 ä¸‡&quot;, zhLong.format(10_000));    assertEquals(&quot;1 å…†&quot;, zhLong.format(1L &lt;&lt; 40));    final NumberFormat usShort = NumberFormat.getCompactNumberInstance(Locale.US, Style.SHORT);    usShort.setMaximumFractionDigits(2);    assertEquals(&quot;10K&quot;, usShort.format(10_000));    assertEquals(&quot;1.1T&quot;, usShort.format(1L &lt;&lt; 40));    final NumberFormat usLong = NumberFormat.getCompactNumberInstance(Locale.US, Style.LONG);    usLong.setMaximumFractionDigits(2);    assertEquals(&quot;10 thousand&quot;, usLong.format(10_000));    assertEquals(&quot;1.1 trillion&quot;, usLong.format(1L &lt;&lt; 40));}</code></pre><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»§ç»­ä½¿ç”¨<code>NumberFormat</code>ä¸­çš„æ–¹æ³•å®šä¹‰ï¼Œæ¯”å¦‚ç¤ºä¾‹ä¸­ä¿ç•™å°æ•°ç‚¹å 2 ä½ã€‚</p><h2 id="Shenandoahï¼šä¸€ä¸ªä½åœé¡¿åƒåœ¾æ”¶é›†å™¨"><a href="#Shenandoahï¼šä¸€ä¸ªä½åœé¡¿åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="Shenandoahï¼šä¸€ä¸ªä½åœé¡¿åƒåœ¾æ”¶é›†å™¨"></a>Shenandoahï¼šä¸€ä¸ªä½åœé¡¿åƒåœ¾æ”¶é›†å™¨</h2><p>Java12 å¼•å…¥äº†ä¸€ä¸ªå®éªŒé˜¶æ®µçš„åƒåœ¾æ”¶é›†å™¨ï¼šShenandoahï¼Œä½œä¸ºä¸€ä¸ªä½åœé¡¿çš„åƒåœ¾æ”¶é›†å™¨ã€‚</p><p>Shenandoah åƒåœ¾æ”¶é›†å™¨æ˜¯ RedHat åœ¨ 2014 å¹´å®£å¸ƒè¿›è¡Œçš„åƒåœ¾æ”¶é›†å™¨ç ”ç©¶é¡¹ç›®ï¼Œå…¶å·¥ä½œåŸç†æ˜¯é€šè¿‡ä¸ Java åº”ç”¨æ‰§è¡Œçº¿ç¨‹åŒæ—¶è¿è¡Œæ¥é™ä½åœé¡¿æ—¶é—´ã€‚ç®€å•çš„è¯´å°±æ˜¯ï¼ŒShenandoah å·¥ä½œæ—¶ä¸åº”ç”¨ç¨‹åºçº¿ç¨‹å¹¶å‘ï¼Œé€šè¿‡äº¤æ¢ CPU å¹¶å‘å‘¨æœŸå’Œç©ºé—´ä»¥æ”¹å–„åœé¡¿æ—¶é—´ï¼Œä½¿å¾—åƒåœ¾å›æ”¶å™¨æ‰§è¡Œçº¿ç¨‹èƒ½å¤Ÿåœ¨ Java çº¿ç¨‹è¿è¡Œæ—¶è¿›è¡Œå †å‹ç¼©ï¼Œå¹¶ä¸”æ ‡è®°å’Œæ•´ç†èƒ½å¤ŸåŒæ—¶è¿›è¡Œï¼Œå› æ­¤é¿å…äº†åœ¨å¤§å¤šæ•° JVM åƒåœ¾æ”¶é›†å™¨ä¸­æ‰€é‡åˆ°çš„é—®é¢˜ã€‚</p><p><img src="https://static.howardliu.cn/java/shenandoah-gc-cycle.png" alt="Shenandoah GC"></p><p>Shenandoah åƒåœ¾å›æ”¶å™¨çš„æš‚åœæ—¶é—´ä¸å †å¤§å°æ— å…³ï¼Œè¿™æ„å‘³ç€æ— è®ºå°†å †è®¾ç½®ä¸º 200MB è¿˜æ˜¯ 200GBï¼Œéƒ½å°†æ‹¥æœ‰ä¸€è‡´çš„ç³»ç»Ÿæš‚åœæ—¶é—´ï¼Œä¸è¿‡å®é™…ä½¿ç”¨æ€§èƒ½å°†å–å†³äºå®é™…å·¥ä½œå †çš„å¤§å°å’Œå·¥ä½œè´Ÿè½½ã€‚</p><p>Java12 ä¸­ Shenandoah å¤„äºå®éªŒé˜¶æ®µï¼Œæƒ³è¦ä½¿ç”¨éœ€è¦ç¼–è¯‘æ—¶æ·»åŠ <code>--with-jvm-features=shenandoahgc</code>ï¼Œç„¶åå¯åŠ¨æ—¶ä½¿ç”¨<code>-XX:+UnlockExperimentalVMOptions -XX:+UseShenandoahGC</code>ä»¥å¼€å¯ã€‚</p><p>åç»­ä¼šè¡¥å…… Java ä¸­å„ç§åƒåœ¾æ”¶é›†å™¨çš„æ–‡ç« ï¼Œå…¶ä¸­ä¼šæœ‰ä»‹ç» Shenandoah çš„ï¼Œæ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ã€‚å¦‚æœæƒ³è¦æå‰äº†è§£ï¼Œæ¬¢è¿è®¿é—®<a href="https://wiki.openjdk.java.net/display/shenandoah" target="_blank" rel="noopener">https://wiki.openjdk.java.net/display/shenandoah</a>ã€‚</p><h2 id="å¢åŠ ä¸€å¥—åŸºå‡†æµ‹è¯•å¥—ä»¶"><a href="#å¢åŠ ä¸€å¥—åŸºå‡†æµ‹è¯•å¥—ä»¶" class="headerlink" title="å¢åŠ ä¸€å¥—åŸºå‡†æµ‹è¯•å¥—ä»¶"></a>å¢åŠ ä¸€å¥—åŸºå‡†æµ‹è¯•å¥—ä»¶</h2><p>Java12 ä¸­æ·»åŠ ä¸€å¥—åŸºå‡†æµ‹è¯•å¥—ä»¶ï¼Œè¯¥åŸºå‡†æµ‹è¯•å¥—ä»¶åŸºäº JMHï¼ˆJava Microbenchmark Harnessï¼‰ï¼Œä½¿å¼€å‘äººå‘˜å¯ä»¥è½»æ¾è¿è¡Œç°æœ‰çš„åŸºå‡†æµ‹è¯•å¹¶åˆ›å»ºæ–°çš„åŸºå‡†æµ‹è¯•ï¼Œå…¶ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªç¨³å®šä¸”ä¼˜åŒ–çš„åŸºå‡†ã€‚</p><p>åœ¨è¿™å¥—åŸºå‡†æµ‹è¯•å¥—ä»¶ä¸­åŒ…æ‹¬å°†è¿‘ 100 ä¸ªåŸºå‡†æµ‹è¯•çš„åˆå§‹é›†åˆï¼Œå¹¶ä¸”èƒ½å¤Ÿè½»æ¾æ·»åŠ æ–°åŸºå‡†ã€æ›´æ–°åŸºå‡†æµ‹è¯•å’Œæé«˜æŸ¥æ‰¾å·²æœ‰åŸºå‡†æµ‹è¯•çš„ä¾¿åˆ©æ€§ã€‚</p><p>å¾®åŸºå‡†å¥—ä»¶ä¸ JDK æºä»£ç ä½äºåŒä¸€ä¸ªç›®å½•ä¸­ï¼Œå¹¶ä¸”åœ¨æ„å»ºåå°†ç”Ÿæˆå•ä¸ª Jar æ–‡ä»¶ã€‚å®ƒæ˜¯ä¸€ä¸ªå•ç‹¬çš„é¡¹ç›®ï¼Œåœ¨æ”¯æŒæ„å»ºæœŸé—´ä¸ä¼šæ‰§è¡Œï¼Œä»¥æ–¹ä¾¿å¼€å‘äººå‘˜å’Œå…¶ä»–å¯¹æ„å»ºå¾®åŸºå‡†å¥—ä»¶ä¸æ„Ÿå…´è¶£çš„äººåœ¨æ„å»ºæ—¶èŠ±è´¹æ¯”è¾ƒå°‘çš„æ„å»ºæ—¶é—´ã€‚</p><h2 id="Switch-è¡¨è¾¾å¼æ‰©å±•ï¼ˆé¢„è§ˆç‰ˆï¼‰"><a href="#Switch-è¡¨è¾¾å¼æ‰©å±•ï¼ˆé¢„è§ˆç‰ˆï¼‰" class="headerlink" title="Switch è¡¨è¾¾å¼æ‰©å±•ï¼ˆé¢„è§ˆç‰ˆï¼‰"></a>Switch è¡¨è¾¾å¼æ‰©å±•ï¼ˆé¢„è§ˆç‰ˆï¼‰</h2><p>Switch è¯­å¥å‡ºç°çš„å§¿åŠ¿æ˜¯æ¡ä»¶åˆ¤æ–­ã€æµç¨‹æ§åˆ¶ç»„ä»¶ï¼Œä¸ç°åœ¨å¾ˆæµè¡Œçš„æ–°è¯­è¨€å¯¹æ¯”ï¼Œå…¶å†™æ³•æ˜¾å¾—éå¸¸ç¬¨æ‹™ï¼Œæ‰€ä»¥ Java æ¨å‡ºäº† Switch è¡¨è¾¾å¼è¯­æ³•ï¼Œå¯ä»¥è®©æˆ‘ä»¬å†™å‡ºæ›´åŠ ç®€åŒ–çš„ä»£ç ã€‚è¿™ä¸ªæ‰©å±•åœ¨ Java12 ä¸­ä½œä¸ºé¢„è§ˆç‰ˆé¦–æ¬¡å¼•å…¥ï¼Œéœ€è¦åœ¨ç¼–è¯‘æ—¶å¢åŠ <code>-enable-preview</code>å¼€å¯ï¼Œåœ¨ Java14 ä¸­æ­£å¼æä¾›ï¼ŒåŠŸèƒ½ç¼–å·æ˜¯ <a href="https://openjdk.java.net/jeps/361" target="_blank" rel="noopener">JEP 361</a>ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬é€šè¿‡ switch è¯­æ³•ç®€å•è®¡ç®—å·¥ä½œæ—¥ã€ä¼‘æ¯æ—¥ï¼Œåœ¨ Java12 ä¹‹å‰éœ€è¦è¿™æ ·å†™ï¼š</p><pre><code class="java">@Testvoid testSwitch() {    final DayOfWeek day = DayOfWeek.from(LocalDate.now());    String typeOfDay = &quot;&quot;;    switch (day) {        case MONDAY:        case TUESDAY:        case WEDNESDAY:        case THURSDAY:        case FRIDAY:            typeOfDay = &quot;Working Day&quot;;            break;        case SATURDAY:        case SUNDAY:            typeOfDay = &quot;Rest Day&quot;;            break;    }    Assertions.assertFalse(typeOfDay.isEmpty());}</code></pre><p>åœ¨ Java12 ä¸­çš„ Switch è¡¨è¾¾å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç®€åŒ–ï¼š</p><pre><code class="java">@Testvoid testSwitchExpression() {    final DayOfWeek day = DayOfWeek.SATURDAY;    final String typeOfDay = switch (day) {        case MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; &quot;Working Day&quot;;        case SATURDAY, SUNDAY -&gt; &quot;Day Off&quot;;    };    Assertions.assertEquals(&quot;Day Off&quot;, typeOfDay);}</code></pre><p>æ˜¯ä¸æ˜¯å¾ˆæ¸…çˆ½ã€‚æ–‡æœ«æä¾›çš„æºç ä¸­ï¼Œ<code>pom.xml</code>å®šä¹‰çš„<code>maven.compiler</code>ç‰ˆæœ¬å†™çš„æ˜¯<code>14</code>ï¼Œè¿™æ˜¯å› ä¸º Switch è¡¨è¾¾å¼æ˜¯ Java14 æ­£å¼æä¾›ï¼Œæˆ‘æ²¡æœ‰é‡æ–°ç¼–è¯‘ Javaï¼Œæ‰€ä»¥åªèƒ½æŒ‡å®š Java14 æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ä»£ç çš„æ¼”ç¤ºã€‚</p><h2 id="å¼•å…¥-JVM-å¸¸é‡-API"><a href="#å¼•å…¥-JVM-å¸¸é‡-API" class="headerlink" title="å¼•å…¥ JVM å¸¸é‡ API"></a>å¼•å…¥ JVM å¸¸é‡ API</h2><p>Java12 ä¸­å¼•å…¥ JVM å¸¸é‡ APIï¼Œç”¨æ¥æ›´å®¹æ˜“åœ°å¯¹å…³é”®ç±»æ–‡ä»¶å’Œè¿è¡Œæ—¶æ„ä»¶çš„æè¿°ä¿¡æ¯è¿›è¡Œå»ºæ¨¡ï¼Œç‰¹åˆ«æ˜¯å¯¹é‚£äº›ä»å¸¸é‡æ± åŠ è½½çš„å¸¸é‡ï¼Œè¿™æ˜¯ä¸€é¡¹éå¸¸æŠ€æœ¯æ€§çš„å˜åŒ–ï¼Œèƒ½å¤Ÿä»¥æ›´ç®€å•ã€æ ‡å‡†çš„æ–¹å¼å¤„ç†å¯åŠ è½½å¸¸é‡ã€‚</p><p>å…·ä½“æ¥è¯´å°±æ˜¯<code>java.base</code>æ¨¡å—æ–°å¢äº†<code>java.lang.constant</code>åŒ…ï¼Œå¼•å…¥äº†<code>ConstantDesc</code>æ¥å£ä»¥åŠ<code>Constable</code>æ¥å£ã€‚<code>ConstantDesc</code>çš„å­æ¥å£åŒ…æ‹¬ï¼š</p><ul><li><code>ClassDesc</code>ï¼šClass çš„å¯åŠ è½½å¸¸é‡æ ‡ç§°æè¿°ç¬¦ï¼›</li><li><code>MethodTypeDesc</code>ï¼šæ–¹æ³•ç±»å‹å¸¸é‡æ ‡ç§°æè¿°ç¬¦ï¼›</li><li><code>MethodHandleDesc</code>ï¼šæ–¹æ³•å¥æŸ„å¸¸é‡æ ‡ç§°æè¿°ç¬¦ï¼›</li><li><code>DynamicConstantDesc</code>ï¼šåŠ¨æ€å¸¸é‡æ ‡ç§°æè¿°ç¬¦ã€‚</li></ul><p>ç»§ç»­æŒ–å‘ï¼Œè¿™éƒ¨åˆ†å†…å®¹ä¼šåœ¨è¿›é˜¶ç¯‡å†è¯¦ç»†ä»‹ç»ï¼Œæ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ã€‚</p><h2 id="æ”¹è¿›-AArch64-å®ç°"><a href="#æ”¹è¿›-AArch64-å®ç°" class="headerlink" title="æ”¹è¿› AArch64 å®ç°"></a>æ”¹è¿› AArch64 å®ç°</h2><p>Java12 ä¸­å°†åªä¿ç•™ä¸€å¥— AArch64 å®ç°ï¼Œä¹‹å‰ç‰ˆæœ¬ä¸­ï¼Œæœ‰ä¸¤ä¸ªå…³äº aarch64 çš„å®ç°ï¼Œåˆ†åˆ«æ˜¯<code>ope/src/hotspot/cpu/arm</code>ä»¥åŠ<code>open/src/hotspot/cpu/aarch64</code>ï¼Œå®ƒä»¬çš„å®ç°é‡å¤äº†ã€‚ä¸ºäº†é›†ä¸­ç²¾åŠ›æ›´å¥½åœ°å®ç° aarch64ï¼Œåˆ é™¤äº†<code>open/src/hotspot/cpu/arm</code>ä¸­ä¸ arm64ï¼ˆ64-bit Arm platformï¼‰å®ç°ç›¸å…³çš„ä»£ç ï¼Œåªä¿ç•™ 32 ä½ ARM ç«¯å£å’Œ 64 ä½ aarch64 çš„ç«¯å£ã€‚</p><p>è¿™æ ·åšï¼Œå¯ä»¥è®©å¼€å‘äººå‘˜å°†ç›®æ ‡é›†ä¸­åœ¨å‰©ä¸‹çš„è¿™ä¸ª 64 ä½ ARM å®ç°ä¸Šï¼Œæ¶ˆé™¤ç»´æŠ¤ä¸¤å¥—ç«¯å£æ‰€éœ€çš„é‡å¤å·¥ä½œã€‚</p><p>ç›®æ ‡èšç„¦ï¼ŒåŠ›é‡é›†ä¸­ã€‚</p><h2 id="é»˜è®¤ä½¿ç”¨ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰å­˜æ¡£"><a href="#é»˜è®¤ä½¿ç”¨ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰å­˜æ¡£" class="headerlink" title="é»˜è®¤ä½¿ç”¨ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰å­˜æ¡£"></a>é»˜è®¤ä½¿ç”¨ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼‰å­˜æ¡£</h2><p>åœ¨ <a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a> ä¸­æˆ‘ä»¬ä»‹ç»è¿‡ç±»æ•°æ®å…±äº«ï¼ˆCDSï¼ŒClass Data Sharingï¼‰ï¼Œå…¶ä½œç”¨æ˜¯é€šè¿‡æ„å»ºæ—¶ç”Ÿæˆé»˜è®¤ç±»åˆ—è¡¨ï¼Œåœ¨è¿è¡Œæ—¶ä½¿ç”¨å†…å­˜æ˜ å°„ï¼Œå‡å°‘ Java çš„å¯åŠ¨æ—¶é—´å’Œå‡å°‘åŠ¨æ€å†…å­˜å ç”¨é‡ï¼Œä¹Ÿèƒ½åœ¨å¤šä¸ª Java è™šæ‹Ÿæœºä¹‹é—´å…±äº«ç›¸åŒçš„å½’æ¡£æ–‡ä»¶ï¼Œå‡å°‘è¿è¡Œæ—¶çš„èµ„æºå ç”¨ã€‚</p><p>åœ¨ Java12 ä¹‹å‰ï¼Œæƒ³è¦ä½¿ç”¨éœ€è¦ä¸‰æ­¥èµ°æ‰‹åŠ¨å¼€å¯ï¼Œåˆ°äº† Java12ï¼Œå°†é»˜è®¤å¼€å¯ CDS åŠŸèƒ½ï¼Œæƒ³è¦å…³é—­ï¼Œéœ€è¦ä½¿ç”¨å‚æ•°<code>-Xshare:off</code>ã€‚</p><h2 id="æ”¹å–„-G1-åƒåœ¾æ”¶é›†å™¨"><a href="#æ”¹å–„-G1-åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="æ”¹å–„ G1 åƒåœ¾æ”¶é›†å™¨"></a>æ”¹å–„ G1 åƒåœ¾æ”¶é›†å™¨</h2><h3 id="èƒ½å¤Ÿä¸­æ­¢æ”¶é›†"><a href="#èƒ½å¤Ÿä¸­æ­¢æ”¶é›†" class="headerlink" title="èƒ½å¤Ÿä¸­æ­¢æ”¶é›†"></a>èƒ½å¤Ÿä¸­æ­¢æ”¶é›†</h3><p>G1 åƒåœ¾æ”¶é›†å™¨å¯ä»¥åœ¨å¤§å†…å­˜å¤šå¤„ç†å™¨çš„å·¥ä½œåœºæ™¯ä¸­æå‡å›æ”¶æ•ˆç‡ï¼Œèƒ½å¤Ÿæ»¡è¶³ç”¨æˆ·é¢„æœŸé™ä½ STW åœé¡¿æ—¶é—´ã€‚</p><p>å…¶å†…éƒ¨æ˜¯é‡‡ç”¨ä¸€ä¸ªé«˜çº§åˆ†æå¼•æ“æ¥é€‰æ‹©åœ¨æ”¶é›†æœŸé—´è¦å¤„ç†çš„å·¥ä½œé‡ï¼Œæ­¤é€‰æ‹©è¿‡ç¨‹çš„ç»“æœæ˜¯ä¸€ç»„ç§°ä¸º GC å›æ”¶é›†ï¼ˆcollection setï¼ŒCSetï¼‰çš„åŒºåŸŸã€‚ä¸€æ—¦æ”¶é›†å™¨ç¡®å®šäº† GC å›æ”¶é›† å¹¶ä¸” GC å›æ”¶ã€æ•´ç†å·¥ä½œå·²ç»å¼€å§‹ï¼Œåˆ™ G1 æ”¶é›†å™¨å¿…é¡»å®Œæˆæ”¶é›†é›†åˆé›†çš„æ‰€æœ‰åŒºåŸŸä¸­çš„æ‰€æœ‰æ´»åŠ¨å¯¹è±¡ä¹‹åæ‰èƒ½åœæ­¢ï¼›ä½†æ˜¯å¦‚æœæ”¶é›†å™¨é€‰æ‹©è¿‡å¤§çš„ GC å›æ”¶é›†ï¼Œå¯èƒ½ä¼šå¯¼è‡´ G1 å›æ”¶å™¨åœé¡¿æ—¶é—´è¶…è¿‡é¢„æœŸæ—¶é—´ã€‚</p><p>åœ¨ Java12 ä¸­ï¼ŒGC å›æ”¶é›†æ‹†åˆ†ä¸ºå¿…éœ€å’Œå¯é€‰ä¸¤éƒ¨åˆ†ï¼Œä½¿ G1 åƒåœ¾å›æ”¶å™¨èƒ½ä¸­æ­¢åƒåœ¾å›æ”¶è¿‡ç¨‹ã€‚å…¶ä¸­å¿…éœ€å¤„ç†çš„éƒ¨åˆ†åŒ…æ‹¬ G1 åƒåœ¾æ”¶é›†å™¨ä¸èƒ½é€’å¢å¤„ç†çš„ GC å›æ”¶é›†çš„éƒ¨åˆ†ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åŒ…å«è€å¹´ä»£ä»¥æé«˜å¤„ç†æ•ˆç‡ã€‚åœ¨ G1 åƒåœ¾å›æ”¶å™¨å®Œæˆæ”¶é›†éœ€è¦å¿…éœ€å›æ”¶çš„éƒ¨åˆ†ä¹‹åï¼ŒG1 åƒåœ¾å›æ”¶å™¨å¯ä»¥æ ¹æ®å‰©ä½™æ—¶é—´å†³å®šæ˜¯å¦åœæ­¢æ”¶é›†ã€‚</p><h3 id="å‘æ“ä½œç³»ç»Ÿè‡ªåŠ¨è¿”å›æœªç”¨å †å†…å­˜"><a href="#å‘æ“ä½œç³»ç»Ÿè‡ªåŠ¨è¿”å›æœªç”¨å †å†…å­˜" class="headerlink" title="å‘æ“ä½œç³»ç»Ÿè‡ªåŠ¨è¿”å›æœªç”¨å †å†…å­˜"></a>å‘æ“ä½œç³»ç»Ÿè‡ªåŠ¨è¿”å›æœªç”¨å †å†…å­˜</h3><p>åœ¨ Java11 ä¸­ï¼ŒG1 ä»…åœ¨è¿›è¡Œ Full GC æˆ–å¹¶å‘å¤„ç†å‘¨æœŸæ—¶æ‰èƒ½å‘æ“ä½œç³»ç»Ÿè¿”è¿˜å †å†…å­˜ï¼Œä½†æ˜¯è¿™ä¸¤ç§åœºæ™¯éƒ½æ˜¯ G1 æåŠ›é¿å…çš„ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬ä½¿ç”¨ G1 æ”¶é›†å™¨ï¼ŒåŸºæœ¬ä¸Šå¾ˆéš¾è¿”è¿˜ Java å †å†…å­˜ï¼Œè¿™æ ·å¯¹äºé‚£ç§å‘¨æœŸæ€§æ‰§è¡Œå¤§é‡å ç”¨å†…å­˜çš„åº”ç”¨ï¼Œä¼šé€ æˆæ¯”è¾ƒå¤šçš„å†…å­˜æµªè´¹ã€‚</p><p>Java12 ä¸­ï¼ŒG1 åƒåœ¾æ”¶é›†å™¨å°†åœ¨åº”ç”¨ç¨‹åºä¸æ´»åŠ¨æœŸé—´å®šæœŸç”Ÿæˆæˆ–æŒç»­å¾ªç¯æ£€æŸ¥æ•´ä½“ Java å †ä½¿ç”¨æƒ…å†µï¼Œä»¥ä¾¿ G1 åƒåœ¾æ”¶é›†å™¨èƒ½å¤Ÿæ›´åŠæ—¶çš„å°† Java å †ä¸­ä¸ä½¿ç”¨å†…å­˜éƒ¨åˆ†è¿”è¿˜ç»™æ“ä½œç³»ç»Ÿã€‚å¯¹äºé•¿æ—¶é—´å¤„äºç©ºé—²çŠ¶æ€çš„åº”ç”¨ç¨‹åºï¼Œæ­¤é¡¹æ”¹è¿›å°†ä½¿ JVM çš„å†…å­˜åˆ©ç”¨ç‡æ›´åŠ é«˜æ•ˆã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java12 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä»<a href="https://openjdk.java.net/projects/jdk/12/" target="_blank" rel="noopener">https://openjdk.java.net/projects/jdk/12/</a>æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-12-features/">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava12 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/122530460" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava12 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      æœ¬æ–‡è®²è§£ä¸€ä¸‹ Java12 çš„ç‰¹æ€§ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªé•¿æœŸæ”¯æŒç‰ˆ Java11 ä¹‹åçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¢åŠ çš„åŠŸèƒ½ä¹Ÿä¸å°‘ï¼Œé™¤äº†ä¸€äº›å°å¹…åº¦çš„ API å¢å¼ºï¼Œå¢åŠ äº†å¦ä¸€ä¸ªè¯•éªŒé˜¶æ®µçš„åƒåœ¾æ”¶é›†å™¨ Shenandoahã€å¯¹ G1 åšäº†ä¼˜åŒ–ã€å¢åŠ å¾®åŸºå‡†å¥—ä»¶ç­‰ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java12" scheme="https://www.howardliu.cn/tags/Java12/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava11 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java-11-features/"/>
    <id>https://www.howardliu.cn/java-11-features/</id>
    <published>2022-01-09T14:09:15.000Z</published>
    <updated>2022-01-09T14:09:15.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/animal-gb69e2a049_1920.jpg" alt="Java11 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚ä» <a href="https://res.cloudinary.com/snyk/image/upload/v1623860216/reports/jvm-ecosystem-report-2021.pdf" target="_blank" rel="noopener">ã€ŠJVM Ecosystem Report 2021ã€‹</a> ä¸­å¯ä»¥çœ‹å‡ºï¼Œç›®å‰å¼€å‘ç¯å¢ƒä¸­æœ‰è¿‘åŠçš„ç¯å¢ƒä½¿ç”¨ Java8ï¼Œæœ‰è¿‘åŠçš„äººè½¬ç§»åˆ°äº† Java11ï¼Œéšç€ Java17 çš„å‘å¸ƒï¼Œç›¸ä¿¡æ¯”ä¾‹ä¼šæœ‰æ‰€å˜åŒ–ã€‚</p><p>å› æ­¤ï¼Œå‡†å¤‡å‡ºä¸€ä¸ªç³»åˆ—ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œé˜è¿°å„ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Java11 æ˜¯ 2018 å¹´ 9 æœˆå‘å¸ƒçš„ï¼Œæ˜¯è‡ª Java8 ä¹‹åç¬¬ä¸€ä¸ªé•¿æœŸæ”¯æŒç‰ˆï¼ˆlong-term supportï¼ŒLTSï¼‰ã€‚ç›¸æ¯”äºå…¶ä»–ç‰ˆæœ¬ 6 ä¸ªæœˆç»´æŠ¤æœŸï¼Œé•¿æœŸæ”¯æŒç‰ˆçš„ç»´æŠ¤æœŸæ˜¯ 3 å¹´ã€‚</p><p>é•¿æœŸæ”¯æŒç‰ˆçš„æ›´æ–°ä¼šæ¯”è¾ƒå¤šï¼Œè€Œä¸”éƒ½æ˜¯ç›¸å¯¹ç¨³å®šçš„æ›´æ–°ã€‚ä»Šå¤©æˆ‘ä»¬å°±ä¸€èµ·çœ‹çœ‹ Java11 éƒ½æœ‰å“ªäº›å–œäººçš„å˜åŒ–ï¼šå¢å¼ºçš„ APIã€å…¨æ–°çš„ HTTP å®¢æˆ·ç«¯ã€<a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a>ã€ä½å¼€é”€çš„å †æ€§èƒ½é‡‡ç”¨å·¥å…·ã€ZGCã€Epsilon åƒåœ¾æ”¶é›†å™¨ã€é£è¡Œè®°å½•å™¨ç­‰ã€‚</p><h2 id="å¢å¼º-String"><a href="#å¢å¼º-String" class="headerlink" title="å¢å¼º String"></a>å¢å¼º String</h2><p>é¦–å…ˆè¯´ä¸‹<code>String</code>ä¸­æ–°å¢çš„æ–¹æ³•ï¼š<code>repeat</code>ã€<code>strip</code>ã€<code>stripLeading</code>ã€<code>stripTrailing</code>ã€<code>isBlank</code>ã€<code>lines</code>ã€‚è¿™äº›æ–¹æ³•è¿˜æ˜¯æŒºæœ‰ç”¨çš„ï¼Œä»¥å‰æˆ‘ä»¬å¯èƒ½éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»åº“ï¼ˆæ¯”å¦‚ Apache å‡ºå“çš„ commons-langï¼‰ä¸­çš„å·¥å…·ç±»ï¼Œç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨å«¡äº²æ–¹æ³•äº†ã€‚</p><h3 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h3><p><code>repeat</code>æ˜¯å®ä¾‹æ–¹æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯è¿”å›ç»™å®šå­—ç¬¦ä¸²çš„é‡å¤å€¼çš„ï¼Œå‚æ•°æ˜¯<code>int</code>ç±»å‹ï¼Œä¼ å‚çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼š</p><ul><li>å¦‚æœé‡å¤æ¬¡æ•°å°äº 0 ä¼šæŠ›å‡º<code>IllegalArgumentException</code>å¼‚å¸¸ï¼›</li><li>å¦‚æœé‡å¤æ¬¡æ•°ä¸º 0 æˆ–è€…å­—ç¬¦ä¸²æœ¬èº«æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œå°†è¿”å›ç©ºå­—ç¬¦ä¸²ï¼›</li><li>å¦‚æœé‡å¤æ¬¡æ•°ä¸º 1 ç›´æ¥è¿”å›æœ¬èº«ï¼›</li><li>å¦‚æœå­—ç¬¦ä¸²é‡å¤æŒ‡å®šæ¬¡æ•°åï¼Œé•¿åº¦è¶…è¿‡<code>Integer.MAX_VALUE</code>ï¼Œä¼šæŠ›å‡º<code>OutOfMemoryError</code>é”™è¯¯ã€‚</li></ul><p>ç”¨æ³•å¾ˆç®€å•ï¼š</p><pre><code class="java">@Testvoid testRepeat() {    String output = &quot;foo &quot;.repeat(2) + &quot;bar&quot;;    assertEquals(&quot;foo foo bar&quot;, output);}</code></pre><p>å°è€Œç¾çš„ä¸€ä¸ªå·¥å…·æ–¹æ³•ã€‚</p><h3 id="stripã€stripLeadingã€stripTrailing"><a href="#stripã€stripLeadingã€stripTrailing" class="headerlink" title="stripã€stripLeadingã€stripTrailing"></a>stripã€stripLeadingã€stripTrailing</h3><p><code>strip</code>æ–¹æ³•ç®—æ˜¯<code>trim</code>æ–¹æ³•çš„å¢å¼ºç‰ˆï¼Œ<code>trim</code>æ–¹æ³•å¯ä»¥åˆ é™¤å­—ç¬¦ä¸²ä¸¤ä¾§çš„ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€tab é”®ã€æ¢è¡Œç¬¦ï¼‰ï¼Œä½†æ˜¯å¯¹äº<code>Unicode</code>çš„ç©ºç™½å­—ç¬¦æ— èƒ½ä¸ºåŠ›ï¼Œ<code>strip</code>è¡¥è¶³è¿™ä¸€çŸ­æ¿ã€‚</p><p>ç”¨èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="java">@Testvoid testTrip() {    final String output = &quot;\n\t  hello   \u2005&quot;.strip();    assertEquals(&quot;hello&quot;, output);    final String trimOutput = &quot;\n\t  hello   \u2005&quot;.trim();    assertEquals(&quot;hello   \u2005&quot;, trimOutput);}</code></pre><p>å¯¹æ¯”ä¸€ä¸‹å¯ä»¥çœ‹åˆ°ï¼Œ<code>trim</code>æ–¹æ³•çš„æ¸…ç†åŠŸèƒ½ç¨å¼±ã€‚</p><p><code>stripLeading</code>å’Œ<code>stripTrailing</code>ä¸<code>strip</code>ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ä¸€ä¸ªæ¸…ç†å¤´ï¼Œä¸€ä¸ªæ¸…ç†å°¾ã€‚ç”¨æ³•å¦‚ä¸‹ï¼š</p><pre><code class="java">@Testvoid testTripLeading() {    final String output = &quot;\n\t  hello   \u2005&quot;.stripLeading();    assertEquals(&quot;hello   \u2005&quot;, output);}@Testvoid testTripTrailing() {    final String output = &quot;\n\t  hello   \u2005&quot;.stripTrailing();    assertEquals(&quot;\n\t  hello&quot;, output);}</code></pre><h3 id="isBlank"><a href="#isBlank" class="headerlink" title="isBlank"></a>isBlank</h3><p>è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦éƒ½æ˜¯ç©ºç™½å­—ç¬¦ï¼Œé™¤äº†ç©ºæ ¼ã€tab é”®ã€æ¢è¡Œç¬¦ï¼Œä¹ŸåŒ…æ‹¬<code>Unicode</code>çš„ç©ºç™½å­—ç¬¦ã€‚</p><p>ç”¨æ³•å¾ˆç®€å•ï¼š</p><pre><code class="java">@Testvoid testIsBlank() {    assertTrue(&quot;\n\t\u2005&quot;.isBlank());}</code></pre><h3 id="lines"><a href="#lines" class="headerlink" title="lines"></a>lines</h3><p>æœ€åè¿™ä¸ªæ–¹æ³•æ˜¯å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå­—ç¬¦ä¸²<code>Stream</code>ç±»å‹ï¼Œå­—ç¬¦ä¸²åˆ†éš”ä¾æ®æ˜¯æ¢è¡Œç¬¦ï¼š<code>\n</code>ã€<code>\r</code>ã€<code>\r\n</code>ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p><pre><code class="java">@Testvoid testLines() {    final String multiline = &quot;This is\n \na multiline\nstring.&quot;;    final String output = multiline.lines()            .filter(Predicate.not(String::isBlank))            .collect(Collectors.joining(&quot; &quot;));    assertEquals(&quot;This is a multiline string.&quot;, output);}</code></pre><h2 id="å¢å¼ºæ–‡ä»¶è¯»å†™"><a href="#å¢å¼ºæ–‡ä»¶è¯»å†™" class="headerlink" title="å¢å¼ºæ–‡ä»¶è¯»å†™"></a>å¢å¼ºæ–‡ä»¶è¯»å†™</h2><p>æœ¬æ¬¡æ›´æ–°åœ¨<code>Files</code>ä¸­å¢åŠ äº†ä¸¤ä¸ªæ–¹æ³•ï¼š<code>readString</code>å’Œ<code>writeString</code>ã€‚<code>writeString</code>ä½œç”¨æ˜¯å°†æŒ‡å®šå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ï¼Œ<code>readString</code>ä½œç”¨æ˜¯ä»æ–‡ä»¶ä¸­è¯»å‡ºå†…å®¹åˆ°å­—ç¬¦ä¸²ã€‚æ˜¯ä¸€ä¸ªå¯¹<code>Files</code>å·¥å…·ç±»çš„å¢å¼ºï¼Œå°è£…äº†å¯¹è¾“å‡ºæµã€å­—èŠ‚ç­‰å†…å®¹çš„æ“ä½œã€‚</p><p>ç”¨æ³•æ¯”è¾ƒç®€å•ï¼š</p><pre><code class="java">@Testvoid testReadWriteString() throws IOException {    final Path tmpPath = Path.of(&quot;./&quot;);    final Path tempFile = Files.createTempFile(tmpPath, &quot;demo&quot;, &quot;.txt&quot;);    final Path filePath = Files.writeString(tempFile, &quot;çœ‹å±± howardliu.cn\n å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹&quot;);    assertEquals(tempFile, filePath);    final String fileContent = Files.readString(filePath);    assertEquals(&quot;çœ‹å±± howardliu.cn\n å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹&quot;, fileContent);    Files.deleteIfExists(filePath);}</code></pre><p><code>readString</code>å’Œ<code>writeString</code>è¿˜å¯ä»¥æŒ‡å®šå­—ç¬¦é›†ï¼Œä¸æŒ‡å®šé»˜è®¤ä½¿ç”¨<code>StandardCharsets.UTF_8</code>å­—ç¬¦é›†ï¼Œå¯ä»¥åº”å¯¹å¤§éƒ¨åˆ†åœºæ™¯äº†ã€‚</p><h2 id="å¢å¼ºé›†åˆçš„æ•°ç»„æ“ä½œ"><a href="#å¢å¼ºé›†åˆçš„æ•°ç»„æ“ä½œ" class="headerlink" title="å¢å¼ºé›†åˆçš„æ•°ç»„æ“ä½œ"></a>å¢å¼ºé›†åˆçš„æ•°ç»„æ“ä½œ</h2><p><code>java.util.Collection</code>æä¾›äº†é›†åˆè½¬æ•°ç»„çš„æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š</p><ul><li><code>Object[] toArray()</code>ï¼šå¯ä»¥ç›´æ¥è½¬æ•°ç»„ï¼Œä½†æ˜¯è½¬æ¢åæ˜¯<code>Object</code>ç±»å‹ï¼Œåç»­ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦å¼ºè½¬ï¼Œå¤ªä¸ä¼˜é›…äº†ï¼›</li><li><code>&lt;T&gt; T[] toArray(T[] a)</code>ï¼šä¼ å…¥ä¸€ä¸ªæŒ‡å®šç±»å‹çš„æ•°ç»„ï¼Œä¸€èˆ¬ä¼šæœ‰å¦ç§å®ç°ï¼š<ul><li>ä¸€æ˜¯ï¼Œå¦‚æœä¼ å…¥æ•°ç»„é•¿åº¦å°äºåˆ—è¡¨é•¿åº¦ï¼Œä¼šå€ŸåŠ©<code>Arrays.copyOf</code>åˆ›å»ºåˆ—è¡¨é•¿åº¦çš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„ä¸ä¼ å…¥æ•°ç»„å‚æ•°æ²¡æœ‰å…³ç³»</li><li>äºŒæ˜¯ï¼Œå¦‚æœä¼ å…¥æ•°ç»„é•¿åº¦å¤§äºç­‰äºåˆ—è¡¨é•¿åº¦ï¼Œä¼šå€ŸåŠ©<code>System.arraycopy</code>å°†åˆ—è¡¨å†™å…¥æ•°ç»„ï¼Œè¶…è¿‡é•¿åº¦çš„æ•°ç»„å…ƒç´ ç½®ä¸º<code>null</code>ã€‚</li></ul></li></ul><p>æˆ‘ä»¬ä¸€èˆ¬è¿™æ ·ç”¨ï¼š</p><pre><code class="java">@Testvoid testArray() {    final List&lt;String&gt; vars = Arrays.asList(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;);    final Object[] objArray = vars.toArray();    final String[] strArray = vars.toArray(new String[0]);    Assertions.assertTrue(Arrays.asList(strArray).contains(&quot;1&quot;));    Assertions.assertTrue(Arrays.asList(strArray).contains(&quot;2&quot;));    Assertions.assertTrue(Arrays.asList(strArray).contains(&quot;3&quot;));}</code></pre><p>åœ¨ Java11 ä¸­ï¼Œåˆæ–°å¢äº†ä¸€ç§å®ç°ï¼Œç›¸å½“äºå¯¹<code>&lt;T&gt; T[] toArray(T[] a)</code>åšäº†å¢å¼ºï¼Œå…¶æºç æ˜¯ï¼š</p><pre><code class="java">default &lt;T&gt; T[] toArray(IntFunction&lt;T[]&gt; generator) {    return toArray(generator.apply(0));}</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯é€šè¿‡ä¼ å…¥ä¸€ä¸ª<code>IntFunction</code>ç±»å‹çš„å‡½æ•°ï¼Œç„¶åè°ƒç”¨<code>&lt;T&gt; T[] toArray(T[] a)</code>åˆ›å»ºæ•°ç»„ï¼Œå…¶å®æ˜¯é‡‡ç”¨äº†æˆ‘ä»¬å¸¸ç”¨çš„ç»™<code>toArray</code>ä¼ å…¥ç©ºæ•°ç»„çš„æ–¹å¼ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p><pre><code class="java">@Testvoid testArray() {    final List&lt;String&gt; vars = Arrays.asList(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;);    final String[] strArray2 = vars.toArray(String[]::new);    Assertions.assertTrue(Arrays.asList(strArray2).contains(&quot;1&quot;));    Assertions.assertTrue(Arrays.asList(strArray2).contains(&quot;2&quot;));    Assertions.assertTrue(Arrays.asList(strArray2).contains(&quot;3&quot;));}</code></pre><p>ä»ä½¿ç”¨ä¸Šï¼Œä¼¼ä¹æ²¡æœ‰å¤ªå¤šçš„æå‡ï¼Œä½†æ˜¯å†™æ³•ä¸Šï¼Œä½¿ç”¨äº†å‡½æ•°å¼ç¼–ç¨‹ï¼Œæ˜¯ä¸æ˜¯å¾ˆä¼˜é›…ã€‚</p><p><img src="https://static.howardliu.cn/Illustration/smile_1.jpg" alt="ä¼˜é›…çš„å‡ç¬‘"></p><h2 id="å¢å¼ºå‡½æ•°-Predicate"><a href="#å¢å¼ºå‡½æ•°-Predicate" class="headerlink" title="å¢å¼ºå‡½æ•° Predicate"></a>å¢å¼ºå‡½æ•° Predicate</h2><p>è¿™ä¸ªä¹Ÿæ˜¯æ–¹æ³•å¢å¼ºï¼Œåœ¨ä»¥å‰ï¼Œæˆ‘ä»¬åœ¨<code>Stream</code>ä¸­çš„<code>filter</code>æ–¹æ³•åˆ¤æ–­å¦çš„æ—¶å€™ï¼Œä¸€èˆ¬éœ€è¦<code>!</code>è¿ç®—ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³è¦æ‰¾åˆ°å­—ç¬¦ä¸²åˆ—è¡¨ä¸­çš„æ•°å­—ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="java">final List&lt;String&gt; list = Arrays.asList(&quot;1&quot;, &quot;a&quot;);final List&lt;String&gt; nums = list.stream()        .filter(NumberUtils::isDigits)        .collect(Collectors.toList());Assertions.assertEquals(1, nums.size());Assertions.assertTrue(nums.contains(&quot;1&quot;));</code></pre><p>æƒ³è¦æ‰¾åˆ°éæ•°å­—çš„ï¼Œ<code>filter</code>æ–¹æ³•å†™çš„å°±ä¼šç”¨åˆ°<code>!</code>éæ“ä½œï¼š</p><pre><code class="java">final List&lt;String&gt; notNums = list.stream()        .filter(x -&gt; !NumberUtils.isDigits(x))        .collect(Collectors.toList());Assertions.assertEquals(1, notNums.size());Assertions.assertTrue(notNums.contains(&quot;a&quot;));</code></pre><p>Java11 ä¸­ä¸º<code>Predicate</code>å¢åŠ <code>not</code>æ–¹æ³•ï¼Œå¯ä»¥æ›´åŠ ç®€å•çš„å®ç°éæ“ä½œï¼š</p><pre><code class="java">final List&lt;String&gt; notNums2 = list.stream()        .filter(Predicate.not(NumberUtils::isDigits))        .collect(Collectors.toList());Assertions.assertEquals(1, notNums2.size());Assertions.assertTrue(notNums2.contains(&quot;a&quot;));</code></pre><p>æœ‰äº›æ•™ç¨‹è¿˜ä¼šæ¨å´‡é™æ€å¼•å…¥ï¼Œæ¯”å¦‚åœ¨å¤´éƒ¨ä½¿ç”¨<code>import static java.util.function.Predicate.not</code>ï¼Œè¿™æ ·åœ¨å‡½æ•°å¼ç¼–ç¨‹æ—¶ï¼Œå¯ä»¥å†™æ›´å°‘çš„ä»£ç ï¼Œè¯­ä¹‰æ›´å¼ºï¼Œæ¯”å¦‚ï¼š</p><pre><code class="java">final List&lt;String&gt; notNums2 = list.stream()        .filter(not(NumberUtils::isDigits))        .collect(toList());</code></pre><p>å–œå¥½éšäººï¼Œæ²¡æœ‰ä¼˜åŠ£ã€‚</p><h2 id="Lambda-ä¸­çš„å±€éƒ¨å˜é‡"><a href="#Lambda-ä¸­çš„å±€éƒ¨å˜é‡" class="headerlink" title="Lambda ä¸­çš„å±€éƒ¨å˜é‡"></a>Lambda ä¸­çš„å±€éƒ¨å˜é‡</h2><p>å±€éƒ¨å˜é‡æ˜¯ Java10 ä¸­å¢åŠ çš„ç‰¹æ€§ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹ <a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a> ä¸­çš„ä»‹ç»ï¼Œä½†æ˜¯ä¸æ”¯æŒåœ¨ Lambda ä¸­ä½¿ç”¨å±€éƒ¨å˜é‡ã€‚</p><p>åœ¨ Lambda ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·æ“ä½œï¼š</p><pre><code class="java">(String s1, String s2) -&gt; s1 + s2</code></pre><p>ä¹Ÿå¯ä»¥è¿™æ ·ï¼š</p><pre><code class="java">(s1, s2) -&gt; s1 + s2</code></pre><p>åˆ° Java11 ä¹‹åï¼Œæˆ‘ä»¬è¿˜èƒ½è¿™æ ·ï¼š</p><pre><code class="java">(var s1, var s2) -&gt; s1 + s2</code></pre><p>å•çº¯ä»è¯­æ³•ä¸Šï¼Œä¼¼ä¹æ²¡å•¥ç‰¹ç‚¹ï¼Œä½†æ˜¯å¦‚æœå†åŠ ä¸Šä¸€äº›åˆ«çš„ç”¨æ³•ï¼Œæ¯”å¦‚ï¼š</p><pre><code class="java">(@Nonnull var s1, @Nullable var s2) -&gt; s1 + s2</code></pre><p>æ˜¯ä¸æ˜¯å°±èƒ½çœ‹å‡ºå·®åˆ«äº†ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰å¦‚ä¸‹çš„æ“ä½œï¼š</p><pre><code class="java">@Testvoid testLocalVariable() {    final List&lt;String&gt; sampleList = Arrays.asList(&quot;Hello&quot;, &quot;World&quot;);    final String resultString = sampleList.stream()            .map((@NotNull var x) -&gt; x.toUpperCase())            .collect(Collectors.joining(&quot;, &quot;));    Assertions.assertEquals(&quot;HELLO, WORLD&quot;, resultString);}</code></pre><p>ä¸è¿‡ï¼Œè¿™é‡Œè¿˜æ˜¯æœ‰ä¸€äº›é™åˆ¶ï¼Œæ¯”å¦‚ï¼š</p><p>å¦‚æœæ˜¯å¤šä¸ªå‚æ•°ï¼Œä¸èƒ½æœ‰çš„ä½¿ç”¨<code>var</code>ä¿®é¥°ï¼Œæœ‰çš„ä¸æŒ‡å®šç±»å‹ï¼š</p><pre><code class="java">// é”™è¯¯å†™æ³•(var s1, s2) -&gt; s1 + s2</code></pre><p>æˆ–è€…ï¼Œä¸èƒ½æ··åˆä½¿ç”¨ï¼Œä¸€ä¸ªä½¿ç”¨<code>var</code>ä¿®é¥°ï¼Œä¸€ä¸ªä½¿ç”¨æ˜ç¡®çš„ç±»å‹ï¼š</p><pre><code class="java">// é”™è¯¯å†™æ³•(var s1, String s2) -&gt; s1 + s2</code></pre><p>å¦‚æœæ˜¯å•ä¸ªå‚æ•°ï¼Œå¦‚æœæ˜¯å•è¡Œæ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä¸å†™<code>{}</code>ï¼Œä½†æ˜¯ä½¿ç”¨<code>var</code>ä¿®é¥°çš„æ—¶å€™ï¼Œå°±ä¸èƒ½çœç•¥<code>{}</code>äº†ï¼š</p><pre><code class="java">// é”™è¯¯å†™æ³•var s1 -&gt; s1.toUpperCase()</code></pre><p>è¿˜æ˜¯æœ‰ä¸€äº›é™åˆ¶çš„ï¼Œæˆ‘ä»¬åœ¨ä¾¿åˆ©çš„åŒæ—¶ï¼Œéœ€è¦ç¬¦åˆä¸€å®šçš„çº¦æŸã€‚è‡ªç”±å’Œè§„èŒƒä¸å†²çªã€‚</p><h2 id="è½¬æ­£çš„-HTTP-å®¢æˆ·ç«¯"><a href="#è½¬æ­£çš„-HTTP-å®¢æˆ·ç«¯" class="headerlink" title="è½¬æ­£çš„ HTTP å®¢æˆ·ç«¯"></a>è½¬æ­£çš„ HTTP å®¢æˆ·ç«¯</h2><p>åœ¨ <a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a> ä¸­è¯´è¿‡ï¼ŒJava ä¸­æœ‰ä¸€ä¸ªå…¨æ–°çš„ HTTP å®¢æˆ·ç«¯ï¼Œå½“æ—¶è¿˜åœ¨å­µåŒ–æ¨¡å—ä¸­ï¼Œåˆ° Java11 å¯ä»¥æ­£å¼ä½¿ç”¨äº†ã€‚</p><p>æ–°å®¢æˆ·ç«¯ç”¨æ³•ç®€å•ã€æ€§èƒ½å¯é ï¼Œè€Œä¸”æ”¯æŒåŠŸèƒ½ä¹Ÿå¤šã€‚æˆ‘ä»¬å…ˆç®€å•çœ‹ä¸‹ä½¿ç”¨ï¼š</p><pre><code class="java">@Testvoid testHttpClient() throws IOException, InterruptedException {    final HttpClient httpClient = HttpClient.newBuilder()            .version(HttpClient.Version.HTTP_2)            .connectTimeout(Duration.ofSeconds(20))            .build();    final HttpRequest httpRequest = HttpRequest.newBuilder()            .GET()            .uri(URI.create(&quot;https://www.howardliu.cn/robots.txt&quot;))            .build();    final HttpResponse&lt;String&gt; httpResponse = httpClient.send(httpRequest, BodyHandlers.ofString());    final String responseBody = httpResponse.body();    assertTrue(responseBody.contains(&quot;Allow&quot;));}</code></pre><h2 id="åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–"><a href="#åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–" class="headerlink" title="åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–"></a>åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</h2><p>è¿™éƒ¨åˆ†æ˜¯é—ç•™çš„æŠ€æœ¯å€ºåŠ¡ï¼Œä» Java1.1 å¼€å§‹ï¼Œåˆ° Java11 ä¿®å¤ï¼Œå±äº Valhalla é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬åœ¨ <a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a> ä¸€æ–‡ä¸­æœ‰è¯¦ç»†è§£é‡Šï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚</p><h2 id="å¢å¼º-java-å‘½ä»¤"><a href="#å¢å¼º-java-å‘½ä»¤" class="headerlink" title="å¢å¼º java å‘½ä»¤"></a>å¢å¼º java å‘½ä»¤</h2><p>åœ¨ Java11 ä¹‹å‰ï¼Œæƒ³è¦è¿è¡Œæºæ–‡ä»¶ï¼Œéœ€è¦å…ˆé€šè¿‡<code>javac</code>å‘½ä»¤ç¼–è¯‘ï¼Œç„¶åä½¿ç”¨<code>java</code>å‘½ä»¤è¿è¡Œï¼Œå…ˆå¯ä»¥ç›´æ¥ä½¿ç”¨<code>java</code>è¿è¡Œäº†ï¼š</p><pre><code class="java">$ java HelloWorld.javaHello Java 11!</code></pre><h2 id="åŠ¨æ€ç±»æ–‡ä»¶å¸¸é‡"><a href="#åŠ¨æ€ç±»æ–‡ä»¶å¸¸é‡" class="headerlink" title="åŠ¨æ€ç±»æ–‡ä»¶å¸¸é‡"></a>åŠ¨æ€ç±»æ–‡ä»¶å¸¸é‡</h2><p>ä¸ºäº†ä½¿ JVM å¯¹åŠ¨æ€è¯­è¨€æ›´å…·å¸å¼•åŠ›ï¼ŒJava æŒ‡ä»¤é›†å¼•å…¥äº† invokedynamicã€‚</p><p>ä¸è¿‡ Java å¼€å‘äººå‘˜é€šå¸¸ä¸ä¼šæ³¨æ„åˆ°æ­¤åŠŸèƒ½ï¼Œå› ä¸ºå®ƒéšè—åœ¨ Java å­—èŠ‚ä»£ç ä¸­ã€‚é€šè¿‡ä½¿ç”¨ invokedynamicï¼Œå¯ä»¥å»¶è¿Ÿæ–¹æ³•è°ƒç”¨çš„ç»‘å®šã€‚ä¾‹å¦‚ï¼ŒJava è¯­è¨€ä½¿ç”¨è¯¥æŠ€æœ¯æ¥å®ç° Lambda è¡¨è¾¾å¼ï¼Œè¿™äº›è¡¨è¾¾å¼ä»…åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶æ‰æ˜¾ç¤ºå‡ºæ¥ã€‚è¿™æ ·åšï¼Œinvokedynamic å·²ç»æ¼”å˜æˆä¸€ç§å¿…ä¸å¯å°‘çš„è¯­è¨€åŠŸèƒ½ã€‚</p><p>Java 11 å¼•å…¥äº†ç±»ä¼¼çš„æœºåˆ¶ï¼Œæ‰©å±•äº† Java æ–‡ä»¶æ ¼å¼ï¼Œä»¥æ”¯æŒæ–°çš„å¸¸é‡æ± ï¼šCONSTANT_Dynamicï¼Œå®ƒåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œåƒ invokedynamic æŒ‡ä»¤ç”Ÿæˆä»£ç†æ–¹æ³•ä¸€æ ·ï¼Œå§”æ‰˜ç»™ bootstrap æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–åˆ›å»ºï¼Œå¯¹ä¸Šå±‚è½¯ä»¶æ²¡æœ‰å¾ˆå¤§çš„å½±å“ï¼Œé™ä½å¼€å‘æ–°å½¢å¼çš„å¯å®ç°ç±»æ–‡ä»¶çº¦æŸå¸¦æ¥çš„æˆæœ¬å’Œå¹²æ‰°ã€‚</p><p>æ­¤åŠŸèƒ½å¯æé«˜æ€§èƒ½ï¼Œå¹¶é¢å‘è¯­è¨€è®¾è®¡äººå‘˜å’Œç¼–è¯‘å™¨å®ç°äººå‘˜ã€‚</p><h2 id="ä½å¼€é”€çš„å †æ€§èƒ½é‡‡ç”¨å·¥å…·"><a href="#ä½å¼€é”€çš„å †æ€§èƒ½é‡‡ç”¨å·¥å…·" class="headerlink" title="ä½å¼€é”€çš„å †æ€§èƒ½é‡‡ç”¨å·¥å…·"></a>ä½å¼€é”€çš„å †æ€§èƒ½é‡‡ç”¨å·¥å…·</h2><p>Java 11 ä¸­æä¾›ä¸€ç§ä½å¼€é”€çš„ Java å †åˆ†é…é‡‡æ ·æ–¹æ³•ï¼Œèƒ½å¤Ÿå¾—åˆ°å †åˆ†é…çš„ Java å¯¹è±¡ä¿¡æ¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿé€šè¿‡ JVMTI è®¿é—®å †ä¿¡æ¯ã€‚</p><p>å¼•å…¥è¿™ä¸ªä½å¼€é”€å†…å­˜åˆ†æå·¥å…·æ˜¯ä¸ºäº†è¾¾åˆ°å¦‚ä¸‹ç›®çš„ï¼š</p><ul><li>è¶³å¤Ÿä½çš„å¼€é”€ï¼Œå¯ä»¥é»˜è®¤ä¸”ä¸€ç›´å¼€å¯ï¼›</li><li>èƒ½é€šè¿‡å®šä¹‰å¥½çš„ç¨‹åºæ¥å£è®¿é—®ï¼›</li><li>èƒ½å¤Ÿå¯¹æ‰€æœ‰å †åˆ†é…åŒºåŸŸè¿›è¡Œé‡‡æ ·ï¼›</li><li>èƒ½ç»™å‡ºæ­£åœ¨å’Œæœªè¢«ä½¿ç”¨çš„ Java å¯¹è±¡ä¿¡æ¯ã€‚</li></ul><p>å¯¹ç”¨æˆ·æ¥è¯´ï¼Œäº†è§£å †ä¸­å†…å­˜åˆ†å¸ƒæ˜¯éå¸¸é‡è¦çš„ï¼Œç‰¹åˆ«æ˜¯é‡åˆ°ç”Ÿäº§ç¯å¢ƒä¸­å‡ºç°çš„é«˜ CPUã€é«˜å†…å­˜å ç”¨ç‡çš„æƒ…å†µã€‚ç›®å‰æœ‰ä¸€äº›å·²ç»å¼€æºçš„å·¥å…·ï¼Œå…è®¸ç”¨æˆ·åˆ†æåº”ç”¨ç¨‹åºä¸­çš„å †ä½¿ç”¨æƒ…å†µï¼Œæ¯”å¦‚ï¼šJava Flight Recorderã€jmapã€YourKit ä»¥åŠ VisualVM tools.ã€‚ä½†æ˜¯è¿™äº›å·¥å…·éƒ½æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ä¸è¶³ä¹‹å¤„ï¼šæ— æ³•å¾—åˆ°å¯¹è±¡çš„åˆ†é…ä½ç½®ï¼Œheadp dump ä»¥åŠ heap histogram ä¸­éƒ½æ²¡æœ‰åŒ…å«å¯¹è±¡åˆ†é…çš„å…·ä½“ä¿¡æ¯ï¼Œä½†æ˜¯è¿™äº›ä¿¡æ¯å¯¹äºè°ƒè¯•å†…å­˜é—®é¢˜è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿå‘Šè¯‰å¼€å‘äººå‘˜ä»–ä»¬çš„ä»£ç ä¸­å‘ç”Ÿçš„é«˜å†…å­˜åˆ†é…çš„ç¡®åˆ‡ä½ç½®ï¼Œå¹¶æ ¹æ®å®é™…æºç æ¥åˆ†æå…·ä½“é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯ Java 11 ä¸­å¼•å…¥è¿™ç§ä½å¼€é”€å †åˆ†é…é‡‡æ ·æ–¹æ³•çš„åŸå› ã€‚</p><h2 id="ZGC"><a href="#ZGC" class="headerlink" title="ZGC"></a>ZGC</h2><p>ZGC æ˜¯ä¸€ä¸ªå¯ä¼¸ç¼©ã€ä½å»¶è¿Ÿçš„åƒåœ¾æ”¶é›†å™¨ï¼Œæ€§èƒ½ç”±äº G1 æ”¶é›†å™¨ï¼Œä» Java11 å¼€å§‹å¯ä»¥åœ¨ Linux/x64 å¹³å°ä½“éªŒï¼Œå…¨å¹³å°æ”¯æŒæ˜¯ä» Java17 å¼€å§‹ã€‚è¯¦ç»†ä»‹ç»å¯ä»¥ä»<a href="https://wiki.openjdk.java.net/display/zgc/Main" target="_blank" rel="noopener">https://wiki.openjdk.java.net/display/zgc/Main</a>æŸ¥çœ‹ã€‚</p><p>åœ¨ Java11 ä¸­å°šå¤„äºè¯•éªŒé˜¶æ®µï¼Œæ²¡æœ‰åŒ…å«åœ¨ JDK æ„å»ºä¸­ï¼Œæƒ³è¦å¯ç”¨ï¼Œéœ€è¦åœ¨ JDK ç¼–è¯‘æ—¶æ·»åŠ å‚æ•°<code>--with-jvm-features=zgc</code>ã€‚æ˜¾å¼å¯ç”¨äº† ZGC ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ„å»ºå¥½çš„ JDK å¯åŠ¨ï¼Œéœ€è¦æ·»åŠ å‚æ•°<code>-XX:+UnlockExperimentalVMOptions -XX:+UseZGC</code>ã€‚</p><p>ZGC æœ‰ä¸‹é¢å‡ ä¸ªç›®æ ‡ï¼š</p><ul><li>GC åœé¡¿æ—¶é—´ä¸è¶…è¿‡ 10ms</li><li>å¯ä»¥å¤„ç†ä»å‡ ç™¾ MB çš„å°å †ï¼Œåˆ°å‡ ä¸ª TB çš„å¤§å †</li><li>ä¸ G1 å›æ”¶ç®—æ³•ç›¸æ¯”ï¼Œåº”ç”¨ååèƒ½åŠ›ä¸ä¼šä¸‹é™è¶…è¿‡ 15%</li><li>ä¸ºæœªæ¥çš„ GC ç‰¹æ€§å’Œä¼˜åŒ–æœ‰è‰²æŒ‡é’ˆå’Œè´Ÿè½½å±éšœå¥ å®šåŸºç¡€</li></ul><p>ä»<a href="https://openjdk.java.net/jeps/333" target="_blank" rel="noopener">https://openjdk.java.net/jeps/333</a>ç»™å‡ºçš„æ•°æ®å¯ä»¥çœ‹å‡ºæ¥ï¼Œåœ¨ 128G å †å¤§å°çš„æµ‹è¯•ä¸­ï¼ŒZGC ä¼˜åŠ¿æ˜æ˜¾ï¼Œæ‰¾äº†ä¸€å¼ ç½‘ä¸Šçš„å›¾ç‰‡ï¼š</p><p><img src="https://static.howardliu.cn/java/java-11-1.png" alt="SPECjbb 2015 çš„åŸºå‡†æµ‹è¯•"></p><p>è¿™é‡Œé¢„å‘Šä¸€ä¸‹ï¼ŒJava12 ä¸­ä¹Ÿå¢åŠ äº†ä¸€ä¸ªå®ç°é˜¶æ®µçš„åƒåœ¾æ”¶é›†å™¨ Shenandoahï¼Œåˆ°æ—¶å€™å’±ä»¬çœ‹ä¸€ä¸‹ã€‚</p><h2 id="æ”¹è¿›-Aarch64-æŒ‡ä»¤é›†"><a href="#æ”¹è¿›-Aarch64-æŒ‡ä»¤é›†" class="headerlink" title="æ”¹è¿› Aarch64 æŒ‡ä»¤é›†"></a>æ”¹è¿› Aarch64 æŒ‡ä»¤é›†</h2><p>Java 11 ä¼˜åŒ–äº† ARM64 æˆ– Arch64 å¤„ç†å™¨ä¸Šç°æœ‰çš„å­—ç¬¦ä¸²å’Œæ•°ç»„å†…éƒ¨å‡½æ•°ã€‚è¿˜ä¸º<code>java.lang.Math</code>çš„<code>sin</code>ã€<code>cos</code>å’Œ<code>log</code>æ–¹æ³•å®ç°äº†æ–°çš„å†…éƒ¨å‡½æ•°ã€‚</p><p>æˆ‘ä»¬åƒå…¶ä»–å‡½æ•°ä¸€æ ·ä½¿ç”¨å†…åœ¨å‡½æ•°ï¼Œä½†æ˜¯ï¼Œç¼–è¯‘å™¨ä¼šä»¥ç‰¹æ®Šçš„æ–¹å¼å¤„ç†å†…éƒ¨å‡½æ•°ï¼Œå°†ä½¿ç”¨ CPU ä½“ç³»ç»“æ„ç‰¹å®šçš„æ±‡ç¼–ä»£ç æ¥æé«˜æ€§èƒ½ã€‚å¯ä»¥å…³æ³¨ä¸€ä¸‹<code>HotSpotIntrinsicCandidate</code>è¿™ä¸ªæ³¨è§£ã€‚</p><h2 id="Epsilon-åƒåœ¾æ”¶é›†å™¨"><a href="#Epsilon-åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="Epsilon åƒåœ¾æ”¶é›†å™¨"></a>Epsilon åƒåœ¾æ”¶é›†å™¨</h2><p>Java11 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å®éªŒæ€§åƒåœ¾æ”¶é›†å™¨ï¼šEpsilonã€‚Epsilon åƒåœ¾æ”¶é›†å™¨æä¾›ä¸€ä¸ªå®Œå…¨æ¶ˆæçš„ GC å®ç°ï¼Œåˆ†é…æœ‰é™çš„å†…å­˜èµ„æºï¼Œæœ€å¤§é™åº¦çš„é™ä½å†…å­˜å ç”¨å’Œå†…å­˜ååå»¶è¿Ÿæ—¶é—´ï¼Œé€‚ç”¨äºæ¨¡æ‹Ÿå†…å­˜ä¸è¶³é”™è¯¯çš„åœºæ™¯ã€‚</p><p>Epsilon åƒåœ¾æ”¶é›†å™¨æœ‰å‡ ä¸ªä½¿ç”¨åœºæ™¯ï¼š</p><ul><li>æ€§èƒ½æµ‹è¯•ï¼šæ— æ“ä½œçš„åƒåœ¾æ”¶é›†å™¨å¯ä»¥è¿‡æ»¤å› ä¸ºæ”¶é›†å™¨è‡ªèº«åŸå› é€ æˆçš„æ€§èƒ½æŸå¤±ï¼›</li><li>å†…å­˜å‹åŠ›æµ‹è¯•ï¼šå¯ä»¥ç”¨äºéªŒè¯åˆ†é…å†…å­˜çš„é˜ˆå€¼ï¼›</li><li>VM æ¥å£æµ‹è¯•ï¼šä»¥ VM å¼€å‘è§†è§’ï¼Œæœ‰ä¸€ä¸ªç®€å•çš„ GC å®ç°ï¼Œæœ‰åŠ©äºç†è§£ VM-GC çš„æœ€å°æ¥å£å®ç°ã€‚å®ƒä¹Ÿç”¨äºè¯æ˜ VM-GC æ¥å£çš„å¥å…¨æ€§ï¼›</li><li>å­˜æ´»æçŸ­çš„ä»»åŠ¡ï¼šè¿™ç§ç”Ÿå‘½å‘¨æœŸæçŸ­çš„ä»»åŠ¡ï¼Œéœ€è¦å®ç°å¿«é€Ÿå¯åŠ¨ã€å¿«é€Ÿé‡Šæ”¾èµ„æºçš„ç‰¹æ€§ã€‚å¼€å‘è€…çŸ¥é“è¿™ç§ä»»åŠ¡çš„å†…å­˜é˜ˆå€¼æ˜¯å¤šå°‘ï¼Œå¾ˆå¤§æ¦‚ç‡ä¸Šï¼Œä»»åŠ¡å­˜æ´»å‘¨æœŸå†…ï¼Œä¸ä¼šè§¦å‘åƒåœ¾å›æ”¶ï¼Œå°±éœ€è¦ä¸€ä¸ªä»€ä¹ˆä¹Ÿä¸å¹²çš„æ”¶é›†å™¨ç«™ç€ä½ç½®å°±è¡Œã€‚</li></ul><p>å¯ä»¥é€šè¿‡<code>-XX:+UnlockExperimentalVMOptions -XX:+UseEpsilonGC</code>å‚æ•°å¼€å¯ã€‚</p><h2 id="é£è¡Œè®°å½•å™¨ï¼ˆFlight-Recorderï¼‰"><a href="#é£è¡Œè®°å½•å™¨ï¼ˆFlight-Recorderï¼‰" class="headerlink" title="é£è¡Œè®°å½•å™¨ï¼ˆFlight Recorderï¼‰"></a>é£è¡Œè®°å½•å™¨ï¼ˆFlight Recorderï¼‰</h2><p>é£è¡Œè®°å½•å™¨ï¼ˆFlight Recorderï¼‰å¯æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œä¹‹å‰æ˜¯ Oracle JDK ä¸­çš„ä¸€ä¸ªå•†ç”¨äº§å“ï¼Œç°å·²åœ¨ Open JDK ä¸­å¼€æºã€‚è¿™æ˜¯ä¸€ç§ä½å¼€é”€çš„äº‹ä»¶ä¿¡æ¯æ”¶é›†æ¡†æ¶ï¼Œä¸»è¦ç”¨äºå¯¹åº”ç”¨ç¨‹åºå’Œ JVM è¿›è¡Œæ•…éšœæ£€æŸ¥ã€åˆ†æã€‚</p><p>é£è¡Œè®°å½•å™¨è®°å½•çš„ä¸»è¦æ•°æ®æºäºåº”ç”¨ç¨‹åºã€JVM å’Œæ“ä½œç³»ç»Ÿï¼Œè¿™äº›äº‹ä»¶ä¿¡æ¯ä¿å­˜åœ¨å•ç‹¬çš„äº‹ä»¶è®°å½•æ–‡ä»¶ä¸­ï¼Œæ•…éšœå‘ç”Ÿåï¼Œèƒ½å¤Ÿä»äº‹ä»¶è®°å½•æ–‡ä»¶ä¸­æå–å‡ºæœ‰ç”¨ä¿¡æ¯å¯¹æ•…éšœè¿›è¡Œåˆ†æã€‚æœ‰äº›ç±»ä¼¼äºé£æœºä¸Šçš„é»‘åŒ£å­ã€‚</p><p><img src="https://static.howardliu.cn/Illustration/800.jpeg" alt="é£æœºä¸Šçš„é»‘åŒ£å­"></p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‚æ•°å¼€å¯ä¸€ä¸ªæ—¶é•¿ä¸º 120 ç§’çš„è®°å½•ï¼š</p><pre><code class="shell">-XX:StartFlightRecording=duration=120s,settings=profile,filename=recording.jfr</code></pre><p>ç”Ÿæˆçš„æ–‡ä»¶å¯ä»¥ä½¿ç”¨ JMC å·¥å…·å¯è§†åŒ–æŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å†™ä»£ç é€šè¿‡<code>RecordedEvent</code>è§£æã€‚ä¸è¿‡å˜›ï¼Œæœ‰å¯è§†åŒ–çš„ï¼Œå¹²å˜›è¿˜è¦è‡ªå·±æ•²ä»£ç å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡<code>jcmd</code>å‘½ä»¤å¯åŠ¨è®°å½•ï¼š</p><pre><code class="shell">$ jcmd &lt;pid&gt; JFR.start$ jcmd &lt;pid&gt; JFR.dump filename=recording.jfr$ jcmd &lt;pid&gt; JFR.stop</code></pre><p>æ”¶åˆ°ç›‘æ§ï¼Œæƒ³æ¨å¹¿ä¸€ä¸‹ä¹‹å‰å†™çš„å¼€æºç›‘æ§ç»„ä»¶ Cynomysï¼Œæºç åœ¨<a href="https://github.com/howardliu-cn/cynomys" target="_blank" rel="noopener">https://github.com/howardliu-cn/cynomys</a>ï¼Œé‡Œé¢åŒ…å«é€šè¿‡ Netty å®ç°çš„ RPC æ¡†æ¶ã€javaagent å®ç°çš„æ¢é’ˆã€ä½¿ç”¨ javassist æ“ä½œå­—èŠ‚ç ã€JMX å®ç° JVM å†…éƒ¨ç›‘æ§ç­‰ï¼Œå¯ä»¥å¯¹æ“ä½œç³»ç»Ÿã€ç½‘ç»œã€JVMã€è¯·æ±‚ã€SQL ç­‰å†…å®¹è¿›è¡Œç›‘æ§ã€‚</p><h2 id="ç§»é™¤æˆ–è¿‡æœŸç»„ä»¶"><a href="#ç§»é™¤æˆ–è¿‡æœŸç»„ä»¶" class="headerlink" title="ç§»é™¤æˆ–è¿‡æœŸç»„ä»¶"></a>ç§»é™¤æˆ–è¿‡æœŸç»„ä»¶</h2><p>ç¤¾ä¼šåœ¨å‘å±•ï¼ŒæŠ€æœ¯åœ¨è¿›æ­¥ã€‚åˆæœ‰ä¸€äº›åŠŸèƒ½æˆ–ç»„ä»¶ä¸åˆæ—¶å®œï¼Œè¦ä¹ˆç§»é™¤ã€è¦ä¹ˆæ ‡è®°è¿‡æœŸã€‚æ ‡è®°è¿‡æœŸçš„æœ€å¥½ä¸è¦å†ç”¨äº†ï¼Œä¸çŸ¥é“å“ªå¤©å°±ä¼šè¢«ç§»é™¤ï¼Œæƒ³è¦å‡çº§ä¾èµ–åè€Œéº»çƒ¦ã€‚</p><ul><li>JavaEE å’Œ CORBAï¼šå•ç‹¬çš„ JavaEE ç‰ˆæœ¬å¯ä»¥ä»ç¬¬ä¸‰æ–¹ç«™ç‚¹è·å–ï¼Œæ‰€ä»¥åœ¨ JavaSEO ä¸­ä¸å†åŒ…å«ã€‚ä» Java9 å¼€å§‹ï¼ŒJavaEE å’Œ CORBA æ¨¡å—å·²ç»æ ‡è®°ä¸ºè¿‡æœŸï¼Œåˆ° Java11 å°±å®Œå…¨ç§»é™¤ã€‚</li><li>JMC ä» JDK ä¸­ç§»é™¤ï¼Œå¯ä»¥å•ç‹¬ä¸‹è½½ã€‚</li><li>JavaFX ä¹Ÿæ˜¯è¿™æ ·ï¼Œä» JDK æ¨¡å—ä»ä¸­ç§»é™¤ï¼Œéœ€è¦å•ç‹¬å¼•å…¥ã€‚</li><li>Nashorn JavaScript å¼•æ“æ ‡è®°ä¸ºåºŸå¼ƒ</li><li>Jar åŒ…çš„ Pack200 å‹ç¼©æ–¹æ¡ˆæ ‡è®°ä¸ºåºŸå¼ƒ</li></ul><h2 id="å…¶ä»–å°æ”¹åŠ¨"><a href="#å…¶ä»–å°æ”¹åŠ¨" class="headerlink" title="å…¶ä»–å°æ”¹åŠ¨"></a>å…¶ä»–å°æ”¹åŠ¨</h2><ul><li>å®ç°äº†æ–°çš„ ChaCha20 å’Œ ChaCha20-Poly1305 åŠ å¯†ç®—æ³•ï¼Œå–ä»£ä¸å®‰å…¨çš„ RC4ã€‚</li><li>ä½¿ç”¨ Curve25519 å’Œ Curve448 æ”¯æŒåŠ å¯†å¯†é’¥åè®®ï¼Œä»¥å–ä»£ç°æœ‰çš„ ECDH æ–¹æ¡ˆ</li><li>å‡çº§ TLS ç‰ˆæœ¬åˆ° 1.3ï¼Œæå‡äº†å®‰å…¨æ€§å’Œæ€§èƒ½</li><li>æ”¯æŒ Unicode 10ï¼Œ å¸¦æ¥äº†æ›´å¤šçš„å­—ç¬¦ã€ç¬¦å·å’Œè¡¨æƒ…ç¬¦å·</li></ul><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java11 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä»<a href="https://openjdk.java.net/projects/jdk/11/" target="_blank" rel="noopener">https://openjdk.java.net/projects/jdk/11/</a>æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-11-features/">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava11 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/122401213" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava11 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      ä»Šå¤©æˆ‘ä»¬å°±ä¸€èµ·çœ‹çœ‹ Java11 éƒ½æœ‰å“ªäº›å–œäººçš„å˜åŒ–ï¼šå¢å¼ºçš„ APIã€å…¨æ–°çš„ HTTP å®¢æˆ·ç«¯ã€[åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–](https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA)ã€ä½å¼€é”€çš„å †æ€§èƒ½é‡‡ç”¨å·¥å…·ã€ZGCã€Epsilon åƒåœ¾æ”¶é›†å™¨ã€é£è¡Œè®°å½•å™¨ç­‰ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java11" scheme="https://www.howardliu.cn/tags/Java11/"/>
    
  </entry>
  
  <entry>
    <title>Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</title>
    <link href="https://www.howardliu.cn/java-11-jep181-nestmate/"/>
    <id>https://www.howardliu.cn/java-11-jep181-nestmate/</id>
    <published>2022-01-05T14:57:16.000Z</published>
    <updated>2022-01-05T14:57:16.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/rowan-2098486_1920.jpg" alt="Java11 ä¸­åŸºäºåµŒå¥—çš„æƒé™æ§åˆ¶"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>Java è¯­è¨€å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ï¼Œæœ‰äººçš„åœ°æ–¹å°±æœ‰æ±Ÿæ¹–ï¼Œæœ‰çŒ¿çš„åœ°æ–¹å°±æœ‰ bugï¼ŒJava çš„æ ¸å¿ƒä»£ç å¹¶éåå…¨åç¾ã€‚æ¯”å¦‚åœ¨ <a href="https://mp.weixin.qq.com/s/4jVPnaOr-rve3GQdukDFmA" target="_blank" rel="noopener">JDK ä¸­å±…ç„¶ä¹Ÿæœ‰åæ¨¡å¼æ¥å£å¸¸é‡</a> ä¸­ä»‹ç»çš„åæ¨¡å¼å®ç°ï¼Œä»¥åŠæœ¬æ–‡è¯´åˆ°çš„è¿™ä¸ªæŠ€æœ¯å€ºåŠ¡ï¼šåµŒå¥—å…³ç³»ï¼ˆNestMateï¼‰è°ƒç”¨æ–¹å¼ã€‚</p><a id="more"></a><p>åœ¨ Java è¯­è¨€ä¸­ï¼Œç±»å’Œæ¥å£å¯ä»¥ç›¸äº’åµŒå¥—ï¼Œè¿™ç§ç»„åˆä¹‹é—´å¯ä»¥ä¸å—é™åˆ¶çš„å½¼æ­¤è®¿é—®ï¼ŒåŒ…æ‹¬è®¿é—®å½¼æ­¤çš„æ„é€ å‡½æ•°ã€å­—æ®µã€æ–¹æ³•ç­‰ã€‚å³ä½¿æ˜¯<code>private</code>ç§æœ‰çš„ï¼Œä¹Ÿå¯ä»¥å½¼æ­¤è®¿é—®ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ ·å®šä¹‰ï¼š</p><pre><code class="java">public class Outer {    private int i;    public void print1() {        print11();        print12();    }    private void print11() {        System.out.println(i);    }    private void print12() {        System.out.println(i);    }    public void callInnerMethod() {        final Inner inner = new Inner();        inner.print4();        inner.print5();        System.out.println(inner.j);    }    public class Inner {        private int j;        public void print3() {            System.out.println(i);            print1();        }        public void print4() {            System.out.println(i);            print11();            print12();        }        private void print5() {            System.out.println(i);            print11();            print12();        }    }}</code></pre><p>ä¸Šä¾‹ä¸­ï¼Œ<code>Outer</code>ç±»ä¸­çš„å­—æ®µ<code>i</code>ã€æ–¹æ³•<code>print11</code>å’Œ<code>print12</code>éƒ½æ˜¯ç§æœ‰çš„ï¼Œä½†æ˜¯å¯ä»¥åœ¨<code>Inner</code>ç±»ä¸­ç›´æ¥è®¿é—®ï¼Œ<code>Inner</code>ç±»çš„å­—æ®µ<code>j</code>ã€æ–¹æ³•<code>print5</code>æ˜¯ç§æœ‰çš„ï¼Œä¹Ÿå¯ä»¥åœ¨<code>Outer</code>ç±»ä¸­ä½¿ç”¨ã€‚è¿™ç§è®¾è®¡æ˜¯ä¸ºäº†æ›´å¥½çš„å°è£…ï¼Œåœ¨ç”¨æˆ·çœ‹æ¥ï¼Œè¿™å‡ ä¸ªå½¼æ­¤åµŒå¥—çš„ç±»/æ¥å£æ˜¯ä¸€ä½“çš„ï¼Œåˆ†å¼€å®šä¹‰æ˜¯ä¸ºäº†æ›´å¥½çš„å°è£…è‡ªå·±ï¼Œéš”ç¦»ä¸åŒç‰¹æ€§ï¼Œä½†æ˜¯æœ‰å› ä¸ºå½¼æ­¤æ˜¯ä¸€ä½“ï¼Œæ‰€ä»¥ç§æœ‰å…ƒç´ ä¹Ÿåº”è¯¥æ˜¯å…±æœ‰çš„ã€‚</p><h2 id="Java11-ä¹‹å‰çš„å®ç°æ–¹å¼"><a href="#Java11-ä¹‹å‰çš„å®ç°æ–¹å¼" class="headerlink" title="Java11 ä¹‹å‰çš„å®ç°æ–¹å¼"></a>Java11 ä¹‹å‰çš„å®ç°æ–¹å¼</h2><p>æˆ‘ä»¬ä½¿ç”¨ Java8 ç¼–è¯‘ï¼Œç„¶åå€ŸåŠ©<code>javap -c</code>å‘½ä»¤åˆ†åˆ«æŸ¥çœ‹<code>Outer</code>å’Œ<code>Inner</code>çš„ç»“æœã€‚</p><pre><code class="shell">$ javap -c Outer.class      Compiled from &quot;Outer.java&quot;public class cn.howardliu.tutorials.java8.nest.Outer {  public cn.howardliu.tutorials.java8.nest.Outer();    Code:       0: aload_0       1: invokespecial #4                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V       4: return  public void print1();    Code:       0: aload_0       1: invokespecial #2                  // Method print11:()V       4: aload_0       5: invokespecial #1                  // Method print12:()V       8: return  public void callInnerMethod();    Code:       0: new           #7                  // class cn/howardliu/tutorials/java8/nest/Outer$Inner       3: dup       4: aload_0       5: invokespecial #8                  // Method cn/howardliu/tutorials/java8/nest/Outer$Inner.&quot;&lt;init&gt;&quot;:(Lcn/howardliu/tutorials/java8/nest/Outer;)V       8: astore_1       9: aload_1      10: invokevirtual #9                  // Method cn/howardliu/tutorials/java8/nest/Outer$Inner.print4:()V      13: aload_1      14: invokestatic  #10                 // Method cn/howardliu/tutorials/java8/nest/Outer$Inner.access$000:(Lcn/howardliu/tutorials/java8/nest/Outer$Inner;)V      17: getstatic     #5                  // Field java/lang/System.out:Ljava/io/PrintStream;      20: aload_1      21: invokestatic  #11                 // Method cn/howardliu/tutorials/java8/nest/Outer$Inner.access$100:(Lcn/howardliu/tutorials/java8/nest/Outer$Inner;)I      24: invokevirtual #6                  // Method java/io/PrintStream.println:(I)V      27: return  static int access$200(cn.howardliu.tutorials.java8.nest.Outer);    Code:       0: aload_0       1: getfield      #3                  // Field i:I       4: ireturn  static void access$300(cn.howardliu.tutorials.java8.nest.Outer);    Code:       0: aload_0       1: invokespecial #2                  // Method print11:()V       4: return  static void access$400(cn.howardliu.tutorials.java8.nest.Outer);    Code:       0: aload_0       1: invokespecial #1                  // Method print12:()V       4: return}</code></pre><p>å†æ¥çœ‹çœ‹<code>Inner</code>çš„ç¼–è¯‘ç»“æœï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå†…éƒ¨ç±»ä¼šä½¿ç”¨ç‰¹æ®Šçš„å‘½åæ–¹å¼å®šä¹‰<code>Inner</code>ç±»ï¼Œæœ€ç»ˆä¼šå°†ç¼–è¯‘ç»“æœå­˜å‚¨åœ¨ä¸¤ä¸ªæ–‡ä»¶ä¸­ï¼š</p><pre><code class="shell">$ javap -c Outer\$Inner.classCompiled from &quot;Outer.java&quot;public class cn.howardliu.tutorials.java8.nest.Outer$Inner {  final cn.howardliu.tutorials.java8.nest.Outer this$0;  public cn.howardliu.tutorials.java8.nest.Outer$Inner(cn.howardliu.tutorials.java8.nest.Outer);    Code:       0: aload_0       1: aload_1       2: putfield      #3                  // Field this$0:Lcn/howardliu/tutorials/java8/nest/Outer;       5: aload_0       6: invokespecial #4                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V       9: return  public void print3();    Code:       0: getstatic     #5                  // Field java/lang/System.out:Ljava/io/PrintStream;       3: aload_0       4: getfield      #3                  // Field this$0:Lcn/howardliu/tutorials/java8/nest/Outer;       7: invokestatic  #6                  // Method cn/howardliu/tutorials/java8/nest/Outer.access$200:(Lcn/howardliu/tutorials/java8/nest/Outer;)I      10: invokevirtual #7                  // Method java/io/PrintStream.println:(I)V      13: aload_0      14: getfield      #3                  // Field this$0:Lcn/howardliu/tutorials/java8/nest/Outer;      17: invokevirtual #8                  // Method cn/howardliu/tutorials/java8/nest/Outer.print1:()V      20: return  public void print4();    Code:       0: getstatic     #5                  // Field java/lang/System.out:Ljava/io/PrintStream;       3: aload_0       4: getfield      #3                  // Field this$0:Lcn/howardliu/tutorials/java8/nest/Outer;       7: invokestatic  #6                  // Method cn/howardliu/tutorials/java8/nest/Outer.access$200:(Lcn/howardliu/tutorials/java8/nest/Outer;)I      10: invokevirtual #7                  // Method java/io/PrintStream.println:(I)V      13: aload_0      14: getfield      #3                  // Field this$0:Lcn/howardliu/tutorials/java8/nest/Outer;      17: invokestatic  #9                  // Method cn/howardliu/tutorials/java8/nest/Outer.access$300:(Lcn/howardliu/tutorials/java8/nest/Outer;)V      20: aload_0      21: getfield      #3                  // Field this$0:Lcn/howardliu/tutorials/java8/nest/Outer;      24: invokestatic  #10                 // Method cn/howardliu/tutorials/java8/nest/Outer.access$400:(Lcn/howardliu/tutorials/java8/nest/Outer;)V      27: return  static void access$000(cn.howardliu.tutorials.java8.nest.Outer$Inner);    Code:       0: aload_0       1: invokespecial #2                  // Method print5:()V       4: return  static int access$100(cn.howardliu.tutorials.java8.nest.Outer$Inner);    Code:       0: aload_0       1: getfield      #1                  // Field j:I       4: ireturn}</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>Outer</code>å’Œ<code>Inner</code>ä¸­å¤šå‡ºäº†å‡ ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•åæ ¼å¼æ˜¯<code>access$*00</code>ã€‚</p><p><code>Outer</code>ä¸­çš„<code>access$200</code>æ–¹æ³•è¿”å›äº†å±æ€§<code>i</code>ï¼Œ<code>access$300</code>å’Œ<code>access$400</code>åˆ†åˆ«è°ƒç”¨äº†<code>print11</code>å’Œ<code>print12</code>æ–¹æ³•ã€‚è¿™äº›æ–°å¢çš„æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œä½œç”¨åŸŸæ˜¯é»˜è®¤ä½œç”¨åŸŸï¼Œå³åŒ…å†…å¯ç”¨ã€‚è¿™äº›æ–¹æ³•æœ€ç»ˆè¢«<code>Inner</code>ç±»ä¸­çš„<code>print3</code>å’Œ<code>print4</code>è°ƒç”¨ï¼Œç›¸å½“äºé—´æ¥è°ƒç”¨<code>Outer</code>ä¸­çš„ç§æœ‰å±æ€§æˆ–æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬ç§°è¿™äº›ç”Ÿæˆçš„æ–¹æ³•ä¸ºâ€œæ¡¥â€æ–¹æ³•ï¼ˆBridge Methodï¼‰ï¼Œæ˜¯ä¸€ç§å®ç°åµŒå¥—å…³ç³»å†…éƒ¨äº’ç›¸è®¿é—®çš„æ–¹å¼ã€‚</p><p>åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼ŒJava ä¸ºäº†ä¿æŒç±»çš„å•ä¸€ç‰¹æ€§ï¼Œä¼šå°†åµŒå¥—ç±»ç¼–è¯‘åˆ°å¤šä¸ª class æ–‡ä»¶ä¸­ï¼ŒåŒæ—¶ä¸ºäº†ä¿è¯åµŒå¥—ç±»èƒ½å¤Ÿå½¼æ­¤è®¿é—®ï¼Œè‡ªåŠ¨åˆ›å»ºäº†è°ƒç”¨ç§æœ‰æ–¹æ³•çš„â€œæ¡¥â€æ–¹æ³•ï¼Œè¿™æ ·ï¼Œåœ¨ä¿æŒåŸæœ‰å®šä¹‰ä¸å˜çš„æƒ…å†µä¸‹ï¼Œåˆå®ç°äº†åµŒå¥—è¯­æ³•ã€‚</p><h2 id="æŠ€æœ¯å€ºåŠ¡"><a href="#æŠ€æœ¯å€ºåŠ¡" class="headerlink" title="æŠ€æœ¯å€ºåŠ¡"></a>æŠ€æœ¯å€ºåŠ¡</h2><p>â€œæ¡¥â€æ–¹æ³•çš„å®ç°æ˜¯æ¯”è¾ƒå·§å¦™çš„ï¼Œä½†æ˜¯è¿™ä¼šé€ æˆæºç ä¸ç¼–è¯‘ç»“æœè®¿é—®æ§åˆ¶æƒé™ä¸ä¸€è‡´ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>Inner</code>ä¸­è°ƒç”¨<code>Outer</code>ä¸­çš„ç§æœ‰æ–¹æ³•ï¼ŒæŒ‰ç…§é“ç†æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>Inner</code>ä¸­é€šè¿‡åå°„è°ƒç”¨<code>Outer</code>çš„æ–¹æ³•ï¼Œä½†å®é™…ä¸Šä¸è¡Œï¼Œä¼šæŠ›å‡º<code>IllegalAccessException</code>å¼‚å¸¸ã€‚æˆ‘ä»¬éªŒè¯ä¸€ä¸‹ï¼š</p><pre><code class="java">public class Outer {    // çœç•¥å…¶ä»–æ–¹æ³•    public void callInnerReflectionMethod()            throws InvocationTargetException, NoSuchMethodException, IllegalAccessException {        final Inner inner = new Inner();        inner.callOuterPrivateMethod(this);    }    public class Inner {        // çœç•¥å…¶ä»–æ–¹æ³•        public void callOuterPrivateMethod(Outer outer)                throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {            final Method method = outer.getClass().getDeclaredMethod(&quot;print12&quot;);            method.invoke(outer);        }    }}</code></pre><p>å®šä¹‰æµ‹è¯•ç”¨ä¾‹ï¼š</p><pre><code class="java">@Testvoid gotAnExceptionInJava8() {    final Outer outer = new Outer();    final Exception e = assertThrows(IllegalAccessException.class, outer::callInnerReflectionMethod);    e.printStackTrace();    assertDoesNotThrow(outer::callInnerMethod);}</code></pre><p>æ‰“å°çš„å¼‚å¸¸ä¿¡æ¯æ˜¯ï¼š</p><pre><code class="log">java.lang.IllegalAccessException: class cn.howardliu.tutorials.java8.nest.Outer$Inner cannot access a member of class cn.howardliu.tutorials.java8.nest.Outer with modifiers &quot;private&quot;    at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:361)    at java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:591)    at java.base/java.lang.reflect.Method.invoke(Method.java:558)    at cn.howardliu.tutorials.java8.nest.Outer$Inner.callOuterPrivateMethod(Outer.java:62)    at cn.howardliu.tutorials.java8.nest.Outer.callInnerReflectionMethod(Outer.java:36)</code></pre><p>é€šè¿‡åå°„ç›´æ¥è°ƒç”¨ç§æœ‰æ–¹æ³•ä¼šå¤±è´¥ï¼Œä½†æ˜¯å¯ä»¥ç›´æ¥çš„æˆ–è€…é€šè¿‡åå°„è®¿é—®è¿™äº›â€œæ¡¥â€æ–¹æ³•ï¼Œè¿™æ ·å°±æ¯”è¾ƒå¥‡æ€ªäº†ã€‚æ‰€ä»¥æå‡º <a href="http://openjdk.java.net/jeps/181" target="_blank" rel="noopener">JEP181 æ”¹è¿›</a>ï¼Œä¿®å¤è¿™ä¸ªæŠ€æœ¯å€ºåŠ¡çš„åŒæ—¶ï¼Œä¸ºåç»­çš„æ”¹è¿›é“ºè·¯ã€‚</p><h2 id="Java11-ä¸­çš„å®ç°"><a href="#Java11-ä¸­çš„å®ç°" class="headerlink" title="Java11 ä¸­çš„å®ç°"></a>Java11 ä¸­çš„å®ç°</h2><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹ Java11 ç¼–è¯‘ä¹‹åçš„ç»“æœï¼š</p><pre><code class="shell">$ javap -c Outer.class      Compiled from &quot;Outer.java&quot;public class cn.howardliu.tutorials.java11.nest.Outer {  public cn.howardliu.tutorials.java11.nest.Outer();    Code:       0: aload_0       1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V       4: return  public void print1();    Code:       0: aload_0       1: invokevirtual #2                  // Method print11:()V       4: aload_0       5: invokevirtual #3                  // Method print12:()V       8: return  public void callInnerMethod();    Code:       0: new           #7                  // class cn/howardliu/tutorials/java11/nest/Outer$Inner       3: dup       4: aload_0       5: invokespecial #8                  // Method cn/howardliu/tutorials/java11/nest/Outer$Inner.&quot;&lt;init&gt;&quot;:(Lcn/howardliu/tutorials/java11/nest/Outer;)V       8: astore_1       9: aload_1      10: invokevirtual #9                  // Method cn/howardliu/tutorials/java11/nest/Outer$Inner.print4:()V      13: aload_1      14: invokevirtual #10                 // Method cn/howardliu/tutorials/java11/nest/Outer$Inner.print5:()V      17: getstatic     #4                  // Field java/lang/System.out:Ljava/io/PrintStream;      20: aload_1      21: getfield      #11                 // Field cn/howardliu/tutorials/java11/nest/Outer$Inner.j:I      24: invokevirtual #6                  // Method java/io/PrintStream.println:(I)V      27: return}</code></pre><p>æ˜¯ä¸æ˜¯å¾ˆå¹²å‡€ï¼Œä¸<code>Outer</code>ç±»çš„æºç ç»“æ„æ˜¯ä¸€è‡´çš„ã€‚æˆ‘ä»¬å†çœ‹çœ‹<code>Inner</code>æœ‰æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼š</p><pre><code class="shell">$ javap -c Outer\$Inner.classCompiled from &quot;Outer.java&quot;public class cn.howardliu.tutorials.java11.nest.Outer$Inner {  final cn.howardliu.tutorials.java11.nest.Outer this$0;  public cn.howardliu.tutorials.java11.nest.Outer$Inner(cn.howardliu.tutorials.java11.nest.Outer);    Code:       0: aload_0       1: aload_1       2: putfield      #1                  // Field this$0:Lcn/howardliu/tutorials/java11/nest/Outer;       5: aload_0       6: invokespecial #2                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V       9: return  public void print3();    Code:       0: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;       3: aload_0       4: getfield      #1                  // Field this$0:Lcn/howardliu/tutorials/java11/nest/Outer;       7: getfield      #4                  // Field cn/howardliu/tutorials/java11/nest/Outer.i:I      10: invokevirtual #5                  // Method java/io/PrintStream.println:(I)V      13: aload_0      14: getfield      #1                  // Field this$0:Lcn/howardliu/tutorials/java11/nest/Outer;      17: invokevirtual #6                  // Method cn/howardliu/tutorials/java11/nest/Outer.print1:()V      20: return  public void print4();    Code:       0: getstatic     #3                  // Field java/lang/System.out:Ljava/io/PrintStream;       3: aload_0       4: getfield      #1                  // Field this$0:Lcn/howardliu/tutorials/java11/nest/Outer;       7: getfield      #4                  // Field cn/howardliu/tutorials/java11/nest/Outer.i:I      10: invokevirtual #5                  // Method java/io/PrintStream.println:(I)V      13: aload_0      14: getfield      #1                  // Field this$0:Lcn/howardliu/tutorials/java11/nest/Outer;      17: invokevirtual #7                  // Method cn/howardliu/tutorials/java11/nest/Outer.print11:()V      20: aload_0      21: getfield      #1                  // Field this$0:Lcn/howardliu/tutorials/java11/nest/Outer;      24: invokevirtual #8                  // Method cn/howardliu/tutorials/java11/nest/Outer.print12:()V      27: return}</code></pre><p>åŒæ ·å¹²å‡€ã€‚</p><p>æˆ‘ä»¬åœ¨é€šè¿‡æµ‹è¯•ç”¨ä¾‹éªŒè¯ä¸€ä¸‹åå°„è°ƒç”¨ï¼š</p><pre><code class="java">@Testvoid doesNotGotAnExceptionInJava11() {    final Outer outer = new Outer();    assertDoesNotThrow(outer::callInnerReflectionMethod);    assertDoesNotThrow(outer::callInnerMethod);}</code></pre><p>ç»“æœæ˜¯æ­£å¸¸è¿è¡Œã€‚</p><p>è¿™å°±æ˜¯ JEP181 æœŸæœ›çš„ç»“æœï¼Œæºç å’Œç¼–è¯‘ç»“æœä¸€è‡´ï¼Œè®¿é—®æ§åˆ¶ä¸€è‡´ã€‚</p><h2 id="Nestmate-æ–°å¢çš„-API"><a href="#Nestmate-æ–°å¢çš„-API" class="headerlink" title="Nestmate æ–°å¢çš„ API"></a>Nestmate æ–°å¢çš„ API</h2><p>åœ¨ Java11 ä¸­è¿˜æ–°å¢äº†å‡ ä¸ª APIï¼Œç”¨äºåµŒå¥—å…³ç³»çš„éªŒè¯ï¼š</p><h3 id="getNestHost"><a href="#getNestHost" class="headerlink" title="getNestHost"></a>getNestHost</h3><p>è¿™ä¸ªæ–¹æ³•æ˜¯è¿”å›åµŒå¥—ä¸»æœºï¼ˆNestHostï¼‰ï¼Œè½¬æˆæ™®é€šè¯å°±æ˜¯æ‰¾åˆ°åµŒå¥—ç±»çš„å¤–å±‚ç±»ã€‚å¯¹äºéåµŒå¥—ç±»ï¼Œç›´æ¥è¿”å›è‡ªèº«ï¼ˆå…¶å®ä¹Ÿç®—æ˜¯è¿”å›å¤–å±‚ç±»ï¼‰ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹ç”¨æ³•ï¼š</p><pre><code class="java">@Testvoid checkNestHostName() {    final String outerNestHostName = Outer.class.getNestHost().getName();    assertEquals(&quot;cn.howardliu.tutorials.java11.nest.Outer&quot;, outerNestHostName);    final String innerNestHostName = Inner.class.getNestHost().getName();    assertEquals(&quot;cn.howardliu.tutorials.java11.nest.Outer&quot;, innerNestHostName);    assertEquals(outerNestHostName, innerNestHostName);    final String notNestClass = NotNestClass.class.getNestHost().getName();    assertEquals(&quot;cn.howardliu.tutorials.java11.nest.NotNestClass&quot;, notNestClass);}</code></pre><p>å¯¹äº<code>Outer</code>å’Œ<code>Inner</code>éƒ½æ˜¯è¿”å›äº†<code>cn.howardliu.tutorials.java11.nest.Outer</code>ã€‚</p><h3 id="getNestMembers"><a href="#getNestMembers" class="headerlink" title="getNestMembers"></a>getNestMembers</h3><p>è¿™ä¸ªæ–¹æ³•æ˜¯è¿”å›åµŒå¥—ç±»çš„åµŒå¥—æˆå‘˜æ•°ç»„ï¼Œä¸‹æ ‡æ˜¯ 0 çš„å…ƒç´ ç¡®å®šæ˜¯ NestHost å¯¹åº”çš„ç±»ï¼Œå…¶ä»–å…ƒç´ é¡ºåºæ²¡æœ‰ç»™å‡ºæ’åºè§„åˆ™ã€‚æˆ‘ä»¬çœ‹ä¸‹ä½¿ç”¨ï¼š</p><pre><code class="java">@Testvoid getNestMembers() {    final List&lt;String&gt; outerNestMembers = Arrays.stream(Outer.class.getNestMembers())            .map(Class::getName)            .collect(Collectors.toList());    assertEquals(2, outerNestMembers.size());    assertTrue(outerNestMembers.contains(&quot;cn.howardliu.tutorials.java11.nest.Outer&quot;));    assertTrue(outerNestMembers.contains(&quot;cn.howardliu.tutorials.java11.nest.Outer$Inner&quot;));    final List&lt;String&gt; innerNestMembers = Arrays.stream(Inner.class.getNestMembers())            .map(Class::getName)            .collect(Collectors.toList());    assertEquals(2, innerNestMembers.size());    assertTrue(innerNestMembers.contains(&quot;cn.howardliu.tutorials.java11.nest.Outer&quot;));    assertTrue(innerNestMembers.contains(&quot;cn.howardliu.tutorials.java11.nest.Outer$Inner&quot;));}</code></pre><h3 id="isNestmateOf"><a href="#isNestmateOf" class="headerlink" title="isNestmateOf"></a>isNestmateOf</h3><p>è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨äºåˆ¤æ–­ä¸¤ä¸ªç±»æ˜¯å¦æ˜¯å½¼æ­¤çš„ NestMateï¼Œå½¼æ­¤å½¢æˆåµŒå¥—å…³ç³»ã€‚åˆ¤æ–­ä¾æ®è¿˜æ˜¯åµŒå¥—ä¸»æœºï¼Œåªè¦ç›¸åŒï¼Œä¸¤ä¸ªå°±æ˜¯ NestMateã€‚æˆ‘ä»¬çœ‹ä¸‹ä½¿ç”¨ï¼š</p><pre><code class="java">@Testvoid checkIsNestmateOf() {    assertTrue(Inner.class.isNestmateOf(Outer.class));    assertTrue(Outer.class.isNestmateOf(Inner.class));}</code></pre><h2 id="åç»­çš„æ”¹è¿›"><a href="#åç»­çš„æ”¹è¿›" class="headerlink" title="åç»­çš„æ”¹è¿›"></a>åç»­çš„æ”¹è¿›</h2><p>åµŒå¥—å…³ç³»æ˜¯ä½œä¸º Valhalla é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œè¿™ä¸ªé¡¹ç›®çš„ä¸»è¦ç›®æ ‡ä¹‹ä¸€æ˜¯æ”¹è¿› JAVA ä¸­çš„å€¼ç±»å‹å’Œæ³›å‹ã€‚åç»­ä¼šæœ‰æ›´å¤šçš„æ”¹è¿›ï¼š</p><ul><li>åœ¨æ³›å‹ç‰¹åŒ–ï¼ˆgeneric specializationï¼‰ä¸­ï¼Œæ¯ä¸ªç‰¹åŒ–ç±»å‹ï¼ˆspecialized typeï¼‰å¯è¢«åˆ›å»ºä¸ºæ³›å‹çš„ä¸€ä¸ª Nestmateã€‚</li><li>æ”¯æŒå¯¹<code>Unsafe.defineAnonymousClass()</code> API çš„å®‰å…¨æ›¿æ¢ï¼Œå®ç°å°†æ–°ç±»åˆ›å»ºä¸ºå·²æœ‰ç±»çš„ Nestmateã€‚</li><li>å¯èƒ½ä¼šå½±å“â€œå¯†å°ç±»â€ï¼ˆsealed classesï¼‰ï¼Œä»…å…è®¸ Nestmate çš„å­ç±»ä½œä¸ºå¯†å°ç±»ã€‚</li><li>å¯èƒ½ä¼šå½±å“ç§æœ‰åµŒå¥—ç±»å‹ã€‚ç§æœ‰åµŒå¥—ç±»å‹å½“å‰å®šä¹‰ä¸ºåŒ…å†…å¯è®¿é—®ï¼ˆpackage-accessï¼‰ã€‚</li></ul><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡é˜è¿°äº†åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–ï¼Œå…¶ä¸­æ¶‰åŠ<code>NestMate</code>ã€<code>NestHost</code>ã€<code>NestMember</code>ç­‰æ¦‚å¿µã€‚è¿™æ¬¡ä¼˜åŒ–æ˜¯ Valhalla é¡¹ç›®ä¸­ä¸€éƒ¨åˆ†ï¼Œä¸»è¦æ”¹è¿› Java ä¸­çš„å€¼ç±»å‹å’Œæ³›å‹ç­‰ã€‚æ–‡ä¸­æ¶‰åŠæºç éƒ½ä¸Šä¼ åœ¨ GitHub ä¸Šï¼Œå…³æ³¨å…¬å·ã€Œçœ‹å±±çš„å°å±‹ã€å›å¤â€œjavaâ€è·å–æºç ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œå’±ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-11-jep181-nestmate/">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/122334212" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      Java è¯­è¨€å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ï¼Œæœ‰äººçš„åœ°æ–¹å°±æœ‰æ±Ÿæ¹–ï¼Œæœ‰çŒ¿çš„åœ°æ–¹å°±æœ‰ bugï¼ŒJava çš„æ ¸å¿ƒä»£ç å¹¶éåå…¨åç¾ã€‚æ¯”å¦‚åœ¨JDK ä¸­å±…ç„¶ä¹Ÿæœ‰åæ¨¡å¼æ¥å£å¸¸é‡ä¸­ä»‹ç»çš„åæ¨¡å¼å®ç°ï¼Œä»¥åŠæœ¬æ–‡è¯´åˆ°çš„è¿™ä¸ªæŠ€æœ¯å€ºåŠ¡ï¼šåµŒå¥—å…³ç³»ï¼ˆNestMateï¼‰è°ƒç”¨æ–¹å¼ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java11" scheme="https://www.howardliu.cn/tags/Java11/"/>
    
  </entry>
  
  <entry>
    <title>è¿™ä¸€å¹´å¾ˆå¹¸è¿ï¼Œå¹³å¹³æ·¡æ·¡çš„|2021 å¹´åº¦æ€»ç»“</title>
    <link href="https://www.howardliu.cn/2021-summary/"/>
    <id>https://www.howardliu.cn/2021-summary/</id>
    <published>2022-01-03T09:10:33.000Z</published>
    <updated>2022-01-03T09:10:33.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/wine-6688901_1920.jpg" alt="è¿™ä¸€å¹´å¾ˆå¹¸è¿ï¼Œå¹³å¹³æ·¡æ·¡çš„|2021 å¹´åº¦æ€»ç»“"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>ä¸€æ™ƒåˆæ˜¯ä¸€å¹´ï¼Œæœç„¶å²æ•°è¶Šå¤§ï¼Œæ—¶é—´è¶Šå¿«ã€‚æœ‰äº›å†…å®¹åœ¨ <a href="https://mp.weixin.qq.com/s/_I8NtBk7NvGQt18jlxkW6Q" target="_blank" rel="noopener">åŸæ¥è¿˜èƒ½è¿™ä¹ˆå¹²</a> ä¸€æ–‡ä¸­èŠäº†ä¸€äº›ï¼Œä»Šå¤©å†èŠç‚¹åˆ«çš„ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ€»ç»“è¿‡å»ï¼ŒæŠŠæ¡ç°åœ¨ï¼Œå±•æœ›æœªæ¥ã€‚</p><p>æ€»ç»“ä¸‹æ¥ï¼Œ2021 å¹´è¿˜ç®—å¹¸è¿ï¼Œå¹³å¹³æ·¡æ·¡è¿‡ä¸€å¹´ã€‚å·¥ä½œä¸ŠæŒ‰éƒ¨å°±ç­ï¼Œç”Ÿæ´»ä¸Šä¸€å¦‚æ—¢å¾€ã€‚</p><a id="more"></a><p>å¦‚æœè¯´æœ‰ä»€ä¹ˆå¯ä»¥å‡ºç‰›çš„ï¼Œå°±æ˜¯å¼€å§‹å¥½å¥½å†™æ–‡äº†ã€‚å¹¸è¿çš„æ˜¯åœ¨ 2021 å¹´æœ€åä¸€å¤©ï¼Œå¾—åˆ°äº† InfoQ å®˜æ–¹è®¤å¯ï¼Œæˆä¸ºç­¾çº¦ä½œè€…ã€‚</p><h2 id="æŒ‰éƒ¨å°±ç­çš„å·¥ä½œ"><a href="#æŒ‰éƒ¨å°±ç­çš„å·¥ä½œ" class="headerlink" title="æŒ‰éƒ¨å°±ç­çš„å·¥ä½œ"></a>æŒ‰éƒ¨å°±ç­çš„å·¥ä½œ</h2><p>2021 å¹´æ¢äº†ä¸€ä»½å·¥ä½œï¼Œæ„Ÿè°¢å‰å¸é¢†å¯¼åŒäº‹çš„å¸®åŠ©ï¼ŒçŸ¥é“äº†ä»€ä¹ˆæ˜¯å¥½å¥½å·¥ä½œï¼Œæ€æ ·åšå¯ä»¥åšå¥½å·¥ä½œï¼š</p><ol><li>ä¸€åˆ‡ç”¨æ•°å­—è¯´è¯ï¼šif you cannot measure it, you cannot manage it;</li><li>åšä¹‹å‰å¤šæƒ³æƒ³æ€ä¹ˆå½¢æˆé—­ç¯ï¼šå¦‚æœåœ¨æƒ³æ³•ä¸Šéƒ½æ²¡æœ‰é—­ç¯ï¼Œé‚£ç»“æœå°±ç»ä¸èµ·æ¨æ•²ï¼›</li><li>æ–¹æ³•è®ºå¾ˆé‡è¦ï¼šåœ¨æ²¡æœ‰ç»å¯¹çš„æœ‰æ•ˆå¤„ç†äº‹æƒ…çš„èƒ½åŠ›å‰ï¼Œå°±å­¦ä¹ ä¸€äº›æ–¹æ³•è®ºï¼ŒæŒ‡å¯¼å·¥ä½œï¼›</li><li>å¦è¯šå¾…äººï¼šåšåˆ°ç»å¯¹å¦è¯šä¸å®¹æ˜“ï¼Œå¯ä»¥å…ˆåœ¨å·¥ä½œä¸Šåšåˆ°è¿™ç‚¹ï¼›</li><li>ç»“æœå¯¼å‘ï¼šä¸€ä¸ªäººã€ä¸€ä¸ªå›¢é˜Ÿã€ä¸€ä¸ªå…¬å¸ï¼Œéƒ½æ˜¯ä¸ºäº†ä¸€ä¸ªç›®æ ‡åœ¨åšäº‹ï¼Œå¦‚æœæ²¡æœ‰ç»“æœï¼Œè°ˆå…¶ä»–çš„éƒ½æ²¡æœ‰æ„ä¹‰ã€‚</li></ol><p>åˆ°äº†ç°å¸ä¹‹åï¼Œä¹Ÿæœ‰äº†ä¸€äº›æ„Ÿæ‚Ÿï¼šå­¤èƒ†è‹±é›„æ˜¯æ²¡æœ‰åŠæ³•ç”Ÿå­˜çš„ï¼Œå›¢é˜Ÿæ‰æ˜¯èƒ½å¤Ÿå¥½å¥½å·¥ä½œçš„æœ€å°å•ä½ã€‚</p><p>ä¸Šé¢è¿™äº›ï¼Œæ¯ä¸€æ¡éƒ½å¯ä»¥æè¿°å¾ˆå¤šï¼Œæ—¢ç„¶æ˜¯å¹´ç»ˆæ€»ç»“ï¼Œå°±å…ˆä¸€ç¬”å¸¦è¿‡ï¼Œçœ‹å®˜å¯ä»¥å…ˆè‡ªè¡Œä½“ä¼šä¸€ä¸‹ã€‚å¦‚æœæœ‰å¿…è¦ï¼Œå†å¼€æ–‡è¯¦ç»†èŠèŠã€‚</p><h2 id="ä¸€å¦‚æ—¢å¾€çš„ç”Ÿæ´»"><a href="#ä¸€å¦‚æ—¢å¾€çš„ç”Ÿæ´»" class="headerlink" title="ä¸€å¦‚æ—¢å¾€çš„ç”Ÿæ´»"></a>ä¸€å¦‚æ—¢å¾€çš„ç”Ÿæ´»</h2><p>2021 å¹´è¦å¥½å¥½æ„Ÿè°¢æˆ‘åª³å¦‡ï¼Œå¦‚æœæœ‰å“ªä½æœ‹å‹æ°å¥½çœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œè®°å¾—ç»™å°çŒªè½¬å‘ä¸€ä¸‹ï¼Œæˆ‘çŒœå¥¹ä¸€å®šå¿½ç•¥äº†æˆ‘çš„è¿™ä»½å¿ƒæ„ã€‚</p><p><img src="https://static.howardliu.cn/about/zhuzhu-qiqi.jpg" alt="æœ±æœ±å’Œä¸ƒä¸ƒ"></p><p>ç”Ÿæ´»æ–¹é¢æ²¡æœ‰å¤ªå¤šè¦è¯´çš„ï¼Œåªæœ‰æ»¡å¿ƒçš„æ„ŸåŠ¨å’Œæ„Ÿæ¿€ã€‚</p><h2 id="å…¶ä»–æ–¹é¢çš„å°ç¡®å¹¸"><a href="#å…¶ä»–æ–¹é¢çš„å°ç¡®å¹¸" class="headerlink" title="å…¶ä»–æ–¹é¢çš„å°ç¡®å¹¸"></a>å…¶ä»–æ–¹é¢çš„å°ç¡®å¹¸</h2><p>åœ¨ <a href="https://mp.weixin.qq.com/s/IlgvUH79DEuCmUmTmqsqKg" target="_blank" rel="noopener">Geek é’å¹´è¯´åŒ—äº¬æ²™é¾™åˆ†äº«</a> ä¸­èŠè¿‡ï¼Œæˆ‘æ˜¯ 2013 å¹´å¼€å§‹å†™åšå®¢ï¼Œ2018 å¹´åœæ›´ä¸€å¹´ï¼Œä» 2021 å¹´å¼€å§‹åšæŒå‘¨æ›´ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè®¤è¯†äº†å¾ˆå¤šå¿—åŒé“åˆçš„æœ‹å‹ï¼Œè§åˆ°äº†å¾ˆå¤šä¼˜ç§€çš„åšä¸»ã€‚</p><p>ä¸€ä¸ªäººå¯ä»¥èµ°çš„å¾ˆå¿«ï¼Œä¸€ç¾¤äººå¯ä»¥èµ°çš„å¾ˆè¿œã€‚</p><p>å†™åšå®¢æ˜¯ä¸ºäº†å®ç°è‡ªå·±å®šçš„ç›®æ ‡ï¼Œä¸å¿…å¤ªåœ¨æ„ç»“æœã€‚ä¸è¿‡ï¼Œæ­£å¦‚å‰é¢æ‰€è¯´ï¼Œä¸€åˆ‡ç”¨æ•°å­—è¯´è¯ã€‚ä¸‹é¢å°±æ™’ä¸€ä¸‹ 2021 å¹´çš„ä¸€äº›æˆç»©ï¼ˆè¿™äº›æˆç»©å’Œå¤§ä½¬æ²¡æ³•æ¯”ï¼Œåªèƒ½å°å°çš„è‡ªå—¨ä¸€ä¸‹ï¼‰ï¼š</p><p>C ç«™ç²‰ä¸è¾¾åˆ° 17000ï¼Œè®¿é—®é‡æœ‰ 870000ï¼š</p><p><img src="https://static.howardliu.cn/about/csdn-20220103.png" alt="2022 å¹´ 1 æœˆ 3 æ—¥ï¼Œçœ‹å±± CSDN çš„è¯¦ç»†èµ„æ–™"></p><p>C ç«™ 1024 æ´»åŠ¨æ—¶ï¼Œæ”¶è´§åšå®¢ä¸“å®¶å‹‹ç« ï¼š</p><p><img src="https://static.howardliu.cn/about/csdn-2021-october-24th.jpg" alt="CSDN1024 æ´»åŠ¨-åšå®¢ä¸“å®¶å‹‹ç« "></p><p>å‚åŠ çŸ¥ä¹æµ·ç›è®¡åˆ’ï¼Œç›´æ¥å‡çº§åˆ° 4 çº§ï¼›</p><p>å‚åŠ æ˜é‡‘ 11 æœˆæ›´æ–‡æ´»åŠ¨ï¼Œä¸¤æ¬¡åç«¯æ¨¡å—çš„å‘¨æ¦œå‰ 10ï¼›</p><p>å‚åŠ  InfoQ å†™ä½œå¹³å°ç­¾çº¦ä½œè€…ç¬¬äºŒå­£ï¼ŒæˆåŠŸå…¥é€‰ã€‚è¯„é€‰ç»“æœæ˜¯åœ¨ 12 æœˆ 31 å·å…¬å¸ƒçš„ï¼Œç®—æ˜¯ç»™ 2021 å¹´çš„å†™ä½œä¹‹æ—…ç”»ä¸Šä¸€ä¸ªä¸é”™çš„å¥å·ã€‚</p><p><img src="https://static.howardliu.cn/about/InfoQ-xie-kanshan-1.jpg" alt="InfoQ ç­¾çº¦ä½œè€…ç¬¬äºŒå­£"></p><p>é™¤äº†å†™åšå®¢ï¼Œä»Šå¹´ä¹Ÿå¼€å§‹å¥èº«äº†ã€‚ä¸€å¼€å§‹æ˜¯ç»´å˜‰å¸¦ç€ç»ƒï¼Œåæ¥ç»´å˜‰å›äº†å­¦æ ¡æ˜¯è·Ÿç€æ–Œå“¥ç»ƒï¼Œç»ˆäºçœ‹åˆ°äº† 75 å…¬æ–¤çš„å½±å­ã€‚</p><h2 id="2022-å¹´çš„è®¡åˆ’"><a href="#2022-å¹´çš„è®¡åˆ’" class="headerlink" title="2022 å¹´çš„è®¡åˆ’"></a>2022 å¹´çš„è®¡åˆ’</h2><p>æ–°çš„ä¸€å¹´ï¼Œä¸ºäº†å¯¹è‡ªå·±è´Ÿè´£ï¼Œå¯¹å®¶äººè´Ÿè´£ï¼Œå¯¹æœ‹å‹è´Ÿè´£ï¼Œæˆ‘ä»¬æ€»è¦åšå‡ºæ–°ä¸€å¹´çš„è®¡åˆ’ã€‚æˆ‘ 2022 å¹´çš„è®¡åˆ’å°±æ˜¯æå®š 2021 å¹´é‚£äº›åŸå®šäº 2020 å¹´æœªå®Œæˆçš„å®‰æ’ï¼Œåªä¸ºå…‘ç° 2019 å¹´æ—¶è¦å®Œæˆ 2018 å¹´è®¸ä¸‹çš„è¯ºè¨€ï¼Œæ›¾è¯´ 2017 å¹´ä¹‹åä¸€å®šä¸è¦åƒ 2016 å¹´é‚£æ ·åªä¼šè·Ÿç€ 2015 å¹´å»åš 2014 å¹´æ²¡ç»™ 2013 å¹´å®Œæˆçš„é‚£ä¸ªç›®æ ‡ã€‚</p><p>å“ˆå“ˆå“ˆï¼Œä¸Šé¢çš„æ–‡æ¡ˆæ‘˜è‡ªæŸéŸ³çš„æ®µå­ï¼Œæ¯”è¾ƒå†™å®ã€‚</p><p>æˆ‘çœŸå®çš„è®¡åˆ’å°±ä¸æ”¾å‡ºæ¥äº†ï¼Œå¿ƒç†å­¦ä¸Šæœ‰ä¸ªç ”ç©¶ç»“æœï¼Œå½“å¤šæ¬¡å‘åˆ«äººæè¿°è‡ªå·±çš„è®¡åˆ’ï¼Œå°±ä¼šäº§ç”Ÿä¸€ç§é”™è§‰ï¼Œä»¥ä¸ºè‡ªå·±å·²ç»å®Œæˆäº†è®¡åˆ’ã€‚è®¡åˆ’ä¸å¹¿è€Œå‘Šä¹‹ï¼Œä½†æ˜¯ä¸€å®šè¦æœ‰ã€‚</p><p>æ²¡æœ‰è®¡åˆ’çš„äººç”Ÿä¸å€¼å¾—è¿‡ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œå’±ä»¬ä¸‹æ¬¡è§ã€‚</p><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/2021-summary/">è¿™ä¸€å¹´å¾ˆå¹¸è¿ï¼Œå¹³å¹³æ·¡æ·¡çš„|2021 å¹´åº¦æ€»ç»“</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/122334052" target="_blank" rel="noopener">è¿™ä¸€å¹´å¾ˆå¹¸è¿ï¼Œå¹³å¹³æ·¡æ·¡çš„|2021 å¹´åº¦æ€»ç»“</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      ä¸€æ™ƒåˆæ˜¯ä¸€å¹´ï¼Œæœç„¶å²æ•°è¶Šå¤§ï¼Œæ—¶é—´è¶Šå¿«ã€‚æ€»ç»“ä¸‹æ¥ï¼Œ2021 å¹´è¿˜ç®—å¹¸è¿ï¼Œå¹³å¹³æ·¡æ·¡è¿‡ä¸€å¹´ã€‚å·¥ä½œä¸ŠæŒ‰éƒ¨å°±ç­ï¼Œç”Ÿæ´»ä¸Šä¸€å¦‚æ—¢å¾€ã€‚
    
    </summary>
    
    
      <category term="é—²èŠ" scheme="https://www.howardliu.cn/categories/%E9%97%B2%E8%81%8A/"/>
    
    
      <category term="é—²èŠ" scheme="https://www.howardliu.cn/tags/%E9%97%B2%E8%81%8A/"/>
    
      <category term="å¹´åº¦æ€»ç»“" scheme="https://www.howardliu.cn/tags/%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>åŸæ¥è¿˜èƒ½è¿™ä¹ˆå¹²â€”â€”ç½—èƒ–2022å¹´ã€Šæ—¶é—´çš„æœ‹å‹ã€‹è§‚åæ„Ÿ</title>
    <link href="https://www.howardliu.cn/2022-friends-of-time/"/>
    <id>https://www.howardliu.cn/2022-friends-of-time/</id>
    <published>2022-01-01T16:48:14.000Z</published>
    <updated>2022-01-01T16:48:14.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/nature-6891549_1920.jpg" alt="åŸæ¥è¿˜èƒ½è¿™ä¹ˆå¹²â€”â€”ç½—èƒ–2022å¹´ã€Šæ—¶é—´çš„æœ‹å‹ã€‹è§‚åæ„Ÿ"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>å°±è¿™æ · 2022 å¹´äº†ï¼Œå¹´çºªè¶Šå¤§ï¼Œæ—¶é—´è¶Šå¿«ï¼Œåˆåˆ°äº†ç½—èƒ–ã€Šæ—¶é—´çš„æœ‹å‹ã€‹ç›´æ’­çš„æ—¶å€™ï¼Œçœ‹å®Œåæƒ³å†™ç‚¹ä»€ä¹ˆï¼Œå¥ˆä½•è…¹ä¸­å¢¨æ°´å¤ªå°‘ï¼Œç´¢æ€§ä¸éš¾ä¸ºè‡ªå·±ï¼Œéšä¾¿å†™å†™ã€‚ç”±äºç–«æƒ…åŸå› ï¼Œç½—èƒ–ä»Šå¹´çš„è·¨å¹´æ¼”è®²ç°åœºçš„è§‚ä¼—å…¨éƒ¨éƒ½æ˜¯ç†ŠçŒ«å¨ƒå¨ƒï¼Œè¯„è®ºåŒºæœ‰æ•´åœºç›´æ’­çš„è§†é¢‘å›è®¿å’Œæ–‡å­—ç¨¿ï¼Œæœ‰äº›äº‹æƒ…ï¼Œè¿˜æ˜¯è¦è‡ªå·±äº²è‡ªæ„Ÿå—ä¸€ä¸‹ã€‚</p><a id="more"></a><h2 id="æ‰“ç ´æ€ç»´çš„å¢™"><a href="#æ‰“ç ´æ€ç»´çš„å¢™" class="headerlink" title="æ‰“ç ´æ€ç»´çš„å¢™"></a>æ‰“ç ´æ€ç»´çš„å¢™</h2><p>æ•´åœºæ¼”è®²çš„ä¸»é¢˜æ˜¯â€œåŸæ¥è¿˜èƒ½è¿™ä¹ˆå¹²â€ï¼Œç”¨æˆ‘èƒ½å¤Ÿç†è§£çš„è¯ï¼Œå°±æ˜¯æ‰“ç ´æ€ç»´çš„å¢™ã€‚</p><p>æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„æ€ç»´æ¨¡å¼ï¼Œè¿™æ˜¯æˆ‘ä»¬èµ–ä»¥ç”Ÿå­˜çš„æ ¹æœ¬ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬èƒ½å¤Ÿæ›´å¿«é€Ÿã€æ›´é«˜æ•ˆå¤„ç†æ™®é€šäº‹åŠ¡çš„æ ¹æœ¬ã€‚ä¹‹å‰åœ¨ <a href="https://mp.weixin.qq.com/s/JbFoEynzykrGBhOgu4Ne4w" target="_blank" rel="noopener">åˆ«è®©éç†æ€§æ€ç»´æ¯äº†ä½ çš„äººç”Ÿ</a> ä¸­èŠè¿‡ï¼Œæˆ‘ä»¬çš„å¤§è„‘ä¸ºäº†èŠ‚çœèƒ½é‡ï¼Œä¼šç»å¸¸å¤„äºè‡ªåŠ¨é©¾é©¶æ¨¡å¼ï¼Œè¿™è®©æˆ‘ä»¬å¯ä»¥æ›´æœ‰æœºä¼šçœå‡ºèƒ½é‡åšå…¶ä»–äº‹æƒ…ã€‚æ¯”å¦‚ï¼Œæˆ‘çœ‹çœ‹åˆ°çŸ¥é“å†’ç™½æ°”çš„æ°´æ˜¯çƒ­çš„ï¼Œä¸ä¼šç›´æ¥å–ï¼›æˆ‘ä»¬çŸ¥é“å†·äº†è¦ç©¿è¡£æœï¼Œå¦åˆ™ä¼šç”Ÿç—…â€¦â€¦ä½†æ˜¯æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬ç”¨å¸¸è§„çš„åŠæ³•è§£å†³ä¸äº†é—®é¢˜ï¼Œæ€ä¹ˆåŠï¼Ÿ</p><p>æƒ³è¦æ‰“ç ´æ€ç»´çš„å¢™ï¼Œæˆ‘ä»¬éœ€è¦ç»å¯¹çš„ç†æ€§åˆ†æé™åˆ¶æˆ‘ä»¬æ€ç»´çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼ŸçœŸæ­£è¦è§£å†³çš„é—®é¢˜æœ‰å“ªäº›ï¼Ÿå°±ä¸åˆ—ä¸¾ç½—èƒ–æ¼”è®²ä¸­çš„ä¾‹å­äº†ï¼Œæˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹ç½‘çº¦è½¦å‡ºæ¥ä¹‹å‰é‚£ç§æ‰“è½¦éš¾çš„é—®é¢˜ã€‚</p><p>å¾ˆå¤šäººå¯èƒ½æ²¡æœ‰ç»å†è¿‡æ‰“è½¦éš¾çš„æ—¶æœŸï¼Œé‚£ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•çŸ¥é“å“ªé‡Œæœ‰å‡ºç§Ÿè½¦ï¼Œåªèƒ½å°±è¿‘åœ¨è·¯è¾¹æ‹›æ‰‹ï¼Œå‡ºç§Ÿè½¦å¸ˆå‚…åŒæ ·ä¸çŸ¥é“å“ªæœ‰é¡¾å®¢ï¼Œåªèƒ½æ»¡åŸè½¬æ‚ ï¼Œæˆ–è€…åœ¨ä¸Šå®¢æ¦‚ç‡åˆ°çš„åœ°æ–¹ç­‰ç€ï¼Œæ¯”å¦‚ CBDã€é«˜é“ç«™ã€æœºåœºç­‰ã€‚å¹³æ—¶è¿˜å¥½ï¼Œç­‰ä¼šå°±ç­‰ä¼šï¼Œå¦‚æœæ°å¥½æœ‰æ€¥äº‹ã€æˆ–è€…å¸¦ç€è€äººå°å­©ã€äº¦æˆ–æ˜¯åˆ®é£ä¸‹é›¨çš„æ—¶å€™ï¼Œå°±ä¼šæ¯”è¾ƒéš¾å—ã€‚æ€ä¹ˆåŠï¼Ÿ</p><p>å¦‚æœæˆ‘ä»¬å¯ä»¥æå‰å’Œå¸æœºå¸ˆå‚…çº¦å¥½ï¼Œåœ¨çº¦å®šåœ°ç‚¹ä¸Šè½¦ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥äº†ã€‚æƒ³æ³•æœ‰äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å®ç°ï¼Œäºæ˜¯æœ‰äº†ä¸€ç³»åˆ—çš„ç½‘çº¦è½¦ APPã€‚ç°åœ¨å¤§å®¶æ‰“è½¦è®°å½•ä¸éœ€è¦è·¯è¾¹æ‹¦è½¦äº†ï¼Œç›´æ¥ç½‘ä¸Šä¸‹å•ï¼ŒæŒ‡å®šåœ°ç‚¹ä¸Šè½¦å³å¯ï¼Œæ–¹ä¾¿å¿«æ·ã€‚</p><p>è¿™å‡ å¹´ï¼Œå¾ˆå¤šäº’è”ç½‘å…¬å¸çš„å´›èµ·ï¼Œæ”¹å˜äº†æˆ‘ä»¬çš„ç”Ÿæ´»æ–¹å¼ï¼Œæ¯”å¦‚ï¼šå¤–å–ã€æ‹¼å›¢ã€ç§»åŠ¨æ”¯ä»˜â€¦â€¦ä»–ä»¬çš„æˆåŠŸï¼Œæ˜¯èµ°äº†ä»¥å‰æ²¡æœ‰äººèµ°è¿‡çš„è·¯ã€‚</p><p>ã€ŠåŠŸå‹‹ã€‹ä¸­å± å‘¦å‘¦å…³äºå¸¸å±±ç¢±çš„åˆ¤æ–­ä¸­ï¼Œè®¤ä¸ºå·²ç»ç»è¿‡åå¤è®ºè¯èµ°ä¸é€šçš„è·¯ï¼Œå°±è¯¥æœæ–­æ”¾å¼ƒï¼Œç«‹é©¬æ·˜æ±°ï¼Œæ‰¾åˆ°æ›´å¯é çš„æ–¹å¼ï¼Œäºæ˜¯æœ‰äº†åé¢çš„é’è’¿ç´ çš„å‘ç°ã€‚</p><p>ç¢°åˆ°é—®é¢˜ï¼Œæˆ‘ä»¬è¦æŠ•å…¥ç™¾åˆ†ä¹‹ç™¾çš„åŠªåŠ›å…‹æœå›°éš¾ï¼Œä½†æ˜¯å¦‚æœå·²ç»ä¸è¡Œäº†ï¼Œå°±è¯¥è€ƒè™‘æ¢ä¸ªæ–¹å¼å†ä¸Šã€‚</p><p>â€œè¡Œå°±è¡Œï¼Œä¸è¡Œå†æƒ³æƒ³åŠæ³•ã€‚â€</p><h2 id="ä¸€åˆ‡éƒ½åœ¨å˜"><a href="#ä¸€åˆ‡éƒ½åœ¨å˜" class="headerlink" title="ä¸€åˆ‡éƒ½åœ¨å˜"></a>ä¸€åˆ‡éƒ½åœ¨å˜</h2><p>å”¯ä¸€ä¸å˜çš„å°±æ˜¯å˜åŒ–ã€‚æ²¡æœ‰ä»€ä¹ˆæ˜¯æ°¸æ’ä¸å˜çš„ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåº”å¯¹å˜åŒ–çš„æ‰‹æ®µï¼Œåªæœ‰æå‰é¢„çŸ¥å˜åŒ–ï¼Œåšå¥½å‡†å¤‡ï¼Œå½“å˜åŒ–æ¥ä¸´æ—¶ï¼Œå¦ç„¶é¢å¯¹ã€‚</p><p>å¾ˆå¤š 2020 å¹´é£ç”Ÿæ°´èµ·çš„æ•™åŸ¹è¡Œä¸šï¼Œåœ¨å›½å®¶å‡ºå°åŒå‡æ”¿ç­–åï¼Œä¸€å¤œä¹‹é—´ï¼Œå¤§å¦è½°ç„¶å€’å¡Œã€‚å¾ˆå¤šæ•™åŸ¹è¡Œä¸šçš„è€å¸ˆã€ç ”å‘äººå‘˜ï¼Œåªèƒ½é‡æ–°è€ƒè™‘æœªæ¥çš„å‘å±•ã€‚å…¶å®å›½å®¶ä¸€ç›´æœ‰è¿™ä¸ªä¿¡å·ï¼Œæˆ‘åœ¨ <a href="https://mp.weixin.qq.com/s/EuNjfAmgQ3G491g6G4PAew" target="_blank" rel="noopener">æƒ³èººå¹³ä¸æ˜¯é”™</a> ä¸­ä¹Ÿè°ˆè¿‡ç›¸å…³çš„é—®é¢˜ã€‚å¾ˆå¤šäººæŠ±æ€¨å›½å®¶æ‰‹æ®µå¼ºç¡¬ï¼Œä½†ä»–ä»¬çœŸæ­£æŠ±æ€¨çš„æ˜¯ï¼Œå›½å®¶æ²¡æœ‰æå‰å‘Šè¯‰ä»–ä»¬è¦è¡Œéœ¹é›³æ‰‹æ®µï¼Œæ”¹å˜è¿™ä¸ªç•¸å½¢å‘å±•çš„è¡Œä¸šã€‚</p><p>æˆ‘ä»¬å¾ˆå¤šäººç›¸ä¿¡é£æ°´ã€æ˜Ÿåº§ã€å‘½è¿ï¼Œå…¶å®åªæ˜¯æƒ³ä»ä¸­æ¢å¯»ä¸€äº›æœªæ¥çš„å¯èƒ½ã€‚ç½—èƒ–ç»™å‡ºäº†ä¸€ä¸ªè§‚ç‚¹æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ä¸€ç›´è¿½å¯»æ”¹å˜ï¼Œåªè¦æ‰¾åˆ°æœªæ¥çš„ä¸å˜ï¼Œè¯•ç€é è¿‘ä»–ï¼Œå½“æœªæ¥æ¥ä¸´æ—¶ï¼Œæˆ‘ä»¬å°±å·²ç»èµ¶åœ¨äº†æ½®æµçš„å‰åˆ—ã€‚</p><p>é‚£æ€ä¹ˆæ‰¾åˆ°æœªæ¥ä¸€å®šå‘ç”Ÿçš„äº‹æƒ…ï¼Ÿä¸ªäººæ„šè§æ˜¯ç¿»ç¿»å›½å®¶æ”¿ç­–ï¼Œæ¯”å¦‚â€œåå››äº”â€è§„åˆ’ï¼Œçœ‹çœ‹è§„åˆ’çš„æœªæ¥ç›®æ ‡ã€‚è·Ÿç€å›½å®¶æ”¿ç­–èµ°ï¼Œç»å¯¹ä¸ä¼šæœ‰å¤ªå¤§åå·®ã€‚æ‰¾åˆ°ç›®æ ‡äº†æ€ä¹ˆå®ç°å‘¢ï¼Ÿæœ‰èƒ½åŠ›ä¸Šï¼Œæ²¡èƒ½åŠ›æå‡èƒ½åŠ›ä¹Ÿè¦ä¸Šï¼Œå¦‚æœè¿˜æ˜¯ä¸Šä¸å»ï¼Œå°±â€œæ‰“ç ´æ€ç»´çš„å¢™â€ï¼Œå†æƒ³æƒ³åˆ«çš„åŠæ³•ã€‚</p><h2 id="35-å²æ€ä¹ˆäº†ï¼Ÿä¸€åˆ‡åˆšåˆšå¥½"><a href="#35-å²æ€ä¹ˆäº†ï¼Ÿä¸€åˆ‡åˆšåˆšå¥½" class="headerlink" title="35 å²æ€ä¹ˆäº†ï¼Ÿä¸€åˆ‡åˆšåˆšå¥½"></a>35 å²æ€ä¹ˆäº†ï¼Ÿä¸€åˆ‡åˆšåˆšå¥½</h2><p>35 å²ç„¦è™‘æ˜¯æ¯ä¸ªç¨‹åºå‘˜éƒ½æœ‰çš„ï¼Ÿå„ç§è¥é”€å·ä¸­ä¸€ç›´é¼“å¹ä¸€ä¸ªè§‚ç‚¹ï¼Œåˆ°äº† 35 å²ï¼Œå°±ä¼šä¸€ä¸‹å­å˜æˆäº†æ²¡æœ‰ä»»ä½•ä»·å€¼çš„æŠ¹å¸ƒã€‚è€Œä¸”ç»™å‡ºå¾ˆå¤šçš„ç†ç”±ï¼š</p><ol><li>å®¶åº­æ‹–ç´¯ï¼Œä¸Šæœ‰è€ä¸‹æœ‰å°ï¼Œä¼šåˆ†å¿ƒï¼›</li><li>ä½“åŠ›ç²¾åŠ›è·Ÿä¸ä¸Šï¼Œæ²¡æœ‰åŠæ³•è·Ÿåˆšæ¯•ä¸šçš„å°å¹´è½»æ¯”è¾ƒï¼›</li><li>å˜æˆäº†è€æ²¹æ¡ï¼Œå·¥ä½œä¸­å¾ˆå®¹æ˜“å·æ‡’ï¼›</li><li>â€¦â€¦</li></ol><p>ä¼¼ä¹éƒ½æœ‰é“ç†ï¼Œä½†æ˜¯æ€»æ„Ÿè§‰å“ªé‡Œä¸å¯¹ã€‚ç½—èƒ–çš„è§‚ç‚¹æ˜¯ï¼Œå¹´é¾„å¤§äº†ä¹‹åï¼Œé™¤äº†å·¥ä½œèƒ½åŠ›ä¹‹å¤–ï¼Œæˆ‘ä»¬æ‹¼çš„è¿˜æœ‰è½¯æŠ€èƒ½ã€‚</p><p>ä»¥ç¼–ç¨‹å¼€å‘ä¸ºä¾‹ï¼Œç®€å•çš„ CRUDï¼Œåˆšæ¯•ä¸šçš„å°ä¼™å­å’Œ 35 å²çš„äººå¼€å‘ç»“æœå·®ä¸å¤šï¼Œä½†æ˜¯å¤æ‚é€»è¾‘å‘¢ï¼Ÿä½†å‡¡æœ‰äº›ç»éªŒçš„å¼€å‘äººå‘˜ï¼Œä¼šæŠŠåœºæ™¯è€ƒè™‘æ›´åŠ å®Œå–„ï¼Œä¼šåœ¨å¼€å‘æ—¶è€ƒè™‘æ›´å¤šçš„è®¾è®¡æ¨¡å¼ï¼Œè¿™äº›ç»éªŒï¼Œä¼šè®©ç¨‹åºæ›´åŠ å¥å£®ï¼Œèƒ½å¤Ÿåº”å¯¹æ›´å¤šçš„å˜åŒ–ã€‚è€Œä¸”ï¼Œç»å†äº†ç¤¾ä¼šçš„æ¯’æ‰“ä¹‹åï¼Œæˆ‘ä»¬ä¼šæ¯”è¾ƒå¹³å’Œçš„æ¥å—ä¸€äº›èŒåœºä¸Šçš„ä¸å…¬å¹³ï¼Œè¿™ä¸æ˜¯æ€‚ï¼Œè€Œæ˜¯ä¸€ç§å¿ƒæ€çš„è½¬å˜ï¼Œâ€œä¸–é—´äº‹ï¼Œé™¤äº†ç”Ÿæ­»ï¼Œå“ªä¸€ä»¶äº‹ä¸æ˜¯é—²äº‹ã€‚â€</p><p>å¿ƒæ€å¹³å’Œäº†ï¼Œä¸ºäººå¤„ä¸–æ‰ä¼šç®€å•ï¼Œèƒ½å¤Ÿæ›´å¥½çš„å¤„ç†äººé™…å…³ç³»ã€‚è¿™å°±æ˜¯æˆ‘ä»¬çš„è½¯æŠ€èƒ½ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨å¼€å‘ä¹‹å¤–å†æœ‰ä¸€äº›äº®çœ¼çš„ç‰¹ç‚¹ï¼Œæ¯”å¦‚ï¼šæ¶æ„è®¾è®¡ã€é€»è¾‘åˆ†æã€äº§å“è®¾è®¡ã€æ±‡æŠ¥æ€»ç»“ç­‰ç­‰ã€‚</p><p>ä¹‹å‰çœ‹è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œé‡Œé¢è¯´åˆ°ï¼Œè¢«è¾é€€çš„å‘˜å·¥ï¼Œä¸ä¼šè¢«å‘ŠçŸ¥è¢«è¾é€€çš„çœŸæ­£åŸå› ï¼Œåªä¼šè¯´æ˜¯å…¬å¸æ•ˆç›Šä¸å¥½ã€å‘å±•ä¸ç•…ã€‚å…¶å®ï¼Œå¾ˆå¤šæ—¶å€™æ˜¯è½¯æŠ€èƒ½å¤ªå¼±ã€‚</p><p>æ—¢ç„¶æˆ‘ä»¬æ²¡æœ‰åŠæ³•å’Œ 20 å¤šå²çš„å¹´è½»äººæ‹¼ç²¾åŠ›ï¼Œé‚£æˆ‘ä»¬ä»¥ä¸€ä¸ªæ›´æœ‰ç”Ÿæ´»é˜…å†çš„å¹´è½»äººèº«ä»½åœ¨èŒåœºä¸­æ‰“æ‹¼ã€‚</p><h2 id="æ­¤ç”Ÿä¸æ‚”å…¥åå¤"><a href="#æ­¤ç”Ÿä¸æ‚”å…¥åå¤" class="headerlink" title="æ­¤ç”Ÿä¸æ‚”å…¥åå¤"></a>æ­¤ç”Ÿä¸æ‚”å…¥åå¤</h2><p>ä¸çŸ¥é“ä»ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼Œè¿™ç§æƒ…ç»ªå°±æ¸—è¿›äº†æˆ‘ä»¬éª¨å­é‡Œé¢ã€‚</p><p>å†™è¿™æ®µå†…å®¹çš„æ—¶å€™ï¼Œå†™äº†æ”¹ï¼Œæ”¹äº†åˆ ã€‚æˆ‘ä¼å›¾æ‰¾åˆ°ä¸€äº›è¯æ®ï¼Œè¯æ˜æˆ‘çš„è¿™ä¸ªæƒ³æ³•æ˜¯å¯¹çš„ï¼Œæˆ‘ä¼å›¾æ‰¾åˆ°ä¸€ä¸ªäº‹ä»¶ï¼Œèƒ½å¤Ÿä»£è¡¨è¿™ç§æƒ…ç»ªçš„èµ·ç‚¹ã€‚æœ€åè¿˜æ˜¯åˆ äº†ï¼Œè¿™æ˜¯æ½œç§»é»˜åŒ–çš„ä¸€ä¸ªç»“æœã€‚å¡«é¥±è‚šå­çš„ä¸æ˜¯æœ€åä¸€ä¸ªåŒ…å­ï¼Œè€Œæ˜¯å‰é¢ 9 ä¸ªåŒ…å­çš„é“ºå«ã€‚</p><p>æˆ‘åªè¡¨è¾¾è¿™ç§æƒ…ç»ªï¼Œå…¶ä»–çš„äº¤ç»™æ—¶é—´ã€‚</p><h2 id="å¯ä»¥å¸¸å¸¸å›å‘³çš„è¯"><a href="#å¯ä»¥å¸¸å¸¸å›å‘³çš„è¯" class="headerlink" title="å¯ä»¥å¸¸å¸¸å›å‘³çš„è¯"></a>å¯ä»¥å¸¸å¸¸å›å‘³çš„è¯</h2><p>ã€1ã€ç»™é‡è¦æ—¶åˆ»ï¼š</p><p>â€œè¡Œä¸‡é‡Œè·¯ï¼Œè¯»ä¸‡éç»ã€‚ç¬¨é¸­æ—©é£ï¼Œç¬¨ç‰›å‹¤è€•ã€‚è®©å°çš„æ•¬è€çš„ï¼Œæ‹¿æ¬¡çš„ç•™å¥½çš„ã€‚å®æ¬ºå®˜ï¼Œä¸æ¬ºè´¤ï¼Œå®æ¬ºè´¤ï¼Œä¸æ¬ºå¤©ã€‚äººå¤šçš„åœ°æ–¹ä¸å»ï¼Œæ²¡äººçš„åœ°æ–¹ä¸ç•™ã€‚èµç¾æˆåŠŸçš„äººï¼Œå®‰æ…°å¤±è´¥çš„äººã€‚çŠ¯ç—…çš„ä¸œè¥¿ä¸åƒï¼ŒçŠ¯æ³•çš„äº‹æƒ…ä¸åšã€‚ä¸è¦ç©¿é‡‘æˆ´é“¶ï¼Œåªè¦å¥½å¥½åšäººã€‚å¢™å€’ä¼—äººæ¨ï¼Œæˆ‘ä¸æ¨ï¼›æªæ‰“å‡ºå¤´é¸Ÿï¼Œæˆ‘ä¸æ‰“ã€‚ç§ç“œå¾—ç“œç“œå„¿å¤§ï¼Œç§è±†å¾—è±†è±†å„¿å¤šã€‚â€â€”â€”â€”â€”ã€Šç‹é¼é’§å›å¿†å½•ã€‹</p><p>ã€2ã€ç»™ç†æ€§ä¹è§‚æ´¾ï¼š</p><p>â€œæˆ‘çš„ä¹è§‚å¹¶ä¸éœ€è¦è¿™äº›å¤´å¤´æ˜¯é“çš„é€»è¾‘æ”¯æ’‘ï¼Œå®ƒå°±æ˜¯ä¸€ç§æœ´ç´ çš„ä¿¡å¿µï¼šç›¸ä¿¡ä¸­å›½ä¼šæ›´å¥½ã€‚è¿™ç§ä¿¡å¿µä¸æ˜¯æºäºå­¦æœ¯è®­ç»ƒï¼Œè€Œæ˜¯æºäºå¸é©¬è¿ã€æœç”«ã€è‹è½¼ï¼Œæºäºâ€˜ä¸€æ¡å¤§æ²³æ³¢æµªå®½â€™ï¼Œæºäºå¯¹ä¸­å›½äººå‹¤å¥‹å®å¹²çš„é’¦ä½©ã€‚å®ƒå½±å“äº†æˆ‘çœ‹å¾…é—®é¢˜çš„è§’åº¦å’Œå¤„ç†ä¿¡æ¯çš„æ–¹å¼ï¼Œæˆ‘æ¥å—è¿™ç§å±€é™æ€§ï¼Œæ²¡æœ‰æ”¹å˜çš„æ‰“ç®—ã€‚â€â€”â€”â€”â€”å…°å°æ¬¢</p><p>ã€3ã€ç»™çŠ¹è±«ä¸å†³çš„äººï¼š</p><p>â€œä»€ä¹ˆæ˜¯äº‹ä»¶ï¼Ÿäº‹ä»¶å°±æ˜¯æŸç§è¶…å‡ºäº†åŸå› çš„ç»“æœã€‚â€â€”â€”â€”â€”é½æ³½å…‹</p><p>ã€4ã€ç»™å‡†å¤‡å‡ºå‘çš„äººï¼š</p><p>â€œè®¾è®¡æ˜¯ä¸€ä¸ªä¸æ–­ç”Ÿæˆç›®æ ‡å’Œå¤‡é€‰æ–¹æ¡ˆçš„è¿‡ç¨‹ã€‚â€â€”â€”â€”â€”èµ«ä¼¯ç‰¹Â·è¥¿è’™</p><p>ã€5ã€ç»™æ­£åœ¨è·¯ä¸Šçš„äººï¼š</p><p>â€œéå¸¸ç†æƒ³ï¼Œç‰¹åˆ«ç°å®ã€‚â€â€”â€”â€”â€”æå¸Œè´µ</p><p>ã€6ã€ç»™æ­£åœ¨æ‹“è’çš„äººï¼š</p><p>â€œæå‰ä¸€ä¸ªç‰ˆæœ¬éµå®ˆæ³•å¾‹â€â€”â€”â€”â€”ç‹æ°¸æ²»</p><p>ã€7ã€ç»™çŸ¥æ˜“è¡Œéš¾çš„äººï¼š</p><p>â€œè¦æ”¹å˜ä¸€ä¸ªæˆå¹´äººçš„è¡Œä¸ºï¼Œè®¤çŸ¥ã€èƒ½åŠ›ã€æé†’ï¼Œä¸‰è€…åŒæ ·é‡è¦â€â€”â€”â€”â€”ç‹å»ºç¡•</p><p>ã€8ã€ç»™èº«å¤„å›°å¢ƒçš„äººï¼š</p><p>â€œåœ°çƒä¸Šæœ€åä¸€ä¸ªäººç‹¬è‡ªååœ¨æˆ¿é—´é‡Œï¼Œè¿™æ—¶å¿½ç„¶å“èµ·äº†æ•²é—¨å£°â€¦â€¦â€â€”â€”â€”â€”å¼—é‡Œè’‚å…‹Â·å¸ƒæœ—</p><p>ã€9ã€ç»™ 2022 å¹´çš„æˆ‘ä»¬ï¼š</p><p>â€œè®©æˆ‘ä»¬æ³°ç„¶è‡ªè‹¥ï¼Œä¸è‡ªå·±çš„æ—¶ä»£ç‹­è·¯ç›¸é€¢â€â€”â€”â€”â€”èå£«æ¯”äºš</p><h2 id="æˆ‘ä»¬éƒ½è¦å¥½å¥½çš„"><a href="#æˆ‘ä»¬éƒ½è¦å¥½å¥½çš„" class="headerlink" title="æˆ‘ä»¬éƒ½è¦å¥½å¥½çš„"></a>æˆ‘ä»¬éƒ½è¦å¥½å¥½çš„</h2><p>ç”Ÿæ´»å¾ˆéš¾ï¼Œæœ‰æ—¶å€™å°±éœ€è¦ä¸€ç§æ­£èƒ½é‡æ¿€åŠ±æˆ‘ä»¬ï¼Œå“ªæ€•åªæ˜¯è½»è½»çš„æ¨ä¸€æŠŠï¼Œé½¿è½®å°±ä¼šè½¬åŠ¨èµ·æ¥ï¼Œç„¶åå°±æ²¿ç€è¿™ç§æƒ¯æ€§ç»§ç»­ä¸‹å»ã€‚</p><p>æ„¿å¤§å®¶ 2022 å¹´â€œå„ä»å…¶æ¬²ï¼Œçš†å¾—æ‰€æ„¿â€ã€‚</p><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/2022-friends-of-time/">åŸæ¥è¿˜èƒ½è¿™ä¹ˆå¹²â€”â€”ç½—èƒ–2022å¹´ã€Šæ—¶é—´çš„æœ‹å‹ã€‹è§‚åæ„Ÿ</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/122273004" target="_blank" rel="noopener">åŸæ¥è¿˜èƒ½è¿™ä¹ˆå¹²â€”â€”ç½—èƒ–2022å¹´ã€Šæ—¶é—´çš„æœ‹å‹ã€‹è§‚åæ„Ÿ</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      å°±è¿™æ · 2022 å¹´äº†ï¼Œå¹´çºªè¶Šå¤§ï¼Œæ—¶é—´è¶Šå¿«ï¼Œåˆåˆ°äº†ç½—èƒ–ã€Šæ—¶é—´çš„æœ‹å‹ã€‹ç›´æ’­çš„æ—¶å€™ï¼Œçœ‹å®Œåæƒ³å†™ç‚¹ä»€ä¹ˆï¼Œå¥ˆä½•è…¹ä¸­å¢¨æ°´å¤ªå°‘ï¼Œç´¢æ€§ä¸éš¾ä¸ºè‡ªå·±ï¼Œéšä¾¿å†™å†™ã€‚ç”±äºç–«æƒ…åŸå› ï¼Œç½—èƒ–ä»Šå¹´çš„è·¨å¹´æ¼”è®²ç°åœºçš„è§‚ä¼—å…¨éƒ¨éƒ½æ˜¯ç†ŠçŒ«å¨ƒå¨ƒï¼Œè¯„è®ºåŒºæœ‰æ•´åœºç›´æ’­çš„è§†é¢‘å›è®¿å’Œæ–‡å­—ç¨¿ï¼Œæœ‰äº›äº‹æƒ…ï¼Œè¿˜æ˜¯è¦è‡ªå·±äº²è‡ªæ„Ÿå—ä¸€ä¸‹ã€‚
    
    </summary>
    
    
      <category term="é—²èŠ" scheme="https://www.howardliu.cn/categories/%E9%97%B2%E8%81%8A/"/>
    
    
      <category term="é—²èŠï¼Œæ—¶é—´çš„æœ‹å‹" scheme="https://www.howardliu.cn/tags/%E9%97%B2%E8%81%8A%EF%BC%8C%E6%97%B6%E9%97%B4%E7%9A%84%E6%9C%8B%E5%8F%8B/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava10 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java-10-features/"/>
    <id>https://www.howardliu.cn/java-10-features/</id>
    <published>2021-12-29T14:01:57.000Z</published>
    <updated>2021-12-29T14:01:57.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/christmas-5740350.png?imageView2/0/q/75%7Cwatermark/2/text/aG93YXJkbGl1LmNuIOeci-WxsQ==/font/5a6L5L2T/fontsize/240/fill/I0IyQjJCMg==/dissolve/60/gravity/South/dx/10/dy/10" alt="Java10 æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚ä» <a href="https://res.cloudinary.com/snyk/image/upload/v1623860216/reports/jvm-ecosystem-report-2021.pdf" target="_blank" rel="noopener">ã€ŠJVM Ecosystem Report 2021ã€‹</a> ä¸­å¯ä»¥çœ‹å‡ºï¼Œç›®å‰å¼€å‘ç¯å¢ƒä¸­æœ‰è¿‘åŠçš„ç¯å¢ƒä½¿ç”¨ Java8ï¼Œæœ‰è¿‘åŠçš„äººè½¬ç§»åˆ°äº† Java11ï¼Œéšç€ Java17 çš„å‘å¸ƒï¼Œç›¸ä¿¡æ¯”ä¾‹ä¼šæœ‰æ‰€å˜åŒ–ã€‚</p><a id="more"></a><p>å› æ­¤ï¼Œå‡†å¤‡å‡ºä¸€ä¸ªç³»åˆ—ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œé˜è¿°å„ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ã€‚</p><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ä» Java10 å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ­£å¼è¿›å…¥æ¯åŠå¹´ä¸€ä¸ªç‰ˆæœ¬çš„æ›´æ–°èŠ‚å¥ï¼Œæ›´æ–°é¢‘ç‡åŠ å¿«ï¼Œå°æ­¥å¿«è·‘ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ç…ç… Java10 éƒ½æ›´æ–°äº†å“ªäº›æ¯”è¾ƒæœ‰æ„æ€çš„åŠŸèƒ½ã€‚</p><h2 id="å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­"><a href="#å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­" class="headerlink" title="å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­"></a>å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ Java æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œæœ‰ç€ä¸¥æ ¼çš„ç±»å‹é™åˆ¶ã€‚æƒ³è¦å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œå¿…é¡»æ˜ç¡®æŒ‡æ˜å˜é‡ç±»å‹ï¼Œç”¨<code>Object</code>æŠ¬æ çš„å¯ä»¥ç¦»å¼€äº†ã€‚ä½†æ˜¯ä» Java10 å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®šä¹‰å±€éƒ¨å˜é‡æ—¶ä½¿ç”¨<code>var</code>é™å®šå˜é‡ç±»å‹ï¼ŒJava ç¼–è¯‘å™¨ä¼šæ ¹æ®å˜é‡çš„å€¼æ¨æ–­å…·ä½“çš„ç±»å‹ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>Map</code>å¯¹è±¡ï¼š</p><pre><code class="java">Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;();</code></pre><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å†™åšï¼š</p><pre><code class="java">var idToNameMap = new HashMap&lt;Integer, String&gt;();</code></pre><p>è¿™ä¸ªåŠŸèƒ½ç®—æ˜¯ Java çš„ä¸€æ¬¡å°é²œï¼Œç»™ Java è¯­è¨€å¢åŠ äº†æ›´å¤šçš„å¯èƒ½ï¼Œè®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ ç®€æ´ï¼Œæ›´åŠ ä¸“æ³¨äºå¯è¯»æ€§ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ–°å¢çš„<code>var</code>ä¸ä¼šæŠŠ Java å˜æˆåŠ¨æ€è¯­è¨€ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨æ–­ç±»å‹ï¼Œå°†å…¶è½¬æ¢ä¸ºç¡®å®šçš„ç±»å‹ï¼Œä¸ä¼šåœ¨è¿è¡Œæ—¶åŠ¨æ€å˜åŒ–ã€‚</p><p>ç›®å‰<code>var</code>åªèƒ½ç”¨äºå±€éƒ¨å˜é‡ï¼Œè€Œä¸”ç­‰å·å³ä¾§å¿…é¡»æ˜¯ç¡®å®šç±»å‹çš„å®šä¹‰ï¼ŒåŒ…æ‹¬ï¼šåˆå§‹åŒ–çš„å®ä¾‹ã€æ–¹æ³•çš„è°ƒç”¨ã€åŒ¿åå†…éƒ¨ç±»ã€‚</p><p>æˆ‘ä»¬å†å›åˆ°åˆšæ‰çš„ä¾‹å­ï¼š</p><pre><code class="java">// ä»¥å‰çš„å†™æ³•Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;();// ç°åœ¨å¯ä»¥è¿™ä¹ˆå†™var idToNameMap = new HashMap&lt;Integer, String&gt;();</code></pre><p>å¯¹äºå‚æ•°çš„åå­—ï¼Œæˆ‘ä»¬å¯ä»¥ä¸åœ¨å…³æ³¨ç±»å‹ï¼Œå¯ä»¥æ›´å¤šçš„å…³æ³¨å‚æ•°çš„æ„ä¹‰ï¼Œè¿™ä¹Ÿæ˜¯ç¼–å†™å¯è¯»ä»£ç çš„è¦æ±‚ã€‚</p><p>è¿™ä¹Ÿä¸ºæˆ‘ä»¬æå‡ºäº†ä¸€äº›è¦æ±‚ï¼Œå¦‚æœæ˜¯ç‰¹åˆ«é•¿çš„ Lambda è¡¨è¾¾å¼ï¼Œè¿˜æ˜¯è€è€å®å®çš„ä½¿ç”¨æ˜ç¡®çš„ç±»å‹å§ï¼Œå¦åˆ™å†™ç€å†™ç€å°±è¿·ç³Šäº†ã€‚</p><p>å†å°±æ˜¯æ¨æ–­ç±»å‹æ—¶æ²¡æœ‰é‚£ä¹ˆæ™ºèƒ½ï¼Œéƒ½æ˜¯åŸºäºæœ€æ˜ç¡®çš„æ¨æ–­ï¼Œæ¯”å¦‚ï¼š</p><pre><code class="java">var emptyList = new ArrayList&lt;&gt;();</code></pre><p>è¿™ä¸ªæ—¶å€™æ¨æ–­<code>emptyList</code>çš„ç»“æœæ˜¯<code>ArrayList&lt;Object&gt;</code>ï¼Œç»å¯¹ä¸ä¼šæŒ‰ç…§æˆ‘ä»¬å¸¸ç”¨å†™æ³•æ¨æ–­æˆ<code>List&lt;Object&gt;</code>ã€‚</p><p>å¦‚æœæ˜¯åŒ¿åå†…éƒ¨ç±»ï¼Œæ¯”å¦‚ï¼š</p><pre><code class="java">var obj = new Object() {};</code></pre><p>è¿™ä¸ªæ—¶å€™<code>obj.getClass()</code>å¯å°±ä¸æ˜¯<code>Object.class</code>äº†ï¼Œè€Œä¸”åŒ¿åå†…éƒ¨ç±»çš„ç±»å‹äº†ã€‚</p><p>æ‰€ä»¥ï¼Œå°åˆ€è™½å¥½ï¼Œä½†ä¹Ÿè¦å¥½å¥½ç”¨ï¼Œèƒ¡ä¹±ç”¨å®¹æ˜“è¯¯ä¼¤ã€‚</p><h2 id="ä¸å¯å˜é›†åˆ"><a href="#ä¸å¯å˜é›†åˆ" class="headerlink" title="ä¸å¯å˜é›†åˆ"></a>ä¸å¯å˜é›†åˆ</h2><p>ä» Java9 å¼€å§‹æä¾›ä¸å¯å˜é›†åˆçš„å®ç°ï¼ŒJava10 ç»§ç»­æ‰©å±•ã€‚é›†åˆæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ å…¥æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“æ–¹æ³•æ˜¯å¦ä¼šå¯¹å®¹å™¨ä¸­çš„å…ƒç´ è¿›è¡Œä¿®æ”¹ï¼Œæœ‰äº†ä¸å¯å˜é›†åˆï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šè¿›è¡Œæ§åˆ¶ï¼ˆæ¯•ç«Ÿå¯¹å®¹å™¨ä¸­å¯¹è±¡çš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œæˆ‘ä»¬çš„æ§åˆ¶åŠ›å°±æ²¡æœ‰é‚£ä¹ˆå¼ºäº†ï¼‰ã€‚</p><p>é’ˆå¯¹ä¸å¯å˜é›†åˆï¼Œæˆ‘ä»¬æ‘˜å–<code>java.util.List</code>çš„æè¿°ï¼ˆå…¶ä»–çš„æè¿°éƒ½æ˜¯ç±»ä¼¼çš„ï¼‰ï¼š</p><blockquote><h2 id="Unmodifiable-Lists"><a href="#Unmodifiable-Lists" class="headerlink" title="Unmodifiable Lists"></a>Unmodifiable Lists</h2><p>The List.of and List.copyOf static factory methods provide a convenient way to create unmodifiable lists. The List instances created by these methods have the following characteristics:</p><ul><li>They are unmodifiable. Elements cannot be added, removed, or replaced. Calling any mutator method on the List will always cause UnsupportedOperationException to be thrown. However, if the contained elements are themselves mutable, this may cause the Listâ€™s contents to appear to change.</li><li>They disallow null elements. Attempts to create them with null elements result in NullPointerException.</li><li>They are serializable if all elements are serializable.</li><li>The order of elements in the list is the same as the order of the provided arguments, or of the elements in the provided array.</li><li>They are value-based. Callers should make no assumptions about the identity of the returned instances. Factories are free to create new instances or reuse existing ones. Therefore, identity-sensitive operations on these instances (reference equality (==), identity hash code, and synchronization) are unreliable and should be avoided.</li><li>They are serialized as specified on the Serialized Form page.</li></ul></blockquote><p>ç®€å•ç¿»è¯‘ä¸€ä¸‹ï¼š</p><ul><li>è¿™äº›é›†åˆéƒ½ä¸å¯å˜ï¼Œå…ƒç´ ä¸èƒ½å¢ã€å‡ã€æ›¿æ¢ï¼Œè°ƒç”¨ä¿®æ”¹æ–¹æ³•éƒ½ä¼šè¿”å›<code>UnsupportedOperationException</code>å¼‚å¸¸ã€‚ä½†æ˜¯ï¼Œbutï¼Œå¦‚æœé›†åˆä¸­çš„å…ƒç´ æ˜¯å¯å˜çš„ï¼Œé‚£å°±æ§ä¸ä½äº†ã€‚æ¯”å¦‚ï¼Œå…ƒç´ æ˜¯<code>AtomInteger</code>å°±æ²¡æ³•æ§åˆ¶å…¶ä¸­çš„å€¼ï¼Œé›†åˆåªæ˜¯å…ƒç´ ä¸å˜ï¼›å¦‚æœæ˜¯<code>String</code>ï¼Œé‚£é›†åˆæ˜¯æ•´ä½“ä¸å˜çš„ã€‚</li><li>ä¸å…è®¸<code>null</code>ï¼Œä¼šæŠ›å‡º<code>NullPointerException</code></li><li>å¦‚æœé›†åˆä¸­çš„å…ƒç´ æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œé‚£é›†åˆå°±èƒ½å¤Ÿåºåˆ—åŒ–</li><li>é›†åˆä¸­å…ƒç´ çš„é¡ºåºæ˜¯åŠ å…¥çš„é¡ºåº</li><li><code>copyOf</code>å’Œ<code>of</code>è¿™äº›æ–¹æ³•ä¸­è¿”å›çš„ç»“æœå¯èƒ½ä½¿ç”¨æå‰å®šä¹‰å¥½çš„å¯¹è±¡ï¼Œæ¯”å¦‚ç©ºé›†åˆã€åŸé›†åˆç­‰ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ä¸åŒè°ƒç”¨ä½ç½®è¿”å›äº†ç›¸åŒå¯¹è±¡ã€‚æ‰€ä»¥ä¸è¦ç›¸ä¿¡<code>==</code>ã€<code>hashCode</code>ï¼Œä¹Ÿä¸è¦å¯¹å…¶åŠ é”ã€‚</li></ul><h3 id="copyOf"><a href="#copyOf" class="headerlink" title="copyOf"></a>copyOf</h3><p>åœ¨<code>java.util.List</code>ã€<code>java.util.Map</code>ã€<code>java.util.Set</code>è¿™å‡ ä¸ªæ¥å£ä¸­éƒ½å„è‡ªæ·»åŠ äº†ä¸€ä¸ª<code>copyOf</code>é™æ€æ–¹æ³•ï¼Œç”¨æ¥åˆ›å»ºä¸å¯å˜é›†åˆï¼Œæœ€ç»ˆéƒ½ä¼šæ˜¯<code>ImmutableCollections</code>ä¸­å®šä¹‰çš„å‡ ä¸ªé›†åˆå®ç°ï¼Œä¸ Java9 ä¸­å®šä¹‰çš„<code>of</code>æ–¹æ³•ç±»ä¼¼ã€‚</p><p>å¯¹äº<code>java.util.Map</code>ã€<code>java.util.Set</code>ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªä¼˜åŒ–ï¼Œå¦‚æœä¼ å…¥çš„æœ¬èº«å°±æ˜¯ä¸å¯å˜çš„é›†åˆï¼Œå°†ç›´æ¥è¿”å›ä¼ å…¥çš„å‚æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="java">static &lt;E&gt; Set&lt;E&gt; copyOf(Collection&lt;? extends E&gt; coll) {    if (coll instanceof ImmutableCollections.AbstractImmutableSet) {        return (Set&lt;E&gt;)coll;    } else {        return (Set&lt;E&gt;)Set.of(new HashSet&lt;&gt;(coll).toArray());    }}</code></pre><h3 id="toUnmodifiableListã€toUnmodifiableSetã€toUnmodifiableMap"><a href="#toUnmodifiableListã€toUnmodifiableSetã€toUnmodifiableMap" class="headerlink" title="toUnmodifiableListã€toUnmodifiableSetã€toUnmodifiableMap"></a>toUnmodifiableListã€toUnmodifiableSetã€toUnmodifiableMap</h3><p>Java10 å¾ˆè´´å¿ƒçš„æä¾›äº†<code>Stream</code>ä¸­çš„æ“ä½œï¼Œæˆ‘ä»¬ç›´æ¥åˆ›å»ºä¸å¯å˜é›†åˆäº†ã€‚æ¯”å¦‚ï¼š</p><pre><code class="java">Stream.of(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;)    .map(x -&gt; &quot;id: &quot; + x)    .collect(Collectors.toUnmodifiableList());</code></pre><p><code>toUnmodifiableList</code>ã€<code>toUnmodifiableSet</code>ã€<code>toUnmodifiableMap</code>çš„ç”¨æ³•ä¸<code>toList</code>ã€<code>toSet</code>ã€<code>toMap</code>æ²¡æœ‰å¤ªå¤šåŒºåˆ«ï¼Œå·®åˆ«åœ¨äºè¿”å›çš„æ˜¯ä¸å¯å˜é›†åˆã€‚</p><h2 id="Optional-æ—å¢åŠ -orElseThrow-æ–¹æ³•"><a href="#Optional-æ—å¢åŠ -orElseThrow-æ–¹æ³•" class="headerlink" title="Optional æ—å¢åŠ  orElseThrow æ–¹æ³•"></a>Optional æ—å¢åŠ  orElseThrow æ–¹æ³•</h2><p>è¿™é‡Œè¯´çš„ Optional æ—åŒ…æ‹¬<code>Optional</code>ã€<code>OptionalInt</code>ã€<code>OptionalLong</code>ã€<code>OptionalDouble</code>å‡ ä¸ªå®ç°ã€‚ä»¥å‰æœ‰ä¸€ä¸ª<code>orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)</code>æ–¹æ³•ï¼Œç”¨äºè·å–ä¸åˆ°æ•°æ®æ—¶ï¼ŒæŠ›å‡º<code>exceptionSupplier</code>ä¸­å®šä¹‰çš„å¼‚å¸¸ã€‚</p><p>æˆ‘ä»¬ä¼šå†™æˆï¼š</p><pre><code class="java">Stream.of(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;)    .map(x -&gt; &quot;id: &quot; + x)    .findAny()    .orElseThrow(() -&gt; new NoSuchElementException(&quot;No value present&quot;));</code></pre><p>ä¼˜ç‚¹æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„å¼‚å¸¸ä»¥åŠå¼‚å¸¸ä¿¡æ¯ã€‚æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒå…·ä½“çš„å¼‚å¸¸å’Œå¼‚å¸¸ä¿¡æ¯ï¼Œè¿™ä¸ªæ—¶å€™ Java10 ä¸­çš„æ–°å¢çš„<code>orElseThrow</code>æ–¹æ³•å°±æ´¾ä¸Šç”¨åœºäº†ï¼š</p><pre><code class="java">Stream.of(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;)    .map(x -&gt; &quot;id: &quot; + x)    .findAny()    .orElseThrow();</code></pre><p>æ­¤æ—¶å¦‚æœå…ƒç´ ä¸ºç©ºï¼Œå°†æŠ›å‡º<code>NoSuchElementException</code>å¼‚å¸¸ã€‚</p><h2 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h2><p>Java å½“å¹´åœ¨æ€§èƒ½æ–¹é¢ä¸€ç›´è¢«è¯Ÿç—…ï¼Œä¸­é—´éš”ç€ä¸€å±‚è™šæ‹Ÿæœºï¼Œå®ç°è·¨å¹³å°è¿è¡Œçš„åŠŸèƒ½åŒæ—¶ï¼Œä¹Ÿè‡´ä½¿å…¶æ‰§è¡Œæ€§èƒ½ä¸å¦‚ C è¯­è¨€ã€‚æ‰€ä»¥ï¼ŒJava ä¸€ç›´åœ¨æ€§èƒ½æ–¹é¢æŠ•å…¥å¤§é‡ç²¾åŠ›ã€‚</p><p>æˆ‘ä»¬çœ‹çœ‹ Java10 ä¸­éƒ½æœ‰å“ªäº›ä¼˜åŒ–ç‚¹ã€‚</p><h3 id="G1-å®ç°å¹¶è¡Œ-Full-GC-ç®—æ³•"><a href="#G1-å®ç°å¹¶è¡Œ-Full-GC-ç®—æ³•" class="headerlink" title="G1 å®ç°å¹¶è¡Œ Full GC ç®—æ³•"></a>G1 å®ç°å¹¶è¡Œ Full GC ç®—æ³•</h3><p>ä» Java9 å¼€å§‹ï¼ŒG1 å·²ç»è½¬æ­£ï¼Œæˆä¸ºé»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨ã€‚ä¸è¿‡åœ¨ Full GC æ—¶ï¼ŒG1 è¿˜æ˜¯é‡‡ç”¨çš„å•çº¿ç¨‹ä¸²è¡Œæ ‡è®°å‹ç¼©ç®—æ³•ï¼Œè¿™æ · STW æ—¶é—´ä¼šæ¯”è¾ƒé•¿ã€‚åˆ° Java10ï¼ŒFull GC å®ç°äº†å¹¶è¡Œæ ‡è®°å‹ç¼©ç®—æ³•ï¼Œæ˜æ˜¾ç¼©çŸ­ STW æ—¶é—´ã€‚</p><h3 id="åº”ç”¨ç¨‹åºç±»æ•°æ®å…±äº«ï¼ˆAppCDSï¼‰"><a href="#åº”ç”¨ç¨‹åºç±»æ•°æ®å…±äº«ï¼ˆAppCDSï¼‰" class="headerlink" title="åº”ç”¨ç¨‹åºç±»æ•°æ®å…±äº«ï¼ˆAppCDSï¼‰"></a>åº”ç”¨ç¨‹åºç±»æ•°æ®å…±äº«ï¼ˆAppCDSï¼‰</h3><p>CDSï¼ˆClass-Data Sharingï¼Œç±»æ•°æ®å…±äº«ï¼‰æ˜¯åœ¨ Java5 å¼•å…¥çš„ä¸€ç§ç±»é¢„å¤„ç†æ–¹å¼ï¼Œå¯ä»¥å°†ä¸€ç»„ç±»å…±äº«åˆ°ä¸€ä¸ªå½’æ¡£æ–‡ä»¶ä¸­ï¼Œåœ¨è¿è¡Œæ—¶é€šè¿‡å†…å­˜æ˜ å°„åŠ è½½ç±»ï¼Œè¿™æ ·åšå¯ä»¥å‡å°‘å¯åŠ¨æ—¶é—´ã€‚åŒæ—¶åœ¨å¤šä¸ª JVM ä¹‹é—´å®ç°åŒäº«åŒä¸€ä¸ªå½’æ¡£æ–‡ä»¶ï¼Œå‡å°‘åŠ¨æ€å†…å­˜å ç”¨ã€‚</p><p>ä½†æ˜¯ CDS æœ‰ä¸€ä¸ªé™åˆ¶ï¼Œå°±æ˜¯åªèƒ½æ˜¯ Bootstrap ClassLoader ä½¿ç”¨ï¼Œè¿™æ ·å°±å°†åŠŸèƒ½é™åˆ¶äº†ç±»çš„èŒƒå›´ã€‚åœ¨ Java10 ä¸­ï¼Œå°†è¿™ä¸ªåŠŸèƒ½æ‰©å±•åˆ°äº†ç³»ç»Ÿç±»åŠ è½½å™¨ï¼ˆSystem ClassLoaderï¼Œæˆ–è€…æˆä¸ºåº”ç”¨ç±»åŠ è½½å™¨ï¼ŒApplication ClassLoaderï¼‰ã€å†…ç½®çš„å¹³å°ç±»åŠ è½½å™¨ï¼ˆPlatform ClassLoaderï¼‰ï¼Œæˆ–è€…æ˜¯è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ã€‚è¿™æ ·å°±å°†åŠŸèƒ½æ‰©å±•åˆ°äº†åº”ç”¨ç±»ã€‚</p><p>æƒ³è¦ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½çš„è¯ï¼Œæ€»å…±åˆ†ä¸‰æ­¥ï¼š</p><p><img src="https://static.howardliu.cn/Illustration/BE710605-5206-4D37-8D8C-86E515A6D386.jpg?imageView2/0/q/75%7Cwatermark/2/text/aG93YXJkbGl1LmNuIOeci-WxsQ==/font/5a6L5L2T/fontsize/240/fill/I0IyQjJCMg==/dissolve/60/gravity/South/dx/10/dy/10" alt="æ€»å…±åˆ†ä¸‰æ­¥"></p><ol><li>æ‰“åŒ…<br>æˆ‘ä»¬æŠŠ<code>hello.jar</code>ä¸­çš„<code>HelloWorld</code>ç±»ä½¿ç”¨çš„ç±»æ·»åŠ åˆ°<code>hello.lst</code>ä¸­ï¼š</li></ol><pre><code class="shell">$ java -Xshare:off -XX:+UseAppCDS -XX:DumpLoadedClassList=hello.lst \    -cp hello.jar HelloWorld</code></pre><ol start="2"><li>åˆ›å»º AppCDS å½’æ¡£<br>æ¥ä¸‹æ¥ä½¿ç”¨<code>hello.lst</code>ä¸­çš„å†…å®¹åˆ›å»º AppCDS æ–‡ä»¶<code>hello.jsa</code>ï¼š</li></ol><pre><code class="shell">$ java -Xshare:dump -XX:+UseAppCDS -XX:SharedClassListFile=hello.lst \   -XX:SharedArchiveFile=hello.jsa -cp hello.jar</code></pre><ol start="3"><li>ä½¿ç”¨ AppCDS å½’æ¡£<br>æœ€åæ˜¯ä½¿ç”¨<code>hello.jsa</code>å¯åŠ¨<code>HelloWorld</code>ï¼š</li></ol><pre><code class="shell">$ java -Xshare:on -XX:+UseAppCDS -XX:SharedArchiveFile=hello.jsa \   -cp hello.jar HelloWorld</code></pre><h3 id="åŸºäº-Java-çš„-JIT-ç¼–è¯‘å™¨-Graal"><a href="#åŸºäº-Java-çš„-JIT-ç¼–è¯‘å™¨-Graal" class="headerlink" title="åŸºäº Java çš„ JIT ç¼–è¯‘å™¨ Graal"></a>åŸºäº Java çš„ JIT ç¼–è¯‘å™¨ Graal</h3><p><a href="https://github.com/oracle/graal/" target="_blank" rel="noopener">Graal</a> æ˜¯ä½¿ç”¨ Java ç¼–å†™çš„ä¸ HotSpot JVM é›†æˆçš„åŠ¨æ€ç¼–è¯‘å™¨ï¼Œä¸“æ³¨äºé«˜æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚æ˜¯ä» JDK9 å¼•å…¥çš„å®éªŒæ€§ AOT ç¼–è¯‘å™¨çš„åŸºç¡€ã€‚</p><p>åœ¨ JDK10 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Linux/x64 å¹³å°å°† Graal ä½œä¸º JIT ç¼–è¯‘å™¨ä½¿ç”¨ã€‚å¼€å¯å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code class="shell">-XX:+UnlockExperimentalVMOptions -XX:+UseJVMCICompiler</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ˜¯å®éªŒç‰¹æ€§ï¼Œç›¸å½“äºå…¬æµ‹é˜¶æ®µï¼Œå¯èƒ½åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæ€§èƒ½ä¸å¦‚ç°æœ‰çš„ JIT ç¼–è¯‘å™¨ã€‚</p><h2 id="æ”¯æŒå®¹å™¨"><a href="#æ”¯æŒå®¹å™¨" class="headerlink" title="æ”¯æŒå®¹å™¨"></a>æ”¯æŒå®¹å™¨</h2><p>å®¹å™¨åŒ–æ˜¯ç›®å‰çš„è¶‹åŠ¿ï¼Œåœ¨ä¹‹å‰ï¼Œç”±äº JVM ä¸èƒ½å¤Ÿæ„ŸçŸ¥å®¹å™¨ï¼Œåœ¨åŒä¸€ä¸ªä¸»æœºä¸Šéƒ¨ç½²å¤šä¸ªè™šæ‹Ÿæœºæ—¶ï¼Œä¼šé€ æˆå†…å­˜å ç”¨ã€CPU æŠ¢å ç­‰é—®é¢˜ï¼Œè¿™ç‚¹ä¹Ÿæˆä¸ºäº†å¾ˆå¤šå¤§ä¼šä¸ŠæŠ¨å‡» Java è¯­è¨€ä¸é€‚åˆå®¹å™¨æ—¶ä»£çš„ä¸€ä¸ªç‚¹ã€‚</p><p>ç°åœ¨å¥½äº†ï¼ŒJVM å¯ä»¥æ„ŸçŸ¥å®¹å™¨äº†ã€‚åªæ˜¯æš‚æ—¶è¿˜åªæ”¯æŒ Linux ç³»ç»Ÿï¼ˆso whatï¼Œå…¶ä»–å¹³å°ä¹Ÿè¿˜æ²¡æœ‰ç”¨è¿‡ï¼‰ã€‚è¿™ä¸ªåŠŸèƒ½é»˜è®¤å¼€å¯ï¼Œä¸æƒ³ä½¿ç”¨å¯ä»¥æ‰‹åŠ¨å…³é—­ï¼š</p><pre><code class="shell">-XX:-UseContainerSupport</code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥æ‰‹åŠ¨æŒ‡å®š CPU æ ¸æ•°ï¼š</p><pre><code class="shell">-XX:ActiveProcessorCount=1</code></pre><p>è¿˜æœ‰ä¸‰ä¸ªå¯ä»¥æ§åˆ¶å†…å­˜çš„ä½¿ç”¨é‡ï¼š</p><pre><code class="shell">-XX:InitialRAMPercentage-XX:MaxRAMPercentage-XX:MinRAMPercentage</code></pre><p>å°±ç›®å‰æ¥çœ‹ï¼Œè¿™éƒ¨åˆ†è¿˜å¯ä»¥ç»§ç»­å®Œå–„ï¼Œç›¸ä¿¡åªæ˜¯æ—¶é—´é—®é¢˜ã€‚</p><h2 id="æ ¹è¯ä¹¦è®¤è¯"><a href="#æ ¹è¯ä¹¦è®¤è¯" class="headerlink" title="æ ¹è¯ä¹¦è®¤è¯"></a>æ ¹è¯ä¹¦è®¤è¯</h2><p>è‡ª Java9 èµ·åœ¨ keytool ä¸­åŠ å…¥å‚æ•° -cacertsï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰ JDK ç®¡ç†çš„æ ¹è¯ä¹¦ã€‚è€Œ Java9 ä¸­ cacerts ç›®å½•ä¸ºç©ºï¼Œè¿™æ ·å°±ä¼šç»™å¼€å‘è€…å¸¦æ¥å¾ˆå¤šä¸ä¾¿ã€‚ä» Java10 å¼€å§‹ï¼Œå°†ä¼šåœ¨ JDK ä¸­æä¾›ä¸€å¥—é»˜è®¤çš„ CA æ ¹è¯ä¹¦ã€‚</p><p>ä½œä¸º JDK ä¸€éƒ¨åˆ†çš„ cacerts å¯†é’¥åº“æ—¨åœ¨åŒ…å«ä¸€ç»„èƒ½å¤Ÿç”¨äºåœ¨å„ç§å®‰å…¨åè®®çš„è¯ä¹¦é“¾ä¸­å»ºç«‹ä¿¡ä»»çš„æ ¹è¯ä¹¦ã€‚åœ¨ Java10 ä¹‹å‰ï¼Œcacerts å¯†é’¥åº“æ˜¯ç©ºçš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå…³é”®å®‰å…¨ç»„ä»¶ï¼ˆå¦‚ TLSï¼‰æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œå¼€å‘äººå‘˜éœ€è¦æ‰‹åŠ¨æ·»åŠ ä¸€ç»„æ ¹è¯ä¹¦æ¥ä½¿ç”¨è¿™äº›éªŒè¯ã€‚</p><p>Java10 ä¸­ï¼ŒOracle å¼€æ”¾äº†æ ¹è¯ä¹¦æºç ï¼Œå¯ä»¥è®© OpenJDK æ„å»ºå¯¹å¼€å‘äººå‘˜æ›´æœ‰å¸å¼•åŠ›ï¼Œå¹¶å‡å°‘è¿™äº›æ„å»ºä¸ Oracle JDK æ„å»ºä¹‹é—´çš„å·®å¼‚ã€‚</p><h2 id="å¯ç”¨å’Œåˆ é™¤çš„åŠŸèƒ½"><a href="#å¯ç”¨å’Œåˆ é™¤çš„åŠŸèƒ½" class="headerlink" title="å¯ç”¨å’Œåˆ é™¤çš„åŠŸèƒ½"></a>å¯ç”¨å’Œåˆ é™¤çš„åŠŸèƒ½</h2><p>æœ‰å¢æœ‰å‡ï¼Œè¿™æ ·æ‰èƒ½å¤Ÿä¿è¯ Java çš„ä¸æ—¶å…±è¿›ã€‚</p><h3 id="å‘½ä»¤è¡Œå·¥å…·å’ŒæŸäº›å‚æ•°"><a href="#å‘½ä»¤è¡Œå·¥å…·å’ŒæŸäº›å‚æ•°" class="headerlink" title="å‘½ä»¤è¡Œå·¥å…·å’ŒæŸäº›å‚æ•°"></a>å‘½ä»¤è¡Œå·¥å…·å’ŒæŸäº›å‚æ•°</h3><ul><li>ç§»é™¤<code>javah</code>å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤ç”¨äºåˆ›å»º native æ–¹æ³•æ‰€éœ€çš„ C çš„å¤´æ–‡ä»¶å’Œèµ„æºæ–‡ä»¶çš„ï¼Œä½¿ç”¨<code>javac -h</code>æ›¿ä»£ã€‚</li><li>ç§»é™¤<code>policytool</code>å·¥å…·ï¼Œè¿™ä¸ªå·¥å…·ç”¨äºåˆ›å»ºå’Œç®¡ç†ç­–ç•¥æ–‡ä»¶ã€‚å¯ä»¥ç›´æ¥è¿˜ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ä»£æ›¿ã€‚</li><li>åˆ é™¤<code>java -Xprof</code>å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æœ¬æ¥æ˜¯ç”¨äºè¯„æµ‹æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼Œå¹¶å°†è¯„æµ‹æ•°æ®å‘é€åˆ°æ ‡å‡†è¾“å‡ºã€‚å¯ä»¥ä½¿ç”¨<code>jmap</code>ä»£æ›¿ã€‚</li></ul><h3 id="æŸäº›-API"><a href="#æŸäº›-API" class="headerlink" title="æŸäº› API"></a>æŸäº› API</h3><p><code>java.security.acl</code>åŒ…æ ‡è®°ä¸ºè¿‡æœŸï¼Œæ ‡è®°å‚æ•°<code>forRemoval</code>æ˜¯<code>true</code>ï¼Œå°†åœ¨æœªæ¥ç‰ˆæœ¬ä¸­åˆ é™¤ã€‚ç›®å‰ï¼Œè¿™ä¸ªåŒ…å†…çš„åŠŸèƒ½å·²ç»è¢«<code>java.security.Policy</code>å–ä»£ã€‚<code>java.security</code>åŒ…ä¸­çš„<code>Certificate</code>ã€<code>Identity</code>ã€<code>IdentityScope</code>ã€<code>Signer</code>çš„æ ‡è®°å‚æ•°<code>forRemoval</code>ä¹Ÿæ˜¯<code>true</code>ã€‚è¿™äº›éƒ½å°†åœ¨åç»­ç‰ˆæœ¬ä¸­åˆ é™¤ã€‚</p><h2 id="åŸºäºæ—¶é—´çš„ç‰ˆæœ¬å‘å¸ƒæ¨¡å¼"><a href="#åŸºäºæ—¶é—´çš„ç‰ˆæœ¬å‘å¸ƒæ¨¡å¼" class="headerlink" title="åŸºäºæ—¶é—´çš„ç‰ˆæœ¬å‘å¸ƒæ¨¡å¼"></a>åŸºäºæ—¶é—´çš„ç‰ˆæœ¬å‘å¸ƒæ¨¡å¼</h2><p>ä» Java10 å¼€å§‹ï¼ŒJava æ­£å¼è¿›å…¥æ¯åŠå¹´ä¸€ä¸ªç‰ˆæœ¬çš„æ›´æ–°èŠ‚å¥ï¼Œä¸»è¦æ”¹åŠ¨å¦‚ä¸‹ï¼š</p><ol><li>æ¯ 6 ä¸ªæœˆå‘å¸ƒä¸€ç»„æ–°ç‰¹æ€§ï¼›</li><li>é•¿æœŸæ”¯æŒç‰ˆï¼ˆLTSï¼‰å°†æ”¯æŒ 3 å¹´ï¼Œå…¶ä»–ç‰ˆæœ¬æ”¯æŒ 6 ä¸ªæœˆï¼›</li><li>Java11ã€Java17 æ˜¯é•¿æœŸæ”¯æŒç‰ˆï¼›</li><li>é‡‡ç”¨<code>$FEATURE.$INTERIM.$UPDATE.$PATCH</code>å‘½åæœºåˆ¶ï¼š<code>$FEATURE</code>ï¼Œæ¯æ¬¡ç‰ˆæœ¬å‘å¸ƒåŠ  1ï¼Œä¸è€ƒè™‘å…·ä½“çš„ç‰ˆæœ¬å†…å®¹ï¼›<code>$INTERIM</code>ï¼Œä¸­é—´ç‰ˆæœ¬å·ï¼Œåœ¨å¤§ç‰ˆæœ¬ä¸­é—´å‘å¸ƒçš„ï¼ŒåŒ…å«é—®é¢˜ä¿®å¤å’Œå¢å¼ºçš„ç‰ˆæœ¬ï¼Œä¸ä¼šå¼•å…¥éå…¼å®¹æ€§ä¿®æ”¹ï¼›<code>$PATCH</code>ç”¨äºå¿«é€Ÿæ‰“è¡¥ä¸çš„ã€‚</li></ol><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java10 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä»<a href="https://openjdk.java.net/projects/jdk/10/" target="_blank" rel="noopener">https://openjdk.java.net/projects/jdk/10/</a>æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-10-features/">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava10 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/122225794" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava10 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      ä» Java10 å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ­£å¼è¿›å…¥æ¯åŠå¹´ä¸€ä¸ªç‰ˆæœ¬çš„æ›´æ–°èŠ‚å¥ï¼Œæ›´æ–°é¢‘ç‡åŠ å¿«ï¼Œå°æ­¥å¿«è·‘ã€‚åœ¨ Java10 ä¸­å¢åŠ äº†å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ã€ä¸å¯å˜é›†åˆã€Optionalå¢å¼ºã€G1 å®ç°å¹¶è¡Œ Full GC ç®—æ³•ã€æ”¯æŒå®¹å™¨ã€æ ¹è¯ä¹¦è®¤è¯ç­‰ç‰¹æ€§ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java10" scheme="https://www.howardliu.cn/tags/Java10/"/>
    
  </entry>
  
  <entry>
    <title>Mybatis-Plus ç‰ˆæœ¬å†²çªè§¦å‘â€œCould not convert argument value of type [java.lang.String] to required type [java.lang.Class]â€çš„ java.lang.NoClassDefFoundError å¼‚å¸¸</title>
    <link href="https://www.howardliu.cn/mybatis-plus-conflict-noclassdeffounderror/"/>
    <id>https://www.howardliu.cn/mybatis-plus-conflict-noclassdeffounderror/</id>
    <published>2021-12-25T03:51:38.000Z</published>
    <updated>2021-12-25T03:51:38.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/dog-2963062_1920.jpg" alt="Mybatis-Plus ç‰ˆæœ¬å†²çªè§¦å‘â€œCould not convert argument value of type [java.lang.String] to required type [java.lang.Class]â€çš„ java.lang.NoClassDefFoundError å¼‚å¸¸"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>ä»Šå¤©é¡¹ç›®ä¾èµ–äº†ä¸€ä¸ªåŸºç¡€ç»„ä»¶ä¹‹åï¼Œå¯åŠ¨å¤±è´¥ï¼Œæ’æŸ¥è¿‡ç¨‹èµ°äº†ä¸€äº›å¼¯è·¯ï¼Œæœ€ç»ˆç¡®è®¤æ˜¯å› ä¸ºä¾èµ–ç»„ä»¶ç‰ˆæœ¬å†²çªé€ æˆäº†<code>java.lang.NoClassDefFoundError</code>å¼‚å¸¸ã€‚ä¸‹é¢æ˜¯æ’æŸ¥è¿‡ç¨‹ï¼Œå¸Œæœ›å¯ä»¥ç»™ä½ æä¾›ä¸€äº›æ€è·¯ã€‚</p><a id="more"></a><h2 id="è§‚å¯Ÿå¼‚å¸¸æ ˆ"><a href="#è§‚å¯Ÿå¼‚å¸¸æ ˆ" class="headerlink" title="è§‚å¯Ÿå¼‚å¸¸æ ˆ"></a>è§‚å¯Ÿå¼‚å¸¸æ ˆ</h2><p>ä¸‹é¢æ˜¯æ‰“å°çš„å¼‚å¸¸æ ˆä¿¡æ¯ï¼Œä»å…¶ä¸­æç‚¼å¯èƒ½çš„å…³é”®ä¿¡æ¯ï¼Œèƒ½å¤Ÿæ‰¾åˆ°â€œCould not convert argument value of type [java.lang.String] to required type [java.lang.Class]â€ï¼Œè¿˜æœ‰â€œUnresolvable class definition for class [cn.howardliu.demo.AddressMapper]â€ã€‚ç»§ç»­ä»å¼‚å¸¸æ ˆä¸­æ‰¾ä¸€ä¸‹å‘ç”Ÿçš„æ—¶æœºï¼Œå¯ä»¥å‘ç°æ˜¯è°ƒç”¨<code>AbstractAutowireCapableBeanFactory.createBeanInstance</code>æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åˆ›å»º Bean å®ä¾‹ã€‚</p><pre><code class="log">è¿™å—æ˜¯å¼‚å¸¸ä¿¡æ¯ï¼ˆgetMessage çš„å†…å®¹ï¼Œæ¨ªå‘å¤ªé•¿ï¼Œæ‰‹åŠ¨æ¢è¡Œäº†ï¼‰ï¼šorg.springframework.beans.factory.UnsatisfiedDependencyException:    Error creating bean with name &#39;methodValidationPostProcessor&#39; defined in class path resource [org/springframework/boot/autoconfigure/validation/ValidationAutoConfiguration.class]:    Unsatisfied dependency expressed through method &#39;methodValidationPostProcessor&#39; parameter 0;    nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException:    Error creating bean with name &#39;addressMapper&#39; defined in file [/Users/liuxinghao/Documents/work/code/cn.howardliu/effective-spring/target/classes/cn/howardliu/demo/AddressMapper.class]:    Unsatisfied dependency expressed through constructor parameter 0:    Could not convert argument value of type [java.lang.String] to required type [java.lang.Class]:    Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Class&#39;;    nested exception is java.lang.IllegalArgumentException:     Unresolvable class definition for class [cn.howardliu.demo.AddressMapper]ä¸‹é¢æ˜¯å¼‚å¸¸æ ˆï¼š    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:799) ~[spring-beans-5.2.13.RELEASE.jar:5.2.13.RELEASE]    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:540) ~[spring-beans-5.2.13.RELEASE.jar:5.2.13.RELEASE]    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1341) ~[spring-beans-5.2.13.RELEASE.jar:5.2.13.RELEASE]    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1181) ~[spring-beans-5.2.13.RELEASE.jar:5.2.13.RELEASE]    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:556) ~[spring-beans-5.2.13.RELEASE.jar:5.2.13.RELEASE]    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:516) ~[spring-beans-5.2.13.RELEASE.jar:5.2.13.RELEASE]    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:324) ~[spring-beans-5.2.13.RELEASE.jar:5.2.13.RELEASE]    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.2.13.RELEASE.jar:5.2.13.RELEASE]    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322) ~[spring-beans-5.2.13.RELEASE.jar:5.2.13.RELEASE]    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207) ~[spring-beans-5.2.13.RELEASE.jar:5.2.13.RELEASE]å…¶ä»–å¼‚å¸¸æ ˆä¿¡æ¯å¯ä»¥å¿½ç•¥äº†</code></pre><p>æˆ‘ä»¬å¯ä»¥æ ¹æ®ç›®å‰æœ‰æ•ˆçš„ä¿¡æ¯è¿›è¡Œæ’æŸ¥ï¼Œé¦–å…ˆçœ‹ä¸‹æˆ‘ä»¬çš„<code>cn.howardliu.demo.AddressMapper</code>å®šä¹‰æ˜¯å¦æœ‰é—®é¢˜ï¼Œå†çœ‹çœ‹ä¾èµ–å®ƒçš„ Service æœ‰æ²¡æœ‰é—®é¢˜ï¼Œä»€ä¹ˆé—®é¢˜ä¹Ÿæ²¡æœ‰å‘ç°ã€‚ä¸‹ä¸€ä¸ªæ£€æŸ¥ç‚¹æ˜¯é…ç½®ï¼Œæ¯”å¦‚<code>@MapperScan</code>æ˜¯å¦æ­£ç¡®ã€Mapper ç±»ä¸Šæœ‰æ²¡æœ‰åŠ ä¸Š<code>@Mapper</code>æ³¨è§£ï¼Œå‘ç°ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚</p><p>ä»å¼‚å¸¸ä¿¡æ¯æ‰¾ä¸åˆ°æ€è·¯äº†ï¼Œåªèƒ½ä»ä»£ç å…¥æ‰‹äº†ã€‚</p><blockquote><p>è¿™é‡Œéœ€è¦è¯´ä¸€ä¸‹ï¼Œæ‰“å°å¼‚å¸¸ä¿¡æ¯è‡³å…³é‡è¦ï¼Œç›´æ¥å½±å“æˆ‘ä»¬æ’é”™çš„æ€è·¯ã€‚å¦‚æœæ‰“å°çš„ä¿¡æ¯æ²¡æœ‰åŠæ³•å‡†ç¡®å®šä½ï¼Œæˆ‘ä»¬å°†ä¼šèŠ±è´¹å¤§é‡çš„æ—¶é—´æŸ¥æ‰¾çœŸæ­£çš„é”™è¯¯ï¼Œè¿™å°±éœ€è¦èµ°æŸ¥ä»£ç ï¼Œæœ‰æ—¶å€™è¿˜éœ€è¦ä¸€äº›ç»éªŒã€‚</p></blockquote><h2 id="å®šä½é—®é¢˜"><a href="#å®šä½é—®é¢˜" class="headerlink" title="å®šä½é—®é¢˜"></a>å®šä½é—®é¢˜</h2><p>æˆ‘ä»¬ç”±å¼‚å¸¸æ ˆ<code>ConstructorResolver.createArgumentArray(ConstructorResolver.java:799)</code>å…¥æ‰‹ï¼Œè·Ÿç€æ–­ç‚¹å¾€ä¸‹è¿½ï¼Œæœ€ç»ˆä¼šè¿½åˆ°<code>org.springframework.util.ClassUtils#forName</code>æ–¹æ³•ï¼Œå…¶ä¸­ä¼šæŠ›å‡ºå¼‚å¸¸çš„ä»£ç æ˜¯ä¸‹é¢è¿™å—ï¼š</p><pre><code class="java">try {    return Class.forName(name, false, clToUse);}catch (ClassNotFoundException ex) {    int lastDotIndex = name.lastIndexOf(PACKAGE_SEPARATOR);    if (lastDotIndex != -1) {        String innerClassName =                name.substring(0, lastDotIndex) + INNER_CLASS_SEPARATOR + name.substring(lastDotIndex + 1);        try {            return Class.forName(innerClassName, false, clToUse);        }        catch (ClassNotFoundException ex2) {            // Swallow - let original exception get through        }    }    throw ex;}</code></pre><p>å‡ºç°é”™è¯¯çš„æ˜¯<code>Class.forName(name, false, clToUse)</code>è¿™å¥ï¼Œ<code>name</code>ä¼ çš„æ˜¯â€cn.howardliu.demo.AddressMapperâ€å­—ç¬¦ä¸²ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸æ˜¯<code>java.lang.NoClassDefFoundError</code>ï¼Œç”±äºä¸æ˜¯<code>ClassNotFoundException</code>å¼‚å¸¸ï¼Œä¸ä¼šè¿›å…¥<code>catch</code>é€»è¾‘ï¼Œä¼šç›´æ¥å‘ä¸ŠæŠ›å‡ºã€‚</p><p>æ‰¾åˆ°é”™è¯¯æˆ‘ä»¬å°±å¥½å®šä½é—®é¢˜äº†ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œ<code>java.lang.NoClassDefFoundError</code>é”™è¯¯æ˜¯éœ€è¦åŠ è½½çš„ç±»èƒ½å¤Ÿæ‰¾åˆ°ï¼Œä½†æ˜¯åŠ è½½æ—¶å‡ºç°äº†å¼‚å¸¸ï¼Œç®€å•è¯´å°±æ˜¯ï¼Œç±»çš„å®šä¹‰æœ‰é—®é¢˜ã€‚æˆ‘ä»¬å€ŸåŠ© JD-GUI åç¼–è¯‘ä¸€ä¸‹è¿è¡Œ jar åŒ…ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><pre><code class="java">import com.baomidou.mybatisplus.core.mapper.BaseMapper;import cn.howardliu.demo.Address;import org.apache.ibatis.annotations.Mapper;@Mapperpublic interface AddressMapper extends BaseMapper&lt;Address&gt; {}</code></pre><p>è§‚å¯Ÿä»”ç»†çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>import com.baomidou.mybatisplus.core.mapper.BaseMapper;</code>è¿™è¡Œæ²¡æœ‰ä¸‹åˆ’çº¿ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åç¼–è¯‘å·¥å…·ä¸­è¿½æº¯ä¸åˆ°è¿™ä¸ªæ¥å£ï¼Œæ¨æ–­å‡ºæ¥å°±æ˜¯åœ¨è¿è¡Œç¯å¢ƒä¸­ï¼Œæ‰¾ä¸åˆ°<code>BaseMapper</code>è¿™ä¸ªç±»å®šä¹‰ã€‚</p><p>æ‰€ä»¥ï¼Œå½“<code>Class.forName</code>åŠ è½½ç±»çš„æ—¶å€™æŠ›å‡ºäº†<code>java.lang.NoClassDefFoundError</code>å¼‚å¸¸ã€‚</p><h2 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h2><p>å¦‚æœæœ‰ä¸€å®šç»éªŒï¼Œå°±ä¼šç«‹åˆ»æƒ³åˆ°ï¼Œå¤§æ¦‚ç‡å‡ºç°äº†ä¾èµ– jar çš„ç‰ˆæœ¬å†²çªã€‚</p><p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ© maven å‘½ä»¤è¡Œæ‰¾åˆ°ç‰ˆæœ¬å†²çªçš„ä¾èµ–ï¼š</p><pre><code class="shell">mvn dependency:tree -Dverbose | grep conflict</code></pre><p>æ‰“å°ç»“æœä¸ºï¼š</p><pre><code class="log">[INFO] |  +- (com.baomidou:mybatis-plus:jar:3.1.2:compile - omitted for conflict with 2.1.6)</code></pre><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å€ŸåŠ© IDEA çš„å¯è§†åŒ–å·¥å…·ï¼Œåœ¨ pom.xml ä¸Šæ‰“å¼€ä¾èµ–å›¾ï¼š</p><p><img src="https://static.howardliu.cn/java/EF543BDC-9C35-43CF-A181_20211225114104.png" alt="ä¾èµ–å›¾"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° mybatis-plus çš„çº¢çº¿æŒ‡ç¤ºå‡ºå†²çªä¿¡æ¯ï¼š</p><p><img src="https://static.howardliu.cn/java/F0C16C09-7C27-4D34-99F9-B73B665EF0A3_20211225114132.png" alt="å†²çªä¿¡æ¯"></p><p>ç»“è®ºå°±æ˜¯ Mybatis-Plus ç‰ˆæœ¬å†²çªäº†ï¼Œé¡¹ç›®ä¸­ä¾èµ–äº† mybatis-plus çš„ 2.1.6 å’Œ 3.1.2 ä¸¤ä¸ªç‰ˆæœ¬ï¼Œç”±äº 2.1.6 è·¯å¾„æ›´çŸ­ï¼Œæœ€ç»ˆè¢«é€‰ä¸­ã€‚</p><p>æ­¤æ—¶åªéœ€è¦å°†ä½ç‰ˆæœ¬çš„ä¾èµ–å»æ‰å³å¯ã€‚</p><h2 id="å¤ç›˜é—®é¢˜"><a href="#å¤ç›˜é—®é¢˜" class="headerlink" title="å¤ç›˜é—®é¢˜"></a>å¤ç›˜é—®é¢˜</h2><h3 id="mybatis-plus-çš„ç‰ˆæœ¬é—®é¢˜"><a href="#mybatis-plus-çš„ç‰ˆæœ¬é—®é¢˜" class="headerlink" title="mybatis-plus çš„ç‰ˆæœ¬é—®é¢˜"></a>mybatis-plus çš„ç‰ˆæœ¬é—®é¢˜</h3><p>ä¸ºä»€ä¹ˆä½ç‰ˆæœ¬çš„ mybatis-plus ä¼šé€ æˆç±»åŠ è½½å¤±è´¥å‘¢ï¼Ÿæ˜¯å› ä¸º mybatis-plus è·¨ç‰ˆæœ¬æ›´æ–°æ—¶ï¼ŒæŠŠ<code>BaseMapper</code>çš„åŒ…è·¯å¾„æ”¹äº†ï¼š</p><pre><code class="java">// 3.1.2 ç‰ˆæœ¬import com.baomidou.mybatisplus.core.mapper.BaseMapper;// 2.1.6 ç‰ˆæœ¬import com.baomidou.mybatisplus.mapper.BaseMapper;</code></pre><p>è€Œä¸”è¿˜ä¸æ­¢è¿™ä¸€ä¸ªï¼Œ<code>IService</code>ã€<code>ServiceImpl</code>ã€<code>TableName</code>ã€<code>TableField</code>ã€<code>Model</code>ã€<code>TableField</code>ç­‰ç­‰ï¼Œå¾ˆå¤šå¸¸ç”¨çš„ç±»éƒ½æ”¹äº†ä½ç½®ã€‚æ‰€ä»¥ä¼šé€ æˆæ‰¾ä¸åˆ°ä¾èµ–çš„ç±»ã€‚ç¼–è¯‘æ˜¯ 3.1.2 ä¾èµ–è¿˜åœ¨è¿è¡Œç¯å¢ƒä¸­ï¼Œå°±ä¼šå‡ºç°ç¼–è¯‘æ²¡æœ‰é—®é¢˜ï¼Œæ‰§è¡Œæ—¶å‡ºç°åŠ è½½ç±»å¼‚å¸¸ã€‚</p><p>æƒ³è¦å·¥ç¨‹åŒ–çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºåŸºç¡€çš„ä¾èµ– bom é…ç½®ï¼Œå®šä¹‰å¥½åŸºç¡€ä¾èµ–åŒ…ï¼Œåœ¨é¡¹ç›®ä¸­ä¸åœ¨æŒ‡å®šç‰ˆæœ¬ã€‚è¿™æ ·åšåˆ°ç»Ÿä¸€ç‰ˆæœ¬ï¼Œå¯ä»¥æœ‰æ•ˆåœ°é¿å…è¿™ç±»é—®é¢˜ã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ CI/CD ä¸­åŠ å…¥å†²çªä¾èµ–æ£€æŸ¥ï¼Œå¦‚æœå‘ç°å†²çªä¾èµ–ï¼Œå°±ç»ˆæ­¢æµæ°´çº¿ã€‚</p><h3 id="çœŸå®å¼‚å¸¸è¢«éšè—é—®é¢˜"><a href="#çœŸå®å¼‚å¸¸è¢«éšè—é—®é¢˜" class="headerlink" title="çœŸå®å¼‚å¸¸è¢«éšè—é—®é¢˜"></a>çœŸå®å¼‚å¸¸è¢«éšè—é—®é¢˜</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹ä¸ºä»€ä¹ˆæ˜æ˜æ˜¯<code>java.lang.NoClassDefFoundError</code>å¼‚å¸¸ï¼Œç»“æœå¼‚å¸¸æ ˆä¸­æ‰“å°çš„æ˜¯ä¸€å †ä¸ç›¸å¹²çš„é”™è¯¯ã€‚ç»§ç»­è·Ÿç€åˆšæ‰çš„æ–­ç‚¹ Debugï¼š</p><p><code>org.springframework.util.ClassUtils#resolveClassName</code>ä¼šæ•æ‰<code>LinkageError</code>é”™è¯¯ï¼Œç„¶ååŒ…è£…æˆ<code>IllegalArgumentException</code>å¼‚å¸¸ï¼Œè¿™ä¸ªæ—¶å€™çœŸæ˜¯å¼‚å¸¸è¿˜æ˜¯ç»§ç»­ä¸ŠæŠ›ã€‚</p><p>ç„¶ååœ¨<code>org.springframework.beans.TypeConverterSupport#convertIfNecessary</code>æ–¹æ³•ä¼šåŒ…è£…æˆ<code>TypeMismatchException</code>å¼‚å¸¸ï¼Œæ­¤æ—¶ï¼ŒçœŸå®å¼‚å¸¸è¿˜åœ¨å¼‚å¸¸<code>cause</code>å‚æ•°ä¸­ï¼Œå¹¶æ²¡æœ‰ä¸¢å¤±ã€‚</p><p>ç­‰å›åˆ°<code>org.springframework.beans.factory.support.ConstructorResolver#createArgumentArray</code>æ–¹æ³•åï¼Œæ•æ‰å¼‚å¸¸çš„æ–¹æ³•æ˜¯ï¼š</p><pre><code class="java">try {    convertedValue = converter.convertIfNecessary(originalValue, paramType, methodParam);}catch (TypeMismatchException ex) {    throw new UnsatisfiedDependencyException(            mbd.getResourceDescription(), beanName, new InjectionPoint(methodParam),            &quot;Could not convert argument value of type [&quot; +                    ObjectUtils.nullSafeClassName(valueHolder.getValue()) +                    &quot;] to required type [&quot; + paramType.getName() + &quot;]: &quot; + ex.getMessage());}</code></pre><p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼Œåœ¨åŒ…è£…æˆ<code>UnsatisfiedDependencyException</code>å¼‚å¸¸çš„æ—¶å€™ï¼Œåªæ˜¯æŠŠæ•æ‰åˆ°çš„<code>TypeMismatchException</code>é€šè¿‡<code>getMessage</code>æ–¹æ³•è¿½åŠ åœ¨å¼‚å¸¸æè¿°åé¢ï¼Œæ­¤æ—¶ç»è¿‡å‰é¢å‡ è½®çš„åŒ…è£…å†åŒ…è£…ï¼ŒçœŸå®çš„å¼‚å¸¸çš„å¼‚å¸¸ä¿¡æ¯ä»…å‰©<code>Unresolvable class definition for class [cn.howardliu.demo.AddressMapper]</code>è¿™æ®µç»è¿‡å¤„ç†çš„ä¿¡æ¯ï¼Œå®Œå…¨æ²¡æœ‰<code>java.lang.NoClassDefFoundError</code>çš„å½±å­äº†ã€‚</p><p>è‡³æ­¤ï¼ŒçœŸå®å¼‚å¸¸æ¶ˆå¤±æ— è¸ªã€‚</p><p>è¿™ä¹Ÿç»™æˆ‘ä»¬ä¸€ä¸ªæé†’ï¼Œæˆ‘ä»¬è¦ä¿è¯å¼‚å¸¸çš„æ—¶å€™ï¼Œä¸€å®šè¦ä¿ç•™æœ‰æ•ˆä¿¡æ¯ï¼Œå¦åˆ™ï¼Œæ’é”™ä¼šéå¸¸éº»çƒ¦ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡æ˜¯æŠ“è™«æ–‡ï¼Œä»é—®é¢˜å‡ºå‘ï¼Œåˆ°è§£å†³é—®é¢˜ï¼Œç»™å‡ºå®Œæ•´çš„æ€è·¯ã€‚<code>java.lang.NoClassDefFoundError</code>ä¸€èˆ¬éƒ½æ˜¯å‡ºç°åœ¨ç‰ˆæœ¬å†²çªçš„æ—¶å€™ï¼Œè¿™ç§å¼‚å¸¸æ˜¯ç¼–è¯‘æ‰“åŒ…æ²¡æœ‰é—®é¢˜ï¼Œåœ¨è¿è¡Œæ—¶åŠ è½½ç±»å¤±è´¥ã€‚åœ¨æœ¬æ–‡ä¸­ä¹‹æ‰€ä»¥æ’æŸ¥æ—¶èµ°äº†ä¸€äº›å¼¯è·¯ï¼Œæ˜¯å› ä¸º<code>Spring</code>éšè—äº†çœŸå®å¼‚å¸¸ï¼Œç»™æˆ‘ä»¬æ’é”™é€ æˆäº†ä¸€äº›é˜»ç¢ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘æ—¶ä¹Ÿè¦é‡è§†å¼‚å¸¸çš„æ˜ç¡®ä¿¡æ¯ï¼Œå¯ä»¥ç»™æˆ‘ä»¬æ’é”™æä¾›å‡†ç¡®çš„ç›®æ ‡ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/mybatis-plus-conflict-noclassdeffounderror/">Mybatis-Plus ç‰ˆæœ¬å†²çªè§¦å‘â€œCould not convert argument value of type [java.lang.String] to required type [java.lang.Class]â€çš„ java.lang.NoClassDefFoundError å¼‚å¸¸</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/122203746" target="_blank" rel="noopener">Mybatis-Plus ç‰ˆæœ¬å†²çªè§¦å‘â€œCould not convert argument value of type [java.lang.String] to required type [java.lang.Class]â€çš„ java.lang.NoClassDefFoundError å¼‚å¸¸</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      ä»Šå¤©é¡¹ç›®ä¾èµ–äº†ä¸€ä¸ªåŸºç¡€ç»„ä»¶ä¹‹åï¼Œå¯åŠ¨å¤±è´¥ï¼Œæ’æŸ¥è¿‡ç¨‹èµ°äº†ä¸€äº›å¼¯è·¯ï¼Œæœ€ç»ˆç¡®è®¤æ˜¯å› ä¸ºä¾èµ–ç»„ä»¶ç‰ˆæœ¬å†²çªé€ æˆäº†`java.lang.NoClassDefFoundError`å¼‚å¸¸ã€‚ä¸‹é¢æ˜¯æ’æŸ¥è¿‡ç¨‹ï¼Œå¸Œæœ›å¯ä»¥ç»™ä½ æä¾›ä¸€äº›æ€è·¯ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="NoClassDefFoundError" scheme="https://www.howardliu.cn/tags/NoClassDefFoundError/"/>
    
      <category term="Mybatis-Plus" scheme="https://www.howardliu.cn/tags/Mybatis-Plus/"/>
    
  </entry>
  
</feed>
