<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ²‰æ½œé£åŠ¨</title>
  
  <subtitle>å›å­è—å™¨äºèº«ï¼Œå¾…æ—¶è€ŒåŠ¨ã€‚</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.howardliu.cn/"/>
  <updated>2025-01-12T13:24:34.000Z</updated>
  <id>https://www.howardliu.cn/</id>
  
  <author>
    <name>Howard Liu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼å®ç”¨æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šå…ƒå­—ç¬¦åŠå…³ç³»è¿ç®—</title>
    <link href="https://www.howardliu.cn/regular-expressions-java-1/"/>
    <id>https://www.howardliu.cn/regular-expressions-java-1/</id>
    <published>2025-01-12T13:24:34.000Z</published>
    <updated>2025-01-12T13:24:34.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/20250112211712351.jpg" alt="æ­£åˆ™è¡¨è¾¾å¼å®ç”¨æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šå…ƒå­—ç¬¦åŠå…³ç³»è¿ç®—"></p><blockquote><p> æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯Javaå˜æˆä¸­ä¸€æŠŠåˆ©å™¨ï¼Œå¸¸å‡ºç°åœ¨æ–‡æœ¬æ£€æŸ¥ã€æ›¿æ¢ç­‰é€»è¾‘ä¸­ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ Java æ­£åˆ™è¡¨è¾¾å¼ APIï¼Œå¹¶ç ”ç©¶å¦‚ä½•åœ¨ Java ç¼–ç¨‹è¯­è¨€ä¸­è¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><a id="more"></a><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼çš„é¢†åŸŸä¸­ï¼Œå­˜åœ¨å¤šç§ä¸åŒçš„â€œé£æ ¼â€å¯ä¾›é€‰æ‹©ï¼Œä¾‹å¦‚ grepã€Perlã€Pythonã€PHPã€awk ç­‰ç­‰ã€‚è¿™å°±æ„å‘³ç€ï¼Œåœ¨ä¸€ç§ç¼–ç¨‹è¯­è¨€ä¸­æœ‰æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨å¦ä¸€ç§è¯­è¨€ä¸­å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚Java ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ä¸ Perl ä¸­çš„æœ€ä¸ºç›¸ä¼¼ã€‚</p><h2 id="ä¸€ã€ç®€ä»‹"><a href="#ä¸€ã€ç®€ä»‹" class="headerlink" title="ä¸€ã€ç®€ä»‹"></a>ä¸€ã€ç®€ä»‹</h2><p>åœ¨ Java ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ— éœ€è¿›è¡Œç‰¹æ®Šçš„è®¾ç½®ï¼ŒJDK åŒ…å«äº†ä¸€ä¸ªä¸“é—¨ç”¨äºæ­£åˆ™æ“ä½œçš„åŒ…<code>java.util.regex</code>ï¼Œæˆ‘ä»¬åªéœ€åœ¨ä»£ç ä¸­å¯¼å…¥è¯¥åŒ…å³å¯ã€‚æ­¤å¤–ï¼Œ<code>java.lang.String</code>ç±»ä¹Ÿå†…ç½®äº†å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„æ”¯æŒï¼Œè¿™åœ¨æ—¥å¸¸ç¼–ç ä¸­ç»å¸¸ä¼šç”¨åˆ°ã€‚</p><p><code>java.util.regex</code>åŒ…ä¸»è¦ç”±ä¸‰ä¸ªç±»ç»„æˆï¼š<code>Pattern</code>ã€<code>Matcher</code>å’Œ<code>PatternSyntaxException</code>ã€‚</p><ul><li><code>Pattern</code>æ˜¯ç»è¿‡ç¼–è¯‘çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚<code>Pattern</code>ç±»æ²¡æœ‰æä¾›å…¬å…±çš„æ„é€ å‡½æ•°ï¼Œè¦åˆ›å»ºä¸€ä¸ª<code>Pattern</code>å¯¹è±¡ï¼Œå¿…é¡»å…ˆè°ƒç”¨å…¶å…¬å…±çš„é™æ€<code>compile</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª<code>Pattern</code>å¯¹è±¡ï¼Œå…¶ç¬¬ä¸€ä¸ªå‚æ•°å³ä¸ºè¦ç¼–è¯‘çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</li><li><code>Matcher</code>ç”¨äºè§£é‡Šæ¨¡å¼ï¼Œå¹¶é’ˆå¯¹è¾“å…¥å­—ç¬¦ä¸²æ‰§è¡ŒåŒ¹é…æ“ä½œã€‚å®ƒåŒæ ·æ²¡æœ‰å…¬å…±æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨<code>Pattern</code>å¯¹è±¡ä¸Šè°ƒç”¨<code>matcher</code>æ–¹æ³•ï¼Œå¹¶ä¼ å…¥è¦æ£€æŸ¥åŒ¹é…çš„æ–‡æœ¬ï¼Œä»è€Œè·å¾—ä¸€ä¸ª<code>Matcher</code>å¯¹è±¡ã€‚</li><li><code>PatternSyntaxException</code>æ˜¯ä¸€ä¸ªéå—æ£€å¼‚å¸¸ï¼Œç”¨äºæŒ‡ç¤ºæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­çš„è¯­æ³•é”™è¯¯ã€‚</li></ul><p>æˆ‘ä»¬å°†è¯¦ç»†æ¢ç©¶è¿™äº›ç±»ï¼Œä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£å¦‚ä½•åœ¨ Java ä¸­æ„å»ºæ­£åˆ™è¡¨è¾¾å¼ã€‚å¦‚æœæˆ‘ä»¬å·²ç»ç†Ÿæ‚‰å…¶ä»–ç¯å¢ƒä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯èƒ½ä¼šå‘ç°ä¸€äº›ç»†å¾®çš„å·®å¼‚ï¼Œä½†æ€»ä½“æ¥è¯´åŒºåˆ«ä¸å¤§ã€‚</p><h2 id="äºŒã€ç®€å•ç¤ºä¾‹"><a href="#äºŒã€ç®€å•ç¤ºä¾‹" class="headerlink" title="äºŒã€ç®€å•ç¤ºä¾‹"></a>äºŒã€ç®€å•ç¤ºä¾‹</h2><p>è®©æˆ‘ä»¬ä»æ­£åˆ™è¡¨è¾¾å¼çš„ä¸€ä¸ªæœ€ç®€å•ç”¨ä¾‹å¼€å§‹ã€‚å½“å°†æ­£åˆ™è¡¨è¾¾å¼åº”ç”¨äºå­—ç¬¦ä¸²æ—¶ï¼Œå®ƒå¯èƒ½åŒ¹é…é›¶æ¬¡æˆ–å¤šæ¬¡ï¼Œ<code>java.util.regex</code>APIæ”¯æŒçš„æœ€åŸºæœ¬çš„æ¨¡å¼åŒ¹é…å½¢å¼æ˜¯å­—ç¬¦ä¸²å­—é¢é‡çš„åŒ¹é…ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæ­£åˆ™è¡¨è¾¾å¼ä¸ºâ€œfooâ€ï¼Œè¾“å…¥å­—ç¬¦ä¸²ä¹Ÿæ˜¯â€œfooâ€ï¼Œé‚£ä¹ˆåŒ¹é…å°†æˆåŠŸï¼Œå› ä¸ºè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²å®Œå…¨ç›¸åŒï¼š</p><pre><code class="java">Pattern pattern = Pattern.compile(&quot;foo&quot;);Matcher matcher = pattern.matcher(&quot;foo&quot;);assertTrue(matcher.find());</code></pre><p>æˆ‘ä»¬é¦–å…ˆé€šè¿‡è°ƒç”¨<code>Pattern</code>ç±»çš„<code>compile</code>æ–¹æ³•ï¼Œå¹¶ä¼ å…¥æ‰€éœ€çš„æ­£åˆ™è¡¨è¾¾å¼åˆ›å»ºä¸€ä¸ª<code>Pattern</code>å¯¹è±¡ã€‚ç„¶åï¼Œé€šè¿‡è°ƒç”¨<code>matcher</code>æ–¹æ³•ï¼Œå¹¶ä¼ å…¥è¦æ£€æŸ¥åŒ¹é…çš„æ–‡æœ¬ï¼Œåˆ›å»ºä¸€ä¸ª Matcher å¯¹è±¡ã€‚æœ€åï¼Œè°ƒç”¨<code>find</code>æ–¹æ³•ã€‚<code>find</code>æ–¹æ³•ä¼šåœ¨è¾“å…¥æ–‡æœ¬ä¸­ä¸æ–­å‰è¿›ï¼Œæ¯æ¬¡æ‰¾åˆ°åŒ¹é…é¡¹æ—¶è¿”å›<code>true</code>ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å®ƒæ¥è®¡ç®—åŒ¹é…çš„æ¬¡æ•°ï¼š</p><pre><code class="java">Pattern pattern = Pattern.compile(&quot;foo&quot;);Matcher matcher = pattern.matcher(&quot;foofoo&quot;);int matches = 0;while (matcher.find()) {    matches++;}assertEquals(matches, 2);</code></pre><p>åç»­æˆ‘ä»¬ä¼šé‡å¤ä½¿ç”¨è¿™ä¸ªé€»è¾‘ï¼Œå¯ä»¥å°†æŸ¥æ‰¾åŒ¹é…æ¬¡æ•°çš„é€»è¾‘æŠ½è±¡åˆ°ä¸€ä¸ªåä¸º<code>runTest</code>çš„æ–¹æ³•ï¼š</p><pre><code class="java">public static int runTest(String regex, String text) {    Pattern pattern = Pattern.compile(regex);    Matcher matcher = pattern.matcher(text);    int matches = 0;    while (matcher.find()) {        matches++;    }    return matches;}</code></pre><p>å½“åŒ¹é…æ¬¡æ•°ä¸º<code>0</code>æ—¶ï¼Œè¡¨ç¤ºå¾…åŒ¹é…æ–‡æœ¬ä¸­æ²¡æœ‰å‘½ä¸­æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><h2 id="äºŒã€å…ƒå­—ç¬¦"><a href="#äºŒã€å…ƒå­—ç¬¦" class="headerlink" title="äºŒã€å…ƒå­—ç¬¦"></a>äºŒã€å…ƒå­—ç¬¦</h2><p>å…ƒå­—ç¬¦ä¼šå½±å“æ¨¡å¼çš„åŒ¹é…æ–¹å¼ï¼Œä»æŸç§ç¨‹åº¦ä¸Šè¯´ï¼Œå®ƒä»¬ä¸ºæœç´¢æ¨¡å¼å¢æ·»äº†é€»è¾‘ã€‚Java API æ”¯æŒå¤šç§å…ƒå­—ç¬¦ï¼Œå…¶ä¸­æœ€ç›´æ¥çš„æ˜¯ç‚¹â€œ.â€ï¼Œå®ƒå¯ä»¥åŒ¹é…ä»»ä½•å­—ç¬¦ï¼š</p><pre><code class="java">int matches = runTest(&quot;.&quot;, &quot;foo&quot;);assertTrue(matches &gt; 0);</code></pre><p>è€ƒè™‘å‰é¢çš„ä¾‹å­ï¼Œæ­£åˆ™è¡¨è¾¾å¼â€œfooâ€å¯ä»¥åŒ¹é…æ–‡æœ¬â€œfooâ€ä»¥åŠâ€œfoofooâ€ä¸¤æ¬¡ã€‚å¦‚æœåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ç‚¹å…ƒå­—ç¬¦ï¼Œåœ¨ç¬¬äºŒç§æƒ…å†µä¸‹å°±ä¸ä¼šå¾—åˆ°ä¸¤æ¬¡åŒ¹é…ï¼š</p><pre><code class="java">int matches = runTest(&quot;foo.&quot;, &quot;foofoo&quot;);assertEquals(matches, 1);</code></pre><p>æ³¨æ„æ­£åˆ™è¡¨è¾¾å¼ä¸­â€œfooâ€åé¢çš„ç‚¹ã€‚åŒ¹é…å™¨ä¼šåŒ¹é…æ‰€æœ‰å‰é¢æ˜¯â€œfooâ€çš„æ–‡æœ¬ï¼Œå› ä¸ºæœ€åçš„ç‚¹è¡¨ç¤ºåé¢å¯ä»¥æ˜¯ä»»ä½•å­—ç¬¦ã€‚æ‰€ä»¥åœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªâ€œfooâ€åï¼Œå…¶ä½™éƒ¨åˆ†è¢«è§†ä¸ºä»»æ„å­—ç¬¦ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåªæœ‰ä¸€æ¬¡åŒ¹é…ã€‚</p><p>API è¿˜æ”¯æŒå…¶ä»–ä¸€äº›å…ƒå­—ç¬¦ï¼Œå¦‚<code>&lt;([{\^-=$!|]})?*+.</code>ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬æ–‡ä¸­è¿›ä¸€æ­¥æ¢è®¨å®ƒä»¬ã€‚</p><h2 id="ä¸‰ã€å­—ç¬¦ç±»"><a href="#ä¸‰ã€å­—ç¬¦ç±»" class="headerlink" title="ä¸‰ã€å­—ç¬¦ç±»"></a>ä¸‰ã€å­—ç¬¦ç±»</h2><p>åœ¨å­—ç¬¦ç±»ä¸‹ï¼Œå¤§çº¦æœ‰å…­ç§æ„é€ ã€‚</p><h3 id="ï¼ˆä¸€ï¼‰æˆ–ç±»"><a href="#ï¼ˆä¸€ï¼‰æˆ–ç±»" class="headerlink" title="ï¼ˆä¸€ï¼‰æˆ–ç±»"></a>ï¼ˆä¸€ï¼‰æˆ–ç±»</h3><p>æˆ‘ä»¬é€šè¿‡â€œ[abc]â€æ¥æ„é€ æˆ–ç±»ï¼Œå®ƒå¯ä»¥åŒ¹é…é›†åˆä¸­çš„ä»»æ„ä¸€ä¸ªå…ƒç´ ï¼š</p><pre><code class="java">int matches = runTest(&quot;[abc]&quot;, &quot;b&quot;);assertEquals(matches, 1);</code></pre><p>å¦‚æœå®ƒä»¬éƒ½å‡ºç°åœ¨æ–‡æœ¬ä¸­ï¼Œå®ƒä¼šåˆ†åˆ«åŒ¹é…æ¯ä¸ªå…ƒç´ ï¼Œè€Œä¸è€ƒè™‘é¡ºåºï¼š</p><pre><code class="java">int matches = runTest(&quot;[abc]&quot;, &quot;cab&quot;);assertEquals(matches, 3);</code></pre><p>å®ƒä»¬ä¹Ÿå¯ä»¥ä½œä¸ºå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†äº¤æ›¿å‡ºç°ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå½“æˆ‘ä»¬é€šè¿‡å°†é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ ä¸ç¬¬ä¸€ä¸ªå­—æ¯äº¤æ›¿æ¥åˆ›å»ºä¸åŒçš„å•è¯æ—¶ï¼Œå®ƒä»¬éƒ½ä¼šè¢«åŒ¹é…ï¼š</p><pre><code class="java">int matches = runTest(&quot;[bcr]at&quot;, &quot;bat cat rat&quot;);assertEquals(matches, 3);</code></pre><h3 id="ï¼ˆäºŒï¼‰éæˆ–ç±»"><a href="#ï¼ˆäºŒï¼‰éæˆ–ç±»" class="headerlink" title="ï¼ˆäºŒï¼‰éæˆ–ç±»"></a>ï¼ˆäºŒï¼‰éæˆ–ç±»</h3><p>é€šè¿‡åœ¨é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ å‰æ·»åŠ è„±å­—ç¬¦å·â€œ^â€ï¼Œå¯ä»¥å¦å®šä¸Šè¿°é›†åˆï¼š</p><pre><code class="java">int matches = runTest(&quot;[^abc]&quot;, &quot;g&quot;);assertTrue(matches &gt; 0);</code></pre><p>å†çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼š</p><pre><code class="java">int matches = runTest(&quot;[^bcr]at&quot;, &quot;sat mat eat&quot;);assertTrue(matches &gt; 0);</code></pre><h3 id="ï¼ˆä¸‰ï¼‰èŒƒå›´ç±»"><a href="#ï¼ˆä¸‰ï¼‰èŒƒå›´ç±»" class="headerlink" title="ï¼ˆä¸‰ï¼‰èŒƒå›´ç±»"></a>ï¼ˆä¸‰ï¼‰èŒƒå›´ç±»</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿å­—ç¬¦â€œ-â€å®šä¹‰ä¸€ä¸ªç±»ï¼ŒæŒ‡å®šåŒ¹é…æ–‡æœ¬åº”æ‰€å±çš„èŒƒå›´ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¦å®šä¸€ä¸ªèŒƒå›´ã€‚</p><p>åŒ¹é…å¤§å†™å­—æ¯ï¼š</p><pre><code class="java">int matches = runTest(&quot;[A-Z]&quot;, &quot;Two Uppercase alphabets 34 overall&quot;);assertEquals(matches, 2);</code></pre><p>åŒ¹é…å°å†™å­—æ¯ï¼š</p><pre><code class="java">int matches = runTest(&quot;[a-z]&quot;, &quot;Two Uppercase alphabets 34 overall&quot;);assertEquals(matches, 26);</code></pre><p>åŒ¹é…å¤§å†™å’Œå°å†™å­—æ¯ï¼š</p><pre><code class="java">int matches = runTest(&quot;[a-zA-Z]&quot;, &quot;Two Uppercase alphabets 34 overall&quot;);assertEquals(matches, 28);</code></pre><p>åŒ¹é…ç»™å®šèŒƒå›´çš„æ•°å­—ï¼š</p><pre><code class="java">int matches = runTest(&quot;[1-5]&quot;, &quot;Two Uppercase alphabets 34 overall&quot;);assertEquals(matches, 2);</code></pre><p>åŒ¹é…å¦ä¸€ä¸ªèŒƒå›´çš„æ•°å­—ï¼š</p><pre><code class="java">int matches = runTest(&quot;3[0-5]&quot;, &quot;Two Uppercase alphabets 34 overall&quot;);assertEquals(matches, 1);</code></pre><h3 id="ï¼ˆå››ï¼‰å¹¶é›†ç±»"><a href="#ï¼ˆå››ï¼‰å¹¶é›†ç±»" class="headerlink" title="ï¼ˆå››ï¼‰å¹¶é›†ç±»"></a>ï¼ˆå››ï¼‰å¹¶é›†ç±»</h3><p>å¹¶é›†å­—ç¬¦ç±»æ˜¯ç”±ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ç±»ç»„åˆè€Œæˆçš„ï¼š</p><pre><code class="java">int matches = runTest(&quot;[1-3[7-9]]&quot;, &quot;123456789&quot;);assertEquals(matches, 6);</code></pre><p>ä¸Šè¿°æµ‹è¯•åªä¼šåŒ¹é…ä¹ä¸ªæ•´æ•°ä¸­çš„å…­ä¸ªï¼Œå› ä¸ºå¹¶é›†è·³è¿‡äº† 4ã€5 å’Œ 6ã€‚</p><h3 id="ï¼ˆäº”ï¼‰äº¤é›†ç±»"><a href="#ï¼ˆäº”ï¼‰äº¤é›†ç±»" class="headerlink" title="ï¼ˆäº”ï¼‰äº¤é›†ç±»"></a>ï¼ˆäº”ï¼‰äº¤é›†ç±»</h3><p>ä¸å¹¶é›†ç±»ç±»ä¼¼ï¼Œäº¤é›†ç±»æ˜¯ä»ä¸¤ä¸ªæˆ–å¤šä¸ªé›†åˆä¸­é€‰å–å…±åŒå…ƒç´ å¾—åˆ°çš„ã€‚è¦åº”ç”¨äº¤é›†ï¼Œæˆ‘ä»¬ä½¿ç”¨â€œ&amp;&amp;â€ï¼š</p><pre><code class="java">int matches = runTest(&quot;[1-6&amp;&amp;[3-9]]&quot;, &quot;123456789&quot;);assertEquals(matches, 4);</code></pre><p>æˆ‘ä»¬ä¼šå¾—åˆ°å››ä¸ªåŒ¹é…ï¼Œå› ä¸ºä¸¤ä¸ªé›†åˆçš„äº¤é›†åªæœ‰å››ä¸ªå…ƒç´ ã€‚</p><h3 id="ï¼ˆå…­ï¼‰å·®é›†ç±»"><a href="#ï¼ˆå…­ï¼‰å·®é›†ç±»" class="headerlink" title="ï¼ˆå…­ï¼‰å·®é›†ç±»"></a>ï¼ˆå…­ï¼‰å·®é›†ç±»</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡æ³•æ¥å¦å®šä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ç±»ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åŒ¹é…ä¸€ç»„å¥‡æ•°ï¼š</p><pre><code class="java">int matches = runTest(&quot;[0-9&amp;&amp;[^2468]]&quot;, &quot;123456789&quot;);assertEquals(matches, 5);</code></pre><p>åªæœ‰ 1ã€3ã€5ã€7ã€9 ä¼šè¢«åŒ¹é…ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå¼€å‘åˆ©å™¨ï¼Œç”¨çš„å¥½çš„è¯ï¼Œä¼šå¤§å¤§æå‡æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚æœ¬æ–‡ä»‹ç»äº†å…ƒå­—ç¬¦å’Œå…³ç³»è¿ç®—ï¼Œåç»­æ…¢æ…¢å±•å¼€ï¼ŒæŠŠæ­£åˆ™è¡¨è¾¾å¼çš„å„ç§åŠŸèƒ½å±•ç¤ºå‡ºæ¥ã€‚</p><p>æ–‡ä¸­ä»£ç åœ¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œjavaâ€å¯è·å¾—ã€‚æˆ‘çš„ä¸ªäººå¾®ä¿¡å·æ˜¯ï¼šhellokanshan ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥æ·»åŠ ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=3757675060425670656#wechat_redirect" target="_blank" rel="noopener">å¹¶å‘ç¼–ç¨‹</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=3809802644269318145#wechat_redirect" target="_blank" rel="noopener">MapStructå®ç”¨æ‰‹å†Œ</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1750195552933199874#wechat_redirect" target="_blank" rel="noopener">ä¸€ä¸ªæ¶æ„å¸ˆçš„ç´ å…»ä¿®ç‚¼</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/4lOmXnKMHf3YUkYWfK_PYg" target="_blank" rel="noopener">åŸæ¥OpenFeignåŠŸèƒ½è¿™ä¹ˆå¼ºå¤§</a></li><li><a href="https://mp.weixin.qq.com/s/iVo-Cr8shxjmh9UK_rWQMw" target="_blank" rel="noopener">åŸæ¥OpenFeignåŠŸèƒ½è¿™ä¹ˆå¼ºå¤§ï¼ˆç¬¬äºŒå¼¹ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/_032A7UPP4SgqrpYolSyiQ" target="_blank" rel="noopener">ä½¿ç”¨OpenFeignçš„5ä¸ªæ­¥éª¤å’Œ7ä¸ªé«˜çº§åŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Ahsz70-30IYO-9hQ0VDefw" target="_blank" rel="noopener">ç”±æµ…å…¥æ·±æŒæ¡CompletableFutureçš„ä¸ƒç§ç”¨æ³•</a></li><li><a href="https://mp.weixin.qq.com/s/mAthOXL3eZNUiuV7SPp7Cw" target="_blank" rel="noopener">å…¨æ–°çš„HttpClientï¼Œç°ä»£é«˜æ•ˆçš„ç½‘ç»œé€šä¿¡åˆ©å™¨</a></li><li><a href="https://mp.weixin.qq.com/s/b2WKGF9Z0gUkYYRP7PdybA" target="_blank" rel="noopener">Java ä¸­åå°„ã€å†…çœçš„æ€§èƒ½å·®è·å±…ç„¶å¦‚æ­¤</a></li><li><a href="https://mp.weixin.qq.com/s/vXJxyTm2BWZtUV8Kiwp3NQ" target="_blank" rel="noopener">æ¯”åå°„æ›´å¥½ç”¨çš„å†…çœ</a></li><li><a href="https://mp.weixin.qq.com/s/ak_t3qQ7OPI116xHL2RO1w" target="_blank" rel="noopener">å¼‚å¸¸å¤„ç†çš„9æ¡å»ºè®®</a></li><li><a href="https://mp.weixin.qq.com/s/nkS8bPfyQ1L9knPrpGrxbA" target="_blank" rel="noopener">JavaåŸç”Ÿæ”¯æŒLombokäº†</a></li><li><a href="https://mp.weixin.qq.com/s/ZCm71il_n5FG8gAHSiKCzQ" target="_blank" rel="noopener">MapStructæ•™ç¨‹</a></li><li><a href="https://mp.weixin.qq.com/s/KXTzTcxvf3pqXzEe2tdYOg" target="_blank" rel="noopener">æ‰‹å†™é‡è¯•å™¨</a></li><li><a href="https://mp.weixin.qq.com/s/ETg09gegy4a5i_fdgUUx7w" target="_blank" rel="noopener">ç­‰å¾…çº¿ç¨‹å®Œæˆçš„ä¸‰ç§å¸¸ç”¨æ–¹å¼</a></li><li><a href="https://mp.weixin.qq.com/s/F3Pv1B5-2XErTxK6qqkoTA" target="_blank" rel="noopener">å¦‚ä½•åœ¨çº¿ç¨‹å®Œæˆæ—¶æ‰§è¡Œå›è°ƒ</a></li><li><a href="https://mp.weixin.qq.com/s/N-cLbHHqBKxUz4bqptMSJg" target="_blank" rel="noopener">ç”±æµ…å…¥æ·±æŒæ¡Future</a></li><li><a href="https://mp.weixin.qq.com/s/Z0hjAKuiRZI2JOd-CUPETQ" target="_blank" rel="noopener">ç”±æµ…å…¥æ·±æŒæ¡ExecutorService</a></li><li><a href="https://mp.weixin.qq.com/s/my64BSuMnJzX8bfhIblwPQ" target="_blank" rel="noopener">Fork/Joinæ¡†æ¶å¿«é€Ÿä¸Šæ‰‹æŒ‡å—</a></li><li><a href="https://mp.weixin.qq.com/s/L5NUIde7li1sayF6hTqncw" target="_blank" rel="noopener">å¦‚ä½•å»¶è¿Ÿæ‰§è¡Œä¸€æ®µä»£ç </a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><ul><li>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a></li><li>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/">æ­£åˆ™è¡¨è¾¾å¼å®ç”¨æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šå…ƒå­—ç¬¦åŠå…³ç³»è¿ç®—</a></li><li>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a></li><li>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">æ­£åˆ™è¡¨è¾¾å¼å®ç”¨æŒ‡å—ï¼ˆä¸€ï¼‰ï¼šå…ƒå­—ç¬¦åŠå…³ç³»è¿ç®—</a></li></ul><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      æ­£åˆ™è¡¨è¾¾å¼æ˜¯Javaå˜æˆä¸­ä¸€æŠŠåˆ©å™¨ï¼Œå¸¸å‡ºç°åœ¨æ–‡æœ¬æ£€æŸ¥ã€æ›¿æ¢ç­‰é€»è¾‘ä¸­ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ Java æ­£åˆ™è¡¨è¾¾å¼ APIï¼Œå¹¶ç ”ç©¶å¦‚ä½•åœ¨ Java ç¼–ç¨‹è¯­è¨€ä¸­è¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚åœ¨æ­£åˆ™è¡¨è¾¾å¼çš„é¢†åŸŸä¸­ï¼Œå­˜åœ¨å¤šç§ä¸åŒçš„â€œé£æ ¼â€å¯ä¾›é€‰æ‹©ï¼Œä¾‹å¦‚ grepã€Perlã€Pythonã€PHPã€awk ç­‰ç­‰ã€‚è¿™å°±æ„å‘³ç€ï¼Œåœ¨ä¸€ç§ç¼–ç¨‹è¯­è¨€ä¸­æœ‰æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨å¦ä¸€ç§è¯­è¨€ä¸­å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚Java ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ä¸ Perl ä¸­çš„æœ€ä¸ºç›¸ä¼¼ã€‚
    
    </summary>
    
    
      <category term="regular" scheme="https://www.howardliu.cn/categories/regular/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="regular" scheme="https://www.howardliu.cn/tags/regular/"/>
    
  </entry>
  
  <entry>
    <title>ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ6ï¼‰ï¼šä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java/java-features-8-23-6/"/>
    <id>https://www.howardliu.cn/java/java-features-8-23-6/</id>
    <published>2024-09-22T00:20:00.000Z</published>
    <updated>2024-12-06T11:36:03.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/202409161332708.jpg" alt="ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚</p><p><img src="https://static.howardliu.cn/202409111451409.png" alt="Javaç‰ˆæœ¬åˆ†å¸ƒ"></p><blockquote><p>æ•°æ®æ¥æº<a href="https://newrelic.com/sites/default/files/2024-05/new-relic-state-of-the-java-ecosystem-2024-05-29.pdf" target="_blank" rel="noopener">2024 State of the Java Ecosystem</a></p></blockquote><h2 id="ä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§"><a href="#ä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§" class="headerlink" title="ä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§"></a>ä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§</h2><h3 id="webæœåŠ¡å™¨jwebserverï¼ˆJava-18ï¼‰"><a href="#webæœåŠ¡å™¨jwebserverï¼ˆJava-18ï¼‰" class="headerlink" title="webæœåŠ¡å™¨jwebserverï¼ˆJava 18ï¼‰"></a>webæœåŠ¡å™¨jwebserverï¼ˆJava 18ï¼‰</h3><p>ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªè½»é‡çº§ã€ç®€å•æ˜“ç”¨çš„ HTTP æœåŠ¡å™¨ï¼Œé€šè¿‡å‘½ä»¤è¡Œå·¥å…·<code>jwebserver</code>å¯ä»¥å¯åŠ¨ä¸€ä¸ªæœ€å°åŒ–çš„é™æ€ Web æœåŠ¡å™¨ï¼Œè¿™ä¸ªæœåŠ¡å™¨ä»…æ”¯æŒé™æ€èµ„æºçš„è®¿é—®ï¼Œä¸æ”¯æŒ CGIï¼ˆCommon Gateway Interfaceï¼‰æˆ–ç±»ä¼¼ servlet çš„åŠŸèƒ½ï¼Œä¸»è¦ç”¨äºåŸå‹åˆ¶ä½œã€æµ‹è¯•å’Œå¼€å‘ç¯å¢ƒä¸­çš„é™æ€æ–‡ä»¶æ‰˜ç®¡ä¸å…±äº«ã€‚</p><p>å®ƒçš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ul><li>åŸå‹å¼€å‘ï¼šç”±äºå…¶ç®€å•æ˜“ç”¨çš„ç‰¹æ€§ï¼Œjwebserver å¯ä»¥ä½œä¸ºå¿«é€ŸåŸå‹å¼€å‘å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨çŸ­æ—¶é—´å†…æ­å»ºèµ·ä¸€ä¸ªå¯ä»¥è®¿é—®é™æ€èµ„æºçš„ Web æœåŠ¡ã€‚è¿™å¯¹äºéœ€è¦éªŒè¯æŸä¸ªåŠŸèƒ½æˆ–æ¦‚å¿µçš„åˆæœŸé˜¶æ®µéå¸¸æœ‰ç”¨ã€‚</li><li>å¿«é€Ÿéƒ¨ç½²ï¼šå¯¹äºä¸€äº›å°è§„æ¨¡çš„åº”ç”¨æˆ–è€…ä¸´æ—¶æ€§çš„é¡¹ç›®ï¼Œä½¿ç”¨ jwebserver å¯ä»¥å¿«é€Ÿå¯åŠ¨å¹¶è¿è¡Œä¸€ä¸ªç®€å•çš„ Web æœåŠ¡ï¼Œè€Œæ— éœ€å¤æ‚çš„é…ç½®å’Œç¯å¢ƒæ­å»ºã€‚è¿™ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè¿…é€Ÿå°†æƒ³æ³•è½¬åŒ–ä¸ºå®é™…çš„å¯è®¿é—®æœåŠ¡ã€‚</li><li>å­¦ä¹ ä¸æ•™è‚²ï¼šjwebserver æä¾›äº†ä¸€ä¸ªç›´è§‚çš„å¹³å°ï¼Œè®©åˆå­¦è€…å¯ä»¥è½»æ¾ä¸Šæ‰‹ Java Web å¼€å‘ã€‚é€šè¿‡ç®€å•çš„å‘½ä»¤è¡Œæ“ä½œï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿç†è§£ Web æœåŠ¡å™¨çš„å·¥ä½œåŸç†åŠå…¶åŸºæœ¬é…ç½®ã€‚</li><li>æµ‹è¯•ä¸è°ƒè¯•ï¼šåœ¨è¿›è¡Œ Web åº”ç”¨çš„æµ‹è¯•å’Œè°ƒè¯•æ—¶ï¼Œjwebserver å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å·¥å…·æ¥æä¾›é™æ€æ–‡ä»¶çš„è®¿é—®æœåŠ¡ï¼Œä»è€Œæ–¹ä¾¿å¼€å‘è€…å¯¹åº”ç”¨è¿›è¡Œæµ‹è¯•å’Œè°ƒè¯•ã€‚</li><li>æœ¬åœ°å¼€å‘ç¯å¢ƒï¼šåœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­ï¼Œjwebserver å¯ä»¥æ›¿ä»£ä¼ ç»Ÿçš„ Web æœåŠ¡å™¨å¦‚ Apache Tomcat æˆ– Nginxï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªè½»é‡çº§çš„é€‰æ‹©ï¼Œä»¥å‡å°‘ç³»ç»Ÿèµ„æºçš„å ç”¨ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥ç®€å•è¯•ä¸€ä¸‹ï¼Œåœ¨å½“å‰ç›®å½•ç¼–å†™index.htmlï¼š</p><pre><code class="HTML">&lt;html&gt;&lt;head&gt;    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;&lt;/head&gt;&lt;body&gt;    &lt;h2&gt;æ¬¢è¿å‚è§‚&lt;/h2&gt;    &lt;h3&gt;&lt;a href=&quot;https://www.howardliu.cn/&quot;&gt;çœ‹å±±çš„å°å±‹ howardliu.cn&lt;/a&gt;&lt;/h3&gt;    &lt;p&gt;        ä¸€èµ·&lt;strong&gt;å¼€å¿ƒ&lt;/strong&gt;å­¦æŠ€æœ¯    &lt;/p&gt;    &lt;p&gt;        è®©æˆ‘ä»¬ä¸€èµ·&lt;strong&gt;æ‰¬å¸†èµ·èˆª&lt;/strong&gt;    &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>è¿è¡Œ<code>jwebserver</code>å‘½ä»¤ï¼š</p><pre><code class="Bash">$ ./bin/jwebserverBinding to loopback by default. For all interfaces use &quot;-b 0.0.0.0&quot; or &quot;-b ::&quot;.Serving /Users/liuxinghao/Library/Java/JavaVirtualMachines/temurin-18.0.2.1/Contents/Home and subdirectories on 127.0.0.1 port 8000URL http://127.0.0.1:8000/</code></pre><p>æ‰“å¼€<code>[http://127.0.0.1:8000/](http://127.0.0.1:8000/)</code>å°±å¯ä»¥ç›´æ¥çœ‹åˆ°index.htmlçš„æ•ˆæœï¼š</p><p><img src="https://static.howardliu.cn/202409161340780.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p><p><code>jwebserver</code>è¿˜æ”¯æŒæŒ‡å®šåœ°å€å’Œç«¯å£ç­‰å‚æ•°ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥é€šè¿‡å‘½ä»¤æŸ¥çœ‹ï¼š</p><pre><code class="Bash">$ ./bin/jwebserver -hUsage: jwebserver [-b bind address] [-p port] [-d directory]                  [-o none|info|verbose] [-h to show options]                  [-version to show version information]Options:-b, --bind-address    - Address to bind to. Default: 127.0.0.1 (loopback).                        For all interfaces use &quot;-b 0.0.0.0&quot; or &quot;-b ::&quot;.-d, --directory       - Directory to serve. Default: current directory.-o, --output          - Output format. none|info|verbose. Default: info.-p, --port            - Port to listen on. Default: 8000.-h, -?, --help        - Prints this help message and exits.-version, --version   - Prints version information and exits.</code></pre><h3 id="éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"><a href="#éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰" class="headerlink" title="éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"></a>éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰</h3><p>éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•çš„ç›®æ ‡æ˜¯ç®€åŒ– Java è¯­è¨€ï¼Œä½¿å¾—å­¦ç”Ÿå’Œåˆå­¦è€…å¯ä»¥æ›´å®¹æ˜“åœ°ç¼–å†™ä»–ä»¬çš„ç¬¬ä¸€ä¸ªç¨‹åºï¼Œè€Œæ— éœ€ç†è§£ä¸ºå¤§å‹ç¨‹åºè®¾è®¡çš„å¤æ‚è¯­è¨€ç‰¹æ€§ã€‚</p><p>æ— è®ºå­¦ä¹ å“ªé—¨è¯­è¨€ï¼Œç¬¬ä¸€è¯¾ä¸€å®šæ˜¯æ‰“å°<code>Hello, World!</code>ï¼ŒJavaä¸­çš„å†™æ³•æ˜¯ï¼š</p><pre><code class="Java">public class HelloWorld {    public static void main(String[] args) {        System.out.println (&quot;Hello, World!&quot;);    }}</code></pre><p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œä¸€å®šä¼šæœ‰å¾ˆå¤šç–‘é—®ï¼Œ<code>public</code>å¹²å•¥çš„ï¼Œ<code>main</code>æ–¹æ³•çš„çº¦å®šå‚æ•°<code>args</code>æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿç„¶åè€å¸ˆå°±è¯´ï¼Œè¿™å°±æ˜¯æ¨¡æ¿ï¼Œç…§ç€æŠ„å°±è¡Œï¼Œä¸è¿™æ ·å†™ä¸è¿è¡Œã€‚</p><p>ç°åœ¨å¯ä»¥ç®€åŒ–ä¸ºï¼š</p><pre><code class="Java">class HelloWorld {    void main() {        System.out.println (&quot;Hello, World!&quot;);    }}</code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="Java">String greeting() { return &quot;Hello, World!&quot;; }void main() {    System.out.println(greeting());}</code></pre><p><code>main</code>æ–¹æ³•ç›´æ¥ç®€åŒ–ä¸ºåå­—å’Œæ‹¬å·ï¼Œç”šè‡³è¿ç±»ä¹Ÿä¸éœ€è¦æ˜¾æ€§å®šä¹‰äº†ã€‚è™½ç„¶çœ‹èµ·æ¥æ²¡å•¥ç”¨ï¼Œä½†æ˜¯åœ¨JShellä¸­ä½¿ç”¨ï¼Œå°±æ¯”è¾ƒå‹å¥½äº†ã€‚</p><p>æœ¬æ¬¡é¢„è§ˆæ–°å¢äº†ä¸‰ä¸ªIOæ“ä½œæ–¹æ³•ï¼š</p><pre><code class="Java">public static void println(Object obj);public static void print(Object obj);public static String readln(String prompt);</code></pre><p>æƒ³è¦å¿«é€Ÿå®ç°æ§åˆ¶å°æ“ä½œï¼Œå¯ä»¥è¿™æ ·å†™äº†ï¼š</p><pre><code class="Java">void main() {    String name = readln(&quot;è¯·è¾“å…¥å§“å: &quot;);    print(&quot;å¾ˆé«˜å…´è§åˆ°ä½ , &quot;);    println(name);}</code></pre><p>ä½œä¸ºä¸€ä¸ªè€ç¨‹åºçŒ¿ï¼Œä¹Ÿä¸å¾—ä¸å“‡å¡ä¸€ä¸‹ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æƒ³è¦äº†è§£å„ç‰ˆæœ¬çš„è¯¦ç»†ç‰¹æ€§ï¼Œå¯ä»¥ä»<a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­æŸ¥çœ‹ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><ul><li>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a></li><li>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ6ï¼‰ï¼šä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§</a></li><li>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a></li><li>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ6ï¼‰ï¼šä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§</a></li></ul><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      ä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§ã€‚ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java10" scheme="https://www.howardliu.cn/tags/Java10/"/>
    
      <category term="Java11" scheme="https://www.howardliu.cn/tags/Java11/"/>
    
      <category term="Java12" scheme="https://www.howardliu.cn/tags/Java12/"/>
    
      <category term="Java14" scheme="https://www.howardliu.cn/tags/Java14/"/>
    
      <category term="Java15" scheme="https://www.howardliu.cn/tags/Java15/"/>
    
      <category term="Java13" scheme="https://www.howardliu.cn/tags/Java13/"/>
    
      <category term="Java16" scheme="https://www.howardliu.cn/tags/Java16/"/>
    
      <category term="Java17" scheme="https://www.howardliu.cn/tags/Java17/"/>
    
      <category term="Java18" scheme="https://www.howardliu.cn/tags/Java18/"/>
    
      <category term="Java19" scheme="https://www.howardliu.cn/tags/Java19/"/>
    
      <category term="Java20" scheme="https://www.howardliu.cn/tags/Java20/"/>
    
      <category term="Java21" scheme="https://www.howardliu.cn/tags/Java21/"/>
    
      <category term="Java8" scheme="https://www.howardliu.cn/tags/Java8/"/>
    
      <category term="Java22" scheme="https://www.howardliu.cn/tags/Java22/"/>
    
      <category term="Java9" scheme="https://www.howardliu.cn/tags/Java9/"/>
    
      <category term="Java23" scheme="https://www.howardliu.cn/tags/Java23/"/>
    
  </entry>
  
  <entry>
    <title>ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ5ï¼‰ï¼šå¢å¼ºå°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java/java-features-8-23-5/"/>
    <id>https://www.howardliu.cn/java/java-features-8-23-5/</id>
    <published>2024-09-21T00:20:00.000Z</published>
    <updated>2024-12-06T11:36:03.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/202409161331298.jpg" alt="ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚</p><p><img src="https://static.howardliu.cn/202409111451409.png" alt="Javaç‰ˆæœ¬åˆ†å¸ƒ"></p><blockquote><p>æ•°æ®æ¥æº<a href="https://newrelic.com/sites/default/files/2024-05/new-relic-state-of-the-java-ecosystem-2024-05-29.pdf" target="_blank" rel="noopener">2024 State of the Java Ecosystem</a></p></blockquote><h2 id="ä¸€äº›å°ç‰¹æ€§"><a href="#ä¸€äº›å°ç‰¹æ€§" class="headerlink" title="ä¸€äº›å°ç‰¹æ€§"></a>ä¸€äº›å°ç‰¹æ€§</h2><h3 id="å¢å¼º-String"><a href="#å¢å¼º-String" class="headerlink" title="å¢å¼º String"></a>å¢å¼º String</h3><p>Stringä¸­æ–°å¢çš„æ–¹æ³•ï¼šrepeatã€stripã€stripLeadingã€stripTrailingã€isBlankã€linesã€indent å’Œ transformã€‚</p><p>è¿™äº›æ–¹æ³•è¿˜æ˜¯æŒºæœ‰ç”¨çš„ï¼Œä»¥å‰æˆ‘ä»¬å¯èƒ½éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»åº“ï¼ˆæ¯”å¦‚ Apache å‡ºå“çš„ commons-langï¼‰ä¸­çš„å·¥å…·ç±»ï¼Œç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨å«¡äº²æ–¹æ³•äº†ã€‚</p><h4 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h4><p>repeatæ˜¯å®ä¾‹æ–¹æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯è¿”å›ç»™å®šå­—ç¬¦ä¸²çš„é‡å¤å€¼çš„ï¼Œå‚æ•°æ˜¯intç±»å‹ï¼Œä¼ å‚çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼š</p><ul><li>å¦‚æœé‡å¤æ¬¡æ•°å°äº 0 ä¼šæŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸ï¼›</li><li>å¦‚æœé‡å¤æ¬¡æ•°ä¸º 0 æˆ–è€…å­—ç¬¦ä¸²æœ¬èº«æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œå°†è¿”å›ç©ºå­—ç¬¦ä¸²ï¼›</li><li>å¦‚æœé‡å¤æ¬¡æ•°ä¸º 1 ç›´æ¥è¿”å›æœ¬èº«ï¼›</li><li>å¦‚æœå­—ç¬¦ä¸²é‡å¤æŒ‡å®šæ¬¡æ•°åï¼Œé•¿åº¦è¶…è¿‡Integer.MAX_VALUE<code>ï¼Œä¼šæŠ›å‡º</code>OutOfMemoryError`é”™è¯¯ã€‚</li></ul><p>ç”¨æ³•å¾ˆç®€å•ï¼š</p><pre><code class="Java">@Testvoid testRepeat() {    String output = &quot;foo &quot;.repeat(2) + &quot;bar&quot;;    assertEquals(&quot;foo foo bar&quot;, output);}</code></pre><p>å°è€Œç¾çš„ä¸€ä¸ªå·¥å…·æ–¹æ³•ã€‚</p><h4 id="stripã€stripLeadingã€stripTrailing"><a href="#stripã€stripLeadingã€stripTrailing" class="headerlink" title="stripã€stripLeadingã€stripTrailing"></a>stripã€stripLeadingã€stripTrailing</h4><p><code>strip</code>æ–¹æ³•ç®—æ˜¯<code>trim</code>æ–¹æ³•çš„å¢å¼ºç‰ˆï¼Œ<code>trim</code>æ–¹æ³•å¯ä»¥åˆ é™¤å­—ç¬¦ä¸²ä¸¤ä¾§çš„ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€tab é”®ã€æ¢è¡Œç¬¦ï¼‰ï¼Œä½†æ˜¯å¯¹äº<code>Unicode</code>çš„ç©ºç™½å­—ç¬¦æ— èƒ½ä¸ºåŠ›ï¼Œ<code>strip</code>è¡¥è¶³è¿™ä¸€çŸ­æ¿ã€‚</p><p>ç”¨èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="Java">@Testvoid testTrip() {    final String output = &quot;      hello   \u2005&quot;.strip();    assertEquals(&quot;hello&quot;, output);    final String trimOutput = &quot;      hello   \u2005&quot;.trim();    assertEquals(&quot;hello   \u2005&quot;, trimOutput);}</code></pre><p>å¯¹æ¯”ä¸€ä¸‹å¯ä»¥çœ‹åˆ°ï¼Œ<code>trim</code>æ–¹æ³•çš„æ¸…ç†åŠŸèƒ½ç¨å¼±ã€‚</p><p><code>stripLeading</code>å’Œ<code>stripTrailing</code>ä¸<code>strip</code>ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ä¸€ä¸ªæ¸…ç†å¤´ï¼Œä¸€ä¸ªæ¸…ç†å°¾ã€‚ç”¨æ³•å¦‚ä¸‹ï¼š</p><pre><code class="Java">@Testvoid testTripLeading() {    final String output = &quot;      hello   \u2005&quot;.stripLeading();    assertEquals(&quot;hello   \u2005&quot;, output);}@Testvoid testTripTrailing() {    final String output = &quot;      hello   \u2005&quot;.stripTrailing();    assertEquals(&quot;      hello&quot;, output);}</code></pre><h4 id="isBlank"><a href="#isBlank" class="headerlink" title="isBlank"></a>isBlank</h4><p>è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦éƒ½æ˜¯ç©ºç™½å­—ç¬¦ï¼Œé™¤äº†ç©ºæ ¼ã€tab é”®ã€æ¢è¡Œç¬¦ï¼Œä¹ŸåŒ…æ‹¬<code>Unicode</code>çš„ç©ºç™½å­—ç¬¦ã€‚</p><p>ç”¨æ³•å¾ˆç®€å•ï¼š</p><pre><code class="Java">@Testvoid testIsBlank() {    assertTrue(&quot;    \u2005&quot;.isBlank());}</code></pre><h4 id="lines"><a href="#lines" class="headerlink" title="lines"></a>lines</h4><p>æœ€åè¿™ä¸ªæ–¹æ³•æ˜¯å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå­—ç¬¦ä¸²<code>Stream</code>ç±»å‹ï¼Œå­—ç¬¦ä¸²åˆ†éš”ä¾æ®æ˜¯æ¢è¡Œç¬¦ï¼š<code>\n</code>ã€<code>\r</code>ã€<code>\r\n</code>ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p><pre><code class="Java">@Testvoid testLines() {    final String multiline = &quot;This isa multilinestring.&quot;;    final String output = multiline.lines()            .filter(Predicate.not(String::isBlank))            .collect(Collectors.joining(&quot; &quot;));    assertEquals(&quot;This is a multiline string.&quot;, output);}</code></pre><h4 id="indent"><a href="#indent" class="headerlink" title="indent"></a>indent</h4><p><code>indent</code>æ–¹æ³•æ˜¯å¯¹å­—ç¬¦ä¸²æ¯è¡Œï¼ˆä½¿ç”¨<code>\r</code>æˆ–<code>\n</code>åˆ†éš”ï¼‰æ•°æ®ç¼©è¿›æŒ‡å®šç©ºç™½å­—ç¬¦ï¼Œå‚æ•°æ˜¯ int ç±»å‹ã€‚</p><p>å¦‚æœå‚æ•°å¤§äº 0ï¼Œå°±ç¼©è¿›æŒ‡å®šæ•°é‡çš„ç©ºæ ¼ï¼›å¦‚æœå‚æ•°å°äº 0ï¼Œå°±å°†å·¦ä¾§çš„ç©ºå­—ç¬¦åˆ é™¤æŒ‡å®šæ•°é‡ï¼Œå³å³ç§»ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹æºç ï¼š</p><pre><code class="Java">public String indent(int n) {    if (isEmpty()) {        return &quot;&quot;;    }    Stream&lt;String&gt; stream = lines();    if (n &gt; 0) {        final String spaces = &quot; &quot;.repeat(n);        stream = stream.map(s -&gt; spaces + s);    } else if (n == Integer.MIN_VALUE) {        stream = stream.map(s -&gt; s.stripLeading());    } else if (n &lt; 0) {        stream = stream.map(s -&gt; s.substring(Math.min(-n, s.indexOfNonWhitespace())));    }    return stream.collect(Collectors.joining(&quot;&quot;, &quot;&quot;, &quot;&quot;));}</code></pre><p><code>indent</code>æœ€åä¼šå°†å¤šè¡Œæ•°æ®é€šè¿‡<code>Collectors.joining(&quot;\n&quot;, &quot;&quot;, &quot;\n&quot;)</code>æ–¹æ³•æ‹¼æ¥ï¼Œç»“æœä¼šæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ul><li><code>\r</code>ä¼šè¢«æ›¿æ¢æˆ<code>\n</code>ï¼›</li><li>å¦‚æœåŸå­—ç¬¦ä¸²æ˜¯å¤šè¡Œæ•°æ®ï¼Œæœ€åä¸€è¡Œçš„ç»“å°¾æ²¡æœ‰<code>\n</code>ï¼Œæœ€åä¼šè¡¥ä¸Šä¸€ä¸ª<code>\n</code>ï¼Œå³å¤šäº†ä¸€ä¸ªç©ºè¡Œã€‚</li></ul><p>æˆ‘ä»¬çœ‹ä¸‹æµ‹è¯•ä»£ç ï¼š</p><pre><code class="Java">@Testvoid testIndent() {    final String text = &quot;             ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚ \u0020\u2005Java12 çš„ æ–°ç‰¹æ€§ã€‚ æ¬¢è¿ä¸‰è¿+å…³æ³¨å“Ÿ&quot;;    assertEquals(&quot;                 ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚     \u0020\u2005Java12 çš„ æ–°ç‰¹æ€§ã€‚    æ¬¢è¿ä¸‰è¿+å…³æ³¨å“Ÿã€n&quot;, text.indent(4));    assertEquals(&quot;     ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚\u2005Java12 çš„ æ–°ç‰¹æ€§ã€‚ æ¬¢è¿ä¸‰è¿+å…³æ³¨å“Ÿã€n&quot;, text.indent(-2));    final String text2 = &quot;å±±æ°´æœ‰ç›¸é€¢&quot;;    assertEquals(&quot;å±±æ°´æœ‰ç›¸é€¢&quot;, text2);}</code></pre><h4 id="transform"><a href="#transform" class="headerlink" title="transform"></a>transform</h4><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹<code>transform</code>æ–¹æ³•ï¼Œæºç ä¸€ç›®äº†ç„¶ï¼š</p><pre><code class="Java">public &lt;R&gt; R transform(Function&lt;? super String, ? extends R&gt; f) {    return f.apply(this);}</code></pre><p>é€šè¿‡ä¼ å…¥çš„<code>Function</code>å¯¹å½“å‰å­—ç¬¦ä¸²è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢ç»“æœç”±<code>Function</code>å†³å®šã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦å¯¹å­—ç¬¦ä¸²åè½¬ï¼š</p><pre><code class="Java">@Testvoid testTransform() {    final String text = &quot;çœ‹å±±æ˜¯å±±&quot;;    final String reverseText = text.transform(s -&gt; new StringBuilder(s).reverse().toString());    assertEquals(&quot;å±±æ˜¯å±±çœ‹&quot;, reverseText);}</code></pre><h3 id="å¢å¼ºæ–‡ä»¶è¯»å†™ï¼ˆJava-11ï¼‰"><a href="#å¢å¼ºæ–‡ä»¶è¯»å†™ï¼ˆJava-11ï¼‰" class="headerlink" title="å¢å¼ºæ–‡ä»¶è¯»å†™ï¼ˆJava 11ï¼‰"></a>å¢å¼ºæ–‡ä»¶è¯»å†™ï¼ˆJava 11ï¼‰</h3><p>æœ¬æ¬¡æ›´æ–°åœ¨<code>Files</code>ä¸­å¢åŠ äº†ä¸¤ä¸ªæ–¹æ³•ï¼š<code>readString</code>å’Œ<code>writeString</code>ã€‚<code>writeString</code>ä½œç”¨æ˜¯å°†æŒ‡å®šå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ï¼Œ<code>readString</code>ä½œç”¨æ˜¯ä»æ–‡ä»¶ä¸­è¯»å‡ºå†…å®¹åˆ°å­—ç¬¦ä¸²ã€‚æ˜¯ä¸€ä¸ªå¯¹<code>Files</code>å·¥å…·ç±»çš„å¢å¼ºï¼Œå°è£…äº†å¯¹è¾“å‡ºæµã€å­—èŠ‚ç­‰å†…å®¹çš„æ“ä½œã€‚</p><p>ç”¨æ³•æ¯”è¾ƒç®€å•ï¼š</p><pre><code class="Java">@Testvoid testReadWriteString() throws IOException {    final Path tmpPath = Path.of(&quot;./&quot;);    final Path tempFile = Files.createTempFile(tmpPath, &quot;demo&quot;, &quot;.txt&quot;);    final Path filePath = Files.writeString(tempFile, &quot;çœ‹å±± howardliu.cn å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹&quot;);    assertEquals(tempFile, filePath);    final String fileContent = Files.readString(filePath);    assertEquals(&quot;çœ‹å±± howardliu.cn å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹&quot;, fileContent);    Files.deleteIfExists(filePath);}</code></pre><p><code>readString</code>å’Œ<code>writeString</code>è¿˜å¯ä»¥æŒ‡å®šå­—ç¬¦é›†ï¼Œä¸æŒ‡å®šé»˜è®¤ä½¿ç”¨<code>StandardCharsets.UTF\_8</code>å­—ç¬¦é›†ï¼Œå¯ä»¥åº”å¯¹å¤§éƒ¨åˆ†åœºæ™¯äº†ã€‚</p><h3 id="å¢å¼ºå‡½æ•°-Predicateï¼ˆJava-11ï¼‰"><a href="#å¢å¼ºå‡½æ•°-Predicateï¼ˆJava-11ï¼‰" class="headerlink" title="å¢å¼ºå‡½æ•° Predicateï¼ˆJava 11ï¼‰"></a>å¢å¼ºå‡½æ•° Predicateï¼ˆJava 11ï¼‰</h3><p>è¿™ä¸ªä¹Ÿæ˜¯æ–¹æ³•å¢å¼ºï¼Œåœ¨ä»¥å‰ï¼Œæˆ‘ä»¬åœ¨<code>Stream</code>ä¸­çš„<code>filter</code>æ–¹æ³•åˆ¤æ–­å¦çš„æ—¶å€™ï¼Œä¸€èˆ¬éœ€è¦<code>!</code>è¿ç®—ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³è¦æ‰¾åˆ°å­—ç¬¦ä¸²åˆ—è¡¨ä¸­çš„æ•°å­—ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="Java">final List&lt;String&gt; list = Arrays.asList(&quot;1&quot;, &quot;a&quot;);final List&lt;String&gt; nums = list.stream()        .filter(NumberUtils::isDigits)        .collect(Collectors.toList());Assertions.assertEquals(1, nums.size());Assertions.assertTrue(nums.contains(&quot;1&quot;));</code></pre><p>æƒ³è¦æ‰¾åˆ°éæ•°å­—çš„ï¼Œ<code>filter</code>æ–¹æ³•å†™çš„å°±ä¼šç”¨åˆ°<code>!</code>éæ“ä½œï¼š</p><pre><code class="Java">final List&lt;String&gt; notNums = list.stream()        .filter(x -&gt; !NumberUtils.isDigits(x))        .collect(Collectors.toList());Assertions.assertEquals(1, notNums.size());Assertions.assertTrue(notNums.contains(&quot;a&quot;));</code></pre><p><code>Predicate</code>å¢åŠ <code>not</code>æ–¹æ³•ï¼Œå¯ä»¥æ›´åŠ ç®€å•çš„å®ç°éæ“ä½œï¼š</p><pre><code class="Java">final List&lt;String&gt; notNums2 = list.stream()        .filter(Predicate.not(NumberUtils::isDigits))        .collect(Collectors.toList());Assertions.assertEquals(1, notNums2.size());Assertions.assertTrue(notNums2.contains(&quot;a&quot;));</code></pre><p>æœ‰äº›æ•™ç¨‹è¿˜ä¼šæ¨å´‡é™æ€å¼•å…¥ï¼Œæ¯”å¦‚åœ¨å¤´éƒ¨ä½¿ç”¨<code>import static java.util.function.Predicate.not</code>ï¼Œè¿™æ ·åœ¨å‡½æ•°å¼ç¼–ç¨‹æ—¶ï¼Œå¯ä»¥å†™æ›´å°‘çš„ä»£ç ï¼Œè¯­ä¹‰æ›´å¼ºï¼Œæ¯”å¦‚ï¼š</p><pre><code class="Java">final List&lt;String&gt; notNums2 = list.stream()        .filter(not(NumberUtils::isDigits))        .collect(toList());</code></pre><h3 id="æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆJava-22ï¼‰"><a href="#æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆJava-22ï¼‰" class="headerlink" title="æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆJava 22ï¼‰"></a>æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆJava 22ï¼‰</h3><p>è¯¥ç‰¹æ€§ä½¿ç”¨ä¸‹åˆ’çº¿å­—ç¬¦ <code>\_</code> æ¥è¡¨ç¤ºæœªå‘½åçš„æ¨¡å¼å’Œå˜é‡ï¼Œä»è€Œç®€åŒ–ä»£ç å¹¶æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="Java">public static void main(String[] args) {    var _ = new Point(1, 2);}record Point(int x, int y) {}</code></pre><p>è¿™ä¸ªå¯ä»¥ç”¨åœ¨ä»»ä½•å®šä¹‰å˜é‡çš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼š</p><ul><li><code>... instanceof Point(\_, int y)</code></li><li><code>r instanceof Point \_</code></li><li><code>switch â€¦â€¦ case Box(\_)</code></li><li><code>for (Order \_ : orders)</code></li><li><code>for (int i = 0, \_ = sideEffect(); i &lt; 10; i++)</code></li><li><code>try { ... } catch (Exception \_) { ... } catch (Throwable \_) { ... }</code></li></ul><p>åªè¦æ˜¯è¿™ä¸ªä¸å‡†å¤‡ç”¨ï¼Œå¯ä»¥ä¸€å¾‹ä½¿ç”¨<code>\_</code>ä»£æ›¿ã€‚</p><h3 id="Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆJava-23ï¼‰"><a href="#Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆJava-23ï¼‰" class="headerlink" title="Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆJava 23ï¼‰"></a>Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆJava 23ï¼‰</h3><p>Markdownæ˜¯ä¸€ç§è½»é‡çº§çš„æ ‡è®°è¯­è¨€ï¼Œå¯ç”¨äºåœ¨çº¯æ–‡æœ¬æ–‡æ¡£ä¸­æ·»åŠ æ ¼å¼åŒ–å…ƒç´ ï¼Œå…·ä½“è¯­æ³•å¯ä»¥å‚è€ƒ<a href="https://www.markdownguide.org/basic-syntax/" target="_blank" rel="noopener">Markdown Guide</a>ã€‚æœ¬æ–‡å°±æ˜¯ä½¿ç”¨Markdownè¯­æ³•ç¼–å†™çš„ã€‚</p><p>åœ¨Javaæ³¨é‡Šä¸­å¼•å…¥Markdownï¼Œç›®æ ‡æ˜¯ä½¿APIæ–‡æ¡£æ³¨é‡Šä»¥æºä»£ç å½¢å¼æ›´æ˜“äºç¼–å†™å’Œé˜…è¯»ã€‚ä¸»è¦æ”¶ç›ŠåŒ…æ‹¬ï¼š</p><ul><li>æé«˜æ–‡æ¡£ç¼–å†™çš„æ•ˆç‡ï¼šMarkdownè¯­æ³•ç›¸æ¯”HTMLæ›´ä¸ºç®€æ´ï¼Œå¼€å‘è€…å¯ä»¥æ›´å¿«åœ°ç¼–å†™å’Œä¿®æ”¹æ–‡æ¡£æ³¨é‡Šã€‚</li><li>å¢å¼ºæ–‡æ¡£çš„å¯è¯»æ€§ï¼šMarkdownæ ¼å¼çš„æ–‡æ¡£åœ¨æºä»£ç ä¸­æ›´æ˜“äºé˜…è¯»ï¼Œæœ‰åŠ©äºå¼€å‘è€…å¿«é€Ÿç†è§£APIçš„ç”¨é€”å’Œè¡Œä¸ºã€‚</li><li>ä¿ƒè¿›æ–‡æ¡£çš„ä¸€è‡´æ€§ï¼šé€šè¿‡æ”¯æŒMarkdownï¼Œå¯ä»¥ç¡®ä¿æ–‡æ¡£é£æ ¼çš„ä¸€è‡´æ€§ï¼Œå‡å°‘å› æ ¼å¼é—®é¢˜å¯¼è‡´çš„æ–‡æ¡£æ··ä¹±ã€‚</li><li>ç®€åŒ–æ–‡æ¡£ç»´æŠ¤ï¼šMarkdownæ ¼å¼çš„æ–‡æ¡£æ³¨é‡Šæ›´æ˜“äºç»´æŠ¤å’Œæ›´æ–°ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šäººåä½œçš„é¡¹ç›®ä¸­ï¼Œå¯ä»¥å‡å°‘å› æ–‡æ¡£æ ¼å¼é—®é¢˜å¯¼è‡´çš„æ²Ÿé€šæˆæœ¬ã€‚</li></ul><p>å…·ä½“ä½¿ç”¨æ–¹å¼æ˜¯åœ¨æ³¨é‡Šå‰é¢å¢åŠ <code>///</code>ï¼Œæ¯”å¦‚<code>java.lang.Object.hashCode</code>çš„æ³¨é‡Šï¼š</p><pre><code class="Java">/** * Returns a hash code value for the object. This method is * supported for the benefit of hash tables such as those provided by * {@link java.util.HashMap}. * &lt;p&gt; * The general contract of {@code hashCode} is: * &lt;ul&gt; * &lt;li&gt;Whenever it is invoked on the same object more than once during *     an execution of a Java application, the {@code hashCode} method *     must consistently return the same integer, provided no information *     used in {@code equals} comparisons on the object is modified. *     This integer need not remain consistent from one execution of an *     application to another execution of the same application. * &lt;li&gt;If two objects are equal according to the {@link *     #equals(Object) equals} method, then calling the {@code *     hashCode} method on each of the two objects must produce the *     same integer result. * &lt;li&gt;It is &lt;em&gt;not&lt;/em&gt; required that if two objects are unequal *     according to the {@link #equals(Object) equals} method, then *     calling the {@code hashCode} method on each of the two objects *     must produce distinct integer results.  However, the programmer *     should be aware that producing distinct integer results for *     unequal objects may improve the performance of hash tables. * &lt;/ul&gt; * * @implSpec * As far as is reasonably practical, the {@code hashCode} method defined * by class {@code Object} returns distinct integers for distinct objects. * * @return  a hash code value for this object. * @see     java.lang.Object#equals(java.lang.Object) * @see     java.lang.System#identityHashCode */</code></pre><p>å¦‚æœä½¿ç”¨JEP 467çš„Markdownæ–¹å¼ï¼š</p><pre><code class="Java">/// Returns a hash code value for the object. This method is/// supported for the benefit of hash tables such as those provided by/// [java.util.HashMap].////// The general contract of `hashCode` is://////   - Whenever it is invoked on the same object more than once during///     an execution of a Java application, the `hashCode` method///     must consistently return the same integer, provided no information///     used in `equals` comparisons on the object is modified.///     This integer need not remain consistent from one execution of an///     application to another execution of the same application.///   - If two objects are equal according to the///     [equals][#equals(Object)] method, then calling the///     `hashCode` method on each of the two objects must produce the///     same integer result.///   - It is _not_ required that if two objects are unequal///     according to the [equals][#equals(Object)] method, then///     calling the `hashCode` method on each of the two objects///     must produce distinct integer results.  However, the programmer///     should be aware that producing distinct integer results for///     unequal objects may improve the performance of hash tables.////// @implSpec/// As far as is reasonably practical, the `hashCode` method defined/// by class `Object` returns distinct integers for distinct objects.////// @return  a hash code value for this object./// @see     java.lang.Object#equals(java.lang.Object)/// @see     java.lang.System#identityHashCode</code></pre><p>ç®€å•ä¸¤ç§å†™æ³•çš„å·®å¼‚ï¼Œç›¸åŒæ³¨é‡Šï¼ŒMarkdownçš„å†™æ³•æ›´åŠ ç®€æ´ï¼š</p><p><img src="https://static.howardliu.cn/202409161338899.png" alt="Object hashcodeæ³¨é‡Šå·®å¼‚"></p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æƒ³è¦äº†è§£å„ç‰ˆæœ¬çš„è¯¦ç»†ç‰¹æ€§ï¼Œå¯ä»¥ä»<a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­æŸ¥çœ‹ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><ul><li>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a></li><li>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ5ï¼‰ï¼šå¢å¼ºå°ç‰¹æ€§</a></li><li>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a></li><li>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ5ï¼‰ï¼šå¢å¼ºå°ç‰¹æ€§</a></li></ul><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      å¢å¼ºå°ç‰¹æ€§ã€‚ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java10" scheme="https://www.howardliu.cn/tags/Java10/"/>
    
      <category term="Java11" scheme="https://www.howardliu.cn/tags/Java11/"/>
    
      <category term="Java12" scheme="https://www.howardliu.cn/tags/Java12/"/>
    
      <category term="Java14" scheme="https://www.howardliu.cn/tags/Java14/"/>
    
      <category term="Java15" scheme="https://www.howardliu.cn/tags/Java15/"/>
    
      <category term="Java13" scheme="https://www.howardliu.cn/tags/Java13/"/>
    
      <category term="Java16" scheme="https://www.howardliu.cn/tags/Java16/"/>
    
      <category term="Java17" scheme="https://www.howardliu.cn/tags/Java17/"/>
    
      <category term="Java18" scheme="https://www.howardliu.cn/tags/Java18/"/>
    
      <category term="Java19" scheme="https://www.howardliu.cn/tags/Java19/"/>
    
      <category term="Java20" scheme="https://www.howardliu.cn/tags/Java20/"/>
    
      <category term="Java21" scheme="https://www.howardliu.cn/tags/Java21/"/>
    
      <category term="Java8" scheme="https://www.howardliu.cn/tags/Java8/"/>
    
      <category term="Java22" scheme="https://www.howardliu.cn/tags/Java22/"/>
    
      <category term="Java9" scheme="https://www.howardliu.cn/tags/Java9/"/>
    
      <category term="Java23" scheme="https://www.howardliu.cn/tags/Java23/"/>
    
  </entry>
  
  <entry>
    <title>ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ4ï¼‰ï¼šåƒåœ¾æ”¶é›†å™¨</title>
    <link href="https://www.howardliu.cn/java/java-features-8-23-4/"/>
    <id>https://www.howardliu.cn/java/java-features-8-23-4/</id>
    <published>2024-09-20T00:20:00.000Z</published>
    <updated>2024-12-06T11:36:03.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/202409161331364.jpg" alt="ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚</p><p><img src="https://static.howardliu.cn/202409111451409.png" alt="Javaç‰ˆæœ¬åˆ†å¸ƒ"></p><blockquote><p>æ•°æ®æ¥æº<a href="https://newrelic.com/sites/default/files/2024-05/new-relic-state-of-the-java-ecosystem-2024-05-29.pdf" target="_blank" rel="noopener">2024 State of the Java Ecosystem</a></p></blockquote><h2 id="åƒåœ¾æ”¶é›†å™¨"><a href="#åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨"></a>åƒåœ¾æ”¶é›†å™¨</h2><h3 id="G1ï¼ˆJava-9ï¼‰"><a href="#G1ï¼ˆJava-9ï¼‰" class="headerlink" title="G1ï¼ˆJava 9ï¼‰"></a>G1ï¼ˆJava 9ï¼‰</h3><p>G1åƒåœ¾æ”¶é›†å™¨ï¼ˆGarbage-First Garbage Collectorï¼Œç®€ç§°G1 GCï¼‰æ˜¯ä¸€ç§ä¸“ä¸ºæœåŠ¡å™¨ç«¯åº”ç”¨è®¾è®¡çš„åƒåœ¾æ”¶é›†å™¨ï¼Œç‰¹åˆ«é€‚ç”¨äºå…·æœ‰å¤šæ ¸å¤„ç†å™¨å’Œå¤§å†…å­˜çš„æœºå™¨ã€‚å®ƒåœ¨Java 9ä¸­æˆä¸ºé»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨ã€‚</p><ol><li>åˆ†åŒºæœºåˆ¶ï¼šG1å°†æ•´ä¸ªå †ç©ºé—´åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ï¼Œæ¯ä¸ªRegionçš„å¤§å°æ ¹æ®å †çš„å®é™…å¤§å°è€Œå®šï¼Œé€šå¸¸æ§åˆ¶åœ¨1MBåˆ°32MBä¹‹é—´ã€‚è¿™ç§åˆ†åŒºçš„æ€æƒ³å¼±åŒ–äº†ä¼ ç»Ÿçš„åˆ†ä»£æ¦‚å¿µï¼Œä½¿å¾—åƒåœ¾æ”¶é›†æ›´åŠ çµæ´»å’Œé«˜æ•ˆã€‚</li><li>åƒåœ¾å›æ”¶ç­–ç•¥ï¼šG1é‡‡ç”¨æ··åˆåƒåœ¾å›æ”¶ç­–ç•¥ï¼ˆMix GCï¼‰ï¼Œä¸ä»…å›æ”¶æ–°ç”Ÿä»£ä¸­çš„æ‰€æœ‰Regionï¼Œè¿˜ä¼šå›æ”¶éƒ¨åˆ†è€å¹´ä»£ä¸­çš„Regionã€‚è¿™ç§ç­–ç•¥çš„ç›®æ ‡æ˜¯åœ¨ä¿è¯åœé¡¿æ—¶é—´ä¸è¶…è¿‡é¢„æœŸçš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½åœ°å›æ”¶æ›´å¤šçš„åƒåœ¾å¯¹è±¡ã€‚</li><li>å¹¶è¡Œä¸å¹¶å‘ï¼šG1èƒ½å¤Ÿå……åˆ†åˆ©ç”¨CPUã€å¤šæ ¸ç¯å¢ƒä¸‹çš„ç¡¬ä»¶ä¼˜åŠ¿ï¼Œä½¿ç”¨å¤šä¸ªCPUæ ¸å¿ƒæ¥ç¼©çŸ­Stop-The-Worldåœé¡¿æ—¶é—´ã€‚éƒ¨åˆ†å…¶ä»–æ”¶é›†å™¨éœ€è¦åœé¡¿Javaçº¿ç¨‹æ‰§è¡Œçš„GCåŠ¨ä½œï¼Œä½†G1å¯ä»¥é€šè¿‡å¹¶å‘çš„æ–¹å¼è®©Javaç¨‹åºç»§ç»­è¿è¡Œã€‚</li><li>é«˜ååé‡ä¸ä½å»¶è¿Ÿï¼šG1çš„ä¸»è¦ç›®æ ‡æ˜¯åœ¨æ»¡è¶³é«˜ååé‡çš„åŒæ—¶ï¼Œå°½å¯èƒ½å‡å°‘GCåœé¡¿æ—¶é—´ã€‚é€šè¿‡è·Ÿè¸ªå„ä¸ªRegionä¸­çš„åƒåœ¾å †ç§¯æƒ…å†µï¼Œæ¯æ¬¡æ ¹æ®è®¾ç½®çš„åƒåœ¾å›æ”¶æ—¶é—´ï¼Œä¼˜å…ˆå¤„ç†ä¼˜å…ˆçº§æœ€é«˜çš„åŒºåŸŸï¼Œé¿å…ä¸€æ¬¡æ€§æ¸…ç†æ•´ä¸ªæ–°ç”Ÿä»£æˆ–æ•´ä¸ªè€å¹´ä»£çš„åƒåœ¾ã€‚</li></ol><p>G1åƒåœ¾æ”¶é›†å™¨éå¸¸é€‚åˆå¤§å°ºå¯¸å †å†…å­˜çš„åº”ç”¨åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šå¤„ç†å™¨ç¯å¢ƒä¸‹ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯èƒ½å¤Ÿåœ¨æœ‰é™çš„æ—¶é—´å†…è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡ï¼Œå¹¶ä¸”é¿å…å†…å­˜ç¢ç‰‡ã€‚å¯¹äºé‚£äº›å¯¹GCåœé¡¿æ—¶é—´æ•æ„Ÿçš„åº”ç”¨ï¼Œå¦‚å®æ—¶ç³»ç»Ÿå’Œå¤§æ•°æ®å¤„ç†ç³»ç»Ÿï¼ŒG1æ˜¯ä¸€ä¸ªéå¸¸åˆé€‚çš„é€‰æ‹©ã€‚</p><h3 id="ZGCï¼ˆJava-15ï¼‰"><a href="#ZGCï¼ˆJava-15ï¼‰" class="headerlink" title="ZGCï¼ˆJava 15ï¼‰"></a>ZGCï¼ˆJava 15ï¼‰</h3><p>ZGC æ˜¯ä¸€ä¸ªå¯ä¼¸ç¼©ã€ä½å»¶è¿Ÿçš„åƒåœ¾æ”¶é›†å™¨ï¼Œä½¿ç”¨-XX:+UseZGC å‘½ä»¤å¼€å¯ã€‚</p><p>åç§°ä¸­çš„â€œZâ€å¹¶æ²¡æœ‰ç‰¹å®šçš„å«ä¹‰ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªåç§°ï¼Œçµæ„Ÿæ¥æºäºOracleçš„ZFSæ–‡ä»¶ç³»ç»Ÿã€‚ZFSåœ¨è®¾è®¡ä¸Šå…·æœ‰é©å‘½æ€§ï¼Œå› æ­¤ZGCçš„å‘½åä¹Ÿå‘å…¶è‡´æ•¬ã€‚</p><p>åœ¨Java15å‘å¸ƒæ—¶ï¼Œæä¾›çš„æ˜¯ä¸åˆ†ä»£æ”¶é›†å™¨ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æ”¾åœ¨ä¸€èµ·ï¼ŒæœŸæœ›STWæœ€å¤§10msã€‚</p><p>åœ¨Java21çš„æ—¶å€™ï¼ŒåŸºäºã€Œå¤§éƒ¨åˆ†å¯¹è±¡æœç”Ÿå¤•æ­»ã€çš„åˆ†ä»£å‡è¯´ï¼ŒZGCæä¾›äº†åˆ†ä»£ç‰ˆæœ¬ï¼Œå°†å†…å­˜åˆ’åˆ†ä¸ºå¹´è½»ä»£å’Œè€å¹´ä»£ï¼Œå¹¶ä¸ºè¿™ä¸¤ç§ä»£åˆ†åˆ«ç»´æŠ¤ä¸åŒçš„åƒåœ¾æ”¶é›†ç­–ç•¥ï¼ŒæœŸæœ›STWæœ€å¤§æ˜¯1msã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹<a href="https://kstefanj.github.io/2023/11/07/hazelcast-on-generational-zgc.html" target="_blank" rel="noopener">Hazelcast Jet on Generational ZGC</a>ä¸­ç»™å‡ºçš„æµ‹è¯„æ•ˆæœï¼š</p><p><img src="https://static.howardliu.cn/202409161336772.png" alt="JEP 439: åˆ†ä»£ZGCï¼ˆGenerational ZGCï¼‰"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œéåˆ†ä»£ ZGC åœ¨ä½è´Ÿè½½ä¸‹è¡¨ç°éå¸¸å¥½ï¼Œä½†éšç€åˆ†é…å‹åŠ›çš„å¢åŠ ï¼Œå»¶è¿Ÿä¹Ÿä¼šå¢åŠ ã€‚ä½¿ç”¨åˆ†ä»£ ZGC åï¼Œå³ä½¿åœ¨é«˜è´Ÿè½½ä¸‹ï¼Œå»¶è¿Ÿä¹Ÿéå¸¸ä½ï¼Œè€Œä¸”å»¶è¿Ÿæ•ˆæœä¼˜äºG1ã€‚</p><h3 id="Shenandoahï¼ˆJava-15ï¼‰"><a href="#Shenandoahï¼ˆJava-15ï¼‰" class="headerlink" title="Shenandoahï¼ˆJava 15ï¼‰"></a>Shenandoahï¼ˆJava 15ï¼‰</h3><p>Shenandoahï¼ˆè¯»éŸ³ï¼šè°¢å—å¤šå„ï¼‰ï¼Œä½œä¸ºä¸€ä¸ªä½åœé¡¿çš„åƒåœ¾æ”¶é›†å™¨ã€‚</p><p>Shenandoah åƒåœ¾æ”¶é›†å™¨æ˜¯ RedHat åœ¨ 2014 å¹´å®£å¸ƒè¿›è¡Œçš„åƒåœ¾æ”¶é›†å™¨ç ”ç©¶é¡¹ç›®ï¼Œå…¶å·¥ä½œåŸç†æ˜¯é€šè¿‡ä¸ Java åº”ç”¨æ‰§è¡Œçº¿ç¨‹åŒæ—¶è¿è¡Œæ¥é™ä½åœé¡¿æ—¶é—´ã€‚</p><p>ç®€å•çš„è¯´å°±æ˜¯ï¼ŒShenandoah å·¥ä½œæ—¶ä¸åº”ç”¨ç¨‹åºçº¿ç¨‹å¹¶å‘ï¼Œé€šè¿‡äº¤æ¢ CPU å¹¶å‘å‘¨æœŸå’Œç©ºé—´ä»¥æ”¹å–„åœé¡¿æ—¶é—´ï¼Œä½¿å¾—åƒåœ¾å›æ”¶å™¨æ‰§è¡Œçº¿ç¨‹èƒ½å¤Ÿåœ¨ Java çº¿ç¨‹è¿è¡Œæ—¶è¿›è¡Œå †å‹ç¼©ï¼Œå¹¶ä¸”æ ‡è®°å’Œæ•´ç†èƒ½å¤ŸåŒæ—¶è¿›è¡Œï¼Œå› æ­¤é¿å…äº†åœ¨å¤§å¤šæ•° JVM åƒåœ¾æ”¶é›†å™¨ä¸­æ‰€é‡åˆ°çš„é—®é¢˜ã€‚</p><p><img src="https://static.howardliu.cn/202409161336975.png" alt="Shenandoah GC"></p><p>Shenandoah åƒåœ¾å›æ”¶å™¨çš„æš‚åœæ—¶é—´ä¸å †å¤§å°æ— å…³ï¼Œè¿™æ„å‘³ç€æ— è®ºå°†å †è®¾ç½®ä¸º 200MB è¿˜æ˜¯ 200GBï¼Œéƒ½å°†æ‹¥æœ‰ä¸€è‡´çš„ç³»ç»Ÿæš‚åœæ—¶é—´ï¼Œä¸è¿‡å®é™…ä½¿ç”¨æ€§èƒ½å°†å–å†³äºå®é™…å·¥ä½œå †çš„å¤§å°å’Œå·¥ä½œè´Ÿè½½ã€‚</p><p><a href="https://wiki.openjdk.java.net/display/shenandoah" target="_blank" rel="noopener">https://wiki.openjdk.java.net/display/shenandoah</a></p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æƒ³è¦äº†è§£å„ç‰ˆæœ¬çš„è¯¦ç»†ç‰¹æ€§ï¼Œå¯ä»¥ä»<a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­æŸ¥çœ‹ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><ul><li>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a></li><li>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ4ï¼‰ï¼šåƒåœ¾æ”¶é›†å™¨</a></li><li>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a></li><li>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ4ï¼‰ï¼šåƒåœ¾æ”¶é›†å™¨</a></li></ul><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      åƒåœ¾æ”¶é›†å™¨ã€‚ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java10" scheme="https://www.howardliu.cn/tags/Java10/"/>
    
      <category term="Java11" scheme="https://www.howardliu.cn/tags/Java11/"/>
    
      <category term="Java12" scheme="https://www.howardliu.cn/tags/Java12/"/>
    
      <category term="Java14" scheme="https://www.howardliu.cn/tags/Java14/"/>
    
      <category term="Java15" scheme="https://www.howardliu.cn/tags/Java15/"/>
    
      <category term="Java13" scheme="https://www.howardliu.cn/tags/Java13/"/>
    
      <category term="Java16" scheme="https://www.howardliu.cn/tags/Java16/"/>
    
      <category term="Java17" scheme="https://www.howardliu.cn/tags/Java17/"/>
    
      <category term="Java18" scheme="https://www.howardliu.cn/tags/Java18/"/>
    
      <category term="Java19" scheme="https://www.howardliu.cn/tags/Java19/"/>
    
      <category term="Java20" scheme="https://www.howardliu.cn/tags/Java20/"/>
    
      <category term="Java21" scheme="https://www.howardliu.cn/tags/Java21/"/>
    
      <category term="Java8" scheme="https://www.howardliu.cn/tags/Java8/"/>
    
      <category term="Java22" scheme="https://www.howardliu.cn/tags/Java22/"/>
    
      <category term="Java9" scheme="https://www.howardliu.cn/tags/Java9/"/>
    
      <category term="Java23" scheme="https://www.howardliu.cn/tags/Java23/"/>
    
  </entry>
  
  <entry>
    <title>ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java/java-features-8-23/"/>
    <id>https://www.howardliu.cn/java/java-features-8-23/</id>
    <published>2024-09-19T00:23:00.000Z</published>
    <updated>2024-12-06T11:36:03.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/202409161115516.jpg" alt="ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚</p><p><img src="https://static.howardliu.cn/202409111451409.png" alt="Javaç‰ˆæœ¬åˆ†å¸ƒ"></p><blockquote><p>æ•°æ®æ¥æº<a href="https://newrelic.com/sites/default/files/2024-05/new-relic-state-of-the-java-ecosystem-2024-05-29.pdf" target="_blank" rel="noopener">2024 State of the Java Ecosystem</a></p></blockquote><h2 id="æœ‰æ„æ€çš„ç‰¹æ€§"><a href="#æœ‰æ„æ€çš„ç‰¹æ€§" class="headerlink" title="æœ‰æ„æ€çš„ç‰¹æ€§"></a>æœ‰æ„æ€çš„ç‰¹æ€§</h2><blockquote><p>å¯ä»¥ä» <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­æŸ¥çœ‹å„ä¸ªç‰ˆæœ¬çš„ç‰¹æ€§ã€‚</p></blockquote><h3 id="å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰çš„ç‰¹æ€§"><a href="#å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰çš„ç‰¹æ€§" class="headerlink" title="å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰çš„ç‰¹æ€§"></a>å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰çš„ç‰¹æ€§</h3><p>Java8ä¸­çš„Lambdaè¡¨è¾¾å¼ã€Streamæµã€Optionalæ˜¯å¤§ç‰ˆæœ¬ç‰¹æ€§ï¼ŒJava8æ˜¯2014å¹´å‘å¸ƒï¼Œå·²æœ‰åå¹´å†å²äº†ã€‚å¤§å®¶åº”è¯¥åˆ†å‚ç†Ÿæ‚‰äº†ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚æ¨èä¸¤ç¯‡æ–‡ç« ï¼š</p><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li></ul><h3 id="è¡¥å…¨æŠ€èƒ½æ ‘"><a href="#è¡¥å…¨æŠ€èƒ½æ ‘" class="headerlink" title="è¡¥å…¨æŠ€èƒ½æ ‘"></a>è¡¥å…¨æŠ€èƒ½æ ‘</h3><h4 id="Record-ç±»å‹ï¼ˆJava-16ï¼‰"><a href="#Record-ç±»å‹ï¼ˆJava-16ï¼‰" class="headerlink" title="Record ç±»å‹ï¼ˆJava 16ï¼‰"></a>Record ç±»å‹ï¼ˆJava 16ï¼‰</h4><p>Javaæ–°å¢äº†ä¸€ä¸ªå…³é”®å­—<code>record</code>ï¼Œå®ƒæ˜¯å®šä¹‰ä¸å¯å˜æ•°æ®ç±»å‹å°è£…ç±»çš„å…³é”®å­—ï¼Œä¸»è¦ç”¨åœ¨ç‰¹å®šé¢†åŸŸç±»ä¸Šã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨Javaå¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰POJOä½œä¸ºæ•°æ®å­˜å‚¨å¯¹è±¡ï¼Œæ ¹æ®è§„èŒƒï¼ŒPOJOä¸­é™¤äº†å±æ€§æ˜¯ä¸ªæ€§åŒ–çš„ï¼Œå…¶ä»–çš„æ¯”å¦‚<code>getter</code>ã€<code>setter</code>ã€<code>equals</code>ã€<code>hashCode</code>ã€<code>toString</code>éƒ½æ˜¯æ¨¡æ¿åŒ–çš„å†™æ³•ï¼Œæ‰€ä»¥ä¸ºäº†ç®€ä¾¿ï¼Œå¾ˆå¤šç±»ä¼¼Lombokçš„ç»„ä»¶æä¾›Javaç±»ç¼–è¯‘æ—¶å¢å¼ºï¼Œé€šè¿‡åœ¨ç±»ä¸Šå®šä¹‰<code>@Data</code>æ³¨è§£è‡ªåŠ¨æ·»åŠ è¿™äº›æ¨¡æ¿åŒ–æ–¹æ³•ã€‚åœ¨Java14ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨<code>record</code>è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>Person</code>ç±»ï¼š</p><pre><code class="Java">public record Person(String name, String address) {}</code></pre><p>æˆ‘ä»¬è½¬æ¢ä¸ºä¹‹å‰çš„å®šä¹‰ä¼šæ˜¯ä¸€å¨ä¸‹é¢è¿™ç§ä»£ç ï¼š</p><pre><code class="Java">public final class PersonBefore {    private final String name;    private final String address;    public PersonBefore(String name, String address) {        this.name = name;        this.address = address;    }    public String name() {        return name;    }    public String address() {        return address;    }    @Override    public boolean equals(Object o) {        if (this == o) {            return true;        }        if (o == null || getClass() != o.getClass()) {            return false;        }        PersonBefore14 that = (PersonBefore14) o;        return Objects.equals(name, that.name) &amp;&amp; Objects.equals(address, that.address);    }    @Override    public int hashCode() {        return Objects.hash(name, address);    }    @Override    public String toString() {        return &quot;PersonBefore{&quot; +                &quot;name=&#39;&quot; + name + &#39;\&#39;&#39; +                &quot;, address=&#39;&quot; + address + &#39;\&#39;&#39; +                &#39;}&#39;;    }}</code></pre><p>æˆ‘ä»¬å¯ä»¥å‘ç°Recordç±»æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š</p><ol><li>ä¸€ä¸ªæ„é€ æ–¹æ³•</li><li>getteræ–¹æ³•åä¸å±æ€§åç›¸åŒ</li><li>æœ‰<code>equals()</code>ã€<code>hashCode()</code>æ–¹æ³•</li><li>æœ‰<code>toString()</code>æ–¹æ³•</li><li>ç±»å¯¹è±¡å’Œå±æ€§è¢«<code>final</code>ä¿®é¥°ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°æ˜¯åŒ…å«æ‰€æœ‰å±æ€§çš„ï¼Œè€Œä¸”æ²¡æœ‰setteræ–¹æ³•</li></ol><p>åœ¨<code>Class</code>ç±»ä¸­ä¹Ÿæ–°å¢äº†å¯¹åº”çš„å¤„ç†æ–¹æ³•ï¼š</p><ul><li><code>getRecordComponents()</code>ï¼šè¿”å›ä¸€ç»„<code>java.lang.reflect.RecordComponent</code>å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œè¯¥æ•°ç»„çš„å…ƒç´ ä¸<code>Record</code>ç±»ä¸­çš„ç»„ä»¶ç›¸å¯¹åº”ï¼Œå…¶é¡ºåºä¸åœ¨è®°å½•å£°æ˜ä¸­å‡ºç°çš„é¡ºåºç›¸åŒï¼Œå¯ä»¥ä»è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ª<code>RecordComponent</code>ä¸­æå–åˆ°ç»„ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶åç§°ã€ç±»å‹ã€æ³›å‹ç±»å‹ã€æ³¨é‡ŠåŠå…¶è®¿é—®æ–¹æ³•ã€‚</li><li><code>isRecord()</code>ï¼šè¿”å›æ‰€åœ¨ç±»æ˜¯å¦æ˜¯ Record ç±»å‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚</li></ul><p>çœ‹èµ·æ¥ï¼ŒRecordç±»å’ŒEnumå¾ˆåƒï¼Œéƒ½æ˜¯ä¸€å®šçš„æ¨¡æ¿ç±»ï¼Œé€šè¿‡è¯­æ³•ç³–å®šä¹‰ï¼Œåœ¨Javaç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œå°†å…¶ç¼–è¯‘æˆç‰¹å®šçš„æ ¼å¼ï¼ŒåŠŸèƒ½å¾ˆå¥½ï¼Œä½†å¦‚æœæ²¡æœ‰ä¹ æƒ¯ä½¿ç”¨ï¼Œå¯èƒ½ä¼šè§‰å¾—é™åˆ¶å¤ªå¤šã€‚ </p><h4 id="å¯†å°ç±»å’Œæ¥å£ï¼ˆJava-17ï¼‰"><a href="#å¯†å°ç±»å’Œæ¥å£ï¼ˆJava-17ï¼‰" class="headerlink" title="å¯†å°ç±»å’Œæ¥å£ï¼ˆJava 17ï¼‰"></a>å¯†å°ç±»å’Œæ¥å£ï¼ˆJava 17ï¼‰</h4><p>ç›®å‰ï¼ŒJava æ²¡æœ‰æä¾›å¯¹ç»§æ‰¿çš„ç»†ç²’åº¦æ§åˆ¶ï¼Œåªæœ‰ publicã€protectedã€privateã€åŒ…å†…æ§åˆ¶å››ç§éå¸¸ç²—ç²’åº¦çš„æ§åˆ¶æ–¹å¼ã€‚</p><p>ä¸ºæ­¤ï¼Œå¯†å°ç±»çš„ç›®æ ‡æ˜¯å…è®¸å•ä¸ªç±»å£°æ˜å“ªäº›ç±»å‹å¯ä»¥ç”¨ä½œå…¶å­ç±»å‹ã€‚è¿™ä¹Ÿé€‚ç”¨äºæ¥å£ï¼Œå¹¶ç¡®å®šå“ªäº›ç±»å‹å¯ä»¥å®ç°å®ƒä»¬ã€‚è¯¥åŠŸèƒ½ç‰¹æ€§æ–°å¢äº†<code>sealed</code>å’Œ<code>non-sealed</code>ä¿®é¥°ç¬¦å’Œ<code>permits</code>å…³é”®å­—ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹å®šä¹‰ï¼š</p><pre><code class="Java">public sealed class Person permits Student, Worker, Teacher {}public sealed class Student extends Person        permits Pupil, JuniorSchoolStudent, HighSchoolStudent, CollegeStudent, GraduateStudent {}public final class Pupil extends Student {}public non-sealed class Worker extends Person {}public class OtherClass extends Worker {}public final class Teacher extends Person {}</code></pre><p>æˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ª<code>sealed</code>ä¿®é¥°çš„ç±»<code>Person</code>ï¼Œä½¿ç”¨<code>permits</code>æŒ‡å®šè¢«ç»§æ‰¿çš„å­ç±»ï¼Œè¿™äº›å­ç±»å¿…é¡»æ˜¯ä½¿ç”¨<code>final</code>æˆ–<code>sealed</code>æˆ–<code>non-sealed</code>ä¿®é¥°çš„ç±»ã€‚å…¶ä¸­<code>Student</code>æ˜¯ä½¿ç”¨<code>sealed</code>ä¿®é¥°ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦ä½¿ç”¨<code>permits</code>æŒ‡å®šè¢«ç»§æ‰¿çš„å­ç±»ã€‚<code>Worker</code>ç±»ä½¿ç”¨<code>non-sealed</code>ä¿®é¥°ï¼Œæˆä¸ºæ™®é€šç±»ï¼Œå…¶ä»–ç±»éƒ½å¯ä»¥ç»§æ‰¿å®ƒã€‚<code>Teacher</code>ä½¿ç”¨<code>final</code>ä¿®é¥°ï¼Œä¸å¯å†è¢«ç»§æ‰¿ã€‚</p><p>ä»ç±»å›¾ä¸Šçœ‹æ²¡æœ‰å¤ªå¤šåŒºåˆ«ï¼š</p><p><img src="https://static.howardliu.cn/202409161142744.png" alt="å¯†å°ç±»å’Œæ¥å£"></p><p>ä½†æ˜¯ä»åŠŸèƒ½ç‰¹æ€§ä¸Šï¼Œèµ·åˆ°äº†å¾ˆå¥½çš„çº¦æŸä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„å®šä¹‰å¯ä»¥å…¬å¼€ä½¿ç”¨ï¼Œä½†åˆä¸æƒ³è¢«éç‰¹å®šç±»ç»§æ‰¿çš„ç±»äº†ã€‚</p><h4 id="å…¨æ–°çš„-HTTP-å®¢æˆ·ç«¯ï¼ˆJava-11ï¼‰"><a href="#å…¨æ–°çš„-HTTP-å®¢æˆ·ç«¯ï¼ˆJava-11ï¼‰" class="headerlink" title="å…¨æ–°çš„ HTTP å®¢æˆ·ç«¯ï¼ˆJava 11ï¼‰"></a>å…¨æ–°çš„ HTTP å®¢æˆ·ç«¯ï¼ˆJava 11ï¼‰</h4><p>è€ç‰ˆ HTTP å®¢æˆ·ç«¯å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œå¤§å®¶å¼€å‘çš„æ—¶å€™åŸºæœ¬ä¸Šéƒ½æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹ HTTP åº“ï¼Œæ¯”å¦‚ Apache HttpClientã€Nettyã€Jetty ç­‰ã€‚</p><p>æ–°ç‰ˆ HTTP å®¢æˆ·ç«¯çš„ç›®æ ‡å¾ˆå¤šï¼Œæ¯•ç«Ÿè¿™ä¹ˆå¤šç ç‰åœ¨å‰ï¼Œå¦‚æœè¿˜æ˜¯åšæˆä¸€å¨ï¼ŒæŒ‡å®šæ˜¯è¦è¢«ç¬‘æ­»çš„ã€‚æ‰€ä»¥æ–°ç‰ˆ HTTP å®¢æˆ·ç«¯åˆ—å‡ºäº† 16 ä¸ªç›®æ ‡ï¼ŒåŒ…æ‹¬ç®€å•æ˜“ç”¨ã€æ‰“å°å…³é”®ä¿¡æ¯ã€WebSocketã€HTTP/2ã€HTTPS/TLSã€è‰¯å¥½çš„æ€§èƒ½ã€éé˜»å¡ API ç­‰ç­‰ã€‚</p><pre><code class="Java">@Testvoid testHttpClient() throws IOException, InterruptedException {    final HttpClient httpClient = HttpClient.newBuilder()            .version(HttpClient.Version.HTTP_2)            .connectTimeout(Duration.ofSeconds(20))            .build();    final HttpRequest httpRequest = HttpRequest.newBuilder()            .GET()            .uri(URI.create(&quot;https://www.howardliu.cn/robots.txt&quot;))            .build();    final HttpResponse&lt;String&gt; httpResponse = httpClient.send(httpRequest, BodyHandlers.ofString());    final String responseBody = httpResponse.body();    assertTrue(responseBody.contains(&quot;Allow&quot;));}</code></pre><h4 id="æœ‰åºé›†åˆï¼ˆJava-21ï¼‰"><a href="#æœ‰åºé›†åˆï¼ˆJava-21ï¼‰" class="headerlink" title="æœ‰åºé›†åˆï¼ˆJava 21ï¼‰"></a>æœ‰åºé›†åˆï¼ˆJava 21ï¼‰</h4><p>æœ‰åºé›†åˆæ˜¯Java21ç‰ˆæœ¬ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œæ—¨åœ¨ä¸ºJavaé›†åˆæ¡†æ¶æ·»åŠ å¯¹æœ‰åºé›†åˆçš„æ”¯æŒã€‚</p><p>æœ‰åºé›†åˆæ˜¯ä¸€ç§å…·æœ‰å®šä¹‰å¥½çš„å…ƒç´ è®¿é—®é¡ºåºçš„é›†åˆç±»å‹ï¼Œå®ƒå…è®¸ä»¥ä¸€è‡´çš„æ–¹å¼è®¿é—®å’Œå¤„ç†é›†åˆä¸­çš„å…ƒç´ ï¼Œæ— è®ºæ˜¯ä»ç¬¬ä¸€ä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿˜æ˜¯ä»æœ€åä¸€ä¸ªå…ƒç´ åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p>åœ¨ Java ä¸­ï¼Œé›†åˆç±»åº“éå¸¸é‡è¦ä¸”ä½¿ç”¨é¢‘ç‡éå¸¸é«˜ï¼Œä½†æ˜¯ç¼ºä¹ä¸€ç§èƒ½å¤Ÿè¡¨ç¤ºå…·æœ‰å®šä¹‰å¥½çš„å…ƒç´ è®¿é—®é¡ºåºçš„é›†åˆç±»å‹ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>List</code>å’Œ<code>Deque</code>éƒ½å®šä¹‰äº†å…ƒç´ çš„è®¿é—®é¡ºåºï¼Œä½†å®ƒä»¬çš„å…±åŒçˆ¶æ¥å£<code>Collection</code>å´æ²¡æœ‰ã€‚åŒæ ·ï¼ŒSetä¸å®šä¹‰å…ƒç´ çš„è®¿é—®é¡ºåºï¼Œå…¶å­ç±»å‹å¦‚<code>HashSet</code>ä¹Ÿæ²¡æœ‰å®šä¹‰ï¼Œä½†å­ç±»å‹å¦‚<code>SortedSet</code>å’Œ<code>LinkedHashSet</code>åˆ™æœ‰å®šä¹‰ã€‚å› æ­¤ï¼Œæ”¯æŒè®¿é—®é¡ºåºçš„åŠŸèƒ½æ•£å¸ƒåœ¨æ•´ä¸ªç±»å‹å±‚æ¬¡ç»“æ„ä¸­ï¼Œä½¿å¾—åœ¨APIä¸­è¡¨è¾¾æŸäº›æœ‰ç”¨çš„æ¦‚å¿µå˜å¾—å›°éš¾ã€‚<code>Collection</code>å¤ªé€šç”¨ï¼Œå°†æ­¤ç±»çº¦æŸç•™ç»™æ–‡æ¡£è§„èŒƒï¼Œå¯èƒ½å¯¼è‡´éš¾ä»¥è°ƒè¯•çš„é”™è¯¯ã€‚</p><p>è€Œä¸”ï¼Œè™½ç„¶æŸäº›é›†åˆæœ‰é¡ºåºæ“ä½œæ–¹æ³•ï¼Œä½†æ˜¯å´ä¸å°½ç›¸åŒï¼Œæ¯”å¦‚</p><table><thead><tr><th><br></th><th>First element</th><th>Last element</th></tr></thead><tbody><tr><td>List</td><td>list.get(0)</td><td>list.get(list.size() - 1)</td></tr><tr><td>Deque</td><td>deque.getFirst()</td><td>deque.getLast()</td></tr><tr><td>SortedSet</td><td>sortedSet.first()</td><td>sortedSet.last()</td></tr><tr><td>LinkedHashSet</td><td>linkedHashSet.iterator().next()</td><td>ç¼ºå¤±</td></tr></tbody></table><p>æä¾›äº†æœ‰åºé›†åˆ<code>SequencedCollection</code>ã€<code>SequencedSet</code>ã€<code>SequencedMap</code>ï¼š</p><pre><code class="Java">interface SequencedCollection&lt;E&gt; extends Collection&lt;E&gt; {    // new method    SequencedCollection&lt;E&gt; reversed();    // methods promoted from Deque    void addFirst(E);    void addLast(E);    E getFirst();    E getLast();    E removeFirst();    E removeLast();}interface SequencedSet&lt;E&gt; extends Set&lt;E&gt;, SequencedCollection&lt;E&gt; {    SequencedSet&lt;E&gt; reversed();    // covariant override}interface SequencedMap&lt;K,V&gt; extends Map&lt;K,V&gt; {    // new methods    SequencedMap&lt;K,V&gt; reversed();    SequencedSet&lt;K&gt; sequencedKeySet();    SequencedCollection&lt;V&gt; sequencedValues();    SequencedSet&lt;Entry&lt;K,V&gt;&gt; sequencedEntrySet();    V putFirst(K, V);    V putLast(K, V);    // methods promoted from NavigableMap    Entry&lt;K, V&gt; firstEntry();    Entry&lt;K, V&gt; lastEntry();    Entry&lt;K, V&gt; pollFirstEntry();    Entry&lt;K, V&gt; pollLastEntry();}</code></pre><p><code>SequencedCollection</code>çš„<code>reversed()</code>æ–¹æ³•æä¾›äº†ä¸€ä¸ªåŸå§‹é›†åˆçš„åå‘è§†å›¾ã€‚ä»»ä½•å¯¹åŸå§‹é›†åˆçš„ä¿®æ”¹éƒ½ä¼šåœ¨è§†å›¾ä¸­å¯è§ã€‚å¦‚æœå…è®¸ï¼Œè§†å›¾ä¸­çš„ä¿®æ”¹ä¼šå†™å›åˆ°åŸå§‹é›†åˆã€‚</p><p><img src="https://static.howardliu.cn/202409161143487.png" alt="JEP 431: æœ‰åºé›†åˆï¼ˆSequenced Collectionsï¼‰"></p><p>æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªLinkedHashSetï¼Œç°åœ¨æˆ‘ä»¬æƒ³è¦è·å–å®ƒçš„åå‘è§†å›¾å¹¶ä»¥åå‘é¡ºåºéå†å®ƒï¼š</p><pre><code class="Java">LinkedHashSet&lt;Integer&gt; linkedHashSet = new LinkedHashSet&lt;&gt;(Arrays.asList(3, 2, 1));// è·å–åå‘è§†å›¾SequencedCollection&lt;Integer&gt; reversed = linkedHashSet.reversed();// åå‘éå†System.out.println(&quot;åŸå§‹æ•°æ®ï¼š&quot; + linkedHashSet);System.out.println(&quot;åè½¬æ•°æ®ï¼š&quot; + reversed);// è¿è¡Œç»“æœï¼š// åŸå§‹æ•°æ®ï¼š[3, 2, 1]// åè½¬æ•°æ®ï¼š[1, 2, 3]</code></pre><p>è¿™äº›æ–¹æ³•éƒ½æ˜¯ä¾¿æ·æ–¹æ³•ï¼Œå†…éƒ¨æ•°æ®ç»“æ„æ²¡æœ‰å˜åŒ–ï¼Œå…¶å®æœ¬è´¨ä¹Ÿæ˜¯åŸæ¥çš„ç”¨æ³•ã€‚æ¯”å¦‚<code>ArrayList</code>ä¸­çš„<code>getFirst</code>å’Œ<code>getLast</code>æ–¹æ³•ï¼š</p><pre><code class="java">/** * {@inheritDoc} * * @throws NoSuchElementException {@inheritDoc} * @since 21 */public E getFirst() {    if (size == 0) {        throw new NoSuchElementException();    } else {        return elementData(0);    }}/** * {@inheritDoc} * * @throws NoSuchElementException {@inheritDoc} * @since 21 */public E getLast() {    int last = size - 1;    if (last &lt; 0) {        throw new NoSuchElementException();    } else {        return elementData(last);    }}</code></pre><h2 id="æå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§"><a href="#æå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§" class="headerlink" title="æå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§"></a>æå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§</h2><h3 id="å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆJava-10ï¼‰"><a href="#å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆJava-10ï¼‰" class="headerlink" title="å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆJava 10ï¼‰"></a>å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆJava 10ï¼‰</h3><pre><code class="Java">// ä»¥å‰çš„å†™æ³•Map&lt;String, List&lt;ProcSequenceFlow&gt;&gt; sourceMap = sequenceFlowList.stream()        .collect(Collectors.groupingBy(ProcSequenceFlow::getSourceRef));// ç°åœ¨çš„å†™æ³•var sourceMap2 = sequenceFlowList.stream()        .collect(Collectors.groupingBy(ProcSequenceFlow::getSourceRef));</code></pre><h3 id="Switchè¡¨è¾¾å¼ï¼ˆJava-14ï¼‰"><a href="#Switchè¡¨è¾¾å¼ï¼ˆJava-14ï¼‰" class="headerlink" title="Switchè¡¨è¾¾å¼ï¼ˆJava 14ï¼‰"></a>Switchè¡¨è¾¾å¼ï¼ˆJava 14ï¼‰</h3><p>æˆ‘ä»¬ä»¥â€œåˆ¤æ–­æ˜¯å¦å·¥ä½œæ—¥â€çš„ä¾‹å­å±•ç¤ºä¸€ä¸‹ï¼Œåœ¨Java14ä¹‹å‰ï¼š</p><pre><code class="Java">@Testvoid testSwitch() {    final DayOfWeek day = DayOfWeek.from(LocalDate.now());    String typeOfDay = &quot;&quot;;    switch (day) {        case MONDAY:        case TUESDAY:        case WEDNESDAY:        case THURSDAY:        case FRIDAY:            typeOfDay = &quot;Working Day&quot;;            break;        case SATURDAY:        case SUNDAY:            typeOfDay = &quot;Rest Day&quot;;            break;    }    Assertions.assertFalse(typeOfDay.isEmpty());}</code></pre><p>åœ¨Java14ä¸­ï¼š</p><pre><code class="Java">@Testvoid testSwitchExpression() {    final DayOfWeek day = DayOfWeek.SATURDAY;    final String typeOfDay = switch (day) {        case MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; {            System.out.println(&quot;Working Day: &quot; + day);            yield &quot;Working Day&quot;;        }        case SATURDAY, SUNDAY -&gt; &quot;Day Off&quot;;    };    Assertions.assertEquals(&quot;Day Off&quot;, typeOfDay);}</code></pre><p>æ³¨æ„çœ‹ï¼Œä¾‹å­ä¸­æˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ç§å†™æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡<code>yield</code>å…³é”®å­—è¡¨ç¤ºè¿”å›ç»“æœï¼Œä¸€ç§æ˜¯åœ¨<code>-&gt;</code>ä¹‹åç›´æ¥è¿”å›ã€‚</p><h3 id="æ–‡æœ¬å—ï¼ˆJava-15ï¼‰"><a href="#æ–‡æœ¬å—ï¼ˆJava-15ï¼‰" class="headerlink" title="æ–‡æœ¬å—ï¼ˆJava 15ï¼‰"></a>æ–‡æœ¬å—ï¼ˆJava 15ï¼‰</h3><p>ç›´æ¥ä¸Šä»£ç </p><pre><code class="Java">@Testvoid testTextBlock() {    final String singleLine = &quot;ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ï¼Œå…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ã€‚è¿™è¡Œæ²¡æœ‰æ¢è¡Œï¼Œè€Œä¸”æˆ‘çš„åé¢å¤šäº†ä¸€ä¸ªç©ºæ ¼  è¿™æ¬¡æ¢è¡Œäº†&quot;;    final String textBlockSingleLine = &quot;&quot;&quot;            ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ï¼Œå…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ã€‚\            è¿™è¡Œæ²¡æœ‰æ¢è¡Œï¼Œè€Œä¸”æˆ‘çš„åé¢å¤šäº†ä¸€ä¸ªç©ºæ ¼\s            è¿™æ¬¡æ¢è¡Œäº†&quot;&quot;&quot;;    Assertions.assertEquals(singleLine, textBlockSingleLine);}</code></pre><h3 id="å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆé¢„è§ˆï¼‰"><a href="#å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆé¢„è§ˆï¼‰" class="headerlink" title="å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆé¢„è§ˆï¼‰"></a>å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆé¢„è§ˆï¼‰</h3><p>å­—ç¬¦ä¸²æ¨¡æ¿é€šè¿‡å°†æ–‡æœ¬å’ŒåµŒå…¥å¼è¡¨è¾¾å¼ç»“åˆåœ¨ä¸€èµ·ï¼Œä½¿å¾—Javaç¨‹åºèƒ½å¤Ÿä»¥ä¸€ç§æ›´åŠ ç›´è§‚å’Œå®‰å…¨çš„æ–¹å¼æ„å»ºå­—ç¬¦ä¸²ã€‚</p><p>ä¸ä¼ ç»Ÿçš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆä½¿ç”¨+æ“ä½œç¬¦ï¼‰ã€<code>StringBuilder</code>æˆ–<code>String.format</code> ç­‰æ–¹æ³•ç›¸æ¯”ï¼Œå­—ç¬¦ä¸²æ¨¡æ¿æä¾›äº†ä¸€ç§æ›´åŠ æ¸…æ™°å’Œå®‰å…¨çš„å­—ç¬¦ä¸²æ„å»ºæ–¹å¼ã€‚</p><p>ç‰¹åˆ«æ˜¯å½“å­—ç¬¦ä¸²éœ€è¦ä»ç”¨æˆ·æä¾›çš„å€¼æ„å»ºå¹¶ä¼ é€’ç»™å…¶ä»–ç³»ç»Ÿæ—¶ï¼ˆä¾‹å¦‚ï¼Œæ„å»ºæ•°æ®åº“æŸ¥è¯¢ï¼‰ï¼Œä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿å¯ä»¥æœ‰æ•ˆåœ°éªŒè¯å’Œè½¬æ¢æ¨¡æ¿åŠå…¶åµŒå…¥è¡¨è¾¾å¼çš„å€¼ï¼Œä»è€Œæé«˜Javaç¨‹åºçš„å®‰å…¨æ€§ã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡ä»£ç çœ‹ä¸€ä¸‹è¿™ä¸ªç‰¹æ€§çš„é­…åŠ›ï¼š</p><pre><code class="Java">public static void main(String[] args) {    // æ‹¼è£…å˜é‡    String name = &quot;çœ‹å±±&quot;;    String info = STR. &quot;My name is \{ name }&quot; ;    assert info.equals(&quot;My name is çœ‹å±±&quot;);    // æ‹¼è£…å˜é‡    String firstName = &quot;Howard&quot;;    String lastName = &quot;Liu&quot;;    String fullName = STR. &quot;\{ firstName } \{ lastName }&quot; ;    assert fullName.equals(&quot;Howard Liu&quot;);    String sortName = STR. &quot;\{ lastName }, \{ firstName }&quot; ;    assert sortName.equals(&quot;Liu, Howard&quot;);    // æ¨¡æ¿ä¸­è°ƒç”¨æ–¹æ³•    String s2 = STR. &quot;You have a \{ getOfferType() } waiting for you!&quot; ;    assert s2.equals(&quot;You have a gift waiting for you!&quot;);    Request req = new Request(&quot;2017-07-19&quot;, &quot;09:15&quot;, &quot;https://www.howardliu.cn&quot;);    // æ¨¡æ¿ä¸­å¼•ç”¨å¯¹è±¡å±æ€§    String s3 = STR. &quot;Access at \{ req.date } \{ req.time } from \{ req.address }&quot; ;    assert s3.equals(&quot;Access at 2017-07-19 09:15 from https://www.howardliu.cn&quot;);    LocalTime now = LocalTime.now();    String markTime = DateTimeFormatter            .ofPattern(&quot;HH:mm:ss&quot;)            .format(now);    // æ¨¡æ¿ä¸­è°ƒç”¨æ–¹æ³•    String time = STR. &quot;The time is \{            // The java.time.format package is very useful            DateTimeFormatter                    .ofPattern(&quot;HH:mm:ss&quot;)                    .format(now)            } right now&quot; ;    assert time.equals(&quot;The time is &quot; + markTime + &quot; right now&quot;);    // æ¨¡æ¿åµŒå¥—æ¨¡æ¿    String[] fruit = {&quot;apples&quot;, &quot;oranges&quot;, &quot;peaches&quot;};    String s4 = STR. &quot;\{ fruit[0] }, \{            STR. &quot;\{ fruit[1] }, \{ fruit[2] }&quot;            }&quot; ;    assert s4.equals(&quot;apples, oranges, peaches&quot;);    // æ¨¡æ¿ä¸æ–‡æœ¬å—ç»“åˆ    String title = &quot;My Web Page&quot;;    String text = &quot;Hello, world&quot;;    String html = STR. &quot;&quot;&quot;    &lt;html&gt;      &lt;head&gt;        &lt;title&gt;\{ title }&lt;/title&gt;      &lt;/head&gt;      &lt;body&gt;        &lt;p&gt;\{ text }&lt;/p&gt;      &lt;/body&gt;    &lt;/html&gt;    &quot;&quot;&quot; ;    assert html.equals(&quot;&quot;&quot;            &lt;html&gt;              &lt;head&gt;                &lt;title&gt;My Web Page&lt;/title&gt;              &lt;/head&gt;              &lt;body&gt;                &lt;p&gt;Hello, world&lt;/p&gt;              &lt;/body&gt;            &lt;/html&gt;            &quot;&quot;&quot;);    // å¸¦æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²æ¨¡æ¿    record Rectangle(String name, double width, double height) {        double area() {            return width * height;        }    }    Rectangle[] zone = new Rectangle[] {            new Rectangle(&quot;Alfa&quot;, 17.8, 31.4),            new Rectangle(&quot;Bravo&quot;, 9.6, 12.4),            new Rectangle(&quot;Charlie&quot;, 7.1, 11.23),    };    String table = FMT. &quot;&quot;&quot;        Description     Width    Height     Area        %-12s\{ zone[0].name }  %7.2f\{ zone[0].width }  %7.2f\{ zone[0].height }     %7.2f\{ zone[0].area() }        %-12s\{ zone[1].name }  %7.2f\{ zone[1].width }  %7.2f\{ zone[1].height }     %7.2f\{ zone[1].area() }        %-12s\{ zone[2].name }  %7.2f\{ zone[2].width }  %7.2f\{ zone[2].height }     %7.2f\{ zone[2].area() }        \{ &quot; &quot;.repeat(28) } Total %7.2f\{ zone[0].area() + zone[1].area() + zone[2].area() }        &quot;&quot;&quot;;    assert table.equals(&quot;&quot;&quot;            Description     Width    Height     Area            Alfa            17.80    31.40      558.92            Bravo            9.60    12.40      119.04            Charlie          7.10    11.23       79.73                                         Total  757.69            &quot;&quot;&quot;);}public static String getOfferType() {    return &quot;gift&quot;;}record Request(String date, String time, String address) {}</code></pre><p>è¿™ä¸ªåŠŸèƒ½å½“å‰æ˜¯ç¬¬ä¸€æ¬¡é¢„è§ˆï¼Œåœ¨Java22ç¬¬äºŒæ¬¡é¢„è§ˆï¼ŒJava23çš„8.12ç‰ˆæœ¬ä¸­è¿˜æ²¡æœ‰å±•ç¤ºå­—ç¬¦ä¸²æ¨¡æ¿çš„ç¬¬ä¸‰æ¬¡é¢„è§ˆï¼ˆJEP 465: String Templatesï¼‰ï¼Œè¿˜ä¸èƒ½ç¡®å®šä»€ä¹ˆæ—¶å€™å¯ä»¥æ­£å¼ç”¨ä¸Šã€‚</p><h3 id="æ¨¡å¼åŒ¹é…"><a href="#æ¨¡å¼åŒ¹é…" class="headerlink" title="æ¨¡å¼åŒ¹é…"></a>æ¨¡å¼åŒ¹é…</h3><h4 id="instanceofæ¨¡å¼åŒ¹é…ï¼ˆJava-16ï¼‰"><a href="#instanceofæ¨¡å¼åŒ¹é…ï¼ˆJava-16ï¼‰" class="headerlink" title="instanceofæ¨¡å¼åŒ¹é…ï¼ˆJava 16ï¼‰"></a>instanceofæ¨¡å¼åŒ¹é…ï¼ˆJava 16ï¼‰</h4><p><code>instanceof</code>ä¸»è¦ç”¨æ¥æ£€æŸ¥å¯¹è±¡ç±»å‹ï¼Œä½œä¸ºç±»å‹å¼ºè½¬å‰çš„å®‰å…¨æ£€æŸ¥ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="Java">@Testvoid test() {    final Object obj1 = &quot;Hello, World!&quot;;    int result = 0;    if (obj1 instanceof String) {        String str = (String) obj1;        result = str.length();    } else if (obj1 instanceof Number) {        Number num = (Number) obj1;        result = num.intValue();    }    Assertions.assertEquals(13, result);}</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ¯æ¬¡åˆ¤æ–­ç±»å‹ä¹‹åï¼Œéœ€è¦å£°æ˜ä¸€ä¸ªåˆ¤æ–­ç±»å‹çš„å˜é‡ï¼Œç„¶åå°†åˆ¤æ–­å‚æ•°å¼ºåˆ¶è½¬æ¢ç±»å‹ï¼Œèµ‹å€¼ç»™æ–°å£°æ˜çš„å˜é‡ã€‚</p><p>è¿™ç§å†™æ³•æ˜¾å¾—ç¹çä¸”å¤šä½™ã€‚</p><p><code>instanceof</code>æ”¹è¿›åï¼š</p><pre><code class="Java">@Testvoid test1() {    final Object obj1 = &quot;Hello, World!&quot;;    int result = 0;    if (obj1 instanceof String str) {        result = str.length();    } else if (obj1 instanceof Number num) {        result = num.intValue();    }    Assertions.assertEquals(13, result);}</code></pre><p>ä¸ä»…å¦‚æ­¤ï¼Œ<code>instanceof</code>æ¨¡å¼åŒ¹é…çš„ä½œç”¨åŸŸè¿˜å¯ä»¥æ‰©å±•ã€‚åœ¨<code>if</code>æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“<code>&amp;&amp;</code>ä¸åˆ¤æ–­æ˜¯ä¼šæ‰§è¡Œæ‰€æœ‰çš„è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä½¿ç”¨<code>instanceof</code>æ¨¡å¼åŒ¹é…å®šä¹‰çš„å±€éƒ¨å˜é‡ç»§ç»­åˆ¤æ–­ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="Java">if (obj1 instanceof String str &amp;&amp; str.length() &gt; 20) {    result = str.length();}</code></pre><p>ä¸åŸæ¥çš„å†™æ³•å¯¹æ¯”ï¼Œæ–°çš„å†™æ³•ä»£ç æ›´åŠ ç®€æ´ã€å¯è¯»æ€§æ›´é«˜ï¼Œèƒ½å¤Ÿæå‡ºå¾ˆå¤šå†—ä½™ç¹ççš„ä»£ç ï¼Œéå¸¸å®ç”¨çš„ä¸€ä¸ªç‰¹æ€§ã€‚</p><h4 id="switchæ¨¡å¼åŒ¹é…ï¼ˆJava-21ï¼‰"><a href="#switchæ¨¡å¼åŒ¹é…ï¼ˆJava-21ï¼‰" class="headerlink" title="switchæ¨¡å¼åŒ¹é…ï¼ˆJava 21ï¼‰"></a>switchæ¨¡å¼åŒ¹é…ï¼ˆJava 21ï¼‰</h4><p>switchæ¨¡å¼åŒ¹é…æ˜¯ä¸€ä¸ªéå¸¸èµçš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨é€‰æ‹©å™¨è¡¨è¾¾å¼ä½¿ç”¨åŸºç¡€åˆ¤æ–­å’Œä»»æ„å¼•ç”¨ç±»å‹ï¼ŒåŒ…æ‹¬instanceofæ“ä½œç¬¦ã€‚è¿™æ„å‘³ç€å¯ä»¥æ›´çµæ´»åœ°ä½¿ç”¨å¯¹è±¡ã€æ•°ç»„ã€åˆ—è¡¨ç­‰å¤æ‚æ•°æ®ç»“æ„ä½œä¸ºswitchè¯­å¥çš„åŸºç¡€ï¼Œä»è€Œç®€åŒ–ä»£ç å¹¶æé«˜å¯è¯»æ€§ã€‚</p><p>switchæ¨¡å¼åŒ¹é…å…è®¸åœ¨switchè¯­å¥ä¸­ä½¿ç”¨æ¨¡å¼æ¥æµ‹è¯•è¡¨è¾¾å¼ï¼Œæ¯ä¸ªæ¨¡å¼éƒ½æœ‰ç‰¹å®šçš„åŠ¨ä½œï¼Œä»è€Œå¯ä»¥ç®€æ´ã€å®‰å…¨åœ°è¡¨è¾¾å¤æ‚çš„æ•°æ®å¯¼å‘æŸ¥è¯¢ã€‚</p><p>é€šè¿‡ä»£ç çœ‹ä¸‹switchæ¨¡å¼åŒ¹é…çš„é­…åŠ›ï¼›</p><pre><code class="Java">static String formatValue(Object obj) {    return switch (obj) {        case null -&gt; &quot;null&quot;;        case Integer i -&gt; String.format(&quot;int %d&quot;, i);        case Long l -&gt; String.format(&quot;long %d&quot;, l);        case Double d -&gt; String.format(&quot;double %f&quot;, d);        case String s -&gt; String.format(&quot;String %s&quot;, s);        case Person(String name, String address) -&gt; String.format(&quot;Person %s %s&quot;, name, address);        default -&gt; obj.toString();    };}public record Person(String name, String address) {}public static void main(String[] args) {    System.out.println(formatValue(10));    System.out.println(formatValue(20L));    System.out.println(formatValue(3.14));    System.out.println(formatValue(&quot;Hello&quot;));    System.out.println(formatValue(null));    System.out.println(formatValue(new Person(&quot;Howard&quot;, &quot;Beijing&quot;)));}// è¿è¡Œç»“æœ// int 10// long 20// double 3.140000// String Hello// null// Person Howard Beijing</code></pre><h4 id="Record-æ¨¡å¼ï¼ˆJava-21ï¼‰"><a href="#Record-æ¨¡å¼ï¼ˆJava-21ï¼‰" class="headerlink" title="Record æ¨¡å¼ï¼ˆJava 21ï¼‰"></a>Record æ¨¡å¼ï¼ˆJava 21ï¼‰</h4><p>Recordæ˜¯Java16æ­£å¼å‘å¸ƒçš„åŸºç¡€ç±»å‹ï¼Œæä¾›ä¸å¯å˜å¯¹è±¡çš„ç®€å•å®ç°ï¼ˆå…¶å®å°±æ˜¯Java Beanï¼Œä½†æ˜¯çœç•¥ä¸€å †çš„getterã€setterã€hashcodeã€equalsã€toStringç­‰æ–¹æ³•ï¼‰ã€‚</p><p>Recordæ¨¡å¼ï¼Œä¸»è¦æ˜¯ä½¿Recordç±»å‹å¯ä»¥ç›´æ¥åœ¨instanceofå’Œswitchæ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸ªç¤ºä¾‹ï¼Œæ¯”å¦‚æœ‰ä¸‹é¢å‡ ä¸ªåŸºç¡€å…ƒç´ ï¼š</p><pre><code class="Java">// é¢œè‰²enum Color { RED, GREEN, BLUE}// ç‚¹record Point(int x, int y) {}// å¸¦é¢œè‰²çš„ç‚¹record ColoredPoint(Point p, Color color) {}// æ­£æ–¹å½¢record Square(ColoredPoint upperLeft, ColoredPoint lowerRight) {}</code></pre><p>æˆ‘ä»¬åˆ†åˆ«é€šè¿‡instanceofæ¨¡å¼åŒ¹é…å’Œswitchæ¨¡å¼åŒ¹é…åˆ¤æ–­è¾“å…¥å‚æ•°çš„ç±»å‹ï¼Œæ‰“å°ä¸åŒçš„æ ¼å¼ï¼š</p><pre><code class="Java">private static void instancePatternsAndPrint(Object o) {    if (o instanceof Square(ColoredPoint upperLeft, ColoredPoint lowerRight)) {        System.out.println(&quot;Squareç±»å‹ï¼š&quot; + upperLeft + &quot; &quot; + lowerRight);    } else if (o instanceof ColoredPoint(Point(int x, int y), Color color)) {        System.out.println(&quot;ColoredPointç±»å‹ï¼š&quot; + x + &quot; &quot; + y + &quot; &quot; + color);    } else if (o instanceof Point p) {        System.out.println(&quot;Pointç±»å‹ï¼š&quot; + p);    }}private static void switchPatternsAndPrint(Object o) {    switch (o) {        case Square(ColoredPoint upperLeft, ColoredPoint lowerRight) -&gt; {            System.out.println(&quot;Squareç±»å‹ï¼š&quot; + upperLeft + &quot; &quot; + lowerRight);        }        case ColoredPoint(Point(int x, int y), Color color) -&gt; {            System.out.println(&quot;ColoredPointç±»å‹ï¼š&quot; + x + &quot; &quot; + y + &quot; &quot; + color);        }        case Point p -&gt; {            System.out.println(&quot;Pointç±»å‹ï¼š&quot; + p);        }        default -&gt; throw new IllegalStateException(&quot;Unexpected value: &quot; + o);    }}</code></pre><p>æˆ‘ä»¬é€šè¿‡mainæ–¹æ³•æ‰§è¡Œä¸‹ï¼š</p><pre><code class="Java">public static void main(String[] args) {    var p = new Point(1, 2);    var cp1 = new ColoredPoint(p, Color.RED);    var cp2 = new ColoredPoint(p, Color.GREEN);    var square = new Square(cp1, cp2);    instancePatternsAndPrint(square);    instancePatternsAndPrint(cp1);    instancePatternsAndPrint(p);    switchPatternsAndPrint(square);    switchPatternsAndPrint(cp1);    switchPatternsAndPrint(p);}// ç»“æœæ˜¯ï¼š//// Squareç±»å‹ï¼šColoredPoint[p=Point[x=1, y=2], color=RED] ColoredPoint[p=Point[x=1, y=2], color=GREEN]// ColoredPointç±»å‹ï¼š1 2 RED// Pointç±»å‹ï¼šPoint[x=1, y=2]//// Squareç±»å‹ï¼šColoredPoint[p=Point[x=1, y=2], color=RED] ColoredPoint[p=Point[x=1, y=2], color=GREEN]// ColoredPointç±»å‹ï¼š1 2 RED// Pointç±»å‹ï¼šPoint[x=1, y=2]</code></pre><p>æ˜¯ä¸æ˜¯å¾ˆç®€æ´ï¼Œå°±åƒJava8æä¾›çš„Lambdaè¡¨è¾¾å¼ä¸€æ ·ï¼Œå¾ˆä¸æ»‘ã€‚</p><h3 id="çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"><a href="#çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰" class="headerlink" title="çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"></a>çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œæ¯”å¦‚é€šè¿‡<code>super(â€¦â€¦)</code>è°ƒç”¨çˆ¶ç±»ï¼Œåœ¨<code>super</code>ä¹‹å‰æ˜¯ä¸å…è®¸æœ‰å…¶ä»–è¯­å¥çš„ã€‚</p><p>å¤§éƒ¨åˆ†çš„æ—¶å€™è¿™ç§é™åˆ¶éƒ½æ²¡é—®é¢˜ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸å¤ªçµæ´»ã€‚å¦‚æœæƒ³åœ¨<code>super</code>ä¹‹å‰åŠ ä¸Šä¸€äº›å­ç±»ç‰¹æœ‰é€»è¾‘ï¼Œæ¯”å¦‚æƒ³ç»Ÿè®¡ä¸‹å­ç±»æ„é€ è€—æ—¶ï¼Œå°±å¾—é‡å†™ä¸€éçˆ¶ç±»çš„å®ç°ã€‚</p><p>é™¤äº†æœ‰æŸçµæ´»æ€§ï¼Œè¿™ç§é‡å†™çš„åšæ³•ä¹Ÿä¼šé€ æˆçˆ¶å­ç±»ä¹‹é—´çš„å…³ç³»å˜å¾—å¥‡æ€ªã€‚å‡è®¾çˆ¶ç±»æ˜¯SDKä¸­çš„ä¸€ä¸ªç±»ï¼ŒSDKå‡çº§æ—¶åœ¨çˆ¶ç±»æ„é€ å‡½æ•°å¢åŠ äº†ä¸€äº›é€»è¾‘ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­æ˜¯æ— æ³•ç»§æ‰¿è¿™äº›é€»è¾‘çš„ï¼ŒæŸæ¬¡éœ€è¦å‡çº§SDKï¼ˆæ¯”å¦‚ä½ç‰ˆæœ¬æœ‰å®‰å…¨é£é™©ï¼‰ï¼ŒéªŒè¯ä¸å®Œæ•´çš„æƒ…å†µä¸‹ï¼Œå°±å¾ˆå®¹æ˜“å‡ºç°bugã€‚</p><p>è¯¥ç‰¹æ€§çš„ç›®æ ‡æ˜¯æé«˜æ„é€ å‡½æ•°çš„å¯è¯»æ€§å’Œå¯é¢„æµ‹æ€§ï¼ŒåŒæ—¶ä¿æŒæ„é€ å‡½æ•°è°ƒç”¨çš„è‡ªä¸Šè€Œä¸‹çš„è§„åˆ™ã€‚é€šè¿‡å…è®¸åœ¨æ˜¾å¼è°ƒç”¨ <code>super()</code> æˆ– <code>this()</code> å‰åˆå§‹åŒ–å­—æ®µï¼Œä»è€Œå®ç°æ›´çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ã€‚è¿™ä¸€å˜åŒ–ä½¿å¾—ä»£ç æ›´å…·è¡¨ç°åŠ›ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p><pre><code class="Java">public class PositiveBigInteger extends BigInteger {    public PositiveBigInteger(long value) {        if (value &lt;= 0) {            throw new IllegalArgumentException(&quot;non-positive value&quot;);        }        super(value);    }}</code></pre><h2 id="æ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹"><a href="#æ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹" class="headerlink" title="æ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹"></a>æ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹</h2><h3 id="è™šæ‹Ÿçº¿ç¨‹ï¼ˆJava-21ï¼‰"><a href="#è™šæ‹Ÿçº¿ç¨‹ï¼ˆJava-21ï¼‰" class="headerlink" title="è™šæ‹Ÿçº¿ç¨‹ï¼ˆJava 21ï¼‰"></a>è™šæ‹Ÿçº¿ç¨‹ï¼ˆJava 21ï¼‰</h3><p>è™šæ‹Ÿçº¿ç¨‹æ˜¯ä¸€ç§è½»é‡çº§çš„çº¿ç¨‹å®ç°ï¼Œæ—¨åœ¨æ˜¾è‘—é™ä½ç¼–å†™ã€ç»´æŠ¤å’Œè§‚å¯Ÿé«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºçš„éš¾åº¦ã€‚å®ƒä»¬å ç”¨çš„èµ„æºå°‘ï¼Œä¸éœ€è¦è¢«æ± åŒ–ï¼Œå¯ä»¥åˆ›å»ºå¤§é‡è™šæ‹Ÿçº¿ç¨‹ï¼Œç‰¹åˆ«é€‚ç”¨äºIOå¯†é›†å‹ä»»åŠ¡ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é«˜æ•ˆåœ°è°ƒåº¦å¤§é‡è™šæ‹Ÿçº¿ç¨‹æ¥å¤„ç†å¹¶å‘è¯·æ±‚ï¼Œä»è€Œæ˜¾è‘—æé«˜ç¨‹åºçš„ååé‡å’Œå“åº”é€Ÿåº¦ã€‚</p><p>è™šæ‹Ÿçº¿ç¨‹æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ol><li>è½»é‡çº§ï¼šè™šæ‹Ÿçº¿ç¨‹æ˜¯JVMå†…éƒ¨å®ç°çš„è½»é‡çº§çº¿ç¨‹ï¼Œä¸éœ€è¦æ“ä½œç³»ç»Ÿå†…æ ¸å‚ä¸ï¼Œåˆ›å»ºå’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æˆæœ¬è¿œä½äºä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼ˆå³å¹³å°çº¿ç¨‹ï¼‰ï¼Œä¸”å ç”¨çš„å†…å­˜èµ„æºè¾ƒå°‘ã€‚</li><li>å‡å°‘CPUæ—¶é—´æ¶ˆè€—ï¼šç”±äºè™šæ‹Ÿçº¿ç¨‹ä¸ä¾èµ–äºæ“ä½œç³»ç»Ÿå¹³å°çº¿ç¨‹ï¼Œå› æ­¤åœ¨è¿›è¡Œçº¿ç¨‹åˆ‡æ¢æ—¶è€—è´¹çš„CPUæ—¶é—´ä¼šå¤§å¤§å‡å°‘ï¼Œä»è€Œæé«˜äº†ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</li><li>ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼šè™šæ‹Ÿçº¿ç¨‹é€šè¿‡ç»“æ„åŒ–å¹¶å‘APIæ¥ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´å®¹æ˜“åœ°ç¼–å†™ã€ç»´æŠ¤å’Œè§‚å¯Ÿé«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºã€‚</li><li>é€‚ç”¨äºå¤§é‡ä»»åŠ¡åœºæ™¯ï¼šè™šæ‹Ÿçº¿ç¨‹éå¸¸é€‚åˆéœ€è¦åˆ›å»ºå’Œé”€æ¯å¤§é‡çº¿ç¨‹çš„ä»»åŠ¡ã€éœ€è¦æ‰§è¡Œå¤§é‡è®¡ç®—çš„ä»»åŠ¡ï¼ˆå¦‚æ•°æ®å¤„ç†ã€ç§‘å­¦è®¡ç®—ç­‰ï¼‰ä»¥åŠéœ€è¦å®ç°ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œä»¥æé«˜ç¨‹åºæ€§èƒ½çš„åœºæ™¯ã€‚</li><li>æé«˜ç³»ç»Ÿååé‡ï¼šé€šè¿‡å¯¹è™šæ‹Ÿçº¿ç¨‹çš„ä»‹ç»å’Œä¸Goåç¨‹çš„å¯¹æ¯”ï¼Œå¯ä»¥çœ‹å‡ºè™šæ‹Ÿçº¿ç¨‹èƒ½å¤Ÿå¤§å¹…æé«˜ç³»ç»Ÿçš„æ•´ä½“ååé‡ã€‚</li></ol><p>ä¸è€ƒè™‘è™šæ‹Ÿçº¿ç¨‹å®ç°åŸç†ï¼Œå¯¹å¼€å‘è€…è€Œè¨€ï¼Œä½¿ç”¨ä½“éªŒä¸Šä¸ä¼ ç»Ÿçº¿ç¨‹å‡ ä¹æ²¡æœ‰åŒºåˆ«ã€‚</p><pre><code class="Java">try (var executor = Executors.newVirtualThreadPerTaskExecutor()) {    IntStream.range(0, 10_000).forEach(i -&gt; {        executor.submit(() -&gt; {            Thread.sleep(Duration.ofSeconds(1));            System.out.println(Thread.currentThread().getName() + &quot;: &quot; + i);            return i;        });    });}Thread.startVirtualThread(() -&gt; {    System.out.println(&quot;Hello from a virtual thread[Thread.startVirtualThread]&quot;);});final ThreadFactory factory = Thread.ofVirtual().factory();factory.newThread(() -&gt; {            System.out.println(&quot;Hello from a virtual thread[ThreadFactory.newThread]&quot;);        })        .start();</code></pre><p>è™šæ‹Ÿçº¿ç¨‹ä¸ºäº†é™ä½ä½¿ç”¨é—¨æ§›ï¼Œç›´æ¥æä¾›äº†ä¸åŸç”Ÿçº¿ç¨‹ç±»ä¼¼çš„æ–¹æ³•ï¼š</p><ul><li><code>Executors.newVirtualThreadPerTaskExecutor()</code>ï¼Œå¯ä»¥åƒæ™®é€šçº¿ç¨‹æ± ä¸€æ ·åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹ã€‚</li><li><code>Thread.startVirtualThread</code>ï¼Œé€šè¿‡å·¥å…·æ–¹æ³•ç›´æ¥åˆ›å»ºå¹¶è¿è¡Œè™šæ‹Ÿçº¿ç¨‹ã€‚</li><li><code>Thread.ofVirtual().factory().newThread()</code>ï¼Œå¦ä¸€ä¸ªå·¥å…·æ–¹æ³•å¯ä»¥åˆ›å»ºå¹¶è¿è¡Œè™šæ‹Ÿçº¿ç¨‹ã€‚<code>Thread</code>è¿˜æœ‰ä¸€ä¸ª<code>ofPlatform()</code>æ–¹æ³•ï¼Œç”¨æ¥æ„å»ºæ™®é€šçº¿ç¨‹ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™šæ‹Ÿçº¿ç¨‹é€‚ç”¨äºIOå¯†é›†åœºæ™¯ï¼Œè€ŒéCPUå¯†é›†çš„åœºæ™¯ã€‚</p><h3 id="ä½œç”¨åŸŸå€¼ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"><a href="#ä½œç”¨åŸŸå€¼ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰" class="headerlink" title="ä½œç”¨åŸŸå€¼ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"></a>ä½œç”¨åŸŸå€¼ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰</h3><p>ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼‰ï¼Œæ—¨åœ¨ä¿ƒè¿›åœ¨çº¿ç¨‹å†…å’Œçº¿ç¨‹é—´å…±äº«ä¸å¯å˜æ•°æ®ã€‚è¿™ä¸€ç‰¹æ€§ä¸ºç°ä»£ Java åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§æ›´é«˜æ•ˆå’Œå®‰å…¨çš„æ›¿ä»£ä¼ ç»Ÿ ThreadLocal æœºåˆ¶çš„æ–¹æ³•ï¼Œå°¤å…¶æ˜¯åœ¨å¹¶å‘ç¼–ç¨‹çš„èƒŒæ™¯ä¸‹ã€‚</p><p>ä½œç”¨åŸŸå€¼å…è®¸å¼€å‘è€…å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè¯¥å˜é‡å¯ä»¥åœ¨ç‰¹å®šçš„ä½œç”¨åŸŸå†…è®¿é—®ï¼ŒåŒ…æ‹¬å½“å‰çº¿ç¨‹åŠå…¶åˆ›å»ºçš„ä»»ä½•å­çº¿ç¨‹ã€‚è¿™ä¸€æœºåˆ¶ç‰¹åˆ«é€‚ç”¨äºåœ¨æ–¹æ³•è°ƒç”¨é“¾ä¸­éšå¼ä¼ é€’æ•°æ®ï¼Œè€Œæ— éœ€åœ¨æ–¹æ³•ç­¾åä¸­æ·»åŠ é¢å¤–çš„å‚æ•°ã€‚</p><p>ä½œç”¨åŸŸå€¼çš„ä¸»è¦ç‰¹ç‚¹ï¼š</p><ul><li>ä¸å¯å˜æ€§ï¼šä½œç”¨åŸŸå€¼æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦è®¾ç½®ï¼Œå…¶å€¼å°±ä¸èƒ½æ›´æ”¹ã€‚è¿™ç§ä¸å¯å˜æ€§å‡å°‘äº†å¹¶å‘ç¼–ç¨‹ä¸­æ„å¤–å‰¯ä½œç”¨çš„é£é™©ã€‚</li><li>ä½œç”¨åŸŸç”Ÿå‘½å‘¨æœŸï¼šä½œç”¨åŸŸå€¼çš„ç”Ÿå‘½å‘¨æœŸä»…é™äº run æ–¹æ³•å®šä¹‰çš„ä½œç”¨åŸŸã€‚ä¸€æ—¦æ‰§è¡Œç¦»å¼€è¯¥ä½œç”¨åŸŸï¼Œä½œç”¨åŸŸå€¼å°†ä¸å†å¯è®¿é—®ã€‚</li><li>ç»§æ‰¿æ€§ï¼šå­çº¿ç¨‹ä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶çº¿ç¨‹çš„ä½œç”¨åŸŸå€¼ï¼Œä»è€Œå…è®¸åœ¨çº¿ç¨‹è¾¹ç•Œé—´æ— ç¼å…±äº«æ•°æ®ã€‚</li></ul><p>åœ¨ä¹‹å‰ï¼Œåœ¨å¤šçº¿ç¨‹é—´ä¼ é€’æ•°æ®ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨<code>ThreadLocal</code>æ¥ä¿å­˜å½“å‰çº¿ç¨‹å˜é‡ï¼Œç”¨å®Œéœ€è¦æ‰‹åŠ¨æ¸…ç†ï¼Œå¦‚æœå¿˜è®°æ¸…ç†æˆ–è€…ä½¿ç”¨ä¸è§„èŒƒï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ç­‰é—®é¢˜ã€‚ä½œç”¨åŸŸå€¼é€šè¿‡è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸå’Œå†…å­˜ï¼Œå‡å°‘äº†è¿™ç§é£é™©ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹ä½œç”¨åŸŸå€¼çš„ä½¿ç”¨ï¼š</p><pre><code class="Java">// å£°æ˜ä¸€ä¸ªä½œç”¨åŸŸå€¼ç”¨äºå­˜å‚¨ç”¨æˆ·åpublic final static ScopedValue&lt;String&gt; USERNAME = ScopedValue.newInstance();private static final Runnable printUsername = () -&gt;        System.out.println(Thread.currentThread().threadId() + &quot; ç”¨æˆ·åæ˜¯ &quot; + USERNAME.get());public static void main(String[] args) throws Exception {    // å°†ç”¨æˆ·å &quot;Bob&quot; ç»‘å®šåˆ°ä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Bob&quot;).run(() -&gt; {        printUsername.run();        new Thread(printUsername).start();    });    // å°†ç”¨æˆ·å &quot;Chris&quot; ç»‘å®šåˆ°å¦ä¸€ä¸ªä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Chris&quot;).run(() -&gt; {        printUsername.run();        new Thread(() -&gt; {            new Thread(printUsername).start();            printUsername.run();        }).start();    });    // æ£€æŸ¥åœ¨ä»»ä½•ä½œç”¨åŸŸå¤– USERNAME æ˜¯å¦è¢«ç»‘å®š    System.out.println(&quot;ç”¨æˆ·åæ˜¯å¦è¢«ç»‘å®š: &quot; + USERNAME.isBound());}</code></pre><p>å†™èµ·æ¥å¹²å‡€åˆ©ç´¢ï¼Œè€Œä¸”åŠŸèƒ½æ›´å¼ºã€‚</p><h3 id="ç»“æ„åŒ–å¹¶å‘APIï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"><a href="#ç»“æ„åŒ–å¹¶å‘APIï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰" class="headerlink" title="ç»“æ„åŒ–å¹¶å‘APIï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"></a>ç»“æ„åŒ–å¹¶å‘APIï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰</h3><p>ç»“æ„åŒ–å¹¶å‘APIï¼ˆStructured Concurrency APIï¼‰æ—¨åœ¨ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªAPIæ¥å¤„ç†åœ¨ä¸åŒçº¿ç¨‹ä¸­è¿è¡Œçš„å¤šä¸ªä»»åŠ¡ä½œä¸ºä¸€ä¸ªå•ä¸€å·¥ä½œå•å…ƒï¼Œä»è€Œç®€åŒ–é”™è¯¯å¤„ç†å’Œå–æ¶ˆæ“ä½œï¼Œæé«˜å¯é æ€§ï¼Œå¹¶å¢å¼ºå¯è§‚æµ‹æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªå¤„äºå­µåŒ–é˜¶æ®µçš„APIã€‚</p><p>ç»“æ„åŒ–å¹¶å‘APIæä¾›äº†æ˜ç¡®çš„è¯­æ³•ç»“æ„æ¥å®šä¹‰å­ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶å¯ç”¨ä¸€ä¸ªè¿è¡Œæ—¶è¡¨ç¤ºçº¿ç¨‹é—´çš„å±‚æ¬¡ç»“æ„ã€‚è¿™æœ‰åŠ©äºå®ç°é”™è¯¯ä¼ æ’­å’Œå–æ¶ˆä»¥åŠå¹¶å‘ç¨‹åºçš„æœ‰æ„ä¹‰è§‚å¯Ÿã€‚</p><p>Javaä½¿ç”¨å¼‚å¸¸å¤„ç†æœºåˆ¶æ¥ç®¡ç†è¿è¡Œæ—¶é”™è¯¯å’Œå…¶ä»–å¼‚å¸¸ã€‚å½“å¼‚å¸¸åœ¨ä»£ç ä¸­äº§ç”Ÿæ—¶ï¼Œå¦‚ä½•è¢«ä¼ é€’å’Œå¤„ç†çš„è¿‡ç¨‹ç§°ä¸ºå¼‚å¸¸ä¼ æ’­ã€‚</p><p>åœ¨ç»“æ„åŒ–å¹¶å‘ç¯å¢ƒä¸­ï¼Œå¼‚å¸¸å¯ä»¥é€šè¿‡æ˜¾å¼åœ°ä»å½“å‰ç¯å¢ƒä¸­æŠ›å‡ºå¹¶ä¼ æ’­åˆ°æ›´å¤§çš„ç¯å¢ƒä¸­å»å¤„ç†ã€‚</p><p>åœ¨Javaå¹¶å‘ç¼–ç¨‹ä¸­ï¼Œéå—æ£€å¼‚å¸¸çš„å¤„ç†æ˜¯ç¨‹åºå¥å£®æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ç‰¹åˆ«æ˜¯å¯¹äºéå—æ£€å¼‚å¸¸çš„å¤„ç†ï¼Œè¿™å…³ç³»åˆ°ç¨‹åºåœ¨é‡åˆ°é”™è¯¯æ—¶æ˜¯å¦èƒ½å¤Ÿä¼˜é›…åœ°ç»§ç»­è¿è¡Œæˆ–è€…è‡³å°‘æä¾›æœ‰æ„ä¹‰çš„åé¦ˆã€‚</p><pre><code class="Java">try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {    var task1 = scope.fork(() -&gt; {        Thread.sleep(1000);        return &quot;Result from task 1&quot;;    });    var task2 = scope.fork(() -&gt; {        Thread.sleep(2000);        return &quot;Result from task 2&quot;;    });    scope.join();    scope.throwIfFailed(RuntimeException::new);    System.out.println(task1.get());    System.out.println(task2.get());} catch (Exception e) {    e.printStackTrace();}</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œhandle()æ–¹æ³•ä½¿ç”¨StructuredTaskScopeæ¥å¹¶è¡Œæ‰§è¡Œä¸¤ä¸ªå­ä»»åŠ¡ï¼štask1å’Œtask2ã€‚é€šè¿‡ä½¿ç”¨try-with-resourcesè¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œå¹¶ç¡®ä¿æ‰€æœ‰å­ä»»åŠ¡éƒ½åœ¨tryå—ç»“æŸæ—¶æ­£ç¡®å®Œæˆæˆ–è¢«å–æ¶ˆã€‚è¿™ç§æ–¹å¼ä½¿å¾—çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œä»»åŠ¡çš„é€»è¾‘ç»“æ„ç´§å¯†ç›¸å…³ï¼Œæé«˜äº†ä»£ç çš„æ¸…æ™°åº¦å’Œé”™è¯¯å¤„ç†çš„æ•ˆç‡ã€‚ä½¿ç”¨ StructuredTaskScope å¯ä»¥ç¡®ä¿ä¸€äº›æœ‰ä»·å€¼çš„å±æ€§ï¼š</p><ul><li>é”™è¯¯å¤„ç†ä¸çŸ­è·¯ï¼šå¦‚æœtask1æˆ–task2å­ä»»åŠ¡ä¸­çš„ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦ä¸€ä¸ªå¦‚æœå°šæœªå®Œæˆåˆ™ä¼šè¢«å–æ¶ˆã€‚ï¼ˆè¿™ç”± ShutdownOnFailure å®ç°çš„å…³é—­ç­–ç•¥æ¥ç®¡ç†ï¼›è¿˜æœ‰å…¶ä»–ç­–ç•¥å¯èƒ½ï¼‰ã€‚</li><li>å–æ¶ˆä¼ æ’­ï¼šå¦‚æœåœ¨è¿è¡Œä¸Šé¢æ–¹æ³•çš„çº¿ç¨‹åœ¨è°ƒç”¨ join() ä¹‹å‰æˆ–ä¹‹ä¸­è¢«ä¸­æ–­ï¼Œåˆ™çº¿ç¨‹åœ¨é€€å‡ºä½œç”¨åŸŸæ—¶ä¼šè‡ªåŠ¨å–æ¶ˆä¸¤ä¸ªå­ä»»åŠ¡ã€‚</li><li>æ¸…æ™°æ€§ï¼šè®¾ç½®å­ä»»åŠ¡ï¼Œç­‰å¾…å®ƒä»¬å®Œæˆæˆ–è¢«å–æ¶ˆï¼Œç„¶åå†³å®šæ˜¯æˆåŠŸï¼ˆå¹¶å¤„ç†å·²ç»å®Œæˆçš„å­ä»»åŠ¡çš„ç»“æœï¼‰è¿˜æ˜¯å¤±è´¥ï¼ˆå­ä»»åŠ¡å·²ç»å®Œæˆï¼Œå› æ­¤æ²¡æœ‰æ›´å¤šéœ€è¦æ¸…ç†çš„ï¼‰ã€‚</li><li>å¯è§‚å¯Ÿæ€§ï¼šçº¿ç¨‹è½¬å‚¨æ¸…æ¥šåœ°æ˜¾ç¤ºäº†ä»»åŠ¡å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­è¿è¡Œtask1æˆ–task2çš„çº¿ç¨‹è¢«æ˜¾ç¤ºä¸ºä½œç”¨åŸŸçš„å­ä»»åŠ¡ã€‚</li></ul><p>ä¸Šé¢çš„ç¤ºä¾‹èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³æˆ‘ä»¬çš„ä¸€ä¸ªç—›ç‚¹ï¼Œæœ‰ä¸¤ä¸ªå¯å¹¶è¡Œçš„ä»»åŠ¡Aå’ŒBï¼ŒA+Bæ‰æ˜¯å®Œæ•´ç»“æœï¼Œä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿä¸éœ€è¦æˆåŠŸï¼Œç»“æ„åŒ–å¹¶å‘APIå°±å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°è¿™ä¸ªé€»è¾‘ã€‚</p><h2 id="åƒåœ¾æ”¶é›†å™¨"><a href="#åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨"></a>åƒåœ¾æ”¶é›†å™¨</h2><h3 id="G1ï¼ˆJava-9ï¼‰"><a href="#G1ï¼ˆJava-9ï¼‰" class="headerlink" title="G1ï¼ˆJava 9ï¼‰"></a>G1ï¼ˆJava 9ï¼‰</h3><p>G1åƒåœ¾æ”¶é›†å™¨ï¼ˆGarbage-First Garbage Collectorï¼Œç®€ç§°G1 GCï¼‰æ˜¯ä¸€ç§ä¸“ä¸ºæœåŠ¡å™¨ç«¯åº”ç”¨è®¾è®¡çš„åƒåœ¾æ”¶é›†å™¨ï¼Œç‰¹åˆ«é€‚ç”¨äºå…·æœ‰å¤šæ ¸å¤„ç†å™¨å’Œå¤§å†…å­˜çš„æœºå™¨ã€‚å®ƒåœ¨Java 9ä¸­æˆä¸ºé»˜è®¤çš„åƒåœ¾æ”¶é›†å™¨ã€‚</p><ol><li>åˆ†åŒºæœºåˆ¶ï¼šG1å°†æ•´ä¸ªå †ç©ºé—´åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ï¼Œæ¯ä¸ªRegionçš„å¤§å°æ ¹æ®å †çš„å®é™…å¤§å°è€Œå®šï¼Œé€šå¸¸æ§åˆ¶åœ¨1MBåˆ°32MBä¹‹é—´ã€‚è¿™ç§åˆ†åŒºçš„æ€æƒ³å¼±åŒ–äº†ä¼ ç»Ÿçš„åˆ†ä»£æ¦‚å¿µï¼Œä½¿å¾—åƒåœ¾æ”¶é›†æ›´åŠ çµæ´»å’Œé«˜æ•ˆã€‚</li><li>åƒåœ¾å›æ”¶ç­–ç•¥ï¼šG1é‡‡ç”¨æ··åˆåƒåœ¾å›æ”¶ç­–ç•¥ï¼ˆMix GCï¼‰ï¼Œä¸ä»…å›æ”¶æ–°ç”Ÿä»£ä¸­çš„æ‰€æœ‰Regionï¼Œè¿˜ä¼šå›æ”¶éƒ¨åˆ†è€å¹´ä»£ä¸­çš„Regionã€‚è¿™ç§ç­–ç•¥çš„ç›®æ ‡æ˜¯åœ¨ä¿è¯åœé¡¿æ—¶é—´ä¸è¶…è¿‡é¢„æœŸçš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½åœ°å›æ”¶æ›´å¤šçš„åƒåœ¾å¯¹è±¡ã€‚</li><li>å¹¶è¡Œä¸å¹¶å‘ï¼šG1èƒ½å¤Ÿå……åˆ†åˆ©ç”¨CPUã€å¤šæ ¸ç¯å¢ƒä¸‹çš„ç¡¬ä»¶ä¼˜åŠ¿ï¼Œä½¿ç”¨å¤šä¸ªCPUæ ¸å¿ƒæ¥ç¼©çŸ­Stop-The-Worldåœé¡¿æ—¶é—´ã€‚éƒ¨åˆ†å…¶ä»–æ”¶é›†å™¨éœ€è¦åœé¡¿Javaçº¿ç¨‹æ‰§è¡Œçš„GCåŠ¨ä½œï¼Œä½†G1å¯ä»¥é€šè¿‡å¹¶å‘çš„æ–¹å¼è®©Javaç¨‹åºç»§ç»­è¿è¡Œã€‚</li><li>é«˜ååé‡ä¸ä½å»¶è¿Ÿï¼šG1çš„ä¸»è¦ç›®æ ‡æ˜¯åœ¨æ»¡è¶³é«˜ååé‡çš„åŒæ—¶ï¼Œå°½å¯èƒ½å‡å°‘GCåœé¡¿æ—¶é—´ã€‚é€šè¿‡è·Ÿè¸ªå„ä¸ªRegionä¸­çš„åƒåœ¾å †ç§¯æƒ…å†µï¼Œæ¯æ¬¡æ ¹æ®è®¾ç½®çš„åƒåœ¾å›æ”¶æ—¶é—´ï¼Œä¼˜å…ˆå¤„ç†ä¼˜å…ˆçº§æœ€é«˜çš„åŒºåŸŸï¼Œé¿å…ä¸€æ¬¡æ€§æ¸…ç†æ•´ä¸ªæ–°ç”Ÿä»£æˆ–æ•´ä¸ªè€å¹´ä»£çš„åƒåœ¾ã€‚</li></ol><p>G1åƒåœ¾æ”¶é›†å™¨éå¸¸é€‚åˆå¤§å°ºå¯¸å †å†…å­˜çš„åº”ç”¨åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šå¤„ç†å™¨ç¯å¢ƒä¸‹ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯èƒ½å¤Ÿåœ¨æœ‰é™çš„æ—¶é—´å†…è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡ï¼Œå¹¶ä¸”é¿å…å†…å­˜ç¢ç‰‡ã€‚å¯¹äºé‚£äº›å¯¹GCåœé¡¿æ—¶é—´æ•æ„Ÿçš„åº”ç”¨ï¼Œå¦‚å®æ—¶ç³»ç»Ÿå’Œå¤§æ•°æ®å¤„ç†ç³»ç»Ÿï¼ŒG1æ˜¯ä¸€ä¸ªéå¸¸åˆé€‚çš„é€‰æ‹©ã€‚</p><h3 id="ZGCï¼ˆJava-15ï¼‰"><a href="#ZGCï¼ˆJava-15ï¼‰" class="headerlink" title="ZGCï¼ˆJava 15ï¼‰"></a>ZGCï¼ˆJava 15ï¼‰</h3><p>ZGC æ˜¯ä¸€ä¸ªå¯ä¼¸ç¼©ã€ä½å»¶è¿Ÿçš„åƒåœ¾æ”¶é›†å™¨ï¼Œä½¿ç”¨-XX:+UseZGC å‘½ä»¤å¼€å¯ã€‚</p><p>åç§°ä¸­çš„â€œZâ€å¹¶æ²¡æœ‰ç‰¹å®šçš„å«ä¹‰ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªåç§°ï¼Œçµæ„Ÿæ¥æºäºOracleçš„ZFSæ–‡ä»¶ç³»ç»Ÿã€‚ZFSåœ¨è®¾è®¡ä¸Šå…·æœ‰é©å‘½æ€§ï¼Œå› æ­¤ZGCçš„å‘½åä¹Ÿå‘å…¶è‡´æ•¬ã€‚</p><p>åœ¨Java15å‘å¸ƒæ—¶ï¼Œæä¾›çš„æ˜¯ä¸åˆ†ä»£æ”¶é›†å™¨ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½æ”¾åœ¨ä¸€èµ·ï¼ŒæœŸæœ›STWæœ€å¤§10msã€‚</p><p>åœ¨Java21çš„æ—¶å€™ï¼ŒåŸºäºã€Œå¤§éƒ¨åˆ†å¯¹è±¡æœç”Ÿå¤•æ­»ã€çš„åˆ†ä»£å‡è¯´ï¼ŒZGCæä¾›äº†åˆ†ä»£ç‰ˆæœ¬ï¼Œå°†å†…å­˜åˆ’åˆ†ä¸ºå¹´è½»ä»£å’Œè€å¹´ä»£ï¼Œå¹¶ä¸ºè¿™ä¸¤ç§ä»£åˆ†åˆ«ç»´æŠ¤ä¸åŒçš„åƒåœ¾æ”¶é›†ç­–ç•¥ï¼ŒæœŸæœ›STWæœ€å¤§æ˜¯1msã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹<a href="https://kstefanj.github.io/2023/11/07/hazelcast-on-generational-zgc.html" target="_blank" rel="noopener">Hazelcast Jet on Generational ZGC</a>ä¸­ç»™å‡ºçš„æµ‹è¯„æ•ˆæœï¼š</p><p><img src="https://static.howardliu.cn/202409161336772.png" alt="JEP 439: åˆ†ä»£ZGCï¼ˆGenerational ZGCï¼‰"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œéåˆ†ä»£ ZGC åœ¨ä½è´Ÿè½½ä¸‹è¡¨ç°éå¸¸å¥½ï¼Œä½†éšç€åˆ†é…å‹åŠ›çš„å¢åŠ ï¼Œå»¶è¿Ÿä¹Ÿä¼šå¢åŠ ã€‚ä½¿ç”¨åˆ†ä»£ ZGC åï¼Œå³ä½¿åœ¨é«˜è´Ÿè½½ä¸‹ï¼Œå»¶è¿Ÿä¹Ÿéå¸¸ä½ï¼Œè€Œä¸”å»¶è¿Ÿæ•ˆæœä¼˜äºG1ã€‚</p><h3 id="Shenandoahï¼ˆJava-15ï¼‰"><a href="#Shenandoahï¼ˆJava-15ï¼‰" class="headerlink" title="Shenandoahï¼ˆJava 15ï¼‰"></a>Shenandoahï¼ˆJava 15ï¼‰</h3><p>Shenandoahï¼ˆè¯»éŸ³ï¼šè°¢å—å¤šå„ï¼‰ï¼Œä½œä¸ºä¸€ä¸ªä½åœé¡¿çš„åƒåœ¾æ”¶é›†å™¨ã€‚</p><p>Shenandoah åƒåœ¾æ”¶é›†å™¨æ˜¯ RedHat åœ¨ 2014 å¹´å®£å¸ƒè¿›è¡Œçš„åƒåœ¾æ”¶é›†å™¨ç ”ç©¶é¡¹ç›®ï¼Œå…¶å·¥ä½œåŸç†æ˜¯é€šè¿‡ä¸ Java åº”ç”¨æ‰§è¡Œçº¿ç¨‹åŒæ—¶è¿è¡Œæ¥é™ä½åœé¡¿æ—¶é—´ã€‚</p><p>ç®€å•çš„è¯´å°±æ˜¯ï¼ŒShenandoah å·¥ä½œæ—¶ä¸åº”ç”¨ç¨‹åºçº¿ç¨‹å¹¶å‘ï¼Œé€šè¿‡äº¤æ¢ CPU å¹¶å‘å‘¨æœŸå’Œç©ºé—´ä»¥æ”¹å–„åœé¡¿æ—¶é—´ï¼Œä½¿å¾—åƒåœ¾å›æ”¶å™¨æ‰§è¡Œçº¿ç¨‹èƒ½å¤Ÿåœ¨ Java çº¿ç¨‹è¿è¡Œæ—¶è¿›è¡Œå †å‹ç¼©ï¼Œå¹¶ä¸”æ ‡è®°å’Œæ•´ç†èƒ½å¤ŸåŒæ—¶è¿›è¡Œï¼Œå› æ­¤é¿å…äº†åœ¨å¤§å¤šæ•° JVM åƒåœ¾æ”¶é›†å™¨ä¸­æ‰€é‡åˆ°çš„é—®é¢˜ã€‚</p><p><img src="https://static.howardliu.cn/202409161336975.png" alt="Shenandoah GC"></p><p>Shenandoah åƒåœ¾å›æ”¶å™¨çš„æš‚åœæ—¶é—´ä¸å †å¤§å°æ— å…³ï¼Œè¿™æ„å‘³ç€æ— è®ºå°†å †è®¾ç½®ä¸º 200MB è¿˜æ˜¯ 200GBï¼Œéƒ½å°†æ‹¥æœ‰ä¸€è‡´çš„ç³»ç»Ÿæš‚åœæ—¶é—´ï¼Œä¸è¿‡å®é™…ä½¿ç”¨æ€§èƒ½å°†å–å†³äºå®é™…å·¥ä½œå †çš„å¤§å°å’Œå·¥ä½œè´Ÿè½½ã€‚</p><p><a href="https://wiki.openjdk.java.net/display/shenandoah" target="_blank" rel="noopener">https://wiki.openjdk.java.net/display/shenandoah</a></p><h2 id="ä¸€äº›å°ç‰¹æ€§"><a href="#ä¸€äº›å°ç‰¹æ€§" class="headerlink" title="ä¸€äº›å°ç‰¹æ€§"></a>ä¸€äº›å°ç‰¹æ€§</h2><h3 id="å¢å¼º-String"><a href="#å¢å¼º-String" class="headerlink" title="å¢å¼º String"></a>å¢å¼º String</h3><p>Stringä¸­æ–°å¢çš„æ–¹æ³•ï¼šrepeatã€stripã€stripLeadingã€stripTrailingã€isBlankã€linesã€indent å’Œ transformã€‚</p><p>è¿™äº›æ–¹æ³•è¿˜æ˜¯æŒºæœ‰ç”¨çš„ï¼Œä»¥å‰æˆ‘ä»¬å¯èƒ½éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»åº“ï¼ˆæ¯”å¦‚ Apache å‡ºå“çš„ commons-langï¼‰ä¸­çš„å·¥å…·ç±»ï¼Œç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨å«¡äº²æ–¹æ³•äº†ã€‚</p><h4 id="repeat"><a href="#repeat" class="headerlink" title="repeat"></a>repeat</h4><p>repeatæ˜¯å®ä¾‹æ–¹æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯è¿”å›ç»™å®šå­—ç¬¦ä¸²çš„é‡å¤å€¼çš„ï¼Œå‚æ•°æ˜¯intç±»å‹ï¼Œä¼ å‚çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼š</p><ul><li>å¦‚æœé‡å¤æ¬¡æ•°å°äº 0 ä¼šæŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸ï¼›</li><li>å¦‚æœé‡å¤æ¬¡æ•°ä¸º 0 æˆ–è€…å­—ç¬¦ä¸²æœ¬èº«æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œå°†è¿”å›ç©ºå­—ç¬¦ä¸²ï¼›</li><li>å¦‚æœé‡å¤æ¬¡æ•°ä¸º 1 ç›´æ¥è¿”å›æœ¬èº«ï¼›</li><li>å¦‚æœå­—ç¬¦ä¸²é‡å¤æŒ‡å®šæ¬¡æ•°åï¼Œé•¿åº¦è¶…è¿‡Integer.MAX_VALUE<code>ï¼Œä¼šæŠ›å‡º</code>OutOfMemoryError`é”™è¯¯ã€‚</li></ul><p>ç”¨æ³•å¾ˆç®€å•ï¼š</p><pre><code class="Java">@Testvoid testRepeat() {    String output = &quot;foo &quot;.repeat(2) + &quot;bar&quot;;    assertEquals(&quot;foo foo bar&quot;, output);}</code></pre><p>å°è€Œç¾çš„ä¸€ä¸ªå·¥å…·æ–¹æ³•ã€‚</p><h4 id="stripã€stripLeadingã€stripTrailing"><a href="#stripã€stripLeadingã€stripTrailing" class="headerlink" title="stripã€stripLeadingã€stripTrailing"></a>stripã€stripLeadingã€stripTrailing</h4><p><code>strip</code>æ–¹æ³•ç®—æ˜¯<code>trim</code>æ–¹æ³•çš„å¢å¼ºç‰ˆï¼Œ<code>trim</code>æ–¹æ³•å¯ä»¥åˆ é™¤å­—ç¬¦ä¸²ä¸¤ä¾§çš„ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€tab é”®ã€æ¢è¡Œç¬¦ï¼‰ï¼Œä½†æ˜¯å¯¹äº<code>Unicode</code>çš„ç©ºç™½å­—ç¬¦æ— èƒ½ä¸ºåŠ›ï¼Œ<code>strip</code>è¡¥è¶³è¿™ä¸€çŸ­æ¿ã€‚</p><p>ç”¨èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="Java">@Testvoid testTrip() {    final String output = &quot;      hello   \u2005&quot;.strip();    assertEquals(&quot;hello&quot;, output);    final String trimOutput = &quot;      hello   \u2005&quot;.trim();    assertEquals(&quot;hello   \u2005&quot;, trimOutput);}</code></pre><p>å¯¹æ¯”ä¸€ä¸‹å¯ä»¥çœ‹åˆ°ï¼Œ<code>trim</code>æ–¹æ³•çš„æ¸…ç†åŠŸèƒ½ç¨å¼±ã€‚</p><p><code>stripLeading</code>å’Œ<code>stripTrailing</code>ä¸<code>strip</code>ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ä¸€ä¸ªæ¸…ç†å¤´ï¼Œä¸€ä¸ªæ¸…ç†å°¾ã€‚ç”¨æ³•å¦‚ä¸‹ï¼š</p><pre><code class="Java">@Testvoid testTripLeading() {    final String output = &quot;      hello   \u2005&quot;.stripLeading();    assertEquals(&quot;hello   \u2005&quot;, output);}@Testvoid testTripTrailing() {    final String output = &quot;      hello   \u2005&quot;.stripTrailing();    assertEquals(&quot;      hello&quot;, output);}</code></pre><h4 id="isBlank"><a href="#isBlank" class="headerlink" title="isBlank"></a>isBlank</h4><p>è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦éƒ½æ˜¯ç©ºç™½å­—ç¬¦ï¼Œé™¤äº†ç©ºæ ¼ã€tab é”®ã€æ¢è¡Œç¬¦ï¼Œä¹ŸåŒ…æ‹¬<code>Unicode</code>çš„ç©ºç™½å­—ç¬¦ã€‚</p><p>ç”¨æ³•å¾ˆç®€å•ï¼š</p><pre><code class="Java">@Testvoid testIsBlank() {    assertTrue(&quot;    \u2005&quot;.isBlank());}</code></pre><h4 id="lines"><a href="#lines" class="headerlink" title="lines"></a>lines</h4><p>æœ€åè¿™ä¸ªæ–¹æ³•æ˜¯å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå­—ç¬¦ä¸²<code>Stream</code>ç±»å‹ï¼Œå­—ç¬¦ä¸²åˆ†éš”ä¾æ®æ˜¯æ¢è¡Œç¬¦ï¼š<code>\n</code>ã€<code>\r</code>ã€<code>\r\n</code>ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p><pre><code class="Java">@Testvoid testLines() {    final String multiline = &quot;This isa multilinestring.&quot;;    final String output = multiline.lines()            .filter(Predicate.not(String::isBlank))            .collect(Collectors.joining(&quot; &quot;));    assertEquals(&quot;This is a multiline string.&quot;, output);}</code></pre><h4 id="indent"><a href="#indent" class="headerlink" title="indent"></a>indent</h4><p><code>indent</code>æ–¹æ³•æ˜¯å¯¹å­—ç¬¦ä¸²æ¯è¡Œï¼ˆä½¿ç”¨<code>\r</code>æˆ–<code>\n</code>åˆ†éš”ï¼‰æ•°æ®ç¼©è¿›æŒ‡å®šç©ºç™½å­—ç¬¦ï¼Œå‚æ•°æ˜¯ int ç±»å‹ã€‚</p><p>å¦‚æœå‚æ•°å¤§äº 0ï¼Œå°±ç¼©è¿›æŒ‡å®šæ•°é‡çš„ç©ºæ ¼ï¼›å¦‚æœå‚æ•°å°äº 0ï¼Œå°±å°†å·¦ä¾§çš„ç©ºå­—ç¬¦åˆ é™¤æŒ‡å®šæ•°é‡ï¼Œå³å³ç§»ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹æºç ï¼š</p><pre><code class="Java">public String indent(int n) {    if (isEmpty()) {        return &quot;&quot;;    }    Stream&lt;String&gt; stream = lines();    if (n &gt; 0) {        final String spaces = &quot; &quot;.repeat(n);        stream = stream.map(s -&gt; spaces + s);    } else if (n == Integer.MIN_VALUE) {        stream = stream.map(s -&gt; s.stripLeading());    } else if (n &lt; 0) {        stream = stream.map(s -&gt; s.substring(Math.min(-n, s.indexOfNonWhitespace())));    }    return stream.collect(Collectors.joining(&quot;&quot;, &quot;&quot;, &quot;&quot;));}</code></pre><p><code>indent</code>æœ€åä¼šå°†å¤šè¡Œæ•°æ®é€šè¿‡<code>Collectors.joining(&quot;\n&quot;, &quot;&quot;, &quot;\n&quot;)</code>æ–¹æ³•æ‹¼æ¥ï¼Œç»“æœä¼šæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ul><li><code>\r</code>ä¼šè¢«æ›¿æ¢æˆ<code>\n</code>ï¼›</li><li>å¦‚æœåŸå­—ç¬¦ä¸²æ˜¯å¤šè¡Œæ•°æ®ï¼Œæœ€åä¸€è¡Œçš„ç»“å°¾æ²¡æœ‰<code>\n</code>ï¼Œæœ€åä¼šè¡¥ä¸Šä¸€ä¸ª<code>\n</code>ï¼Œå³å¤šäº†ä¸€ä¸ªç©ºè¡Œã€‚</li></ul><p>æˆ‘ä»¬çœ‹ä¸‹æµ‹è¯•ä»£ç ï¼š</p><pre><code class="Java">@Testvoid testIndent() {    final String text = &quot;             ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚ \u0020\u2005Java12 çš„ æ–°ç‰¹æ€§ã€‚ æ¬¢è¿ä¸‰è¿+å…³æ³¨å“Ÿ&quot;;    assertEquals(&quot;                 ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚     \u0020\u2005Java12 çš„ æ–°ç‰¹æ€§ã€‚    æ¬¢è¿ä¸‰è¿+å…³æ³¨å“Ÿã€n&quot;, text.indent(4));    assertEquals(&quot;     ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚\u2005Java12 çš„ æ–°ç‰¹æ€§ã€‚ æ¬¢è¿ä¸‰è¿+å…³æ³¨å“Ÿã€n&quot;, text.indent(-2));    final String text2 = &quot;å±±æ°´æœ‰ç›¸é€¢&quot;;    assertEquals(&quot;å±±æ°´æœ‰ç›¸é€¢&quot;, text2);}</code></pre><h4 id="transform"><a href="#transform" class="headerlink" title="transform"></a>transform</h4><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹<code>transform</code>æ–¹æ³•ï¼Œæºç ä¸€ç›®äº†ç„¶ï¼š</p><pre><code class="Java">public &lt;R&gt; R transform(Function&lt;? super String, ? extends R&gt; f) {    return f.apply(this);}</code></pre><p>é€šè¿‡ä¼ å…¥çš„<code>Function</code>å¯¹å½“å‰å­—ç¬¦ä¸²è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢ç»“æœç”±<code>Function</code>å†³å®šã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦å¯¹å­—ç¬¦ä¸²åè½¬ï¼š</p><pre><code class="Java">@Testvoid testTransform() {    final String text = &quot;çœ‹å±±æ˜¯å±±&quot;;    final String reverseText = text.transform(s -&gt; new StringBuilder(s).reverse().toString());    assertEquals(&quot;å±±æ˜¯å±±çœ‹&quot;, reverseText);}</code></pre><h3 id="å¢å¼ºæ–‡ä»¶è¯»å†™ï¼ˆJava-11ï¼‰"><a href="#å¢å¼ºæ–‡ä»¶è¯»å†™ï¼ˆJava-11ï¼‰" class="headerlink" title="å¢å¼ºæ–‡ä»¶è¯»å†™ï¼ˆJava 11ï¼‰"></a>å¢å¼ºæ–‡ä»¶è¯»å†™ï¼ˆJava 11ï¼‰</h3><p>æœ¬æ¬¡æ›´æ–°åœ¨<code>Files</code>ä¸­å¢åŠ äº†ä¸¤ä¸ªæ–¹æ³•ï¼š<code>readString</code>å’Œ<code>writeString</code>ã€‚<code>writeString</code>ä½œç”¨æ˜¯å°†æŒ‡å®šå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ï¼Œ<code>readString</code>ä½œç”¨æ˜¯ä»æ–‡ä»¶ä¸­è¯»å‡ºå†…å®¹åˆ°å­—ç¬¦ä¸²ã€‚æ˜¯ä¸€ä¸ªå¯¹<code>Files</code>å·¥å…·ç±»çš„å¢å¼ºï¼Œå°è£…äº†å¯¹è¾“å‡ºæµã€å­—èŠ‚ç­‰å†…å®¹çš„æ“ä½œã€‚</p><p>ç”¨æ³•æ¯”è¾ƒç®€å•ï¼š</p><pre><code class="Java">@Testvoid testReadWriteString() throws IOException {    final Path tmpPath = Path.of(&quot;./&quot;);    final Path tempFile = Files.createTempFile(tmpPath, &quot;demo&quot;, &quot;.txt&quot;);    final Path filePath = Files.writeString(tempFile, &quot;çœ‹å±± howardliu.cn å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹&quot;);    assertEquals(tempFile, filePath);    final String fileContent = Files.readString(filePath);    assertEquals(&quot;çœ‹å±± howardliu.cn å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹&quot;, fileContent);    Files.deleteIfExists(filePath);}</code></pre><p><code>readString</code>å’Œ<code>writeString</code>è¿˜å¯ä»¥æŒ‡å®šå­—ç¬¦é›†ï¼Œä¸æŒ‡å®šé»˜è®¤ä½¿ç”¨<code>StandardCharsets.UTF\_8</code>å­—ç¬¦é›†ï¼Œå¯ä»¥åº”å¯¹å¤§éƒ¨åˆ†åœºæ™¯äº†ã€‚</p><h3 id="å¢å¼ºå‡½æ•°-Predicateï¼ˆJava-11ï¼‰"><a href="#å¢å¼ºå‡½æ•°-Predicateï¼ˆJava-11ï¼‰" class="headerlink" title="å¢å¼ºå‡½æ•° Predicateï¼ˆJava 11ï¼‰"></a>å¢å¼ºå‡½æ•° Predicateï¼ˆJava 11ï¼‰</h3><p>è¿™ä¸ªä¹Ÿæ˜¯æ–¹æ³•å¢å¼ºï¼Œåœ¨ä»¥å‰ï¼Œæˆ‘ä»¬åœ¨<code>Stream</code>ä¸­çš„<code>filter</code>æ–¹æ³•åˆ¤æ–­å¦çš„æ—¶å€™ï¼Œä¸€èˆ¬éœ€è¦<code>!</code>è¿ç®—ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³è¦æ‰¾åˆ°å­—ç¬¦ä¸²åˆ—è¡¨ä¸­çš„æ•°å­—ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="Java">final List&lt;String&gt; list = Arrays.asList(&quot;1&quot;, &quot;a&quot;);final List&lt;String&gt; nums = list.stream()        .filter(NumberUtils::isDigits)        .collect(Collectors.toList());Assertions.assertEquals(1, nums.size());Assertions.assertTrue(nums.contains(&quot;1&quot;));</code></pre><p>æƒ³è¦æ‰¾åˆ°éæ•°å­—çš„ï¼Œ<code>filter</code>æ–¹æ³•å†™çš„å°±ä¼šç”¨åˆ°<code>!</code>éæ“ä½œï¼š</p><pre><code class="Java">final List&lt;String&gt; notNums = list.stream()        .filter(x -&gt; !NumberUtils.isDigits(x))        .collect(Collectors.toList());Assertions.assertEquals(1, notNums.size());Assertions.assertTrue(notNums.contains(&quot;a&quot;));</code></pre><p><code>Predicate</code>å¢åŠ <code>not</code>æ–¹æ³•ï¼Œå¯ä»¥æ›´åŠ ç®€å•çš„å®ç°éæ“ä½œï¼š</p><pre><code class="Java">final List&lt;String&gt; notNums2 = list.stream()        .filter(Predicate.not(NumberUtils::isDigits))        .collect(Collectors.toList());Assertions.assertEquals(1, notNums2.size());Assertions.assertTrue(notNums2.contains(&quot;a&quot;));</code></pre><p>æœ‰äº›æ•™ç¨‹è¿˜ä¼šæ¨å´‡é™æ€å¼•å…¥ï¼Œæ¯”å¦‚åœ¨å¤´éƒ¨ä½¿ç”¨<code>import static java.util.function.Predicate.not</code>ï¼Œè¿™æ ·åœ¨å‡½æ•°å¼ç¼–ç¨‹æ—¶ï¼Œå¯ä»¥å†™æ›´å°‘çš„ä»£ç ï¼Œè¯­ä¹‰æ›´å¼ºï¼Œæ¯”å¦‚ï¼š</p><pre><code class="Java">final List&lt;String&gt; notNums2 = list.stream()        .filter(not(NumberUtils::isDigits))        .collect(toList());</code></pre><h3 id="æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆJava-22ï¼‰"><a href="#æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆJava-22ï¼‰" class="headerlink" title="æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆJava 22ï¼‰"></a>æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆJava 22ï¼‰</h3><p>è¯¥ç‰¹æ€§ä½¿ç”¨ä¸‹åˆ’çº¿å­—ç¬¦ <code>\_</code> æ¥è¡¨ç¤ºæœªå‘½åçš„æ¨¡å¼å’Œå˜é‡ï¼Œä»è€Œç®€åŒ–ä»£ç å¹¶æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="Java">public static void main(String[] args) {    var _ = new Point(1, 2);}record Point(int x, int y) {}</code></pre><p>è¿™ä¸ªå¯ä»¥ç”¨åœ¨ä»»ä½•å®šä¹‰å˜é‡çš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼š</p><ul><li><code>... instanceof Point(\_, int y)</code></li><li><code>r instanceof Point \_</code></li><li><code>switch â€¦â€¦ case Box(\_)</code></li><li><code>for (Order \_ : orders)</code></li><li><code>for (int i = 0, \_ = sideEffect(); i &lt; 10; i++)</code></li><li><code>try { ... } catch (Exception \_) { ... } catch (Throwable \_) { ... }</code></li></ul><p>åªè¦æ˜¯è¿™ä¸ªä¸å‡†å¤‡ç”¨ï¼Œå¯ä»¥ä¸€å¾‹ä½¿ç”¨<code>\_</code>ä»£æ›¿ã€‚</p><h3 id="Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆJava-23ï¼‰"><a href="#Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆJava-23ï¼‰" class="headerlink" title="Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆJava 23ï¼‰"></a>Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆJava 23ï¼‰</h3><p>Markdownæ˜¯ä¸€ç§è½»é‡çº§çš„æ ‡è®°è¯­è¨€ï¼Œå¯ç”¨äºåœ¨çº¯æ–‡æœ¬æ–‡æ¡£ä¸­æ·»åŠ æ ¼å¼åŒ–å…ƒç´ ï¼Œå…·ä½“è¯­æ³•å¯ä»¥å‚è€ƒ<a href="https://www.markdownguide.org/basic-syntax/" target="_blank" rel="noopener">Markdown Guide</a>ã€‚æœ¬æ–‡å°±æ˜¯ä½¿ç”¨Markdownè¯­æ³•ç¼–å†™çš„ã€‚</p><p>åœ¨Javaæ³¨é‡Šä¸­å¼•å…¥Markdownï¼Œç›®æ ‡æ˜¯ä½¿APIæ–‡æ¡£æ³¨é‡Šä»¥æºä»£ç å½¢å¼æ›´æ˜“äºç¼–å†™å’Œé˜…è¯»ã€‚ä¸»è¦æ”¶ç›ŠåŒ…æ‹¬ï¼š</p><ul><li>æé«˜æ–‡æ¡£ç¼–å†™çš„æ•ˆç‡ï¼šMarkdownè¯­æ³•ç›¸æ¯”HTMLæ›´ä¸ºç®€æ´ï¼Œå¼€å‘è€…å¯ä»¥æ›´å¿«åœ°ç¼–å†™å’Œä¿®æ”¹æ–‡æ¡£æ³¨é‡Šã€‚</li><li>å¢å¼ºæ–‡æ¡£çš„å¯è¯»æ€§ï¼šMarkdownæ ¼å¼çš„æ–‡æ¡£åœ¨æºä»£ç ä¸­æ›´æ˜“äºé˜…è¯»ï¼Œæœ‰åŠ©äºå¼€å‘è€…å¿«é€Ÿç†è§£APIçš„ç”¨é€”å’Œè¡Œä¸ºã€‚</li><li>ä¿ƒè¿›æ–‡æ¡£çš„ä¸€è‡´æ€§ï¼šé€šè¿‡æ”¯æŒMarkdownï¼Œå¯ä»¥ç¡®ä¿æ–‡æ¡£é£æ ¼çš„ä¸€è‡´æ€§ï¼Œå‡å°‘å› æ ¼å¼é—®é¢˜å¯¼è‡´çš„æ–‡æ¡£æ··ä¹±ã€‚</li><li>ç®€åŒ–æ–‡æ¡£ç»´æŠ¤ï¼šMarkdownæ ¼å¼çš„æ–‡æ¡£æ³¨é‡Šæ›´æ˜“äºç»´æŠ¤å’Œæ›´æ–°ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šäººåä½œçš„é¡¹ç›®ä¸­ï¼Œå¯ä»¥å‡å°‘å› æ–‡æ¡£æ ¼å¼é—®é¢˜å¯¼è‡´çš„æ²Ÿé€šæˆæœ¬ã€‚</li></ul><p>å…·ä½“ä½¿ç”¨æ–¹å¼æ˜¯åœ¨æ³¨é‡Šå‰é¢å¢åŠ <code>///</code>ï¼Œæ¯”å¦‚<code>java.lang.Object.hashCode</code>çš„æ³¨é‡Šï¼š</p><pre><code class="Java">/** * Returns a hash code value for the object. This method is * supported for the benefit of hash tables such as those provided by * {@link java.util.HashMap}. * &lt;p&gt; * The general contract of {@code hashCode} is: * &lt;ul&gt; * &lt;li&gt;Whenever it is invoked on the same object more than once during *     an execution of a Java application, the {@code hashCode} method *     must consistently return the same integer, provided no information *     used in {@code equals} comparisons on the object is modified. *     This integer need not remain consistent from one execution of an *     application to another execution of the same application. * &lt;li&gt;If two objects are equal according to the {@link *     #equals(Object) equals} method, then calling the {@code *     hashCode} method on each of the two objects must produce the *     same integer result. * &lt;li&gt;It is &lt;em&gt;not&lt;/em&gt; required that if two objects are unequal *     according to the {@link #equals(Object) equals} method, then *     calling the {@code hashCode} method on each of the two objects *     must produce distinct integer results.  However, the programmer *     should be aware that producing distinct integer results for *     unequal objects may improve the performance of hash tables. * &lt;/ul&gt; * * @implSpec * As far as is reasonably practical, the {@code hashCode} method defined * by class {@code Object} returns distinct integers for distinct objects. * * @return  a hash code value for this object. * @see     java.lang.Object#equals(java.lang.Object) * @see     java.lang.System#identityHashCode */</code></pre><p>å¦‚æœä½¿ç”¨JEP 467çš„Markdownæ–¹å¼ï¼š</p><pre><code class="Java">/// Returns a hash code value for the object. This method is/// supported for the benefit of hash tables such as those provided by/// [java.util.HashMap].////// The general contract of `hashCode` is://////   - Whenever it is invoked on the same object more than once during///     an execution of a Java application, the `hashCode` method///     must consistently return the same integer, provided no information///     used in `equals` comparisons on the object is modified.///     This integer need not remain consistent from one execution of an///     application to another execution of the same application.///   - If two objects are equal according to the///     [equals][#equals(Object)] method, then calling the///     `hashCode` method on each of the two objects must produce the///     same integer result.///   - It is _not_ required that if two objects are unequal///     according to the [equals][#equals(Object)] method, then///     calling the `hashCode` method on each of the two objects///     must produce distinct integer results.  However, the programmer///     should be aware that producing distinct integer results for///     unequal objects may improve the performance of hash tables.////// @implSpec/// As far as is reasonably practical, the `hashCode` method defined/// by class `Object` returns distinct integers for distinct objects.////// @return  a hash code value for this object./// @see     java.lang.Object#equals(java.lang.Object)/// @see     java.lang.System#identityHashCode</code></pre><p>ç®€å•ä¸¤ç§å†™æ³•çš„å·®å¼‚ï¼Œç›¸åŒæ³¨é‡Šï¼ŒMarkdownçš„å†™æ³•æ›´åŠ ç®€æ´ï¼š</p><p><img src="https://static.howardliu.cn/202409161338899.png" alt="Object hashcodeæ³¨é‡Šå·®å¼‚"></p><h2 id="ä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§"><a href="#ä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§" class="headerlink" title="ä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§"></a>ä¸€äº›å¯èƒ½ä¸ä¼šç”¨åˆ°çš„ç‰¹æ€§</h2><h3 id="webæœåŠ¡å™¨jwebserverï¼ˆJava-18ï¼‰"><a href="#webæœåŠ¡å™¨jwebserverï¼ˆJava-18ï¼‰" class="headerlink" title="webæœåŠ¡å™¨jwebserverï¼ˆJava 18ï¼‰"></a>webæœåŠ¡å™¨jwebserverï¼ˆJava 18ï¼‰</h3><p>ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªè½»é‡çº§ã€ç®€å•æ˜“ç”¨çš„ HTTP æœåŠ¡å™¨ï¼Œé€šè¿‡å‘½ä»¤è¡Œå·¥å…·<code>jwebserver</code>å¯ä»¥å¯åŠ¨ä¸€ä¸ªæœ€å°åŒ–çš„é™æ€ Web æœåŠ¡å™¨ï¼Œè¿™ä¸ªæœåŠ¡å™¨ä»…æ”¯æŒé™æ€èµ„æºçš„è®¿é—®ï¼Œä¸æ”¯æŒ CGIï¼ˆCommon Gateway Interfaceï¼‰æˆ–ç±»ä¼¼ servlet çš„åŠŸèƒ½ï¼Œä¸»è¦ç”¨äºåŸå‹åˆ¶ä½œã€æµ‹è¯•å’Œå¼€å‘ç¯å¢ƒä¸­çš„é™æ€æ–‡ä»¶æ‰˜ç®¡ä¸å…±äº«ã€‚</p><p>å®ƒçš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ul><li>åŸå‹å¼€å‘ï¼šç”±äºå…¶ç®€å•æ˜“ç”¨çš„ç‰¹æ€§ï¼Œjwebserver å¯ä»¥ä½œä¸ºå¿«é€ŸåŸå‹å¼€å‘å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨çŸ­æ—¶é—´å†…æ­å»ºèµ·ä¸€ä¸ªå¯ä»¥è®¿é—®é™æ€èµ„æºçš„ Web æœåŠ¡ã€‚è¿™å¯¹äºéœ€è¦éªŒè¯æŸä¸ªåŠŸèƒ½æˆ–æ¦‚å¿µçš„åˆæœŸé˜¶æ®µéå¸¸æœ‰ç”¨ã€‚</li><li>å¿«é€Ÿéƒ¨ç½²ï¼šå¯¹äºä¸€äº›å°è§„æ¨¡çš„åº”ç”¨æˆ–è€…ä¸´æ—¶æ€§çš„é¡¹ç›®ï¼Œä½¿ç”¨ jwebserver å¯ä»¥å¿«é€Ÿå¯åŠ¨å¹¶è¿è¡Œä¸€ä¸ªç®€å•çš„ Web æœåŠ¡ï¼Œè€Œæ— éœ€å¤æ‚çš„é…ç½®å’Œç¯å¢ƒæ­å»ºã€‚è¿™ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè¿…é€Ÿå°†æƒ³æ³•è½¬åŒ–ä¸ºå®é™…çš„å¯è®¿é—®æœåŠ¡ã€‚</li><li>å­¦ä¹ ä¸æ•™è‚²ï¼šjwebserver æä¾›äº†ä¸€ä¸ªç›´è§‚çš„å¹³å°ï¼Œè®©åˆå­¦è€…å¯ä»¥è½»æ¾ä¸Šæ‰‹ Java Web å¼€å‘ã€‚é€šè¿‡ç®€å•çš„å‘½ä»¤è¡Œæ“ä½œï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿç†è§£ Web æœåŠ¡å™¨çš„å·¥ä½œåŸç†åŠå…¶åŸºæœ¬é…ç½®ã€‚</li><li>æµ‹è¯•ä¸è°ƒè¯•ï¼šåœ¨è¿›è¡Œ Web åº”ç”¨çš„æµ‹è¯•å’Œè°ƒè¯•æ—¶ï¼Œjwebserver å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å·¥å…·æ¥æä¾›é™æ€æ–‡ä»¶çš„è®¿é—®æœåŠ¡ï¼Œä»è€Œæ–¹ä¾¿å¼€å‘è€…å¯¹åº”ç”¨è¿›è¡Œæµ‹è¯•å’Œè°ƒè¯•ã€‚</li><li>æœ¬åœ°å¼€å‘ç¯å¢ƒï¼šåœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­ï¼Œjwebserver å¯ä»¥æ›¿ä»£ä¼ ç»Ÿçš„ Web æœåŠ¡å™¨å¦‚ Apache Tomcat æˆ– Nginxï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªè½»é‡çº§çš„é€‰æ‹©ï¼Œä»¥å‡å°‘ç³»ç»Ÿèµ„æºçš„å ç”¨ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥ç®€å•è¯•ä¸€ä¸‹ï¼Œåœ¨å½“å‰ç›®å½•ç¼–å†™index.htmlï¼š</p><pre><code class="HTML">&lt;html&gt;&lt;head&gt;    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;&lt;/head&gt;&lt;body&gt;    &lt;h2&gt;æ¬¢è¿å‚è§‚&lt;/h2&gt;    &lt;h3&gt;&lt;a href=&quot;https://www.howardliu.cn/&quot;&gt;çœ‹å±±çš„å°å±‹ howardliu.cn&lt;/a&gt;&lt;/h3&gt;    &lt;p&gt;        ä¸€èµ·&lt;strong&gt;å¼€å¿ƒ&lt;/strong&gt;å­¦æŠ€æœ¯    &lt;/p&gt;    &lt;p&gt;        è®©æˆ‘ä»¬ä¸€èµ·&lt;strong&gt;æ‰¬å¸†èµ·èˆª&lt;/strong&gt;    &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>è¿è¡Œ<code>jwebserver</code>å‘½ä»¤ï¼š</p><pre><code class="Bash">$ ./bin/jwebserverBinding to loopback by default. For all interfaces use &quot;-b 0.0.0.0&quot; or &quot;-b ::&quot;.Serving /Users/liuxinghao/Library/Java/JavaVirtualMachines/temurin-18.0.2.1/Contents/Home and subdirectories on 127.0.0.1 port 8000URL http://127.0.0.1:8000/</code></pre><p>æ‰“å¼€<code>[http://127.0.0.1:8000/](http://127.0.0.1:8000/)</code>å°±å¯ä»¥ç›´æ¥çœ‹åˆ°index.htmlçš„æ•ˆæœï¼š</p><p><img src="https://static.howardliu.cn/202409161340780.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p><p><code>jwebserver</code>è¿˜æ”¯æŒæŒ‡å®šåœ°å€å’Œç«¯å£ç­‰å‚æ•°ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥é€šè¿‡å‘½ä»¤æŸ¥çœ‹ï¼š</p><pre><code class="Bash">$ ./bin/jwebserver -hUsage: jwebserver [-b bind address] [-p port] [-d directory]                  [-o none|info|verbose] [-h to show options]                  [-version to show version information]Options:-b, --bind-address    - Address to bind to. Default: 127.0.0.1 (loopback).                        For all interfaces use &quot;-b 0.0.0.0&quot; or &quot;-b ::&quot;.-d, --directory       - Directory to serve. Default: current directory.-o, --output          - Output format. none|info|verbose. Default: info.-p, --port            - Port to listen on. Default: 8000.-h, -?, --help        - Prints this help message and exits.-version, --version   - Prints version information and exits.</code></pre><h3 id="éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"><a href="#éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰" class="headerlink" title="éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"></a>éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰</h3><p>éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•çš„ç›®æ ‡æ˜¯ç®€åŒ– Java è¯­è¨€ï¼Œä½¿å¾—å­¦ç”Ÿå’Œåˆå­¦è€…å¯ä»¥æ›´å®¹æ˜“åœ°ç¼–å†™ä»–ä»¬çš„ç¬¬ä¸€ä¸ªç¨‹åºï¼Œè€Œæ— éœ€ç†è§£ä¸ºå¤§å‹ç¨‹åºè®¾è®¡çš„å¤æ‚è¯­è¨€ç‰¹æ€§ã€‚</p><p>æ— è®ºå­¦ä¹ å“ªé—¨è¯­è¨€ï¼Œç¬¬ä¸€è¯¾ä¸€å®šæ˜¯æ‰“å°<code>Hello, World!</code>ï¼ŒJavaä¸­çš„å†™æ³•æ˜¯ï¼š</p><pre><code class="Java">public class HelloWorld {    public static void main(String[] args) {        System.out.println (&quot;Hello, World!&quot;);    }}</code></pre><p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œä¸€å®šä¼šæœ‰å¾ˆå¤šç–‘é—®ï¼Œ<code>public</code>å¹²å•¥çš„ï¼Œ<code>main</code>æ–¹æ³•çš„çº¦å®šå‚æ•°<code>args</code>æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿç„¶åè€å¸ˆå°±è¯´ï¼Œè¿™å°±æ˜¯æ¨¡æ¿ï¼Œç…§ç€æŠ„å°±è¡Œï¼Œä¸è¿™æ ·å†™ä¸è¿è¡Œã€‚</p><p>ç°åœ¨å¯ä»¥ç®€åŒ–ä¸ºï¼š</p><pre><code class="Java">class HelloWorld {    void main() {        System.out.println (&quot;Hello, World!&quot;);    }}</code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="Java">String greeting() { return &quot;Hello, World!&quot;; }void main() {    System.out.println(greeting());}</code></pre><p><code>main</code>æ–¹æ³•ç›´æ¥ç®€åŒ–ä¸ºåå­—å’Œæ‹¬å·ï¼Œç”šè‡³è¿ç±»ä¹Ÿä¸éœ€è¦æ˜¾æ€§å®šä¹‰äº†ã€‚è™½ç„¶çœ‹èµ·æ¥æ²¡å•¥ç”¨ï¼Œä½†æ˜¯åœ¨JShellä¸­ä½¿ç”¨ï¼Œå°±æ¯”è¾ƒå‹å¥½äº†ã€‚</p><p>æœ¬æ¬¡é¢„è§ˆæ–°å¢äº†ä¸‰ä¸ªIOæ“ä½œæ–¹æ³•ï¼š</p><pre><code class="Java">public static void println(Object obj);public static void print(Object obj);public static String readln(String prompt);</code></pre><p>æƒ³è¦å¿«é€Ÿå®ç°æ§åˆ¶å°æ“ä½œï¼Œå¯ä»¥è¿™æ ·å†™äº†ï¼š</p><pre><code class="Java">void main() {    String name = readln(&quot;è¯·è¾“å…¥å§“å: &quot;);    print(&quot;å¾ˆé«˜å…´è§åˆ°ä½ , &quot;);    println(name);}</code></pre><p>ä½œä¸ºä¸€ä¸ªè€ç¨‹åºçŒ¿ï¼Œä¹Ÿä¸å¾—ä¸å“‡å¡ä¸€ä¸‹ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æƒ³è¦äº†è§£å„ç‰ˆæœ¬çš„è¯¦ç»†ç‰¹æ€§ï¼Œå¯ä»¥ä»<a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­æŸ¥çœ‹ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><ul><li>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a></li><li>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§</a></li><li>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a></li><li>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§</a></li></ul><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      ä¸‡å­—é•¿æ–‡æŒæ¡ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ã€‚ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java10" scheme="https://www.howardliu.cn/tags/Java10/"/>
    
      <category term="Java11" scheme="https://www.howardliu.cn/tags/Java11/"/>
    
      <category term="Java12" scheme="https://www.howardliu.cn/tags/Java12/"/>
    
      <category term="Java14" scheme="https://www.howardliu.cn/tags/Java14/"/>
    
      <category term="Java15" scheme="https://www.howardliu.cn/tags/Java15/"/>
    
      <category term="Java13" scheme="https://www.howardliu.cn/tags/Java13/"/>
    
      <category term="Java16" scheme="https://www.howardliu.cn/tags/Java16/"/>
    
      <category term="Java17" scheme="https://www.howardliu.cn/tags/Java17/"/>
    
      <category term="Java18" scheme="https://www.howardliu.cn/tags/Java18/"/>
    
      <category term="Java19" scheme="https://www.howardliu.cn/tags/Java19/"/>
    
      <category term="Java20" scheme="https://www.howardliu.cn/tags/Java20/"/>
    
      <category term="Java21" scheme="https://www.howardliu.cn/tags/Java21/"/>
    
      <category term="Java8" scheme="https://www.howardliu.cn/tags/Java8/"/>
    
      <category term="Java22" scheme="https://www.howardliu.cn/tags/Java22/"/>
    
      <category term="Java9" scheme="https://www.howardliu.cn/tags/Java9/"/>
    
      <category term="Java23" scheme="https://www.howardliu.cn/tags/Java23/"/>
    
  </entry>
  
  <entry>
    <title>ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ3ï¼‰ï¼šæ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹</title>
    <link href="https://www.howardliu.cn/java/java-features-8-23-3/"/>
    <id>https://www.howardliu.cn/java/java-features-8-23-3/</id>
    <published>2024-09-19T00:20:00.000Z</published>
    <updated>2024-12-06T11:36:03.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/202409161331954.jpg" alt="ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚</p><p><img src="https://static.howardliu.cn/202409111451409.png" alt="Javaç‰ˆæœ¬åˆ†å¸ƒ"></p><blockquote><p>æ•°æ®æ¥æº<a href="https://newrelic.com/sites/default/files/2024-05/new-relic-state-of-the-java-ecosystem-2024-05-29.pdf" target="_blank" rel="noopener">2024 State of the Java Ecosystem</a></p></blockquote><h2 id="æ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹"><a href="#æ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹" class="headerlink" title="æ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹"></a>æ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹</h2><h3 id="è™šæ‹Ÿçº¿ç¨‹ï¼ˆJava-21ï¼‰"><a href="#è™šæ‹Ÿçº¿ç¨‹ï¼ˆJava-21ï¼‰" class="headerlink" title="è™šæ‹Ÿçº¿ç¨‹ï¼ˆJava 21ï¼‰"></a>è™šæ‹Ÿçº¿ç¨‹ï¼ˆJava 21ï¼‰</h3><p>è™šæ‹Ÿçº¿ç¨‹æ˜¯ä¸€ç§è½»é‡çº§çš„çº¿ç¨‹å®ç°ï¼Œæ—¨åœ¨æ˜¾è‘—é™ä½ç¼–å†™ã€ç»´æŠ¤å’Œè§‚å¯Ÿé«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºçš„éš¾åº¦ã€‚å®ƒä»¬å ç”¨çš„èµ„æºå°‘ï¼Œä¸éœ€è¦è¢«æ± åŒ–ï¼Œå¯ä»¥åˆ›å»ºå¤§é‡è™šæ‹Ÿçº¿ç¨‹ï¼Œç‰¹åˆ«é€‚ç”¨äºIOå¯†é›†å‹ä»»åŠ¡ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é«˜æ•ˆåœ°è°ƒåº¦å¤§é‡è™šæ‹Ÿçº¿ç¨‹æ¥å¤„ç†å¹¶å‘è¯·æ±‚ï¼Œä»è€Œæ˜¾è‘—æé«˜ç¨‹åºçš„ååé‡å’Œå“åº”é€Ÿåº¦ã€‚</p><p>è™šæ‹Ÿçº¿ç¨‹æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ol><li>è½»é‡çº§ï¼šè™šæ‹Ÿçº¿ç¨‹æ˜¯JVMå†…éƒ¨å®ç°çš„è½»é‡çº§çº¿ç¨‹ï¼Œä¸éœ€è¦æ“ä½œç³»ç»Ÿå†…æ ¸å‚ä¸ï¼Œåˆ›å»ºå’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æˆæœ¬è¿œä½äºä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼ˆå³å¹³å°çº¿ç¨‹ï¼‰ï¼Œä¸”å ç”¨çš„å†…å­˜èµ„æºè¾ƒå°‘ã€‚</li><li>å‡å°‘CPUæ—¶é—´æ¶ˆè€—ï¼šç”±äºè™šæ‹Ÿçº¿ç¨‹ä¸ä¾èµ–äºæ“ä½œç³»ç»Ÿå¹³å°çº¿ç¨‹ï¼Œå› æ­¤åœ¨è¿›è¡Œçº¿ç¨‹åˆ‡æ¢æ—¶è€—è´¹çš„CPUæ—¶é—´ä¼šå¤§å¤§å‡å°‘ï¼Œä»è€Œæé«˜äº†ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</li><li>ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼šè™šæ‹Ÿçº¿ç¨‹é€šè¿‡ç»“æ„åŒ–å¹¶å‘APIæ¥ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´å®¹æ˜“åœ°ç¼–å†™ã€ç»´æŠ¤å’Œè§‚å¯Ÿé«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºã€‚</li><li>é€‚ç”¨äºå¤§é‡ä»»åŠ¡åœºæ™¯ï¼šè™šæ‹Ÿçº¿ç¨‹éå¸¸é€‚åˆéœ€è¦åˆ›å»ºå’Œé”€æ¯å¤§é‡çº¿ç¨‹çš„ä»»åŠ¡ã€éœ€è¦æ‰§è¡Œå¤§é‡è®¡ç®—çš„ä»»åŠ¡ï¼ˆå¦‚æ•°æ®å¤„ç†ã€ç§‘å­¦è®¡ç®—ç­‰ï¼‰ä»¥åŠéœ€è¦å®ç°ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œä»¥æé«˜ç¨‹åºæ€§èƒ½çš„åœºæ™¯ã€‚</li><li>æé«˜ç³»ç»Ÿååé‡ï¼šé€šè¿‡å¯¹è™šæ‹Ÿçº¿ç¨‹çš„ä»‹ç»å’Œä¸Goåç¨‹çš„å¯¹æ¯”ï¼Œå¯ä»¥çœ‹å‡ºè™šæ‹Ÿçº¿ç¨‹èƒ½å¤Ÿå¤§å¹…æé«˜ç³»ç»Ÿçš„æ•´ä½“ååé‡ã€‚</li></ol><p>ä¸è€ƒè™‘è™šæ‹Ÿçº¿ç¨‹å®ç°åŸç†ï¼Œå¯¹å¼€å‘è€…è€Œè¨€ï¼Œä½¿ç”¨ä½“éªŒä¸Šä¸ä¼ ç»Ÿçº¿ç¨‹å‡ ä¹æ²¡æœ‰åŒºåˆ«ã€‚</p><pre><code class="Java">try (var executor = Executors.newVirtualThreadPerTaskExecutor()) {    IntStream.range(0, 10_000).forEach(i -&gt; {        executor.submit(() -&gt; {            Thread.sleep(Duration.ofSeconds(1));            System.out.println(Thread.currentThread().getName() + &quot;: &quot; + i);            return i;        });    });}Thread.startVirtualThread(() -&gt; {    System.out.println(&quot;Hello from a virtual thread[Thread.startVirtualThread]&quot;);});final ThreadFactory factory = Thread.ofVirtual().factory();factory.newThread(() -&gt; {            System.out.println(&quot;Hello from a virtual thread[ThreadFactory.newThread]&quot;);        })        .start();</code></pre><p>è™šæ‹Ÿçº¿ç¨‹ä¸ºäº†é™ä½ä½¿ç”¨é—¨æ§›ï¼Œç›´æ¥æä¾›äº†ä¸åŸç”Ÿçº¿ç¨‹ç±»ä¼¼çš„æ–¹æ³•ï¼š</p><ul><li><code>Executors.newVirtualThreadPerTaskExecutor()</code>ï¼Œå¯ä»¥åƒæ™®é€šçº¿ç¨‹æ± ä¸€æ ·åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹ã€‚</li><li><code>Thread.startVirtualThread</code>ï¼Œé€šè¿‡å·¥å…·æ–¹æ³•ç›´æ¥åˆ›å»ºå¹¶è¿è¡Œè™šæ‹Ÿçº¿ç¨‹ã€‚</li><li><code>Thread.ofVirtual().factory().newThread()</code>ï¼Œå¦ä¸€ä¸ªå·¥å…·æ–¹æ³•å¯ä»¥åˆ›å»ºå¹¶è¿è¡Œè™šæ‹Ÿçº¿ç¨‹ã€‚<code>Thread</code>è¿˜æœ‰ä¸€ä¸ª<code>ofPlatform()</code>æ–¹æ³•ï¼Œç”¨æ¥æ„å»ºæ™®é€šçº¿ç¨‹ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™šæ‹Ÿçº¿ç¨‹é€‚ç”¨äºIOå¯†é›†åœºæ™¯ï¼Œè€ŒéCPUå¯†é›†çš„åœºæ™¯ã€‚</p><h3 id="ä½œç”¨åŸŸå€¼ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"><a href="#ä½œç”¨åŸŸå€¼ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰" class="headerlink" title="ä½œç”¨åŸŸå€¼ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"></a>ä½œç”¨åŸŸå€¼ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰</h3><p>ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼‰ï¼Œæ—¨åœ¨ä¿ƒè¿›åœ¨çº¿ç¨‹å†…å’Œçº¿ç¨‹é—´å…±äº«ä¸å¯å˜æ•°æ®ã€‚è¿™ä¸€ç‰¹æ€§ä¸ºç°ä»£ Java åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§æ›´é«˜æ•ˆå’Œå®‰å…¨çš„æ›¿ä»£ä¼ ç»Ÿ ThreadLocal æœºåˆ¶çš„æ–¹æ³•ï¼Œå°¤å…¶æ˜¯åœ¨å¹¶å‘ç¼–ç¨‹çš„èƒŒæ™¯ä¸‹ã€‚</p><p>ä½œç”¨åŸŸå€¼å…è®¸å¼€å‘è€…å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè¯¥å˜é‡å¯ä»¥åœ¨ç‰¹å®šçš„ä½œç”¨åŸŸå†…è®¿é—®ï¼ŒåŒ…æ‹¬å½“å‰çº¿ç¨‹åŠå…¶åˆ›å»ºçš„ä»»ä½•å­çº¿ç¨‹ã€‚è¿™ä¸€æœºåˆ¶ç‰¹åˆ«é€‚ç”¨äºåœ¨æ–¹æ³•è°ƒç”¨é“¾ä¸­éšå¼ä¼ é€’æ•°æ®ï¼Œè€Œæ— éœ€åœ¨æ–¹æ³•ç­¾åä¸­æ·»åŠ é¢å¤–çš„å‚æ•°ã€‚</p><p>ä½œç”¨åŸŸå€¼çš„ä¸»è¦ç‰¹ç‚¹ï¼š</p><ul><li>ä¸å¯å˜æ€§ï¼šä½œç”¨åŸŸå€¼æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦è®¾ç½®ï¼Œå…¶å€¼å°±ä¸èƒ½æ›´æ”¹ã€‚è¿™ç§ä¸å¯å˜æ€§å‡å°‘äº†å¹¶å‘ç¼–ç¨‹ä¸­æ„å¤–å‰¯ä½œç”¨çš„é£é™©ã€‚</li><li>ä½œç”¨åŸŸç”Ÿå‘½å‘¨æœŸï¼šä½œç”¨åŸŸå€¼çš„ç”Ÿå‘½å‘¨æœŸä»…é™äº run æ–¹æ³•å®šä¹‰çš„ä½œç”¨åŸŸã€‚ä¸€æ—¦æ‰§è¡Œç¦»å¼€è¯¥ä½œç”¨åŸŸï¼Œä½œç”¨åŸŸå€¼å°†ä¸å†å¯è®¿é—®ã€‚</li><li>ç»§æ‰¿æ€§ï¼šå­çº¿ç¨‹ä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶çº¿ç¨‹çš„ä½œç”¨åŸŸå€¼ï¼Œä»è€Œå…è®¸åœ¨çº¿ç¨‹è¾¹ç•Œé—´æ— ç¼å…±äº«æ•°æ®ã€‚</li></ul><p>åœ¨ä¹‹å‰ï¼Œåœ¨å¤šçº¿ç¨‹é—´ä¼ é€’æ•°æ®ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨<code>ThreadLocal</code>æ¥ä¿å­˜å½“å‰çº¿ç¨‹å˜é‡ï¼Œç”¨å®Œéœ€è¦æ‰‹åŠ¨æ¸…ç†ï¼Œå¦‚æœå¿˜è®°æ¸…ç†æˆ–è€…ä½¿ç”¨ä¸è§„èŒƒï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ç­‰é—®é¢˜ã€‚ä½œç”¨åŸŸå€¼é€šè¿‡è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸå’Œå†…å­˜ï¼Œå‡å°‘äº†è¿™ç§é£é™©ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹ä½œç”¨åŸŸå€¼çš„ä½¿ç”¨ï¼š</p><pre><code class="Java">// å£°æ˜ä¸€ä¸ªä½œç”¨åŸŸå€¼ç”¨äºå­˜å‚¨ç”¨æˆ·åpublic final static ScopedValue&lt;String&gt; USERNAME = ScopedValue.newInstance();private static final Runnable printUsername = () -&gt;        System.out.println(Thread.currentThread().threadId() + &quot; ç”¨æˆ·åæ˜¯ &quot; + USERNAME.get());public static void main(String[] args) throws Exception {    // å°†ç”¨æˆ·å &quot;Bob&quot; ç»‘å®šåˆ°ä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Bob&quot;).run(() -&gt; {        printUsername.run();        new Thread(printUsername).start();    });    // å°†ç”¨æˆ·å &quot;Chris&quot; ç»‘å®šåˆ°å¦ä¸€ä¸ªä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Chris&quot;).run(() -&gt; {        printUsername.run();        new Thread(() -&gt; {            new Thread(printUsername).start();            printUsername.run();        }).start();    });    // æ£€æŸ¥åœ¨ä»»ä½•ä½œç”¨åŸŸå¤– USERNAME æ˜¯å¦è¢«ç»‘å®š    System.out.println(&quot;ç”¨æˆ·åæ˜¯å¦è¢«ç»‘å®š: &quot; + USERNAME.isBound());}</code></pre><p>å†™èµ·æ¥å¹²å‡€åˆ©ç´¢ï¼Œè€Œä¸”åŠŸèƒ½æ›´å¼ºã€‚</p><h3 id="ç»“æ„åŒ–å¹¶å‘APIï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"><a href="#ç»“æ„åŒ–å¹¶å‘APIï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰" class="headerlink" title="ç»“æ„åŒ–å¹¶å‘APIï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"></a>ç»“æ„åŒ–å¹¶å‘APIï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰</h3><p>ç»“æ„åŒ–å¹¶å‘APIï¼ˆStructured Concurrency APIï¼‰æ—¨åœ¨ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªAPIæ¥å¤„ç†åœ¨ä¸åŒçº¿ç¨‹ä¸­è¿è¡Œçš„å¤šä¸ªä»»åŠ¡ä½œä¸ºä¸€ä¸ªå•ä¸€å·¥ä½œå•å…ƒï¼Œä»è€Œç®€åŒ–é”™è¯¯å¤„ç†å’Œå–æ¶ˆæ“ä½œï¼Œæé«˜å¯é æ€§ï¼Œå¹¶å¢å¼ºå¯è§‚æµ‹æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªå¤„äºå­µåŒ–é˜¶æ®µçš„APIã€‚</p><p>ç»“æ„åŒ–å¹¶å‘APIæä¾›äº†æ˜ç¡®çš„è¯­æ³•ç»“æ„æ¥å®šä¹‰å­ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶å¯ç”¨ä¸€ä¸ªè¿è¡Œæ—¶è¡¨ç¤ºçº¿ç¨‹é—´çš„å±‚æ¬¡ç»“æ„ã€‚è¿™æœ‰åŠ©äºå®ç°é”™è¯¯ä¼ æ’­å’Œå–æ¶ˆä»¥åŠå¹¶å‘ç¨‹åºçš„æœ‰æ„ä¹‰è§‚å¯Ÿã€‚</p><p>Javaä½¿ç”¨å¼‚å¸¸å¤„ç†æœºåˆ¶æ¥ç®¡ç†è¿è¡Œæ—¶é”™è¯¯å’Œå…¶ä»–å¼‚å¸¸ã€‚å½“å¼‚å¸¸åœ¨ä»£ç ä¸­äº§ç”Ÿæ—¶ï¼Œå¦‚ä½•è¢«ä¼ é€’å’Œå¤„ç†çš„è¿‡ç¨‹ç§°ä¸ºå¼‚å¸¸ä¼ æ’­ã€‚</p><p>åœ¨ç»“æ„åŒ–å¹¶å‘ç¯å¢ƒä¸­ï¼Œå¼‚å¸¸å¯ä»¥é€šè¿‡æ˜¾å¼åœ°ä»å½“å‰ç¯å¢ƒä¸­æŠ›å‡ºå¹¶ä¼ æ’­åˆ°æ›´å¤§çš„ç¯å¢ƒä¸­å»å¤„ç†ã€‚</p><p>åœ¨Javaå¹¶å‘ç¼–ç¨‹ä¸­ï¼Œéå—æ£€å¼‚å¸¸çš„å¤„ç†æ˜¯ç¨‹åºå¥å£®æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ç‰¹åˆ«æ˜¯å¯¹äºéå—æ£€å¼‚å¸¸çš„å¤„ç†ï¼Œè¿™å…³ç³»åˆ°ç¨‹åºåœ¨é‡åˆ°é”™è¯¯æ—¶æ˜¯å¦èƒ½å¤Ÿä¼˜é›…åœ°ç»§ç»­è¿è¡Œæˆ–è€…è‡³å°‘æä¾›æœ‰æ„ä¹‰çš„åé¦ˆã€‚</p><pre><code class="Java">try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {    var task1 = scope.fork(() -&gt; {        Thread.sleep(1000);        return &quot;Result from task 1&quot;;    });    var task2 = scope.fork(() -&gt; {        Thread.sleep(2000);        return &quot;Result from task 2&quot;;    });    scope.join();    scope.throwIfFailed(RuntimeException::new);    System.out.println(task1.get());    System.out.println(task2.get());} catch (Exception e) {    e.printStackTrace();}</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œhandle()æ–¹æ³•ä½¿ç”¨StructuredTaskScopeæ¥å¹¶è¡Œæ‰§è¡Œä¸¤ä¸ªå­ä»»åŠ¡ï¼štask1å’Œtask2ã€‚é€šè¿‡ä½¿ç”¨try-with-resourcesè¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œå¹¶ç¡®ä¿æ‰€æœ‰å­ä»»åŠ¡éƒ½åœ¨tryå—ç»“æŸæ—¶æ­£ç¡®å®Œæˆæˆ–è¢«å–æ¶ˆã€‚è¿™ç§æ–¹å¼ä½¿å¾—çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œä»»åŠ¡çš„é€»è¾‘ç»“æ„ç´§å¯†ç›¸å…³ï¼Œæé«˜äº†ä»£ç çš„æ¸…æ™°åº¦å’Œé”™è¯¯å¤„ç†çš„æ•ˆç‡ã€‚ä½¿ç”¨ StructuredTaskScope å¯ä»¥ç¡®ä¿ä¸€äº›æœ‰ä»·å€¼çš„å±æ€§ï¼š</p><ul><li>é”™è¯¯å¤„ç†ä¸çŸ­è·¯ï¼šå¦‚æœtask1æˆ–task2å­ä»»åŠ¡ä¸­çš„ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦ä¸€ä¸ªå¦‚æœå°šæœªå®Œæˆåˆ™ä¼šè¢«å–æ¶ˆã€‚ï¼ˆè¿™ç”± ShutdownOnFailure å®ç°çš„å…³é—­ç­–ç•¥æ¥ç®¡ç†ï¼›è¿˜æœ‰å…¶ä»–ç­–ç•¥å¯èƒ½ï¼‰ã€‚</li><li>å–æ¶ˆä¼ æ’­ï¼šå¦‚æœåœ¨è¿è¡Œä¸Šé¢æ–¹æ³•çš„çº¿ç¨‹åœ¨è°ƒç”¨ join() ä¹‹å‰æˆ–ä¹‹ä¸­è¢«ä¸­æ–­ï¼Œåˆ™çº¿ç¨‹åœ¨é€€å‡ºä½œç”¨åŸŸæ—¶ä¼šè‡ªåŠ¨å–æ¶ˆä¸¤ä¸ªå­ä»»åŠ¡ã€‚</li><li>æ¸…æ™°æ€§ï¼šè®¾ç½®å­ä»»åŠ¡ï¼Œç­‰å¾…å®ƒä»¬å®Œæˆæˆ–è¢«å–æ¶ˆï¼Œç„¶åå†³å®šæ˜¯æˆåŠŸï¼ˆå¹¶å¤„ç†å·²ç»å®Œæˆçš„å­ä»»åŠ¡çš„ç»“æœï¼‰è¿˜æ˜¯å¤±è´¥ï¼ˆå­ä»»åŠ¡å·²ç»å®Œæˆï¼Œå› æ­¤æ²¡æœ‰æ›´å¤šéœ€è¦æ¸…ç†çš„ï¼‰ã€‚</li><li>å¯è§‚å¯Ÿæ€§ï¼šçº¿ç¨‹è½¬å‚¨æ¸…æ¥šåœ°æ˜¾ç¤ºäº†ä»»åŠ¡å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­è¿è¡Œtask1æˆ–task2çš„çº¿ç¨‹è¢«æ˜¾ç¤ºä¸ºä½œç”¨åŸŸçš„å­ä»»åŠ¡ã€‚</li></ul><p>ä¸Šé¢çš„ç¤ºä¾‹èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³æˆ‘ä»¬çš„ä¸€ä¸ªç—›ç‚¹ï¼Œæœ‰ä¸¤ä¸ªå¯å¹¶è¡Œçš„ä»»åŠ¡Aå’ŒBï¼ŒA+Bæ‰æ˜¯å®Œæ•´ç»“æœï¼Œä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿä¸éœ€è¦æˆåŠŸï¼Œç»“æ„åŒ–å¹¶å‘APIå°±å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°è¿™ä¸ªé€»è¾‘ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æƒ³è¦äº†è§£å„ç‰ˆæœ¬çš„è¯¦ç»†ç‰¹æ€§ï¼Œå¯ä»¥ä»<a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­æŸ¥çœ‹ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><ul><li>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a></li><li>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ3ï¼‰ï¼šæ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹</a></li><li>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a></li><li>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ3ï¼‰ï¼šæ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹</a></li></ul><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      æ°¸è¿œå­¦ä¸å®Œçš„å¤šçº¿ç¨‹ã€‚ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java10" scheme="https://www.howardliu.cn/tags/Java10/"/>
    
      <category term="Java11" scheme="https://www.howardliu.cn/tags/Java11/"/>
    
      <category term="Java12" scheme="https://www.howardliu.cn/tags/Java12/"/>
    
      <category term="Java14" scheme="https://www.howardliu.cn/tags/Java14/"/>
    
      <category term="Java15" scheme="https://www.howardliu.cn/tags/Java15/"/>
    
      <category term="Java13" scheme="https://www.howardliu.cn/tags/Java13/"/>
    
      <category term="Java16" scheme="https://www.howardliu.cn/tags/Java16/"/>
    
      <category term="Java17" scheme="https://www.howardliu.cn/tags/Java17/"/>
    
      <category term="Java18" scheme="https://www.howardliu.cn/tags/Java18/"/>
    
      <category term="Java19" scheme="https://www.howardliu.cn/tags/Java19/"/>
    
      <category term="Java20" scheme="https://www.howardliu.cn/tags/Java20/"/>
    
      <category term="Java21" scheme="https://www.howardliu.cn/tags/Java21/"/>
    
      <category term="Java8" scheme="https://www.howardliu.cn/tags/Java8/"/>
    
      <category term="Java22" scheme="https://www.howardliu.cn/tags/Java22/"/>
    
      <category term="Java9" scheme="https://www.howardliu.cn/tags/Java9/"/>
    
      <category term="Java23" scheme="https://www.howardliu.cn/tags/Java23/"/>
    
  </entry>
  
  <entry>
    <title>ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ2ï¼‰ï¼šæå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java/java-features-8-23-2/"/>
    <id>https://www.howardliu.cn/java/java-features-8-23-2/</id>
    <published>2024-09-18T00:20:00.000Z</published>
    <updated>2024-12-05T09:14:01.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/202409161331867.jpg" alt="ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚</p><p><img src="https://static.howardliu.cn/202409111451409.png" alt="Javaç‰ˆæœ¬åˆ†å¸ƒ"></p><blockquote><p>æ•°æ®æ¥æº<a href="https://newrelic.com/sites/default/files/2024-05/new-relic-state-of-the-java-ecosystem-2024-05-29.pdf" target="_blank" rel="noopener">2024 State of the Java Ecosystem</a></p></blockquote><a id="more"></a><h2 id="æå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§"><a href="#æå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§" class="headerlink" title="æå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§"></a>æå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§</h2><h3 id="å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆJava-10ï¼‰"><a href="#å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆJava-10ï¼‰" class="headerlink" title="å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆJava 10ï¼‰"></a>å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¼ˆJava 10ï¼‰</h3><pre><code class="Java">// ä»¥å‰çš„å†™æ³•Map&lt;String, List&lt;ProcSequenceFlow&gt;&gt; sourceMap = sequenceFlowList.stream()        .collect(Collectors.groupingBy(ProcSequenceFlow::getSourceRef));// ç°åœ¨çš„å†™æ³•var sourceMap2 = sequenceFlowList.stream()        .collect(Collectors.groupingBy(ProcSequenceFlow::getSourceRef));</code></pre><h3 id="Switchè¡¨è¾¾å¼ï¼ˆJava-14ï¼‰"><a href="#Switchè¡¨è¾¾å¼ï¼ˆJava-14ï¼‰" class="headerlink" title="Switchè¡¨è¾¾å¼ï¼ˆJava 14ï¼‰"></a>Switchè¡¨è¾¾å¼ï¼ˆJava 14ï¼‰</h3><p>æˆ‘ä»¬ä»¥â€œåˆ¤æ–­æ˜¯å¦å·¥ä½œæ—¥â€çš„ä¾‹å­å±•ç¤ºä¸€ä¸‹ï¼Œåœ¨Java14ä¹‹å‰ï¼š</p><pre><code class="Java">@Testvoid testSwitch() {    final DayOfWeek day = DayOfWeek.from(LocalDate.now());    String typeOfDay = &quot;&quot;;    switch (day) {        case MONDAY:        case TUESDAY:        case WEDNESDAY:        case THURSDAY:        case FRIDAY:            typeOfDay = &quot;Working Day&quot;;            break;        case SATURDAY:        case SUNDAY:            typeOfDay = &quot;Rest Day&quot;;            break;    }    Assertions.assertFalse(typeOfDay.isEmpty());}</code></pre><p>åœ¨Java14ä¸­ï¼š</p><pre><code class="Java">@Testvoid testSwitchExpression() {    final DayOfWeek day = DayOfWeek.SATURDAY;    final String typeOfDay = switch (day) {        case MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; {            System.out.println(&quot;Working Day: &quot; + day);            yield &quot;Working Day&quot;;        }        case SATURDAY, SUNDAY -&gt; &quot;Day Off&quot;;    };    Assertions.assertEquals(&quot;Day Off&quot;, typeOfDay);}</code></pre><p>æ³¨æ„çœ‹ï¼Œä¾‹å­ä¸­æˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ç§å†™æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡<code>yield</code>å…³é”®å­—è¡¨ç¤ºè¿”å›ç»“æœï¼Œä¸€ç§æ˜¯åœ¨<code>-&gt;</code>ä¹‹åç›´æ¥è¿”å›ã€‚</p><h3 id="æ–‡æœ¬å—ï¼ˆJava-15ï¼‰"><a href="#æ–‡æœ¬å—ï¼ˆJava-15ï¼‰" class="headerlink" title="æ–‡æœ¬å—ï¼ˆJava 15ï¼‰"></a>æ–‡æœ¬å—ï¼ˆJava 15ï¼‰</h3><p>ç›´æ¥ä¸Šä»£ç </p><pre><code class="Java">@Testvoid testTextBlock() {    final String singleLine = &quot;ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ï¼Œå…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ã€‚è¿™è¡Œæ²¡æœ‰æ¢è¡Œï¼Œè€Œä¸”æˆ‘çš„åé¢å¤šäº†ä¸€ä¸ªç©ºæ ¼ \n è¿™æ¬¡æ¢è¡Œäº†&quot;;    final String textBlockSingleLine = &quot;&quot;&quot;            ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ï¼Œå…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ã€‚\            è¿™è¡Œæ²¡æœ‰æ¢è¡Œï¼Œè€Œä¸”æˆ‘çš„åé¢å¤šäº†ä¸€ä¸ªç©ºæ ¼\s            è¿™æ¬¡æ¢è¡Œäº†&quot;&quot;&quot;;    Assertions.assertEquals(singleLine, textBlockSingleLine);}</code></pre><h3 id="å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆé¢„è§ˆï¼‰"><a href="#å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆé¢„è§ˆï¼‰" class="headerlink" title="å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆé¢„è§ˆï¼‰"></a>å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆé¢„è§ˆï¼‰</h3><p>å­—ç¬¦ä¸²æ¨¡æ¿é€šè¿‡å°†æ–‡æœ¬å’ŒåµŒå…¥å¼è¡¨è¾¾å¼ç»“åˆåœ¨ä¸€èµ·ï¼Œä½¿å¾—Javaç¨‹åºèƒ½å¤Ÿä»¥ä¸€ç§æ›´åŠ ç›´è§‚å’Œå®‰å…¨çš„æ–¹å¼æ„å»ºå­—ç¬¦ä¸²ã€‚</p><p>ä¸ä¼ ç»Ÿçš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆä½¿ç”¨+æ“ä½œç¬¦ï¼‰ã€<code>StringBuilder</code>æˆ–<code>String.format</code> ç­‰æ–¹æ³•ç›¸æ¯”ï¼Œå­—ç¬¦ä¸²æ¨¡æ¿æä¾›äº†ä¸€ç§æ›´åŠ æ¸…æ™°å’Œå®‰å…¨çš„å­—ç¬¦ä¸²æ„å»ºæ–¹å¼ã€‚</p><p>ç‰¹åˆ«æ˜¯å½“å­—ç¬¦ä¸²éœ€è¦ä»ç”¨æˆ·æä¾›çš„å€¼æ„å»ºå¹¶ä¼ é€’ç»™å…¶ä»–ç³»ç»Ÿæ—¶ï¼ˆä¾‹å¦‚ï¼Œæ„å»ºæ•°æ®åº“æŸ¥è¯¢ï¼‰ï¼Œä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿å¯ä»¥æœ‰æ•ˆåœ°éªŒè¯å’Œè½¬æ¢æ¨¡æ¿åŠå…¶åµŒå…¥è¡¨è¾¾å¼çš„å€¼ï¼Œä»è€Œæé«˜Javaç¨‹åºçš„å®‰å…¨æ€§ã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡ä»£ç çœ‹ä¸€ä¸‹è¿™ä¸ªç‰¹æ€§çš„é­…åŠ›ï¼š</p><pre><code class="Java">public static void main(String[] args) {    // æ‹¼è£…å˜é‡    String name = &quot;çœ‹å±±&quot;;    String info = STR. &quot;My name is \{ name }&quot; ;    assert info.equals(&quot;My name is çœ‹å±±&quot;);    // æ‹¼è£…å˜é‡    String firstName = &quot;Howard&quot;;    String lastName = &quot;Liu&quot;;    String fullName = STR. &quot;\{ firstName } \{ lastName }&quot; ;    assert fullName.equals(&quot;Howard Liu&quot;);    String sortName = STR. &quot;\{ lastName }, \{ firstName }&quot; ;    assert sortName.equals(&quot;Liu, Howard&quot;);    // æ¨¡æ¿ä¸­è°ƒç”¨æ–¹æ³•    String s2 = STR. &quot;You have a \{ getOfferType() } waiting for you!&quot; ;    assert s2.equals(&quot;You have a gift waiting for you!&quot;);    Request req = new Request(&quot;2017-07-19&quot;, &quot;09:15&quot;, &quot;https://www.howardliu.cn&quot;);    // æ¨¡æ¿ä¸­å¼•ç”¨å¯¹è±¡å±æ€§    String s3 = STR. &quot;Access at \{ req.date } \{ req.time } from \{ req.address }&quot; ;    assert s3.equals(&quot;Access at 2017-07-19 09:15 from https://www.howardliu.cn&quot;);    LocalTime now = LocalTime.now();    String markTime = DateTimeFormatter            .ofPattern(&quot;HH:mm:ss&quot;)            .format(now);    // æ¨¡æ¿ä¸­è°ƒç”¨æ–¹æ³•    String time = STR. &quot;The time is \{            // The java.time.format package is very useful            DateTimeFormatter                    .ofPattern(&quot;HH:mm:ss&quot;)                    .format(now)            } right now&quot; ;    assert time.equals(&quot;The time is &quot; + markTime + &quot; right now&quot;);    // æ¨¡æ¿åµŒå¥—æ¨¡æ¿    String[] fruit = {&quot;apples&quot;, &quot;oranges&quot;, &quot;peaches&quot;};    String s4 = STR. &quot;\{ fruit[0] }, \{            STR. &quot;\{ fruit[1] }, \{ fruit[2] }&quot;            }&quot; ;    assert s4.equals(&quot;apples, oranges, peaches&quot;);    // æ¨¡æ¿ä¸æ–‡æœ¬å—ç»“åˆ    String title = &quot;My Web Page&quot;;    String text = &quot;Hello, world&quot;;    String html = STR. &quot;&quot;&quot;    &lt;html&gt;      &lt;head&gt;        &lt;title&gt;\{ title }&lt;/title&gt;      &lt;/head&gt;      &lt;body&gt;        &lt;p&gt;\{ text }&lt;/p&gt;      &lt;/body&gt;    &lt;/html&gt;    &quot;&quot;&quot; ;    assert html.equals(&quot;&quot;&quot;            &lt;html&gt;              &lt;head&gt;                &lt;title&gt;My Web Page&lt;/title&gt;              &lt;/head&gt;              &lt;body&gt;                &lt;p&gt;Hello, world&lt;/p&gt;              &lt;/body&gt;            &lt;/html&gt;            &quot;&quot;&quot;);    // å¸¦æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²æ¨¡æ¿    record Rectangle(String name, double width, double height) {        double area() {            return width * height;        }    }    Rectangle[] zone = new Rectangle[] {            new Rectangle(&quot;Alfa&quot;, 17.8, 31.4),            new Rectangle(&quot;Bravo&quot;, 9.6, 12.4),            new Rectangle(&quot;Charlie&quot;, 7.1, 11.23),    };    String table = FMT. &quot;&quot;&quot;        Description     Width    Height     Area        %-12s\{ zone[0].name }  %7.2f\{ zone[0].width }  %7.2f\{ zone[0].height }     %7.2f\{ zone[0].area() }        %-12s\{ zone[1].name }  %7.2f\{ zone[1].width }  %7.2f\{ zone[1].height }     %7.2f\{ zone[1].area() }        %-12s\{ zone[2].name }  %7.2f\{ zone[2].width }  %7.2f\{ zone[2].height }     %7.2f\{ zone[2].area() }        \{ &quot; &quot;.repeat(28) } Total %7.2f\{ zone[0].area() + zone[1].area() + zone[2].area() }        &quot;&quot;&quot;;    assert table.equals(&quot;&quot;&quot;            Description     Width    Height     Area            Alfa            17.80    31.40      558.92            Bravo            9.60    12.40      119.04            Charlie          7.10    11.23       79.73                                         Total  757.69            &quot;&quot;&quot;);}public static String getOfferType() {    return &quot;gift&quot;;}record Request(String date, String time, String address) {}</code></pre><p>è¿™ä¸ªåŠŸèƒ½å½“å‰æ˜¯ç¬¬ä¸€æ¬¡é¢„è§ˆï¼Œåœ¨Java22ç¬¬äºŒæ¬¡é¢„è§ˆï¼ŒJava23çš„8.12ç‰ˆæœ¬ä¸­è¿˜æ²¡æœ‰å±•ç¤ºå­—ç¬¦ä¸²æ¨¡æ¿çš„ç¬¬ä¸‰æ¬¡é¢„è§ˆï¼ˆJEP 465: String Templatesï¼‰ï¼Œè¿˜ä¸èƒ½ç¡®å®šä»€ä¹ˆæ—¶å€™å¯ä»¥æ­£å¼ç”¨ä¸Šã€‚</p><h3 id="æ¨¡å¼åŒ¹é…"><a href="#æ¨¡å¼åŒ¹é…" class="headerlink" title="æ¨¡å¼åŒ¹é…"></a>æ¨¡å¼åŒ¹é…</h3><h4 id="instanceofæ¨¡å¼åŒ¹é…ï¼ˆJava-16ï¼‰"><a href="#instanceofæ¨¡å¼åŒ¹é…ï¼ˆJava-16ï¼‰" class="headerlink" title="instanceofæ¨¡å¼åŒ¹é…ï¼ˆJava 16ï¼‰"></a>instanceofæ¨¡å¼åŒ¹é…ï¼ˆJava 16ï¼‰</h4><p><code>instanceof</code>ä¸»è¦ç”¨æ¥æ£€æŸ¥å¯¹è±¡ç±»å‹ï¼Œä½œä¸ºç±»å‹å¼ºè½¬å‰çš„å®‰å…¨æ£€æŸ¥ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="Java">@Testvoid test() {    final Object obj1 = &quot;Hello, World!&quot;;    int result = 0;    if (obj1 instanceof String) {        String str = (String) obj1;        result = str.length();    } else if (obj1 instanceof Number) {        Number num = (Number) obj1;        result = num.intValue();    }    Assertions.assertEquals(13, result);}</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ¯æ¬¡åˆ¤æ–­ç±»å‹ä¹‹åï¼Œéœ€è¦å£°æ˜ä¸€ä¸ªåˆ¤æ–­ç±»å‹çš„å˜é‡ï¼Œç„¶åå°†åˆ¤æ–­å‚æ•°å¼ºåˆ¶è½¬æ¢ç±»å‹ï¼Œèµ‹å€¼ç»™æ–°å£°æ˜çš„å˜é‡ã€‚</p><p>è¿™ç§å†™æ³•æ˜¾å¾—ç¹çä¸”å¤šä½™ã€‚</p><p><code>instanceof</code>æ”¹è¿›åï¼š</p><pre><code class="Java">@Testvoid test1() {    final Object obj1 = &quot;Hello, World!&quot;;    int result = 0;    if (obj1 instanceof String str) {        result = str.length();    } else if (obj1 instanceof Number num) {        result = num.intValue();    }    Assertions.assertEquals(13, result);}</code></pre><p>ä¸ä»…å¦‚æ­¤ï¼Œ<code>instanceof</code>æ¨¡å¼åŒ¹é…çš„ä½œç”¨åŸŸè¿˜å¯ä»¥æ‰©å±•ã€‚åœ¨<code>if</code>æ¡ä»¶åˆ¤æ–­ä¸­ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“<code>&amp;&amp;</code>ä¸åˆ¤æ–­æ˜¯ä¼šæ‰§è¡Œæ‰€æœ‰çš„è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä½¿ç”¨<code>instanceof</code>æ¨¡å¼åŒ¹é…å®šä¹‰çš„å±€éƒ¨å˜é‡ç»§ç»­åˆ¤æ–­ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="Java">if (obj1 instanceof String str &amp;&amp; str.length() &gt; 20) {    result = str.length();}</code></pre><p>ä¸åŸæ¥çš„å†™æ³•å¯¹æ¯”ï¼Œæ–°çš„å†™æ³•ä»£ç æ›´åŠ ç®€æ´ã€å¯è¯»æ€§æ›´é«˜ï¼Œèƒ½å¤Ÿæå‡ºå¾ˆå¤šå†—ä½™ç¹ççš„ä»£ç ï¼Œéå¸¸å®ç”¨çš„ä¸€ä¸ªç‰¹æ€§ã€‚</p><h4 id="switchæ¨¡å¼åŒ¹é…ï¼ˆJava-21ï¼‰"><a href="#switchæ¨¡å¼åŒ¹é…ï¼ˆJava-21ï¼‰" class="headerlink" title="switchæ¨¡å¼åŒ¹é…ï¼ˆJava 21ï¼‰"></a>switchæ¨¡å¼åŒ¹é…ï¼ˆJava 21ï¼‰</h4><p>switchæ¨¡å¼åŒ¹é…æ˜¯ä¸€ä¸ªéå¸¸èµçš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨é€‰æ‹©å™¨è¡¨è¾¾å¼ä½¿ç”¨åŸºç¡€åˆ¤æ–­å’Œä»»æ„å¼•ç”¨ç±»å‹ï¼ŒåŒ…æ‹¬instanceofæ“ä½œç¬¦ã€‚è¿™æ„å‘³ç€å¯ä»¥æ›´çµæ´»åœ°ä½¿ç”¨å¯¹è±¡ã€æ•°ç»„ã€åˆ—è¡¨ç­‰å¤æ‚æ•°æ®ç»“æ„ä½œä¸ºswitchè¯­å¥çš„åŸºç¡€ï¼Œä»è€Œç®€åŒ–ä»£ç å¹¶æé«˜å¯è¯»æ€§ã€‚</p><p>switchæ¨¡å¼åŒ¹é…å…è®¸åœ¨switchè¯­å¥ä¸­ä½¿ç”¨æ¨¡å¼æ¥æµ‹è¯•è¡¨è¾¾å¼ï¼Œæ¯ä¸ªæ¨¡å¼éƒ½æœ‰ç‰¹å®šçš„åŠ¨ä½œï¼Œä»è€Œå¯ä»¥ç®€æ´ã€å®‰å…¨åœ°è¡¨è¾¾å¤æ‚çš„æ•°æ®å¯¼å‘æŸ¥è¯¢ã€‚</p><p>é€šè¿‡ä»£ç çœ‹ä¸‹switchæ¨¡å¼åŒ¹é…çš„é­…åŠ›ï¼›</p><pre><code class="Java">static String formatValue(Object obj) {    return switch (obj) {        case null -&gt; &quot;null&quot;;        case Integer i -&gt; String.format(&quot;int %d&quot;, i);        case Long l -&gt; String.format(&quot;long %d&quot;, l);        case Double d -&gt; String.format(&quot;double %f&quot;, d);        case String s -&gt; String.format(&quot;String %s&quot;, s);        case Person(String name, String address) -&gt; String.format(&quot;Person %s %s&quot;, name, address);        default -&gt; obj.toString();    };}public record Person(String name, String address) {}public static void main(String[] args) {    System.out.println(formatValue(10));    System.out.println(formatValue(20L));    System.out.println(formatValue(3.14));    System.out.println(formatValue(&quot;Hello&quot;));    System.out.println(formatValue(null));    System.out.println(formatValue(new Person(&quot;Howard&quot;, &quot;Beijing&quot;)));}// è¿è¡Œç»“æœ// int 10// long 20// double 3.140000// String Hello// null// Person Howard Beijing</code></pre><h4 id="Record-æ¨¡å¼ï¼ˆJava-21ï¼‰"><a href="#Record-æ¨¡å¼ï¼ˆJava-21ï¼‰" class="headerlink" title="Record æ¨¡å¼ï¼ˆJava 21ï¼‰"></a>Record æ¨¡å¼ï¼ˆJava 21ï¼‰</h4><p>Recordæ˜¯Java16æ­£å¼å‘å¸ƒçš„åŸºç¡€ç±»å‹ï¼Œæä¾›ä¸å¯å˜å¯¹è±¡çš„ç®€å•å®ç°ï¼ˆå…¶å®å°±æ˜¯Java Beanï¼Œä½†æ˜¯çœç•¥ä¸€å †çš„getterã€setterã€hashcodeã€equalsã€toStringç­‰æ–¹æ³•ï¼‰ã€‚</p><p>Recordæ¨¡å¼ï¼Œä¸»è¦æ˜¯ä½¿Recordç±»å‹å¯ä»¥ç›´æ¥åœ¨instanceofå’Œswitchæ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸ªç¤ºä¾‹ï¼Œæ¯”å¦‚æœ‰ä¸‹é¢å‡ ä¸ªåŸºç¡€å…ƒç´ ï¼š</p><pre><code class="Java">// é¢œè‰²enum Color { RED, GREEN, BLUE}// ç‚¹record Point(int x, int y) {}// å¸¦é¢œè‰²çš„ç‚¹record ColoredPoint(Point p, Color color) {}// æ­£æ–¹å½¢record Square(ColoredPoint upperLeft, ColoredPoint lowerRight) {}</code></pre><p>æˆ‘ä»¬åˆ†åˆ«é€šè¿‡instanceofæ¨¡å¼åŒ¹é…å’Œswitchæ¨¡å¼åŒ¹é…åˆ¤æ–­è¾“å…¥å‚æ•°çš„ç±»å‹ï¼Œæ‰“å°ä¸åŒçš„æ ¼å¼ï¼š</p><pre><code class="Java">private static void instancePatternsAndPrint(Object o) {    if (o instanceof Square(ColoredPoint upperLeft, ColoredPoint lowerRight)) {        System.out.println(&quot;Squareç±»å‹ï¼š&quot; + upperLeft + &quot; &quot; + lowerRight);    } else if (o instanceof ColoredPoint(Point(int x, int y), Color color)) {        System.out.println(&quot;ColoredPointç±»å‹ï¼š&quot; + x + &quot; &quot; + y + &quot; &quot; + color);    } else if (o instanceof Point p) {        System.out.println(&quot;Pointç±»å‹ï¼š&quot; + p);    }}private static void switchPatternsAndPrint(Object o) {    switch (o) {        case Square(ColoredPoint upperLeft, ColoredPoint lowerRight) -&gt; {            System.out.println(&quot;Squareç±»å‹ï¼š&quot; + upperLeft + &quot; &quot; + lowerRight);        }        case ColoredPoint(Point(int x, int y), Color color) -&gt; {            System.out.println(&quot;ColoredPointç±»å‹ï¼š&quot; + x + &quot; &quot; + y + &quot; &quot; + color);        }        case Point p -&gt; {            System.out.println(&quot;Pointç±»å‹ï¼š&quot; + p);        }        default -&gt; throw new IllegalStateException(&quot;Unexpected value: &quot; + o);    }}</code></pre><p>æˆ‘ä»¬é€šè¿‡mainæ–¹æ³•æ‰§è¡Œä¸‹ï¼š</p><pre><code class="Java">public static void main(String[] args) {    var p = new Point(1, 2);    var cp1 = new ColoredPoint(p, Color.RED);    var cp2 = new ColoredPoint(p, Color.GREEN);    var square = new Square(cp1, cp2);    instancePatternsAndPrint(square);    instancePatternsAndPrint(cp1);    instancePatternsAndPrint(p);    switchPatternsAndPrint(square);    switchPatternsAndPrint(cp1);    switchPatternsAndPrint(p);}// ç»“æœæ˜¯ï¼š//// Squareç±»å‹ï¼šColoredPoint[p=Point[x=1, y=2], color=RED] ColoredPoint[p=Point[x=1, y=2], color=GREEN]// ColoredPointç±»å‹ï¼š1 2 RED// Pointç±»å‹ï¼šPoint[x=1, y=2]//// Squareç±»å‹ï¼šColoredPoint[p=Point[x=1, y=2], color=RED] ColoredPoint[p=Point[x=1, y=2], color=GREEN]// ColoredPointç±»å‹ï¼š1 2 RED// Pointç±»å‹ï¼šPoint[x=1, y=2]</code></pre><p>æ˜¯ä¸æ˜¯å¾ˆç®€æ´ï¼Œå°±åƒJava8æä¾›çš„Lambdaè¡¨è¾¾å¼ä¸€æ ·ï¼Œå¾ˆä¸æ»‘ã€‚</p><h3 id="çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"><a href="#çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰" class="headerlink" title="çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰"></a>çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œæ¯”å¦‚é€šè¿‡<code>super(â€¦â€¦)</code>è°ƒç”¨çˆ¶ç±»ï¼Œåœ¨<code>super</code>ä¹‹å‰æ˜¯ä¸å…è®¸æœ‰å…¶ä»–è¯­å¥çš„ã€‚</p><p>å¤§éƒ¨åˆ†çš„æ—¶å€™è¿™ç§é™åˆ¶éƒ½æ²¡é—®é¢˜ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸å¤ªçµæ´»ã€‚å¦‚æœæƒ³åœ¨<code>super</code>ä¹‹å‰åŠ ä¸Šä¸€äº›å­ç±»ç‰¹æœ‰é€»è¾‘ï¼Œæ¯”å¦‚æƒ³ç»Ÿè®¡ä¸‹å­ç±»æ„é€ è€—æ—¶ï¼Œå°±å¾—é‡å†™ä¸€éçˆ¶ç±»çš„å®ç°ã€‚</p><p>é™¤äº†æœ‰æŸçµæ´»æ€§ï¼Œè¿™ç§é‡å†™çš„åšæ³•ä¹Ÿä¼šé€ æˆçˆ¶å­ç±»ä¹‹é—´çš„å…³ç³»å˜å¾—å¥‡æ€ªã€‚å‡è®¾çˆ¶ç±»æ˜¯SDKä¸­çš„ä¸€ä¸ªç±»ï¼ŒSDKå‡çº§æ—¶åœ¨çˆ¶ç±»æ„é€ å‡½æ•°å¢åŠ äº†ä¸€äº›é€»è¾‘ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­æ˜¯æ— æ³•ç»§æ‰¿è¿™äº›é€»è¾‘çš„ï¼ŒæŸæ¬¡éœ€è¦å‡çº§SDKï¼ˆæ¯”å¦‚ä½ç‰ˆæœ¬æœ‰å®‰å…¨é£é™©ï¼‰ï¼ŒéªŒè¯ä¸å®Œæ•´çš„æƒ…å†µä¸‹ï¼Œå°±å¾ˆå®¹æ˜“å‡ºç°bugã€‚</p><p>è¯¥ç‰¹æ€§çš„ç›®æ ‡æ˜¯æé«˜æ„é€ å‡½æ•°çš„å¯è¯»æ€§å’Œå¯é¢„æµ‹æ€§ï¼ŒåŒæ—¶ä¿æŒæ„é€ å‡½æ•°è°ƒç”¨çš„è‡ªä¸Šè€Œä¸‹çš„è§„åˆ™ã€‚é€šè¿‡å…è®¸åœ¨æ˜¾å¼è°ƒç”¨ <code>super()</code> æˆ– <code>this()</code> å‰åˆå§‹åŒ–å­—æ®µï¼Œä»è€Œå®ç°æ›´çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ã€‚è¿™ä¸€å˜åŒ–ä½¿å¾—ä»£ç æ›´å…·è¡¨ç°åŠ›ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p><pre><code class="Java">public class PositiveBigInteger extends BigInteger {    public PositiveBigInteger(long value) {        if (value &lt;= 0) {            throw new IllegalArgumentException(&quot;non-positive value&quot;);        }        super(value);    }}</code></pre><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æƒ³è¦äº†è§£å„ç‰ˆæœ¬çš„è¯¦ç»†ç‰¹æ€§ï¼Œå¯ä»¥ä»<a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­æŸ¥çœ‹ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java/java-features-8-23-2">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ2ï¼‰ï¼šæå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ2ï¼‰ï¼šæå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      æå‡å¹¸ç¦æ„Ÿçš„ç‰¹æ€§ã€‚ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java10" scheme="https://www.howardliu.cn/tags/Java10/"/>
    
      <category term="Java11" scheme="https://www.howardliu.cn/tags/Java11/"/>
    
      <category term="Java12" scheme="https://www.howardliu.cn/tags/Java12/"/>
    
      <category term="Java14" scheme="https://www.howardliu.cn/tags/Java14/"/>
    
      <category term="Java15" scheme="https://www.howardliu.cn/tags/Java15/"/>
    
      <category term="Java13" scheme="https://www.howardliu.cn/tags/Java13/"/>
    
      <category term="Java16" scheme="https://www.howardliu.cn/tags/Java16/"/>
    
      <category term="Java17" scheme="https://www.howardliu.cn/tags/Java17/"/>
    
      <category term="Java18" scheme="https://www.howardliu.cn/tags/Java18/"/>
    
      <category term="Java19" scheme="https://www.howardliu.cn/tags/Java19/"/>
    
      <category term="Java20" scheme="https://www.howardliu.cn/tags/Java20/"/>
    
      <category term="Java21" scheme="https://www.howardliu.cn/tags/Java21/"/>
    
      <category term="Java8" scheme="https://www.howardliu.cn/tags/Java8/"/>
    
      <category term="Java22" scheme="https://www.howardliu.cn/tags/Java22/"/>
    
      <category term="Java9" scheme="https://www.howardliu.cn/tags/Java9/"/>
    
      <category term="Java23" scheme="https://www.howardliu.cn/tags/Java23/"/>
    
  </entry>
  
  <entry>
    <title>ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ1ï¼‰ï¼šæœ‰æ„æ€çš„ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java/java-features-8-23-1/"/>
    <id>https://www.howardliu.cn/java/java-features-8-23-1/</id>
    <published>2024-09-17T00:20:00.000Z</published>
    <updated>2024-12-05T09:14:01.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/202409161115516.jpg" alt="ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚</p><p><img src="https://static.howardliu.cn/202409111451409.png" alt="Javaç‰ˆæœ¬åˆ†å¸ƒ"></p><blockquote><p>æ•°æ®æ¥æº<a href="https://newrelic.com/sites/default/files/2024-05/new-relic-state-of-the-java-ecosystem-2024-05-29.pdf" target="_blank" rel="noopener">2024 State of the Java Ecosystem</a></p></blockquote><a id="more"></a><h2 id="æœ‰æ„æ€çš„ç‰¹æ€§"><a href="#æœ‰æ„æ€çš„ç‰¹æ€§" class="headerlink" title="æœ‰æ„æ€çš„ç‰¹æ€§"></a>æœ‰æ„æ€çš„ç‰¹æ€§</h2><blockquote><p>å¯ä»¥ä» <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­æŸ¥çœ‹å„ä¸ªç‰ˆæœ¬çš„ç‰¹æ€§ã€‚</p></blockquote><h3 id="å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰çš„ç‰¹æ€§"><a href="#å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰çš„ç‰¹æ€§" class="headerlink" title="å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰çš„ç‰¹æ€§"></a>å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰çš„ç‰¹æ€§</h3><p>Java8ä¸­çš„Lambdaè¡¨è¾¾å¼ã€Streamæµã€Optionalæ˜¯å¤§ç‰ˆæœ¬ç‰¹æ€§ï¼ŒJava8æ˜¯2014å¹´å‘å¸ƒï¼Œå·²æœ‰åå¹´å†å²äº†ã€‚å¤§å®¶åº”è¯¥åˆ†å‚ç†Ÿæ‚‰äº†ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚æ¨èä¸¤ç¯‡æ–‡ç« ï¼š</p><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li></ul><h3 id="è¡¥å…¨æŠ€èƒ½æ ‘"><a href="#è¡¥å…¨æŠ€èƒ½æ ‘" class="headerlink" title="è¡¥å…¨æŠ€èƒ½æ ‘"></a>è¡¥å…¨æŠ€èƒ½æ ‘</h3><h4 id="Record-ç±»å‹ï¼ˆJava-16ï¼‰"><a href="#Record-ç±»å‹ï¼ˆJava-16ï¼‰" class="headerlink" title="Record ç±»å‹ï¼ˆJava 16ï¼‰"></a>Record ç±»å‹ï¼ˆJava 16ï¼‰</h4><p>Javaæ–°å¢äº†ä¸€ä¸ªå…³é”®å­—<code>record</code>ï¼Œå®ƒæ˜¯å®šä¹‰ä¸å¯å˜æ•°æ®ç±»å‹å°è£…ç±»çš„å…³é”®å­—ï¼Œä¸»è¦ç”¨åœ¨ç‰¹å®šé¢†åŸŸç±»ä¸Šã€‚</p><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨Javaå¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰POJOä½œä¸ºæ•°æ®å­˜å‚¨å¯¹è±¡ï¼Œæ ¹æ®è§„èŒƒï¼ŒPOJOä¸­é™¤äº†å±æ€§æ˜¯ä¸ªæ€§åŒ–çš„ï¼Œå…¶ä»–çš„æ¯”å¦‚<code>getter</code>ã€<code>setter</code>ã€<code>equals</code>ã€<code>hashCode</code>ã€<code>toString</code>éƒ½æ˜¯æ¨¡æ¿åŒ–çš„å†™æ³•ï¼Œæ‰€ä»¥ä¸ºäº†ç®€ä¾¿ï¼Œå¾ˆå¤šç±»ä¼¼Lombokçš„ç»„ä»¶æä¾›Javaç±»ç¼–è¯‘æ—¶å¢å¼ºï¼Œé€šè¿‡åœ¨ç±»ä¸Šå®šä¹‰<code>@Data</code>æ³¨è§£è‡ªåŠ¨æ·»åŠ è¿™äº›æ¨¡æ¿åŒ–æ–¹æ³•ã€‚åœ¨Java14ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨<code>record</code>è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª<code>Person</code>ç±»ï¼š</p><pre><code class="Java">public record Person(String name, String address) {}</code></pre><p>æˆ‘ä»¬è½¬æ¢ä¸ºä¹‹å‰çš„å®šä¹‰ä¼šæ˜¯ä¸€å¨ä¸‹é¢è¿™ç§ä»£ç ï¼š</p><pre><code class="Java">public final class PersonBefore {    private final String name;    private final String address;    public PersonBefore(String name, String address) {        this.name = name;        this.address = address;    }    public String name() {        return name;    }    public String address() {        return address;    }    @Override    public boolean equals(Object o) {        if (this == o) {            return true;        }        if (o == null || getClass() != o.getClass()) {            return false;        }        PersonBefore14 that = (PersonBefore14) o;        return Objects.equals(name, that.name) &amp;&amp; Objects.equals(address, that.address);    }    @Override    public int hashCode() {        return Objects.hash(name, address);    }    @Override    public String toString() {        return &quot;PersonBefore{&quot; +                &quot;name=&#39;&quot; + name + &#39;\&#39;&#39; +                &quot;, address=&#39;&quot; + address + &#39;\&#39;&#39; +                &#39;}&#39;;    }}</code></pre><p>æˆ‘ä»¬å¯ä»¥å‘ç°Recordç±»æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š</p><ol><li>ä¸€ä¸ªæ„é€ æ–¹æ³•</li><li>getteræ–¹æ³•åä¸å±æ€§åç›¸åŒ</li><li>æœ‰<code>equals()</code>ã€<code>hashCode()</code>æ–¹æ³•</li><li>æœ‰<code>toString()</code>æ–¹æ³•</li><li>ç±»å¯¹è±¡å’Œå±æ€§è¢«<code>final</code>ä¿®é¥°ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°æ˜¯åŒ…å«æ‰€æœ‰å±æ€§çš„ï¼Œè€Œä¸”æ²¡æœ‰setteræ–¹æ³•</li></ol><p>åœ¨<code>Class</code>ç±»ä¸­ä¹Ÿæ–°å¢äº†å¯¹åº”çš„å¤„ç†æ–¹æ³•ï¼š</p><ul><li><code>getRecordComponents()</code>ï¼šè¿”å›ä¸€ç»„<code>java.lang.reflect.RecordComponent</code>å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œè¯¥æ•°ç»„çš„å…ƒç´ ä¸<code>Record</code>ç±»ä¸­çš„ç»„ä»¶ç›¸å¯¹åº”ï¼Œå…¶é¡ºåºä¸åœ¨è®°å½•å£°æ˜ä¸­å‡ºç°çš„é¡ºåºç›¸åŒï¼Œå¯ä»¥ä»è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ª<code>RecordComponent</code>ä¸­æå–åˆ°ç»„ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¶åç§°ã€ç±»å‹ã€æ³›å‹ç±»å‹ã€æ³¨é‡ŠåŠå…¶è®¿é—®æ–¹æ³•ã€‚</li><li><code>isRecord()</code>ï¼šè¿”å›æ‰€åœ¨ç±»æ˜¯å¦æ˜¯ Record ç±»å‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚</li></ul><p>çœ‹èµ·æ¥ï¼ŒRecordç±»å’ŒEnumå¾ˆåƒï¼Œéƒ½æ˜¯ä¸€å®šçš„æ¨¡æ¿ç±»ï¼Œé€šè¿‡è¯­æ³•ç³–å®šä¹‰ï¼Œåœ¨Javaç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œå°†å…¶ç¼–è¯‘æˆç‰¹å®šçš„æ ¼å¼ï¼ŒåŠŸèƒ½å¾ˆå¥½ï¼Œä½†å¦‚æœæ²¡æœ‰ä¹ æƒ¯ä½¿ç”¨ï¼Œå¯èƒ½ä¼šè§‰å¾—é™åˆ¶å¤ªå¤šã€‚ </p><h4 id="å¯†å°ç±»å’Œæ¥å£ï¼ˆJava-17ï¼‰"><a href="#å¯†å°ç±»å’Œæ¥å£ï¼ˆJava-17ï¼‰" class="headerlink" title="å¯†å°ç±»å’Œæ¥å£ï¼ˆJava 17ï¼‰"></a>å¯†å°ç±»å’Œæ¥å£ï¼ˆJava 17ï¼‰</h4><p>ç›®å‰ï¼ŒJava æ²¡æœ‰æä¾›å¯¹ç»§æ‰¿çš„ç»†ç²’åº¦æ§åˆ¶ï¼Œåªæœ‰ publicã€protectedã€privateã€åŒ…å†…æ§åˆ¶å››ç§éå¸¸ç²—ç²’åº¦çš„æ§åˆ¶æ–¹å¼ã€‚</p><p>ä¸ºæ­¤ï¼Œå¯†å°ç±»çš„ç›®æ ‡æ˜¯å…è®¸å•ä¸ªç±»å£°æ˜å“ªäº›ç±»å‹å¯ä»¥ç”¨ä½œå…¶å­ç±»å‹ã€‚è¿™ä¹Ÿé€‚ç”¨äºæ¥å£ï¼Œå¹¶ç¡®å®šå“ªäº›ç±»å‹å¯ä»¥å®ç°å®ƒä»¬ã€‚è¯¥åŠŸèƒ½ç‰¹æ€§æ–°å¢äº†<code>sealed</code>å’Œ<code>non-sealed</code>ä¿®é¥°ç¬¦å’Œ<code>permits</code>å…³é”®å­—ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹å®šä¹‰ï¼š</p><pre><code class="Java">public sealed class Person permits Student, Worker, Teacher {}public sealed class Student extends Person        permits Pupil, JuniorSchoolStudent, HighSchoolStudent, CollegeStudent, GraduateStudent {}public final class Pupil extends Student {}public non-sealed class Worker extends Person {}public class OtherClass extends Worker {}public final class Teacher extends Person {}</code></pre><p>æˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ª<code>sealed</code>ä¿®é¥°çš„ç±»<code>Person</code>ï¼Œä½¿ç”¨<code>permits</code>æŒ‡å®šè¢«ç»§æ‰¿çš„å­ç±»ï¼Œè¿™äº›å­ç±»å¿…é¡»æ˜¯ä½¿ç”¨<code>final</code>æˆ–<code>sealed</code>æˆ–<code>non-sealed</code>ä¿®é¥°çš„ç±»ã€‚å…¶ä¸­<code>Student</code>æ˜¯ä½¿ç”¨<code>sealed</code>ä¿®é¥°ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦ä½¿ç”¨<code>permits</code>æŒ‡å®šè¢«ç»§æ‰¿çš„å­ç±»ã€‚<code>Worker</code>ç±»ä½¿ç”¨<code>non-sealed</code>ä¿®é¥°ï¼Œæˆä¸ºæ™®é€šç±»ï¼Œå…¶ä»–ç±»éƒ½å¯ä»¥ç»§æ‰¿å®ƒã€‚<code>Teacher</code>ä½¿ç”¨<code>final</code>ä¿®é¥°ï¼Œä¸å¯å†è¢«ç»§æ‰¿ã€‚</p><p>ä»ç±»å›¾ä¸Šçœ‹æ²¡æœ‰å¤ªå¤šåŒºåˆ«ï¼š</p><p><img src="https://static.howardliu.cn/202409161142744.png" alt="å¯†å°ç±»å’Œæ¥å£"></p><p>ä½†æ˜¯ä»åŠŸèƒ½ç‰¹æ€§ä¸Šï¼Œèµ·åˆ°äº†å¾ˆå¥½çš„çº¦æŸä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„å®šä¹‰å¯ä»¥å…¬å¼€ä½¿ç”¨ï¼Œä½†åˆä¸æƒ³è¢«éç‰¹å®šç±»ç»§æ‰¿çš„ç±»äº†ã€‚</p><h4 id="å…¨æ–°çš„-HTTP-å®¢æˆ·ç«¯ï¼ˆJava-11ï¼‰"><a href="#å…¨æ–°çš„-HTTP-å®¢æˆ·ç«¯ï¼ˆJava-11ï¼‰" class="headerlink" title="å…¨æ–°çš„ HTTP å®¢æˆ·ç«¯ï¼ˆJava 11ï¼‰"></a>å…¨æ–°çš„ HTTP å®¢æˆ·ç«¯ï¼ˆJava 11ï¼‰</h4><p>è€ç‰ˆ HTTP å®¢æˆ·ç«¯å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼Œå¤§å®¶å¼€å‘çš„æ—¶å€™åŸºæœ¬ä¸Šéƒ½æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹ HTTP åº“ï¼Œæ¯”å¦‚ Apache HttpClientã€Nettyã€Jetty ç­‰ã€‚</p><p>æ–°ç‰ˆ HTTP å®¢æˆ·ç«¯çš„ç›®æ ‡å¾ˆå¤šï¼Œæ¯•ç«Ÿè¿™ä¹ˆå¤šç ç‰åœ¨å‰ï¼Œå¦‚æœè¿˜æ˜¯åšæˆä¸€å¨ï¼ŒæŒ‡å®šæ˜¯è¦è¢«ç¬‘æ­»çš„ã€‚æ‰€ä»¥æ–°ç‰ˆ HTTP å®¢æˆ·ç«¯åˆ—å‡ºäº† 16 ä¸ªç›®æ ‡ï¼ŒåŒ…æ‹¬ç®€å•æ˜“ç”¨ã€æ‰“å°å…³é”®ä¿¡æ¯ã€WebSocketã€HTTP/2ã€HTTPS/TLSã€è‰¯å¥½çš„æ€§èƒ½ã€éé˜»å¡ API ç­‰ç­‰ã€‚</p><pre><code class="Java">@Testvoid testHttpClient() throws IOException, InterruptedException {    final HttpClient httpClient = HttpClient.newBuilder()            .version(HttpClient.Version.HTTP_2)            .connectTimeout(Duration.ofSeconds(20))            .build();    final HttpRequest httpRequest = HttpRequest.newBuilder()            .GET()            .uri(URI.create(&quot;https://www.howardliu.cn/robots.txt&quot;))            .build();    final HttpResponse&lt;String&gt; httpResponse = httpClient.send(httpRequest, BodyHandlers.ofString());    final String responseBody = httpResponse.body();    assertTrue(responseBody.contains(&quot;Allow&quot;));}</code></pre><h4 id="æœ‰åºé›†åˆï¼ˆJava-21ï¼‰"><a href="#æœ‰åºé›†åˆï¼ˆJava-21ï¼‰" class="headerlink" title="æœ‰åºé›†åˆï¼ˆJava 21ï¼‰"></a>æœ‰åºé›†åˆï¼ˆJava 21ï¼‰</h4><p>æœ‰åºé›†åˆæ˜¯Java21ç‰ˆæœ¬ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œæ—¨åœ¨ä¸ºJavaé›†åˆæ¡†æ¶æ·»åŠ å¯¹æœ‰åºé›†åˆçš„æ”¯æŒã€‚</p><p>æœ‰åºé›†åˆæ˜¯ä¸€ç§å…·æœ‰å®šä¹‰å¥½çš„å…ƒç´ è®¿é—®é¡ºåºçš„é›†åˆç±»å‹ï¼Œå®ƒå…è®¸ä»¥ä¸€è‡´çš„æ–¹å¼è®¿é—®å’Œå¤„ç†é›†åˆä¸­çš„å…ƒç´ ï¼Œæ— è®ºæ˜¯ä»ç¬¬ä¸€ä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿˜æ˜¯ä»æœ€åä¸€ä¸ªå…ƒç´ åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p>åœ¨ Java ä¸­ï¼Œé›†åˆç±»åº“éå¸¸é‡è¦ä¸”ä½¿ç”¨é¢‘ç‡éå¸¸é«˜ï¼Œä½†æ˜¯ç¼ºä¹ä¸€ç§èƒ½å¤Ÿè¡¨ç¤ºå…·æœ‰å®šä¹‰å¥½çš„å…ƒç´ è®¿é—®é¡ºåºçš„é›†åˆç±»å‹ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>List</code>å’Œ<code>Deque</code>éƒ½å®šä¹‰äº†å…ƒç´ çš„è®¿é—®é¡ºåºï¼Œä½†å®ƒä»¬çš„å…±åŒçˆ¶æ¥å£<code>Collection</code>å´æ²¡æœ‰ã€‚åŒæ ·ï¼ŒSetä¸å®šä¹‰å…ƒç´ çš„è®¿é—®é¡ºåºï¼Œå…¶å­ç±»å‹å¦‚<code>HashSet</code>ä¹Ÿæ²¡æœ‰å®šä¹‰ï¼Œä½†å­ç±»å‹å¦‚<code>SortedSet</code>å’Œ<code>LinkedHashSet</code>åˆ™æœ‰å®šä¹‰ã€‚å› æ­¤ï¼Œæ”¯æŒè®¿é—®é¡ºåºçš„åŠŸèƒ½æ•£å¸ƒåœ¨æ•´ä¸ªç±»å‹å±‚æ¬¡ç»“æ„ä¸­ï¼Œä½¿å¾—åœ¨APIä¸­è¡¨è¾¾æŸäº›æœ‰ç”¨çš„æ¦‚å¿µå˜å¾—å›°éš¾ã€‚<code>Collection</code>å¤ªé€šç”¨ï¼Œå°†æ­¤ç±»çº¦æŸç•™ç»™æ–‡æ¡£è§„èŒƒï¼Œå¯èƒ½å¯¼è‡´éš¾ä»¥è°ƒè¯•çš„é”™è¯¯ã€‚</p><p>è€Œä¸”ï¼Œè™½ç„¶æŸäº›é›†åˆæœ‰é¡ºåºæ“ä½œæ–¹æ³•ï¼Œä½†æ˜¯å´ä¸å°½ç›¸åŒï¼Œæ¯”å¦‚</p><table><thead><tr><th><br></th><th>First element</th><th>Last element</th></tr></thead><tbody><tr><td>List</td><td>list.get(0)</td><td>list.get(list.size() - 1)</td></tr><tr><td>Deque</td><td>deque.getFirst()</td><td>deque.getLast()</td></tr><tr><td>SortedSet</td><td>sortedSet.first()</td><td>sortedSet.last()</td></tr><tr><td>LinkedHashSet</td><td>linkedHashSet.iterator().next()</td><td>ç¼ºå¤±</td></tr></tbody></table><p>æä¾›äº†æœ‰åºé›†åˆ<code>SequencedCollection</code>ã€<code>SequencedSet</code>ã€<code>SequencedMap</code>ï¼š</p><pre><code class="Java">interface SequencedCollection&lt;E&gt; extends Collection&lt;E&gt; {    // new method    SequencedCollection&lt;E&gt; reversed();    // methods promoted from Deque    void addFirst(E);    void addLast(E);    E getFirst();    E getLast();    E removeFirst();    E removeLast();}interface SequencedSet&lt;E&gt; extends Set&lt;E&gt;, SequencedCollection&lt;E&gt; {    SequencedSet&lt;E&gt; reversed();    // covariant override}interface SequencedMap&lt;K,V&gt; extends Map&lt;K,V&gt; {    // new methods    SequencedMap&lt;K,V&gt; reversed();    SequencedSet&lt;K&gt; sequencedKeySet();    SequencedCollection&lt;V&gt; sequencedValues();    SequencedSet&lt;Entry&lt;K,V&gt;&gt; sequencedEntrySet();    V putFirst(K, V);    V putLast(K, V);    // methods promoted from NavigableMap    Entry&lt;K, V&gt; firstEntry();    Entry&lt;K, V&gt; lastEntry();    Entry&lt;K, V&gt; pollFirstEntry();    Entry&lt;K, V&gt; pollLastEntry();}</code></pre><p><code>SequencedCollection</code>çš„<code>reversed()</code>æ–¹æ³•æä¾›äº†ä¸€ä¸ªåŸå§‹é›†åˆçš„åå‘è§†å›¾ã€‚ä»»ä½•å¯¹åŸå§‹é›†åˆçš„ä¿®æ”¹éƒ½ä¼šåœ¨è§†å›¾ä¸­å¯è§ã€‚å¦‚æœå…è®¸ï¼Œè§†å›¾ä¸­çš„ä¿®æ”¹ä¼šå†™å›åˆ°åŸå§‹é›†åˆã€‚</p><p><img src="https://static.howardliu.cn/202409161143487.png" alt="JEP 431: æœ‰åºé›†åˆï¼ˆSequenced Collectionsï¼‰"></p><p>æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªLinkedHashSetï¼Œç°åœ¨æˆ‘ä»¬æƒ³è¦è·å–å®ƒçš„åå‘è§†å›¾å¹¶ä»¥åå‘é¡ºåºéå†å®ƒï¼š</p><pre><code class="Java">LinkedHashSet&lt;Integer&gt; linkedHashSet = new LinkedHashSet&lt;&gt;(Arrays.asList(3, 2, 1));// è·å–åå‘è§†å›¾SequencedCollection&lt;Integer&gt; reversed = linkedHashSet.reversed();// åå‘éå†System.out.println(&quot;åŸå§‹æ•°æ®ï¼š&quot; + linkedHashSet);System.out.println(&quot;åè½¬æ•°æ®ï¼š&quot; + reversed);// è¿è¡Œç»“æœï¼š// åŸå§‹æ•°æ®ï¼š[3, 2, 1]// åè½¬æ•°æ®ï¼š[1, 2, 3]</code></pre><p>è¿™äº›æ–¹æ³•éƒ½æ˜¯ä¾¿æ·æ–¹æ³•ï¼Œå†…éƒ¨æ•°æ®ç»“æ„æ²¡æœ‰å˜åŒ–ï¼Œå…¶å®æœ¬è´¨ä¹Ÿæ˜¯åŸæ¥çš„ç”¨æ³•ã€‚æ¯”å¦‚<code>ArrayList</code>ä¸­çš„<code>getFirst</code>å’Œ<code>getLast</code>æ–¹æ³•ï¼š</p><pre><code class="java">/** * {@inheritDoc} * * @throws NoSuchElementException {@inheritDoc} * @since 21 */public E getFirst() {    if (size == 0) {        throw new NoSuchElementException();    } else {        return elementData(0);    }}/** * {@inheritDoc} * * @throws NoSuchElementException {@inheritDoc} * @since 21 */public E getLast() {    int last = size - 1;    if (last &lt; 0) {        throw new NoSuchElementException();    } else {        return elementData(last);    }}</code></pre><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æƒ³è¦äº†è§£å„ç‰ˆæœ¬çš„è¯¦ç»†ç‰¹æ€§ï¼Œå¯ä»¥ä»<a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­æŸ¥çœ‹ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java/java-features-8-23-1">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ1ï¼‰ï¼šæœ‰æ„æ€çš„ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">ä»Java8åˆ°Java23å€¼å¾—æœŸå¾…çš„xä¸ªç‰¹æ€§ï¼ˆ1ï¼‰ï¼šæœ‰æ„æ€çš„ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      æœ‰æ„æ€çš„ç‰¹æ€§ã€‚ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java10" scheme="https://www.howardliu.cn/tags/Java10/"/>
    
      <category term="Java11" scheme="https://www.howardliu.cn/tags/Java11/"/>
    
      <category term="Java12" scheme="https://www.howardliu.cn/tags/Java12/"/>
    
      <category term="Java14" scheme="https://www.howardliu.cn/tags/Java14/"/>
    
      <category term="Java15" scheme="https://www.howardliu.cn/tags/Java15/"/>
    
      <category term="Java13" scheme="https://www.howardliu.cn/tags/Java13/"/>
    
      <category term="Java16" scheme="https://www.howardliu.cn/tags/Java16/"/>
    
      <category term="Java17" scheme="https://www.howardliu.cn/tags/Java17/"/>
    
      <category term="Java18" scheme="https://www.howardliu.cn/tags/Java18/"/>
    
      <category term="Java19" scheme="https://www.howardliu.cn/tags/Java19/"/>
    
      <category term="Java20" scheme="https://www.howardliu.cn/tags/Java20/"/>
    
      <category term="Java21" scheme="https://www.howardliu.cn/tags/Java21/"/>
    
      <category term="Java8" scheme="https://www.howardliu.cn/tags/Java8/"/>
    
      <category term="Java22" scheme="https://www.howardliu.cn/tags/Java22/"/>
    
      <category term="Java9" scheme="https://www.howardliu.cn/tags/Java9/"/>
    
      <category term="Java23" scheme="https://www.howardliu.cn/tags/Java23/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava23 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java/java-23-features/"/>
    <id>https://www.howardliu.cn/java/java-23-features/</id>
    <published>2024-09-16T00:20:00.000Z</published>
    <updated>2024-12-05T03:08:06.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/202409141635767.png" alt="Java23 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Java23 åœ¨ 2024 å¹´ 9 æœˆ 17 æ—¥å‘å¸ƒGAç‰ˆæœ¬ï¼Œå…±åäºŒå¤§ç‰¹æ€§ï¼š</p><ul><li>JEP 455: æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨åŸå§‹ç±»å‹ï¼ˆPrimitive Types in Patterns, instanceof, and switchï¼Œé¢„è§ˆï¼‰</li><li>JEP 466: ç±»æ–‡ä»¶APIï¼ˆClass-File APIï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</li><li>JEP 467: Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆMarkdown Documentation Commentsï¼‰</li><li>JEP 469: å‘é‡APIï¼ˆVector APIï¼Œç¬¬å…«æ¬¡å­µåŒ–ï¼‰</li><li>JEP 473: æµæ”¶é›†å™¨ï¼ˆStream Gatherersï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</li><li>JEP 471: æ ‡è®°sun.misc.Unsafeä¸­çš„å†…å­˜ç®¡ç†æ–¹æ³•ä¸ºè¿‡æ—¶ï¼ˆDeprecate the Memory-Access Methods in sun.misc.Unsafe for Removalï¼‰</li><li>JEP 474: ZGCï¼šé»˜è®¤åˆ†ä»£æ”¶é›†æ¨¡å¼ï¼ˆZGC: Generational Mode by Defaultï¼‰</li><li>JEP 476: æ¨¡å—å¯¼å…¥å£°æ˜ï¼ˆModule Import Declarationsï¼Œé¢„è§ˆï¼‰</li><li>JEP 477: éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆImplicitly Declared Classes and Instance Main Methodsï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰</li><li>JEP 480: ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured Concurrencyï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰</li><li>JEP 481: ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰</li><li>JEP 482: çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆFlexible Constructor Bodiesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚</p><h2 id="JEP-467-Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆMarkdown-Documentation-Commentsï¼‰"><a href="#JEP-467-Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆMarkdown-Documentation-Commentsï¼‰" class="headerlink" title="JEP 467: Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆMarkdown Documentation Commentsï¼‰"></a>JEP 467: Markdownæ ¼å¼æ–‡æ¡£æ³¨é‡Šï¼ˆMarkdown Documentation Commentsï¼‰</h2><p>Markdownæ˜¯ä¸€ç§è½»é‡çº§çš„æ ‡è®°è¯­è¨€ï¼Œå¯ç”¨äºåœ¨çº¯æ–‡æœ¬æ–‡æ¡£ä¸­æ·»åŠ æ ¼å¼åŒ–å…ƒç´ ï¼Œå…·ä½“è¯­æ³•å¯ä»¥å‚è€ƒ<a href="https://www.markdownguide.org/basic-syntax/" target="_blank" rel="noopener">Markdown Guide</a>ã€‚æœ¬æ–‡å°±æ˜¯ä½¿ç”¨Markdownè¯­æ³•ç¼–å†™çš„ã€‚</p><p>åœ¨Javaæ³¨é‡Šä¸­å¼•å…¥Markdownï¼Œç›®æ ‡æ˜¯ä½¿APIæ–‡æ¡£æ³¨é‡Šä»¥æºä»£ç å½¢å¼æ›´æ˜“äºç¼–å†™å’Œé˜…è¯»ã€‚ä¸»è¦æ”¶ç›ŠåŒ…æ‹¬ï¼š</p><ul><li>æé«˜æ–‡æ¡£ç¼–å†™çš„æ•ˆç‡ï¼šMarkdownè¯­æ³•ç›¸æ¯”HTMLæ›´ä¸ºç®€æ´ï¼Œå¼€å‘è€…å¯ä»¥æ›´å¿«åœ°ç¼–å†™å’Œä¿®æ”¹æ–‡æ¡£æ³¨é‡Šã€‚</li><li>å¢å¼ºæ–‡æ¡£çš„å¯è¯»æ€§ï¼šMarkdownæ ¼å¼çš„æ–‡æ¡£åœ¨æºä»£ç ä¸­æ›´æ˜“äºé˜…è¯»ï¼Œæœ‰åŠ©äºå¼€å‘è€…å¿«é€Ÿç†è§£APIçš„ç”¨é€”å’Œè¡Œä¸ºã€‚</li><li>ä¿ƒè¿›æ–‡æ¡£çš„ä¸€è‡´æ€§ï¼šé€šè¿‡æ”¯æŒMarkdownï¼Œå¯ä»¥ç¡®ä¿æ–‡æ¡£é£æ ¼çš„ä¸€è‡´æ€§ï¼Œå‡å°‘å› æ ¼å¼é—®é¢˜å¯¼è‡´çš„æ–‡æ¡£æ··ä¹±ã€‚</li><li>ç®€åŒ–æ–‡æ¡£ç»´æŠ¤ï¼šMarkdownæ ¼å¼çš„æ–‡æ¡£æ³¨é‡Šæ›´æ˜“äºç»´æŠ¤å’Œæ›´æ–°ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šäººåä½œçš„é¡¹ç›®ä¸­ï¼Œå¯ä»¥å‡å°‘å› æ–‡æ¡£æ ¼å¼é—®é¢˜å¯¼è‡´çš„æ²Ÿé€šæˆæœ¬ã€‚</li></ul><p>å…·ä½“ä½¿ç”¨æ–¹å¼æ˜¯åœ¨æ³¨é‡Šå‰é¢å¢åŠ <code>///</code>ï¼Œæ¯”å¦‚<code>java.lang.Object.hashCode</code>çš„æ³¨é‡Šï¼š</p><pre><code class="java">/** * Returns a hash code value for the object. This method is * supported for the benefit of hash tables such as those provided by * {@link java.util.HashMap}. * &lt;p&gt; * The general contract of {@code hashCode} is: * &lt;ul&gt; * &lt;li&gt;Whenever it is invoked on the same object more than once during *     an execution of a Java application, the {@code hashCode} method *     must consistently return the same integer, provided no information *     used in {@code equals} comparisons on the object is modified. *     This integer need not remain consistent from one execution of an *     application to another execution of the same application. * &lt;li&gt;If two objects are equal according to the {@link *     #equals(Object) equals} method, then calling the {@code *     hashCode} method on each of the two objects must produce the *     same integer result. * &lt;li&gt;It is &lt;em&gt;not&lt;/em&gt; required that if two objects are unequal *     according to the {@link #equals(Object) equals} method, then *     calling the {@code hashCode} method on each of the two objects *     must produce distinct integer results.  However, the programmer *     should be aware that producing distinct integer results for *     unequal objects may improve the performance of hash tables. * &lt;/ul&gt; * * @implSpec * As far as is reasonably practical, the {@code hashCode} method defined * by class {@code Object} returns distinct integers for distinct objects. * * @return  a hash code value for this object. * @see     java.lang.Object#equals(java.lang.Object) * @see     java.lang.System#identityHashCode */</code></pre><p>å¦‚æœä½¿ç”¨JEP 467çš„Markdownæ–¹å¼ï¼š</p><pre><code class="java">/// Returns a hash code value for the object. This method is/// supported for the benefit of hash tables such as those provided by/// [java.util.HashMap].////// The general contract of `hashCode` is://////   - Whenever it is invoked on the same object more than once during///     an execution of a Java application, the `hashCode` method///     must consistently return the same integer, provided no information///     used in `equals` comparisons on the object is modified.///     This integer need not remain consistent from one execution of an///     application to another execution of the same application.///   - If two objects are equal according to the///     [equals][#equals(Object)] method, then calling the///     `hashCode` method on each of the two objects must produce the///     same integer result.///   - It is _not_ required that if two objects are unequal///     according to the [equals][#equals(Object)] method, then///     calling the `hashCode` method on each of the two objects///     must produce distinct integer results.  However, the programmer///     should be aware that producing distinct integer results for///     unequal objects may improve the performance of hash tables.////// @implSpec/// As far as is reasonably practical, the `hashCode` method defined/// by class `Object` returns distinct integers for distinct objects.////// @return  a hash code value for this object./// @see     java.lang.Object#equals(java.lang.Object)/// @see     java.lang.System#identityHashCode</code></pre><p>ç®€å•ä¸¤ç§å†™æ³•çš„å·®å¼‚ï¼Œç›¸åŒæ³¨é‡Šï¼ŒMarkdownçš„å†™æ³•æ›´åŠ ç®€æ´ï¼š</p><p><img src="https://static.howardliu.cn/Object-hashcode-diff-3.png" alt="Object hashcodeæ³¨é‡Šå·®å¼‚"></p><h2 id="JEP-474-ZGCï¼šé»˜è®¤åˆ†ä»£æ”¶é›†æ¨¡å¼ï¼ˆZGC-Generational-Mode-by-Defaultï¼‰"><a href="#JEP-474-ZGCï¼šé»˜è®¤åˆ†ä»£æ”¶é›†æ¨¡å¼ï¼ˆZGC-Generational-Mode-by-Defaultï¼‰" class="headerlink" title="JEP 474: ZGCï¼šé»˜è®¤åˆ†ä»£æ”¶é›†æ¨¡å¼ï¼ˆZGC: Generational Mode by Defaultï¼‰"></a>JEP 474: ZGCï¼šé»˜è®¤åˆ†ä»£æ”¶é›†æ¨¡å¼ï¼ˆZGC: Generational Mode by Defaultï¼‰</h2><p>åˆ†ä»£ZGCä»Java21æ­£å¼å‘å¸ƒï¼Œéœ€è¦é€šè¿‡å‘½ä»¤<code>-XX:+UseZGC -XX:+ZGenerational</code>æ˜¾å¼ä½¿ç”¨åˆ†ä»£ZGCã€‚åœ¨Java23ä¸­ï¼Œåˆ†ä»£ZGCå·²ä½œä¸ºZGCé»˜è®¤æ–¹å¼ï¼Œä¸éœ€è¦æ˜¾å¼æŒ‡å®šäº†ã€‚åœ¨åç»­ç‰ˆæœ¬ä¸­ï¼Œéåˆ†ä»£ZGCå°†è¢«åˆ é™¤ã€‚ZGCå‘å±•å†ç¨‹å¯ä»¥æŸ¥çœ‹<a href="https://wiki.openjdk.org/display/zgc/Main" target="_blank" rel="noopener">https://wiki.openjdk.org/display/zgc/Main</a>ã€‚</p><p>åŸºäºã€Œå¤§éƒ¨åˆ†å¯¹è±¡æœç”Ÿå¤•æ­»ã€çš„åˆ†ä»£å‡è¯´ï¼ŒZGCæä¾›äº†åˆ†ä»£ç‰ˆæœ¬ï¼Œå°†å†…å­˜åˆ’åˆ†ä¸ºå¹´è½»ä»£å’Œè€å¹´ä»£ï¼Œå¹¶ä¸ºè¿™ä¸¤ç§ä»£åˆ†åˆ«ç»´æŠ¤ä¸åŒçš„åƒåœ¾æ”¶é›†ç­–ç•¥ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹<a href="https://kstefanj.github.io/2023/11/07/hazelcast-on-generational-zgc.html" target="_blank" rel="noopener">Hazelcast Jet on Generational ZGC</a>ä¸­ç»™å‡ºçš„æµ‹è¯„æ•ˆæœï¼š</p><p><img src="https://static.howardliu.cn/p9999-event-latency.png" alt="JEP 439: åˆ†ä»£ZGCï¼ˆGenerational ZGCï¼‰"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œéåˆ†ä»£ ZGC åœ¨ä½è´Ÿè½½ä¸‹è¡¨ç°éå¸¸å¥½ï¼Œä½†éšç€åˆ†é…å‹åŠ›çš„å¢åŠ ï¼Œå»¶è¿Ÿä¹Ÿä¼šå¢åŠ ã€‚ä½¿ç”¨åˆ†ä»£ ZGC åï¼Œå³ä½¿åœ¨é«˜è´Ÿè½½ä¸‹ï¼Œå»¶è¿Ÿä¹Ÿéå¸¸ä½ï¼Œè€Œä¸”å»¶è¿Ÿæ•ˆæœä¼˜äºG1ã€‚</p><p>å¦‚æœæƒ³ç”¨å›éåˆ†ä»£ZGCï¼Œéœ€è¦é€šè¿‡å‘½ä»¤<code>-XX:+UseZGC -XX:-ZGenerational</code>åˆ‡æ¢ä¸ºéåˆ†ä»£ZGCï¼Œå¯åŠ¨è¿‡ç¨‹ä¼šæ”¶åˆ°JVMçš„å‘Šè­¦ï¼šâ€œthe ZGenerational option is deprecated is issued.â€å’Œâ€œthe non-generational mode is deprecated for removal is issued.â€ã€‚</p><h2 id="é¢„è§ˆåŠŸèƒ½"><a href="#é¢„è§ˆåŠŸèƒ½" class="headerlink" title="é¢„è§ˆåŠŸèƒ½"></a>é¢„è§ˆåŠŸèƒ½</h2><h3 id="JEP-455-æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨åŸå§‹ç±»å‹ï¼ˆPrimitive-Types-in-Patterns-instanceof-and-switchï¼Œé¢„è§ˆï¼‰"><a href="#JEP-455-æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨åŸå§‹ç±»å‹ï¼ˆPrimitive-Types-in-Patterns-instanceof-and-switchï¼Œé¢„è§ˆï¼‰" class="headerlink" title="JEP 455: æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨åŸå§‹ç±»å‹ï¼ˆPrimitive Types in Patterns, instanceof, and switchï¼Œé¢„è§ˆï¼‰"></a>JEP 455: æ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨åŸå§‹ç±»å‹ï¼ˆPrimitive Types in Patterns, instanceof, and switchï¼Œé¢„è§ˆï¼‰</h3><p>JEP 455 çš„ç›®æ ‡æ˜¯é€šè¿‡å…è®¸åœ¨æ‰€æœ‰æ¨¡å¼ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨åŸå§‹ç±»å‹æ¥å¢å¼ºæ¨¡å¼åŒ¹é…ï¼Œå¹¶æ‰©å±• instanceof å’Œ switch ä»¥ä½¿å…¶é€‚ç”¨äºæ‰€æœ‰åŸå§‹ç±»å‹ã€‚è¿™æ—¨åœ¨å®ç°ç»Ÿä¸€çš„æ•°æ®æ¢ç´¢ï¼Œæ— è®ºæ˜¯åŸå§‹ç±»å‹è¿˜æ˜¯å¼•ç”¨ç±»å‹ã€‚</p><p>åœ¨ Java ä¸­ï¼Œæ¨¡å¼åŒ¹é…ä¸»è¦é’ˆå¯¹å¼•ç”¨ç±»å‹ï¼Œè€ŒåŸå§‹ç±»å‹åœ¨æ¨¡å¼åŒ¹é…ä¸­çš„ä½¿ç”¨å—åˆ°é™åˆ¶ã€‚è¿™å¯¼è‡´äº†ä»£ç çš„å†—ä½™å’Œä¸ä¸€è‡´æ€§ã€‚JEP 455 å…è®¸åœ¨ instanceof å’Œ switch è¯­å¥ä¸­ç›´æ¥ä½¿ç”¨åŸå§‹ç±»å‹ï¼Œè€Œæ— éœ€è¿›è¡Œé¢å¤–çš„ç±»å‹è½¬æ¢ã€‚è¿™ä½¿å¾—æ¨¡å¼åŒ¹é…æ›´åŠ çµæ´»å’Œå¼ºå¤§ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œä¸€è‡´æ€§ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p><pre><code class="java">// å…ˆçœ‹ä¸ªä¾‹å­switch (x.getStatus()) {    case 0 -&gt; &quot;okay&quot;;    case 1 -&gt; &quot;warning&quot;;    case 2 -&gt; &quot;error&quot;;    default -&gt; &quot;unknown status: &quot; + x.getStatus();}// defaultè¯­å¥æ”¹é€ ä¸€ä¸‹switch (x.getStatus()) {    case 0 -&gt; &quot;okay&quot;;    case 1 -&gt; &quot;warning&quot;;    case 2 -&gt; &quot;error&quot;;    case int i -&gt; &quot;unknown status: &quot; + i;}// è¿˜å¯ä»¥å¢åŠ æ£€æŸ¥å€¼é€»è¾‘switch (x.getYearlyFlights()) {    case 0 -&gt; ...;    case 1 -&gt; ...;    case 2 -&gt; issueDiscount();    case int i when i &gt;= 100 -&gt; issueGoldCard();    case int i -&gt; ... appropriate action when i &gt; 2 &amp;&amp; i &lt; 100 ...}// åœ¨æ•°å€¼ç²¾åº¦é—®é¢˜åœºæ™¯ä¸­if (i &gt;= -128 &amp;&amp; i &lt;= 127) {    byte b = (byte)i;    ... b ...}// å¯ä»¥é€šè¿‡instanceofå¢å¼ºç›´æ¥åˆ¤æ–­ç±»å‹if (i instanceof byte b) {    ... b ...}</code></pre><h3 id="JEP-466-ç±»æ–‡ä»¶APIï¼ˆClass-File-APIï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"><a href="#JEP-466-ç±»æ–‡ä»¶APIï¼ˆClass-File-APIï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 466: ç±»æ–‡ä»¶APIï¼ˆClass-File APIï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"></a>JEP 466: ç±»æ–‡ä»¶APIï¼ˆClass-File APIï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</h3><p>Javaä¸­ä¸€ç›´ç¼ºå°‘å®˜æ–¹çš„ç±»æ–‡ä»¶æ“ä½œAPIï¼Œæƒ³è¦æ“ä½œclassï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚javassistã€ASMã€ByteBuddyç­‰ã€‚ä»2017å¹´å¼€å§‹ï¼ŒJavaæ¯åŠå¹´æœ‰ä¸€æ¬¡å‡çº§ï¼Œç‰¹æ€§æ›´æ–°é¢‘ç‡å¢åŠ ï¼Œéœ€è¦ç¬¬ä¸‰æ–¹åº“åŒæ­¥æ›´æ–°ï¼Œæ˜¯æ¯”è¾ƒå›°éš¾çš„ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªåŸå› æ˜¯Javaä¸­ä½¿ç”¨äº†ASMå®ç°<code>jar</code>ã€<code>jlink</code>ç­‰å·¥å…·ï¼Œä»¥åŠlambdaè¡¨è¾¾å¼ç­‰ã€‚è¿™å°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼ŒJavaç‰ˆæœ¬Nä¾èµ–äº†ASMç‰ˆæœ¬Mï¼Œå¦‚æœJava Nä¸­æœ‰ç±»APIï¼ŒASM Mä¸­æ˜¯ä¸ä¼šæœ‰çš„ï¼Œåªæœ‰Java Nå‘å¸ƒåï¼ŒASMå‡çº§åˆ°M+1æ‰ä¼šæœ‰ï¼ŒJavaæƒ³è¦ä½¿ç”¨ASM M+1ï¼Œéœ€è¦å‡çº§åˆ°Java N+1ã€‚æ˜¯ä¸æ˜¯å¾ˆé¢ ï¼Œä¸€ä¸ªå®˜æ–¹åŸºç¡€è¯­è¨€ï¼Œå±…ç„¶è¦ä¾èµ–ä¸€ä¸ªä¾èµ–è¿™ä¸ªè¯­è¨€çš„ç¬¬ä¸‰æ–¹å·¥å…·ã€‚æ˜¯å¯å¿å­°ä¸å¯å¿ã€‚</p><p>äºæ˜¯æœ‰äº†ç±»æ–‡ä»¶APIï¼Œç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªå‡†ç¡®ã€å®Œæ•´ã€é«˜æ€§èƒ½ä¸”éµå¾ªJavaè™šæ‹Ÿæœºè§„èŒƒå®šä¹‰çš„ç±»æ–‡ä»¶æ ¼å¼çš„APIï¼Œæœ€ç»ˆä¹Ÿä¼šæ›¿æ¢JDKå†…éƒ¨çš„ASMå‰¯æœ¬ã€‚</p><p>å› ä¸ºå½“å‰è¿˜æ˜¯é¢„è§ˆç‰ˆï¼Œæˆ‘ä»¬å…ˆç®€å•çœ‹ä¸‹å®˜æ–¹ç¤ºä¾‹ï¼š</p><p>å¦‚æœè¦å®ç°ä¸‹é¢è¿™æ®µï¼š</p><pre><code class="java">void fooBar(boolean z, int x) {    if (z)        foo(x);    else        bar(x);}</code></pre><p>æˆ‘ä»¬åœ¨ASMçš„å†™æ³•ï¼š</p><pre><code class="java">ClassWriter classWriter = ...;MethodVisitor mv = classWriter.visitMethod(0, &quot;fooBar&quot;, &quot;(ZI)V&quot;, null, null);mv.visitCode();mv.visitVarInsn(ILOAD, 1);Label label1 = new Label();mv.visitJumpInsn(IFEQ, label1);mv.visitVarInsn(ALOAD, 0);mv.visitVarInsn(ILOAD, 2);mv.visitMethodInsn(INVOKEVIRTUAL, &quot;Foo&quot;, &quot;foo&quot;, &quot;(I)V&quot;, false);Label label2 = new Label();mv.visitJumpInsn(GOTO, label2);mv.visitLabel(label1);mv.visitVarInsn(ALOAD, 0);mv.visitVarInsn(ILOAD, 2);mv.visitMethodInsn(INVOKEVIRTUAL, &quot;Foo&quot;, &quot;bar&quot;, &quot;(I)V&quot;, false);mv.visitLabel(label2);mv.visitInsn(RETURN);mv.visitEnd();</code></pre><p>åœ¨JEP 457ä¸­çš„å†™æ³•ï¼š</p><pre><code class="java">ClassBuilder classBuilder = ...;classBuilder.withMethod(&quot;fooBar&quot;, MethodTypeDesc.of(CD_void, CD_boolean, CD_int), flags,                        methodBuilder -&gt; methodBuilder.withCode(codeBuilder -&gt; {    Label label1 = codeBuilder.newLabel();    Label label2 = codeBuilder.newLabel();    codeBuilder.iload(1)        .ifeq(label1)        .aload(0)        .iload(2)        .invokevirtual(ClassDesc.of(&quot;Foo&quot;), &quot;foo&quot;, MethodTypeDesc.of(CD_void, CD_int))        .goto_(label2)        .labelBinding(label1)        .aload(0)        .iload(2)        .invokevirtual(ClassDesc.of(&quot;Foo&quot;), &quot;bar&quot;, MethodTypeDesc.of(CD_void, CD_int))        .labelBinding(label2);        .return_();});</code></pre><p>è¿˜å¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="java">CodeBuilder classBuilder = ...;classBuilder.withMethod(&quot;fooBar&quot;, MethodTypeDesc.of(CD_void, CD_boolean, CD_int), flags,                        methodBuilder -&gt; methodBuilder.withCode(codeBuilder -&gt; {    codeBuilder.iload(codeBuilder.parameterSlot(0))               .ifThenElse(                   b1 -&gt; b1.aload(codeBuilder.receiverSlot())                           .iload(codeBuilder.parameterSlot(1))                           .invokevirtual(ClassDesc.of(&quot;Foo&quot;), &quot;foo&quot;,                                          MethodTypeDesc.of(CD_void, CD_int)),                   b2 -&gt; b2.aload(codeBuilder.receiverSlot())                           .iload(codeBuilder.parameterSlot(1))                           .invokevirtual(ClassDesc.of(&quot;Foo&quot;), &quot;bar&quot;,                                          MethodTypeDesc.of(CD_void, CD_int))               .return_();});</code></pre><p>å†™æ³•ä¸Šæ¯”ASMæ›´åŠ ä¼˜é›…ã€‚</p><h3 id="JEP-473-æµæ”¶é›†å™¨ï¼ˆStream-Gatherersï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"><a href="#JEP-473-æµæ”¶é›†å™¨ï¼ˆStream-Gatherersï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 473: æµæ”¶é›†å™¨ï¼ˆStream Gatherersï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"></a>JEP 473: æµæ”¶é›†å™¨ï¼ˆStream Gatherersï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</h3><p>æµæ”¶é›†å™¨æ—¨åœ¨å¢å¼ºJava Stream APIã€ä»¥æ”¯æŒè‡ªå®šä¹‰ä¸­é—´æ“ä½œã€‚è¿™ä¸€ç‰¹æ€§å…è®¸å¼€å‘è€…ä»¥æ›´çµæ´»å’Œé«˜æ•ˆçš„æ–¹å¼å¤„ç†æ•°æ®æµï¼Œä»è€Œæé«˜æµç®¡é“çš„è¡¨è¾¾èƒ½åŠ›å’Œè½¬æ¢æ•°æ®çš„èƒ½åŠ›ã€‚</p><p>æµæ”¶é›†å™¨é€šè¿‡å¼•å…¥æ–°çš„ä¸­é—´æ“ä½œ<code>Stream::gather(Gatherer)</code>ï¼Œå…è®¸å¼€å‘è€…å®šä¹‰è‡ªå®šä¹‰çš„è½¬æ¢å®ä½“ï¼ˆç§°ä¸ºGathererï¼‰ï¼Œä»è€Œå¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œè½¬æ¢ã€‚è¿™äº›è½¬æ¢å¯ä»¥æ˜¯ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€æˆ–å¤šå¯¹å¤šçš„è½¬æ¢æ–¹å¼ã€‚æ­¤å¤–ï¼Œæµæ”¶é›†å™¨è¿˜æ”¯æŒä¿å­˜ä»¥å‰é‡åˆ°çš„å…ƒç´ ï¼Œä»¥ä¾¿è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†ã€‚</p><p>æˆ‘ä»¬é€šè¿‡å®ä¾‹æ„Ÿå—ä¸‹è¿™ä¸€ç‰¹æ€§çš„é­…åŠ›ï¼š</p><pre><code class="java">public record WindowFixed&lt;TR&gt;(int windowSize) implements Gatherer&lt;TR, ArrayList&lt;TR&gt;, List&lt;TR&gt;&gt; {    public static void main(String[] args) {        var list = Stream.of(1, 2, 3, 4, 5, 6, 7, 8, 9)                .gather(new WindowFixed&lt;&gt;(3))                .toList();        // [[1, 2, 3], [4, 5, 6], [7, 8, 9]]        System.out.println(list);    }    public WindowFixed {        // Validate input        if (windowSize &lt; 1) {            throw new IllegalArgumentException(&quot;window size must be positive&quot;);        }    }    @Override    public Supplier&lt;ArrayList&lt;TR&gt;&gt; initializer() {        // åˆ›å»ºä¸€ä¸ª ArrayList æ¥ä¿å­˜å½“å‰æ‰“å¼€çš„çª—å£        return () -&gt; new ArrayList&lt;&gt;(windowSize);    }    @Override    public Integrator&lt;ArrayList&lt;TR&gt;, TR, List&lt;TR&gt;&gt; integrator() {        // é›†æˆå™¨åœ¨æ¯æ¬¡æ¶ˆè´¹å…ƒç´ æ—¶è¢«è°ƒç”¨        return Gatherer.Integrator.ofGreedy((window, element, downstream) -&gt; {            // å°†å…ƒç´ æ·»åŠ åˆ°å½“å‰æ‰“å¼€çš„çª—å£            window.add(element);            // ç›´åˆ°è¾¾åˆ°æ‰€éœ€çš„çª—å£å¤§å°ï¼Œ            // è¿”å› true è¡¨ç¤ºå¸Œæœ›ç»§ç»­æ¥æ”¶æ›´å¤šå…ƒç´             if (window.size() &lt; windowSize) {                return true;            }            // å½“çª—å£å·²æ»¡æ—¶ï¼Œé€šè¿‡åˆ›å»ºå‰¯æœ¬å…³é—­çª—å£            var result = new ArrayList&lt;TR&gt;(window);            // æ¸…ç©ºçª—å£ä»¥ä¾¿å¼€å§‹æ–°çš„çª—å£            window.clear();            // å°†å…³é—­çš„çª—å£å‘é€åˆ°ä¸‹æ¸¸            return downstream.push(result);        });    }    // ç”±äºæ­¤æ“ä½œæœ¬è´¨ä¸Šæ˜¯é¡ºåºçš„ï¼Œå› æ­¤æ— æ³•å¹¶è¡ŒåŒ–ï¼Œå› æ­¤çœç•¥äº†åˆå¹¶å™¨    @Override    public BiConsumer&lt;ArrayList&lt;TR&gt;, Downstream&lt;? super List&lt;TR&gt;&gt;&gt; finisher() {        // ç»ˆç»“å™¨åœ¨æ²¡æœ‰æ›´å¤šå…ƒç´ ä¼ é€’æ—¶è¿è¡Œ        return (window, downstream) -&gt; {            // å¦‚æœä¸‹æ¸¸ä»ç„¶æ¥å—æ›´å¤šå…ƒç´ ä¸”å½“å‰æ‰“å¼€çš„çª—å£éç©ºï¼Œåˆ™å°†å…¶å‰¯æœ¬å‘é€åˆ°ä¸‹æ¸¸            if (!downstream.isRejecting() &amp;&amp; !window.isEmpty()) {                downstream.push(new ArrayList&lt;TR&gt;(window));                window.clear();            }        };    }}</code></pre><p>è¯¥ç‰¹æ€§è¿˜æ˜¯é¢„è§ˆç‰ˆï¼Œç­‰æ­£å¼å‘å¸ƒåå†ç»†è¯´ã€‚</p><h3 id="JEP-476-æ¨¡å—å¯¼å…¥å£°æ˜ï¼ˆModule-Import-Declarationsï¼Œé¢„è§ˆï¼‰"><a href="#JEP-476-æ¨¡å—å¯¼å…¥å£°æ˜ï¼ˆModule-Import-Declarationsï¼Œé¢„è§ˆï¼‰" class="headerlink" title="JEP 476: æ¨¡å—å¯¼å…¥å£°æ˜ï¼ˆModule Import Declarationsï¼Œé¢„è§ˆï¼‰"></a>JEP 476: æ¨¡å—å¯¼å…¥å£°æ˜ï¼ˆModule Import Declarationsï¼Œé¢„è§ˆï¼‰</h3><p>æ¨¡å—å¯¼å…¥å£°æ˜ç›®æ ‡æ˜¯å¢å¼º Java ç¼–ç¨‹è¯­è¨€ï¼Œä½¿å…¶èƒ½å¤Ÿç®€æ´åœ°å¯¼å…¥ä¸€ä¸ªæ¨¡å—å¯¼å‡ºçš„æ‰€æœ‰åŒ…ã€‚è¿™ç®€åŒ–äº†æ¨¡å—åº“çš„é‡ç”¨ï¼Œä½†å¹¶ä¸è¦æ±‚å¯¼å…¥ä»£ç æœ¬èº«å¿…é¡»åœ¨æ¨¡å—ä¸­ã€‚</p><p>åœ¨ Java ä¸­ï¼Œå¼€å‘è€…ç»å¸¸éœ€è¦ä»æ¨¡å—ä¸­å¯¼å…¥å¤šä¸ªåŒ…ï¼Œè¿™ä¼šå¯¼è‡´ä»£ç ä¸­å‡ºç°å¤§é‡çš„ import è¯­å¥ï¼Œå¢åŠ äº†ä»£ç çš„å†—ä½™å’Œå¤æ‚æ€§ã€‚JEP 476 å¼•å…¥äº†ä¸€ç§æ–°çš„å¯¼å…¥å£°æ˜æ–¹å¼ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´ç®€æ´åœ°å¯¼å…¥ä¸€ä¸ªæ¨¡å—çš„æ‰€æœ‰åŒ…ï¼Œä»è€Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¼€å‘æ•ˆç‡ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><pre><code class="java">import java.util.Map;                   // or import java.util.*;import java.util.function.Function;     // or import java.util.function.*;import java.util.stream.Collectors;     // or import java.util.stream.*;import java.util.stream.Stream;         // (can be removed)String[] fruits = new String[] { &quot;apple&quot;, &quot;berry&quot;, &quot;citrus&quot; };Map&lt;String, String&gt; m =    Stream.of(fruits)          .collect(Collectors.toMap(s -&gt; s.toUpperCase().substring(0,1),                                    Function.identity()));</code></pre><p>ä½¿ç”¨importå¯¼å…¥äº†ä¾èµ–çš„ç±»ï¼Œåœ¨JEP 476åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>import module java.base;</code>ä¸€è¡Œä»£ç è§£å†³ã€‚</p><p>è¿™ç§æ–¹å¼è™½ç„¶ç®€æ´ï¼Œä½†æ˜¯å¯èƒ½å­˜åœ¨é—®é¢˜ï¼Œæ¯”å¦‚<code>Date</code>ç±»ï¼Œåœ¨<code>java.util</code>å’Œ<code>java.sql</code>ä¸­éƒ½æœ‰<code>Date</code>ç±»ï¼Œå¦‚æœæœ‰åœºæ™¯éœ€è¦è¿™ä¸¤ä¸ªæ¨¡å—ï¼Œå°±éœ€è¦æ˜¾å¼æŒ‡æ˜<code>Date</code>ç±»çš„æ¥æºï¼š</p><pre><code class="java">import module java.base;      // exports java.util, which has a public Date classimport module java.sql;       // exports java.sql, which has a public Date classimport java.sql.Date;         // resolve the ambiguity of the simple name Date!...Date d = ...                  // Ok!  Date is resolved to java.sql.Date...</code></pre><h3 id="JEP-477-éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆImplicitly-Declared-Classes-and-Instance-Main-Methodsï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰"><a href="#JEP-477-éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆImplicitly-Declared-Classes-and-Instance-Main-Methodsï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 477: éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆImplicitly Declared Classes and Instance Main Methodsï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰"></a>JEP 477: éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•ï¼ˆImplicitly Declared Classes and Instance Main Methodsï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰</h3><p>éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹æ–¹æ³•çš„ç›®æ ‡æ˜¯ç®€åŒ– Java è¯­è¨€ï¼Œä½¿å¾—å­¦ç”Ÿå’Œåˆå­¦è€…å¯ä»¥æ›´å®¹æ˜“åœ°ç¼–å†™ä»–ä»¬çš„ç¬¬ä¸€ä¸ªç¨‹åºï¼Œè€Œæ— éœ€ç†è§£ä¸ºå¤§å‹ç¨‹åºè®¾è®¡çš„å¤æ‚è¯­è¨€ç‰¹æ€§ã€‚</p><p>æ— è®ºå­¦ä¹ å“ªé—¨è¯­è¨€ï¼Œç¬¬ä¸€è¯¾ä¸€å®šæ˜¯æ‰“å°<code>Hello, World!</code>ï¼ŒJavaä¸­çš„å†™æ³•æ˜¯ï¼š</p><pre><code class="java">public class HelloWorld {    public static void main(String[] args) {        System.out.println (&quot;Hello, World!&quot;);    }}</code></pre><p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œä¸€å®šä¼šæœ‰å¾ˆå¤šç–‘é—®ï¼Œ<code>public</code>å¹²å•¥çš„ï¼Œ<code>main</code>æ–¹æ³•çš„çº¦å®šå‚æ•°<code>args</code>æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿç„¶åè€å¸ˆå°±è¯´ï¼Œè¿™å°±æ˜¯æ¨¡æ¿ï¼Œç…§ç€æŠ„å°±è¡Œï¼Œä¸è¿™æ ·å†™ä¸è¿è¡Œã€‚</p><p>ç°åœ¨å¯ä»¥ç®€åŒ–ä¸ºï¼š</p><pre><code class="java">class HelloWorld {    void main() {        System.out.println (&quot;Hello, World!&quot;);    }}</code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="java">String greeting() { return &quot;Hello, World!&quot;; }void main() {    System.out.println(greeting());}</code></pre><p><code>main</code>æ–¹æ³•ç›´æ¥ç®€åŒ–ä¸ºåå­—å’Œæ‹¬å·ï¼Œç”šè‡³è¿ç±»ä¹Ÿä¸éœ€è¦æ˜¾æ€§å®šä¹‰äº†ã€‚è™½ç„¶çœ‹èµ·æ¥æ²¡å•¥ç”¨ï¼Œä½†æ˜¯åœ¨JShellä¸­ä½¿ç”¨ï¼Œå°±æ¯”è¾ƒå‹å¥½äº†ã€‚</p><p>æœ¬æ¬¡é¢„è§ˆæ–°å¢äº†ä¸‰ä¸ªIOæ“ä½œæ–¹æ³•ï¼š</p><pre><code class="java">public static void println(Object obj);public static void print(Object obj);public static String readln(String prompt);</code></pre><p>æƒ³è¦å¿«é€Ÿå®ç°æ§åˆ¶å°æ“ä½œï¼Œå¯ä»¥è¿™æ ·å†™äº†ï¼š</p><pre><code class="java">void main() {    String name = readln(&quot;è¯·è¾“å…¥å§“å: &quot;);    print(&quot;å¾ˆé«˜å…´è§åˆ°ä½ , &quot;);    println(name);}</code></pre><p>ä½œä¸ºä¸€ä¸ªè€ç¨‹åºçŒ¿ï¼Œä¹Ÿä¸å¾—ä¸å“‡å¡ä¸€ä¸‹ã€‚</p><h3 id="JEP-480-ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured-Concurrencyï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰"><a href="#JEP-480-ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured-Concurrencyï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 480: ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured Concurrencyï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰"></a>JEP 480: ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured Concurrencyï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰</h3><p>ç»“æ„åŒ–å¹¶å‘APIï¼ˆStructured Concurrency APIï¼‰æ—¨åœ¨ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªAPIæ¥å¤„ç†åœ¨ä¸åŒçº¿ç¨‹ä¸­è¿è¡Œçš„å¤šä¸ªä»»åŠ¡ä½œä¸ºä¸€ä¸ªå•ä¸€å·¥ä½œå•å…ƒï¼Œä»è€Œç®€åŒ–é”™è¯¯å¤„ç†å’Œå–æ¶ˆæ“ä½œï¼Œæé«˜å¯é æ€§ï¼Œå¹¶å¢å¼ºå¯è§‚æµ‹æ€§ã€‚æœ¬æ¬¡å‘å¸ƒæ˜¯ç¬¬ä¸€æ¬¡é¢„è§ˆã€‚</p><p>ç»“æ„åŒ–å¹¶å‘APIæä¾›äº†æ˜ç¡®çš„è¯­æ³•ç»“æ„æ¥å®šä¹‰å­ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶å¯ç”¨ä¸€ä¸ªè¿è¡Œæ—¶è¡¨ç¤ºçº¿ç¨‹é—´çš„å±‚æ¬¡ç»“æ„ã€‚è¿™æœ‰åŠ©äºå®ç°é”™è¯¯ä¼ æ’­å’Œå–æ¶ˆä»¥åŠå¹¶å‘ç¨‹åºçš„æœ‰æ„ä¹‰è§‚å¯Ÿã€‚</p><p>Javaä½¿ç”¨å¼‚å¸¸å¤„ç†æœºåˆ¶æ¥ç®¡ç†è¿è¡Œæ—¶é”™è¯¯å’Œå…¶ä»–å¼‚å¸¸ã€‚å½“å¼‚å¸¸åœ¨ä»£ç ä¸­äº§ç”Ÿæ—¶ï¼Œå¦‚ä½•è¢«ä¼ é€’å’Œå¤„ç†çš„è¿‡ç¨‹ç§°ä¸ºå¼‚å¸¸ä¼ æ’­ã€‚</p><p>åœ¨ç»“æ„åŒ–å¹¶å‘ç¯å¢ƒä¸­ï¼Œå¼‚å¸¸å¯ä»¥é€šè¿‡æ˜¾å¼åœ°ä»å½“å‰ç¯å¢ƒä¸­æŠ›å‡ºå¹¶ä¼ æ’­åˆ°æ›´å¤§çš„ç¯å¢ƒä¸­å»å¤„ç†ã€‚</p><p>åœ¨Javaå¹¶å‘ç¼–ç¨‹ä¸­ï¼Œéå—æ£€å¼‚å¸¸çš„å¤„ç†æ˜¯ç¨‹åºå¥å£®æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ç‰¹åˆ«æ˜¯å¯¹äºéå—æ£€å¼‚å¸¸çš„å¤„ç†ï¼Œè¿™å…³ç³»åˆ°ç¨‹åºåœ¨é‡åˆ°é”™è¯¯æ—¶æ˜¯å¦èƒ½å¤Ÿä¼˜é›…åœ°ç»§ç»­è¿è¡Œæˆ–è€…è‡³å°‘æä¾›æœ‰æ„ä¹‰çš„åé¦ˆã€‚</p><pre><code class="java">try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {    var task1 = scope.fork(() -&gt; {        Thread.sleep(1000);        return &quot;Result from task 1&quot;;    });    var task2 = scope.fork(() -&gt; {        Thread.sleep(2000);        return &quot;Result from task 2&quot;;    });    scope.join();    scope.throwIfFailed(RuntimeException::new);    System.out.println(task1.get());    System.out.println(task2.get());} catch (Exception e) {    e.printStackTrace();}</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œhandle()æ–¹æ³•ä½¿ç”¨StructuredTaskScopeæ¥å¹¶è¡Œæ‰§è¡Œä¸¤ä¸ªå­ä»»åŠ¡ï¼štask1å’Œtask2ã€‚é€šè¿‡ä½¿ç”¨try-with-resourcesè¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œå¹¶ç¡®ä¿æ‰€æœ‰å­ä»»åŠ¡éƒ½åœ¨tryå—ç»“æŸæ—¶æ­£ç¡®å®Œæˆæˆ–è¢«å–æ¶ˆã€‚è¿™ç§æ–¹å¼ä½¿å¾—çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œä»»åŠ¡çš„é€»è¾‘ç»“æ„ç´§å¯†ç›¸å…³ï¼Œæé«˜äº†ä»£ç çš„æ¸…æ™°åº¦å’Œé”™è¯¯å¤„ç†çš„æ•ˆç‡ã€‚ä½¿ç”¨ StructuredTaskScope å¯ä»¥ç¡®ä¿ä¸€äº›æœ‰ä»·å€¼çš„å±æ€§ï¼š</p><ul><li>é”™è¯¯å¤„ç†ä¸çŸ­è·¯ï¼šå¦‚æœtask1æˆ–task2å­ä»»åŠ¡ä¸­çš„ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦ä¸€ä¸ªå¦‚æœå°šæœªå®Œæˆåˆ™ä¼šè¢«å–æ¶ˆã€‚ï¼ˆè¿™ç”± ShutdownOnFailure å®ç°çš„å…³é—­ç­–ç•¥æ¥ç®¡ç†ï¼›è¿˜æœ‰å…¶ä»–ç­–ç•¥å¯èƒ½ï¼‰ã€‚</li><li>å–æ¶ˆä¼ æ’­ï¼šå¦‚æœåœ¨è¿è¡Œä¸Šé¢æ–¹æ³•çš„çº¿ç¨‹åœ¨è°ƒç”¨ join() ä¹‹å‰æˆ–ä¹‹ä¸­è¢«ä¸­æ–­ï¼Œåˆ™çº¿ç¨‹åœ¨é€€å‡ºä½œç”¨åŸŸæ—¶ä¼šè‡ªåŠ¨å–æ¶ˆä¸¤ä¸ªå­ä»»åŠ¡ã€‚</li><li>æ¸…æ™°æ€§ï¼šè®¾ç½®å­ä»»åŠ¡ï¼Œç­‰å¾…å®ƒä»¬å®Œæˆæˆ–è¢«å–æ¶ˆï¼Œç„¶åå†³å®šæ˜¯æˆåŠŸï¼ˆå¹¶å¤„ç†å·²ç»å®Œæˆçš„å­ä»»åŠ¡çš„ç»“æœï¼‰è¿˜æ˜¯å¤±è´¥ï¼ˆå­ä»»åŠ¡å·²ç»å®Œæˆï¼Œå› æ­¤æ²¡æœ‰æ›´å¤šéœ€è¦æ¸…ç†çš„ï¼‰ã€‚</li><li>å¯è§‚å¯Ÿæ€§ï¼šçº¿ç¨‹è½¬å‚¨æ¸…æ¥šåœ°æ˜¾ç¤ºäº†ä»»åŠ¡å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­è¿è¡Œtask1æˆ–task2çš„çº¿ç¨‹è¢«æ˜¾ç¤ºä¸ºä½œç”¨åŸŸçš„å­ä»»åŠ¡ã€‚</li></ul><p>ä¸Šé¢çš„ç¤ºä¾‹èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³æˆ‘ä»¬çš„ä¸€ä¸ªç—›ç‚¹ï¼Œæœ‰ä¸¤ä¸ªå¯å¹¶è¡Œçš„ä»»åŠ¡Aå’ŒBï¼ŒA+Bæ‰æ˜¯å®Œæ•´ç»“æœï¼Œä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿä¸éœ€è¦æˆåŠŸï¼Œç»“æ„åŒ–å¹¶å‘APIå°±å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°è¿™ä¸ªé€»è¾‘ã€‚</p><h3 id="JEP-481-ä½œç”¨åŸŸå€¼ï¼ˆScoped-Valuesï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰"><a href="#JEP-481-ä½œç”¨åŸŸå€¼ï¼ˆScoped-Valuesï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 481: ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰"></a>JEP 481: ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰</h3><p>ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼‰åœ¨Java20å­µåŒ–ï¼Œåœ¨Java21ç¬¬ä¸€æ¬¡é¢„è§ˆï¼Œåœ¨Java22ç¬¬äºŒæ¬¡é¢„è§ˆï¼Œæ—¨åœ¨æä¾›ä¸€ç§å®‰å…¨ä¸”é«˜æ•ˆçš„æ–¹æ³•æ¥å…±äº«æ•°æ®ï¼Œæ— éœ€ä½¿ç”¨æ–¹æ³•å‚æ•°ã€‚è¿™ä¸€ç‰¹æ€§å…è®¸åœ¨ä¸ä½¿ç”¨æ–¹æ³•å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå°†æ•°æ®å®‰å…¨åœ°å…±äº«ç»™æ–¹æ³•ï¼Œä¼˜å…ˆäºçº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨å¤§é‡è™šæ‹Ÿçº¿ç¨‹æ—¶ã€‚</p><p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œä½œç”¨åŸŸå€¼å¯ä»¥åœ¨çº¿ç¨‹å†…å’Œçº¿ç¨‹é—´å…±äº«ä¸å¯å˜æ•°æ®ï¼Œä¾‹å¦‚ä»çˆ¶çº¿ç¨‹å‘å­çº¿ç¨‹ä¼ é€’æ•°æ®ï¼Œä»è€Œè§£å†³äº†åœ¨å¤šçº¿ç¨‹åº”ç”¨ä¸­ä¼ é€’æ•°æ®çš„é—®é¢˜ã€‚æ­¤å¤–ï¼Œä½œç”¨åŸŸå€¼æé«˜äº†æ•°æ®çš„å®‰å…¨æ€§ã€ä¸å˜æ€§å’Œå°è£…æ€§ï¼Œå¹¶ä¸”åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨äº‹åŠ¡ã€å®‰å…¨ä¸»ä½“å’Œå…¶ä»–å½¢å¼çš„å…±äº«ä¸Šä¸‹æ–‡çš„åº”ç”¨ç¨‹åºä¸­è¡¨ç°å°¤ä¸ºçªå‡ºã€‚</p><p>ä½œç”¨åŸŸå€¼çš„ä¸»è¦ç‰¹ç‚¹ï¼š</p><ul><li>ä¸å¯å˜æ€§ï¼šä½œç”¨åŸŸå€¼æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦è®¾ç½®ï¼Œå…¶å€¼å°±ä¸èƒ½æ›´æ”¹ã€‚è¿™ç§ä¸å¯å˜æ€§å‡å°‘äº†å¹¶å‘ç¼–ç¨‹ä¸­æ„å¤–å‰¯ä½œç”¨çš„é£é™©ã€‚</li><li>ä½œç”¨åŸŸç”Ÿå‘½å‘¨æœŸï¼šä½œç”¨åŸŸå€¼çš„ç”Ÿå‘½å‘¨æœŸä»…é™äº run æ–¹æ³•å®šä¹‰çš„ä½œç”¨åŸŸã€‚ä¸€æ—¦æ‰§è¡Œç¦»å¼€è¯¥ä½œç”¨åŸŸï¼Œä½œç”¨åŸŸå€¼å°†ä¸å†å¯è®¿é—®ã€‚</li><li>ç»§æ‰¿æ€§ï¼šå­çº¿ç¨‹ä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶çº¿ç¨‹çš„ä½œç”¨åŸŸå€¼ï¼Œä»è€Œå…è®¸åœ¨çº¿ç¨‹è¾¹ç•Œé—´æ— ç¼å…±äº«æ•°æ®ã€‚</li></ul><p>åœ¨è¿™ä¸ªåŠŸèƒ½ä¹‹å‰ï¼Œåœ¨å¤šçº¿ç¨‹é—´ä¼ é€’æ•°æ®ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p><ol><li>æ–¹æ³•å‚æ•°ï¼šæ˜¾ç¤ºå‚æ•°ä¼ é€’ï¼›ç¼ºç‚¹æ˜¯æ–°å¢å‚æ•°æ—¶ä¿®æ”¹è”åŠ¨ä¿®æ”¹ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå¦‚æœæ˜¯æ¡†æ¶æˆ–SDKå±‚é¢çš„ï¼Œæ— æ³•åšåˆ°å‘ä¸‹å…¼å®¹ã€‚</li><li><code>ThreadLocal</code>ï¼šåœ¨<code>ThreadLocal</code>ä¿å­˜å½“å‰çº¿ç¨‹å˜é‡ã€‚</li></ol><p>ä½¿ç”¨è¿‡<code>ThreadLocal</code>çš„éƒ½æ¸…æ¥šï¼Œ<code>ThreadLocal</code>ä¼šæœ‰ä¸‰å¤§é—®é¢˜ã€‚</p><ol><li>æ— çº¦æŸçš„å¯å˜æ€§ï¼šæ¯ä¸ªçº¿ç¨‹å±€éƒ¨å˜é‡éƒ½æ˜¯å¯å˜çš„ã€‚ä»»ä½•å¯ä»¥è°ƒç”¨çº¿ç¨‹å±€éƒ¨å˜é‡çš„<code>get</code>æ–¹æ³•çš„ä»£ç éƒ½å¯ä»¥éšæ—¶è°ƒç”¨è¯¥å˜é‡çš„<code>set</code>æ–¹æ³•ã€‚å³ä½¿çº¿ç¨‹å±€éƒ¨å˜é‡ä¸­çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œæ¯ä¸ªå­—æ®µéƒ½è¢«å£°æ˜ä¸ºfinalï¼Œæƒ…å†µä»ç„¶å¦‚æ­¤ã€‚<code>ThreadLocal</code> APIå…è®¸è¿™æ ·åšï¼Œä»¥ä¾¿æ”¯æŒä¸€ä¸ªå®Œå…¨é€šç”¨çš„é€šä¿¡æ¨¡å‹ï¼Œåœ¨è¯¥æ¨¡å‹ä¸­ï¼Œæ•°æ®å¯ä»¥åœ¨æ–¹æ³•ä¹‹é—´ä»¥ä»»ä½•æ–¹å‘æµåŠ¨ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ•°æ®æµæ··ä¹±ï¼Œå¯¼è‡´ç¨‹åºéš¾ä»¥åˆ†è¾¨å“ªä¸ªæ–¹æ³•æ›´æ–°å…±äº«çŠ¶æ€ä»¥åŠä»¥ä½•ç§é¡ºåºè¿›è¡Œã€‚</li><li>æ— ç•Œç”Ÿå­˜æœŸï¼šä¸€æ—¦é€šè¿‡<code>set</code>æ–¹æ³•è®¾ç½®äº†ä¸€ä¸ªçº¿ç¨‹å±€éƒ¨å˜é‡çš„å‰¯æœ¬ï¼Œè¯¥å€¼å°±ä¼šåœ¨è¯¥çº¿ç¨‹çš„ç”Ÿå­˜æœŸå†…ä¿ç•™ï¼Œæˆ–è€…ç›´åˆ°è¯¥çº¿ç¨‹ä¸­çš„ä»£ç è°ƒç”¨<code>remove</code>æ–¹æ³•ã€‚æˆ‘ä»¬æœ‰æ—¶å€™ä¼šå¿˜è®°è°ƒç”¨<code>remove</code>ï¼Œå¦‚æœä½¿ç”¨çº¿ç¨‹æ± ï¼Œåœ¨ä¸€ä¸ªä»»åŠ¡ä¸­è®¾ç½®çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼å¦‚æœä¸æ¸…é™¤ï¼Œå¯èƒ½ä¼šæ„å¤–æ³„æ¼åˆ°æ— å…³çš„ä»»åŠ¡ä¸­ï¼Œå¯¼è‡´å±é™©çš„å®‰å…¨æ¼æ´ï¼ˆæ¯”å¦‚äººå‘˜SSOï¼‰ã€‚å¯¹äºä¾èµ–äºçº¿ç¨‹å±€éƒ¨å˜é‡çš„æ— çº¦æŸå¯å˜æ€§çš„ç¨‹åºæ¥è¯´ï¼Œå¯èƒ½æ²¡æœ‰æ˜ç¡®çš„ç‚¹å¯ä»¥ä¿è¯çº¿ç¨‹è°ƒç”¨<code>remove</code>æ˜¯å®‰å…¨çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹çš„æ•°æ®åœ¨é€€å‡ºä¹‹å‰éƒ½ä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚</li><li>æ˜‚è´µçš„ç»§æ‰¿ï¼šå½“ä½¿ç”¨å¤§é‡çº¿ç¨‹æ—¶ï¼Œçº¿ç¨‹å±€éƒ¨å˜é‡çš„å¼€é”€å¯èƒ½ä¼šæ›´ç³Ÿç³•ï¼Œå› ä¸ºçˆ¶çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡å¯ä»¥è¢«å­çº¿ç¨‹ç»§æ‰¿ã€‚ï¼ˆäº‹å®ä¸Šï¼Œçº¿ç¨‹å±€éƒ¨å˜é‡å¹¶ä¸æ˜¯æŸä¸ªç‰¹å®šçº¿ç¨‹çš„æœ¬åœ°å˜é‡ã€‚ï¼‰å½“å¼€å‘äººå‘˜é€‰æ‹©åˆ›å»ºä¸€ä¸ªç»§æ‰¿äº†çº¿ç¨‹å±€éƒ¨å˜é‡çš„å­çº¿ç¨‹æ—¶ï¼Œè¯¥å­çº¿ç¨‹å¿…é¡»ä¸ºä¹‹å‰åœ¨çˆ¶çº¿ç¨‹ä¸­å†™å…¥çš„æ¯ä¸ªçº¿ç¨‹å±€éƒ¨å˜é‡åˆ†é…å­˜å‚¨ç©ºé—´ã€‚è¿™å¯èƒ½ä¼šæ˜¾è‘—å¢åŠ å†…å­˜å ç”¨ã€‚å­çº¿ç¨‹ä¸èƒ½å…±äº«çˆ¶çº¿ç¨‹ä½¿ç”¨çš„å­˜å‚¨ï¼Œå› ä¸ºThreadLocal APIè¦æ±‚æ›´æ”¹çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡å‰¯æœ¬åœ¨å…¶ä»–çº¿ç¨‹ä¸­ä¸å¯è§ã€‚è¿™ä¹Ÿä¼šæœ‰å¦ä¸€ä¸ªéšè—çš„é—®é¢˜ï¼Œå­çº¿ç¨‹æ²¡æœ‰åŠæ³•å‘çˆ¶çº¿ç¨‹<code>set</code>æ•°æ®ã€‚</li></ol><p>ä½œç”¨åŸŸå€¼å¯ä»¥æœ‰æ•ˆè§£å†³ä¸Šé¢æåˆ°çš„é—®é¢˜ï¼Œè€Œä¸”å†™èµ·æ¥æ›´åŠ ä¼˜é›…ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹ä½œç”¨åŸŸå€¼çš„ä½¿ç”¨ï¼š</p><pre><code class="java">// å£°æ˜ä¸€ä¸ªä½œç”¨åŸŸå€¼ç”¨äºå­˜å‚¨ç”¨æˆ·åpublic final static ScopedValue&lt;String&gt; USERNAME = ScopedValue.newInstance();private static final Runnable printUsername = () -&gt;        System.out.println(Thread.currentThread().threadId() + &quot; ç”¨æˆ·åæ˜¯ &quot; + USERNAME.get());public static void main(String[] args) throws Exception {    // å°†ç”¨æˆ·å &quot;Bob&quot; ç»‘å®šåˆ°ä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Bob&quot;).run(() -&gt; {        printUsername.run();        new Thread(printUsername).start();    });    // å°†ç”¨æˆ·å &quot;Chris&quot; ç»‘å®šåˆ°å¦ä¸€ä¸ªä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Chris&quot;).run(() -&gt; {        printUsername.run();        new Thread(() -&gt; {            new Thread(printUsername).start();            printUsername.run();        }).start();    });    // æ£€æŸ¥åœ¨ä»»ä½•ä½œç”¨åŸŸå¤– USERNAME æ˜¯å¦è¢«ç»‘å®š    System.out.println(&quot;ç”¨æˆ·åæ˜¯å¦è¢«ç»‘å®š: &quot; + USERNAME.isBound());}</code></pre><p>å†™èµ·æ¥å¹²å‡€åˆ©ç´¢ï¼Œè€Œä¸”åŠŸèƒ½æ›´å¼ºã€‚</p><h3 id="JEP-482-çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆFlexible-Constructor-Bodiesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"><a href="#JEP-482-çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆFlexible-Constructor-Bodiesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 482: çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆFlexible Constructor Bodiesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"></a>JEP 482: çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ï¼ˆFlexible Constructor Bodiesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œæ¯”å¦‚é€šè¿‡<code>super(â€¦â€¦)</code>è°ƒç”¨çˆ¶ç±»ï¼Œåœ¨<code>super</code>ä¹‹å‰æ˜¯ä¸å…è®¸æœ‰å…¶ä»–è¯­å¥çš„ã€‚</p><p>å¤§éƒ¨åˆ†çš„æ—¶å€™è¿™ç§é™åˆ¶éƒ½æ²¡é—®é¢˜ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸å¤ªçµæ´»ã€‚å¦‚æœæƒ³åœ¨<code>super</code>ä¹‹å‰åŠ ä¸Šä¸€äº›å­ç±»ç‰¹æœ‰é€»è¾‘ï¼Œæ¯”å¦‚æƒ³ç»Ÿè®¡ä¸‹å­ç±»æ„é€ è€—æ—¶ï¼Œå°±å¾—é‡å†™ä¸€éçˆ¶ç±»çš„å®ç°ã€‚</p><p>é™¤äº†æœ‰æŸçµæ´»æ€§ï¼Œè¿™ç§é‡å†™çš„åšæ³•ä¹Ÿä¼šé€ æˆçˆ¶å­ç±»ä¹‹é—´çš„å…³ç³»å˜å¾—å¥‡æ€ªã€‚å‡è®¾çˆ¶ç±»æ˜¯SDKä¸­çš„ä¸€ä¸ªç±»ï¼ŒSDKå‡çº§æ—¶åœ¨çˆ¶ç±»æ„é€ å‡½æ•°å¢åŠ äº†ä¸€äº›é€»è¾‘ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­æ˜¯æ— æ³•ç»§æ‰¿è¿™äº›é€»è¾‘çš„ï¼ŒæŸæ¬¡éœ€è¦å‡çº§SDKï¼ˆæ¯”å¦‚ä½ç‰ˆæœ¬æœ‰å®‰å…¨é£é™©ï¼‰ï¼ŒéªŒè¯ä¸å®Œæ•´çš„æƒ…å†µä¸‹ï¼Œå°±å¾ˆå®¹æ˜“å‡ºç°bugã€‚</p><p>JEP 482 çš„ç›®æ ‡æ˜¯æé«˜æ„é€ å‡½æ•°çš„å¯è¯»æ€§å’Œå¯é¢„æµ‹æ€§ï¼ŒåŒæ—¶ä¿æŒæ„é€ å‡½æ•°è°ƒç”¨çš„è‡ªä¸Šè€Œä¸‹çš„è§„åˆ™ã€‚é€šè¿‡å…è®¸åœ¨æ˜¾å¼è°ƒç”¨ <code>super()</code> æˆ– <code>this()</code> å‰åˆå§‹åŒ–å­—æ®µï¼Œä»è€Œå®ç°æ›´çµæ´»çš„æ„é€ å‡½æ•°ä¸»ä½“ã€‚è¿™ä¸€å˜åŒ–ä½¿å¾—ä»£ç æ›´å…·è¡¨ç°åŠ›ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p><pre><code class="java">public class PositiveBigInteger extends BigInteger {    public PositiveBigInteger(long value) {        if (value &lt;= 0) {            throw new IllegalArgumentException(&quot;non-positive value&quot;);        }        super(value);    }}</code></pre><h2 id="å­µåŒ–åŠŸèƒ½"><a href="#å­µåŒ–åŠŸèƒ½" class="headerlink" title="å­µåŒ–åŠŸèƒ½"></a>å­µåŒ–åŠŸèƒ½</h2><h3 id="JEP-469-å‘é‡APIï¼ˆVector-APIï¼Œç¬¬å…«æ¬¡å­µåŒ–ï¼‰"><a href="#JEP-469-å‘é‡APIï¼ˆVector-APIï¼Œç¬¬å…«æ¬¡å­µåŒ–ï¼‰" class="headerlink" title="JEP 469: å‘é‡APIï¼ˆVector APIï¼Œç¬¬å…«æ¬¡å­µåŒ–ï¼‰"></a>JEP 469: å‘é‡APIï¼ˆVector APIï¼Œç¬¬å…«æ¬¡å­µåŒ–ï¼‰</h3><p>å‘é‡APIçš„åŠŸèƒ½æ˜¯æä¾›ä¸€ä¸ªè¡¨è¾¾å‘é‡è®¡ç®—çš„APIï¼Œæ—¨åœ¨é€šè¿‡å¼•å…¥å‘é‡è®¡ç®—APIæ¥æé«˜Javaåº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚è¿™ä¸€APIå…è®¸å¼€å‘è€…åœ¨æ”¯æŒçš„CPUæ¶æ„ä¸Šå¯é åœ°ç¼–è¯‘ä¸ºæœ€ä½³å‘é‡æŒ‡ä»¤ï¼Œä»è€Œå®ç°æ¯”ç­‰æ•ˆçš„æ ‡é‡è®¡ç®—æ›´é«˜çš„æ€§èƒ½ã€‚è¿™äº›è®¡ç®—åœ¨è¿è¡Œæ—¶å¯é åœ°ç¼–è¯‘æˆæ”¯æŒçš„CPUæ¶æ„ä¸Šçš„æœ€ä¼˜å‘é‡æŒ‡ä»¤ï¼Œä»è€Œå®ç°æ¯”ç­‰æ•ˆæ ‡é‡è®¡ç®—æ›´ä¼˜çš„æ€§èƒ½ã€‚</p><p>ä¸‹é¢è¿™ä¸ªæ˜¯å®˜æ–¹ç»™çš„ç¤ºä¾‹ï¼š</p><pre><code class="java">// æ ‡é‡è®¡ç®—ç¤ºä¾‹void scalarComputation(float[] a, float[] b, float[] c) {    for (int i = 0; i &lt; a.length ; i++) {        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;    }}// ä½¿ç”¨å‘é‡APIçš„å‘é‡è®¡ç®—ç¤ºä¾‹static final VectorSpecies&lt;Float&gt; SPECIES = FloatVector.SPECIES_PREFERRED;void vectorComputation(float[] a, float[] b, float[] c) {    int i = 0;    int upperBound = SPECIES.loopBound(a.length);    for (; i &lt; upperBound; i += SPECIES.length()) {        // FloatVector va, vb, vc;        var va = FloatVector.fromArray(SPECIES, a, i);        var vb = FloatVector.fromArray(SPECIES, b, i);        var vc = va.mul(va).add(vb.mul(vb)).neg();        vc.intoArray(c, i);    }    for (; i &lt; a.length; i++) {        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;    }}</code></pre><p>å‘é‡APIåœ¨Javaä¸­çš„ç‹¬ç‰¹ä¼˜åŠ¿åœ¨äºå…¶é«˜æ•ˆçš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ã€ä¸°å¯Œçš„å‘é‡åŒ–æŒ‡ä»¤é›†ã€è·¨å¹³å°çš„æ•°æ®å¹¶è¡Œç®—æ³•æ”¯æŒä»¥åŠå¯¹æœºå™¨å­¦ä¹ çš„ç‰¹åˆ«ä¼˜åŒ–ã€‚</p><h2 id="å¼ƒç”¨æˆ–åºŸå¼ƒ"><a href="#å¼ƒç”¨æˆ–åºŸå¼ƒ" class="headerlink" title="å¼ƒç”¨æˆ–åºŸå¼ƒ"></a>å¼ƒç”¨æˆ–åºŸå¼ƒ</h2><h3 id="JEP-471-æ ‡è®°sun-misc-Unsafeä¸­çš„å†…å­˜ç®¡ç†æ–¹æ³•ä¸ºè¿‡æ—¶ï¼ˆDeprecate-the-Memory-Access-Methods-in-sun-misc-Unsafe-for-Removalï¼‰"><a href="#JEP-471-æ ‡è®°sun-misc-Unsafeä¸­çš„å†…å­˜ç®¡ç†æ–¹æ³•ä¸ºè¿‡æ—¶ï¼ˆDeprecate-the-Memory-Access-Methods-in-sun-misc-Unsafe-for-Removalï¼‰" class="headerlink" title="JEP 471: æ ‡è®°sun.misc.Unsafeä¸­çš„å†…å­˜ç®¡ç†æ–¹æ³•ä¸ºè¿‡æ—¶ï¼ˆDeprecate the Memory-Access Methods in sun.misc.Unsafe for Removalï¼‰"></a>JEP 471: æ ‡è®°sun.misc.Unsafeä¸­çš„å†…å­˜ç®¡ç†æ–¹æ³•ä¸ºè¿‡æ—¶ï¼ˆDeprecate the Memory-Access Methods in sun.misc.Unsafe for Removalï¼‰</h3><p>JEP 471 çš„ç›®æ ‡æ˜¯å°† <code>sun.misc.Unsafe</code> ç±»ä¸­çš„å†…å­˜è®¿é—®æ–¹æ³•æ ‡è®°ä¸ºè¿‡æ—¶ï¼Œå¹¶è®¡åˆ’åœ¨æœªæ¥ç‰ˆæœ¬ä¸­ç§»é™¤è¿™äº›æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•åŒ…æ‹¬ç›´æ¥è®¿é—® JVM åƒåœ¾å›æ”¶å †æˆ–éå †å†…å­˜çš„æ“ä½œã€‚</p><p><code>sun.misc.Unsafe</code>ç±»è‡ª 2002 å¹´å¼•å…¥ä»¥æ¥ï¼Œè¢«å¹¿æ³›ç”¨äºæ‰§è¡Œä½çº§æ“ä½œï¼Œå¦‚ç›´æ¥å†…å­˜è®¿é—®å’Œçº¿ç¨‹è°ƒåº¦ã€‚ç„¶è€Œï¼Œè¿™äº›æ–¹æ³•å­˜åœ¨å®‰å…¨éšæ‚£ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼å’Œæ•°æ®ç«äº‰ç­‰é—®é¢˜ã€‚éšç€ Java å¹³å°çš„å‘å±•ï¼Œå‡ºç°äº†æ›´å®‰å…¨çš„æ›¿ä»£ APIï¼Œå¦‚ VarHandle APIï¼ˆJEP 193, JDK 9ï¼‰å’Œ Foreign Function &amp; Memory APIï¼ˆJEP 454, JDK 22ï¼‰ï¼Œè¿™äº› API æä¾›äº†æ›´å®‰å…¨å’Œæ ‡å‡†åŒ–çš„å†…å­˜è®¿é—®æ–¹å¼ã€‚</p><p>è¿™ä¸€ç‰¹æ€§ä¸»è¦æ”¶ç›Šæ˜¯ï¼š</p><ul><li>æé«˜å®‰å…¨æ€§ï¼šç§»é™¤ä¸å®‰å…¨çš„å†…å­˜è®¿é—®æ–¹æ³•ï¼Œå‡å°‘æ½œåœ¨çš„å®‰å…¨é£é™©ã€‚</li><li>æ ‡å‡†åŒ–å†…å­˜ç®¡ç†ï¼šé¼“åŠ±å¼€å‘è€…ä½¿ç”¨æ ‡å‡† APIï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯ç§»æ¤æ€§ã€‚</li><li>ä¿ƒè¿›å¹³å°å‘å±•ï¼šä¸º Java å¹³å°çš„æœªæ¥å‘å±•é“ºå¹³é“è·¯ï¼Œæ”¯æŒæ›´å¤šé«˜çº§ç‰¹æ€§ã€‚</li></ul><p>JEP 471 å°† <code>sun.misc.Unsafe</code> ä¸­çš„å†…å­˜è®¿é—®æ–¹æ³•æ ‡è®°ä¸ºè¿‡æ—¶ï¼Œå¹¶è®¡åˆ’åœ¨æœªæ¥ç‰ˆæœ¬ä¸­ç§»é™¤è¿™äº›æ–¹æ³•ã€‚å…·ä½“æ­¥éª¤åŒ…æ‹¬ï¼š</p><ol><li>åœ¨ Java23 ä¸­æ ‡è®°è¿™äº›æ–¹æ³•ä¸ºè¿‡æ—¶ã€‚</li><li>åœ¨ Java25 æˆ–ä¹‹å‰ç‰ˆæœ¬ä¸­å‘å‡ºè¿è¡Œæ—¶è­¦å‘Šã€‚</li><li>åœ¨ Java26 æˆ–ä¹‹åç‰ˆæœ¬ä¸­é»˜è®¤æŠ›å‡ºå¼‚å¸¸ã€‚</li><li>åœ¨åç»­ç‰ˆæœ¬ä¸­ç§»é™¤è¿™äº›æ–¹æ³•ã€‚</li></ol><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java23 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä» <a href="https://openjdk.org/projects/jdk/23/" target="_blank" rel="noopener">https://openjdk.org/projects/jdk/23/</a> æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java/java-23-features">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava23 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava23 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°éµå¾ªæ¯å…­ä¸ªæœˆå‘å¸ƒä¸€æ¬¡çš„èŠ‚å¥ï¼ŒLTSç‰ˆæœ¬åˆ™æ¯ä¸¤å¹´å‘å¸ƒä¸€æ¬¡ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java23" scheme="https://www.howardliu.cn/tags/Java23/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava22 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java/java-22-features/"/>
    <id>https://www.howardliu.cn/java/java-22-features/</id>
    <published>2024-09-14T00:20:00.000Z</published>
    <updated>2024-12-05T03:08:01.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/202409131947520.jpg" alt="Java22 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚è®©æˆ‘ä»¬è·Ÿéš Java çš„è„šæ­¥ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œçœ‹ä¸€çœ‹æ¯ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ï¼Œæœ¬æœŸæ˜¯ Java22 çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Java22 åœ¨ 2024 å¹´ 3 æœˆ 19 æ—¥å‘å¸ƒGAç‰ˆæœ¬ï¼Œå…±åäºŒå¤§ç‰¹æ€§ï¼š</p><ul><li>JEP 423: G1åƒåœ¾å›æ”¶å™¨çš„åŒºåŸŸå›ºå®šï¼ˆRegion Pinning for G1ï¼‰</li><li>JEP 447: super(â€¦)å‰ç½®è¯­å¥ï¼ˆStatements before super(â€¦)ï¼Œé¢„è§ˆï¼‰</li><li>JEP 454: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign Function &amp; Memory APIï¼‰</li><li>JEP 456: æœªå‘½åå˜é‡å’Œæ¨¡å¼ï¼ˆUnnamed Variables &amp; Patternsï¼‰</li><li>JEP 457: ç±»æ–‡ä»¶APIï¼ˆClass-File APIï¼Œé¢„è§ˆï¼‰</li><li>JEP 458: å¯åŠ¨å¤šæ–‡ä»¶æºä»£ç ç¨‹åºï¼ˆLaunch Multi-File Source-Code Programsï¼‰</li><li>JEP 459: å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString Templatesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</li><li>JEP 460: å‘é‡APIï¼ˆVector APIï¼Œç¬¬ä¸ƒæ¬¡å­µåŒ–ï¼‰</li><li>JEP 461: æµæ”¶é›†å™¨ï¼ˆStream Gatherersï¼Œé¢„è§ˆï¼‰</li><li>JEP 462: ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured Concurrencyï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</li><li>JEP 463: éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹ä¸»æ–¹æ³•ï¼ˆImplicitly Declared Classes and Instance Main Methodsï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</li><li>JEP 464: ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚</p><h2 id="JEP-423-G1åƒåœ¾å›æ”¶å™¨çš„åŒºåŸŸå›ºå®šï¼ˆRegion-Pinning-for-G1ï¼‰"><a href="#JEP-423-G1åƒåœ¾å›æ”¶å™¨çš„åŒºåŸŸå›ºå®šï¼ˆRegion-Pinning-for-G1ï¼‰" class="headerlink" title="JEP 423: G1åƒåœ¾å›æ”¶å™¨çš„åŒºåŸŸå›ºå®šï¼ˆRegion Pinning for G1ï¼‰"></a>JEP 423: G1åƒåœ¾å›æ”¶å™¨çš„åŒºåŸŸå›ºå®šï¼ˆRegion Pinning for G1ï¼‰</h2><p>JEP 423: G1åƒåœ¾å›æ”¶å™¨çš„åŒºåŸŸå›ºå®šæ—¨åœ¨è§£å†³åœ¨ä½¿ç”¨Javaæœ¬åœ°æ¥å£ï¼ˆJNIï¼‰æ—¶é‡åˆ°çš„åƒåœ¾å›æ”¶ï¼ˆGCï¼‰å»¶è¿Ÿé—®é¢˜ã€‚</p><p>åœ¨ä½¿ç”¨JNIæ—¶ï¼ŒJavaçº¿ç¨‹éœ€è¦ç­‰å¾…GCæ“ä½œå®Œæˆï¼Œè¿™ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºçš„å»¶è¿Ÿå¢åŠ ã€‚ç‰¹åˆ«æ˜¯åœ¨JNIå…³é”®åŒºåŸŸï¼ŒGCæ“ä½œä¼šè¢«æš‚åœï¼Œç›´åˆ°çº¿ç¨‹ç¦»å¼€è¯¥åŒºåŸŸã€‚è¿™ç§æœºåˆ¶è™½ç„¶å¯ä»¥ç¡®ä¿GCçš„ç¨³å®šæ€§ï¼Œä½†ä¼šæ˜¾è‘—å¢åŠ åº”ç”¨ç¨‹åºçš„å»¶è¿Ÿã€‚</p><p>JEP 423é€šè¿‡å¼•å…¥åŒºåŸŸå›ºå®šæœºåˆ¶æ¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚å…·ä½“æ¥è¯´ï¼Œè¯¥ç‰¹æ€§å…è®¸åœ¨G1åƒåœ¾å›æ”¶å™¨ä¸­å›ºå®šJNIä»£ç ä½¿ç”¨çš„å†…å­˜åŒºåŸŸï¼Œè¿™æ ·å³ä½¿åœ¨è¿™äº›åŒºåŸŸä¸­å­˜åœ¨GCæ“ä½œï¼Œä¹Ÿä¸ä¼šå½±å“åˆ°å…¶ä»–åŒºåŸŸçš„åƒåœ¾å›æ”¶ã€‚è¿™é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š</p><ol><li>åŒºåŸŸè®¡æ•°å™¨ï¼šåœ¨æ¯ä¸ªåŒºåŸŸä¸­ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºè®°å½•è¯¥åŒºåŸŸä¸­çš„ä¸´ç•Œå¯¹è±¡æ•°é‡ã€‚å½“ä¸€ä¸ªä¸´ç•Œå¯¹è±¡è¢«è·å–æ—¶ï¼Œè®¡æ•°å™¨å¢åŠ ï¼›å½“ä¸€ä¸ªä¸´ç•Œå¯¹è±¡è¢«é‡Šæ”¾æ—¶ï¼Œè®¡æ•°å™¨å‡å°‘ã€‚</li><li>åŒºåŸŸå›ºå®šï¼šåœ¨è¿›è¡ŒGCæ“ä½œæ—¶ï¼ŒG1åƒåœ¾å›æ”¶å™¨ä¼šå›ºå®šé‚£äº›åŒ…å«ä¸´ç•Œå¯¹è±¡çš„åŒºåŸŸï¼Œç¡®ä¿è¿™äº›åŒºåŸŸåœ¨GCæœŸé—´ä¿æŒä¸å˜ã€‚è¿™æ ·ï¼Œå³ä½¿çº¿ç¨‹å¤„äºJNIå…³é”®åŒºåŸŸï¼Œåƒåœ¾å›æ”¶ä¹Ÿå¯ä»¥ç»§ç»­è¿›è¡Œï¼Œè€Œä¸ä¼šè¢«æš‚åœã€‚</li></ol><p>JEP 423å¯ä»¥å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æ”¹è¿›ï¼š</p><ol><li>å‡å°‘å»¶è¿Ÿï¼šé€šè¿‡å…è®¸åœ¨JNIå…³é”®åŒºåŸŸæœŸé—´ç»§ç»­è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå‡å°‘äº†åº”ç”¨ç¨‹åºçš„å»¶è¿Ÿã€‚</li><li>æé«˜æ•ˆç‡ï¼šJavaçº¿ç¨‹æ— éœ€ç­‰å¾…GCæ“ä½œå®Œæˆï¼Œä»è€Œæé«˜äº†å¼€å‘äººå‘˜çš„å·¥ä½œæ•ˆç‡ã€‚</li><li>å¢å¼ºå¯é¢„æµ‹æ€§ï¼šè¯¥ç‰¹æ€§è¿˜å¢å¼ºäº†åƒåœ¾å›æ”¶çš„å¯é¢„æµ‹æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§å¯¹è±¡æ—¶ã€‚</li></ol><h2 id="JEP-454-å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign-Function-amp-Memory-APIï¼‰"><a href="#JEP-454-å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign-Function-amp-Memory-APIï¼‰" class="headerlink" title="JEP 454: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign Function &amp; Memory APIï¼‰"></a>JEP 454: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign Function &amp; Memory APIï¼‰</h2><p>FFM APIæ˜¯ä¸ºäº†æä¾›ä¸€ä¸ªæ›´å®‰å…¨ã€æ›´é«˜æ•ˆçš„æ›¿ä»£JNIï¼ˆJava Native Interfaceï¼‰çš„APIã€‚JNIè™½ç„¶å…è®¸Javaç¨‹åºè°ƒç”¨æœ¬åœ°ä»£ç ï¼Œä½†å…¶ä½¿ç”¨å¤æ‚ä¸”å®¹æ˜“å¼•å…¥å®‰å…¨é—®é¢˜ã€‚FFM APIæ—¨åœ¨ç®€åŒ–è¿™ä¸€è¿‡ç¨‹ï¼Œæé«˜å¼€å‘è€…çš„ç”Ÿäº§åŠ›å’Œä½“éªŒï¼ŒåŒæ—¶å¢å¼ºæ€§èƒ½ã€å®‰å…¨æ€§å’Œä¸€è‡´æ€§ã€‚åœ¨Java22ä¸­æ­£å¼å‘å¸ƒã€‚</p><p>FFM APIé€šè¿‡æœ‰æ•ˆåœ°è°ƒç”¨å¤–éƒ¨å‡½æ•°ï¼ˆå³JVMå¤–éƒ¨çš„ä»£ç ï¼‰å¹¶å®‰å…¨åœ°è®¿é—®å¤–éƒ¨å†…å­˜ï¼ˆå³ä¸å—JVMç®¡ç†çš„å†…å­˜ï¼‰ï¼Œä½¿Javaç¨‹åºèƒ½å¤Ÿè°ƒç”¨æœ¬æœºåº“å¹¶å¤„ç†æœ¬æœºæ•°æ®ï¼Œè€Œä¸ä¼šå‡ºç°è„†å¼±æ€§å’Œå±é™©ã€‚</p><p>FFM APIç»å†äº†å¤šè½®å­µåŒ–å’Œé¢„è§ˆï¼Œä»Java17çš„JEP 412å¼€å§‹ï¼Œç»è¿‡Java18çš„JEP 419å’ŒJava19çš„JEP 424ï¼Œå†åˆ°Java20çš„JEP 434å’ŒJava21çš„JEP 442ï¼Œæœ€ç»ˆåœ¨Java22ä¸­æ­£å¼å‘å¸ƒã€‚è¿™äº›æ”¹è¿›åŒ…æ‹¬ï¼š</p><ul><li>APIçš„é›†ä¸­ç®¡ç†ï¼šé€šè¿‡Arenaæ¥å£é›†ä¸­ç®¡ç†æœ¬åœ°æ®µçš„ç”Ÿå‘½å‘¨æœŸã€‚</li><li>å®‰å…¨è®¿é—®å¤–éƒ¨å†…å­˜ï¼šé€šè¿‡<code>MemoryLayout</code>å’Œ<code>VarHandle</code>æ“ä½œå’Œè®¿é—®ç»“æ„åŒ–çš„å¤–éƒ¨å†…å­˜ã€‚</li><li>è°ƒç”¨å¤–éƒ¨å‡½æ•°ï¼šé€šè¿‡<code>Linker</code>ã€<code>FunctionDescriptor</code>å’Œ<code>SymbolLookup</code>è°ƒç”¨å¤–éƒ¨å‡½æ•°ã€‚</li></ul><p>FFM APIçš„ä¸»è¦æ”¶ç›ŠåŒ…æ‹¬ï¼š</p><ul><li>æé«˜æ€§èƒ½ï¼šé€šè¿‡ç›´æ¥è°ƒç”¨æœ¬åœ°å‡½æ•°å’Œæ“ä½œå†…å­˜ï¼Œæé«˜äº†ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</li><li>å¢å¼ºå®‰å…¨æ€§ï¼šé€šè¿‡æ›´ä¸¥æ ¼çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå‡å°‘äº†å†…å­˜æ³„æ¼å’Œå®‰å…¨æ¼æ´çš„é£é™©ã€‚</li><li>æå‡å¼€å‘ä½“éªŒï¼šç®€åŒ–äº†ä¸æœ¬åœ°ä»£ç çš„äº¤äº’ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ã€‚</li></ul><p>æˆ‘ä»¬çœ‹ä¸‹å®˜æ–¹ç¤ºä¾‹ï¼š</p><pre><code class="java">// 1. åœ¨Cåº“è·¯å¾„ä¸ŠæŸ¥æ‰¾åä¸ºradixsortçš„å¤–éƒ¨å‡½æ•°Linker linker = Linker.nativeLinker();SymbolLookup stdlib = linker.defaultLookup();final MemorySegment memorySegment = stdlib.find(&quot;radixsort&quot;).orElseThrow();FunctionDescriptor descriptor = FunctionDescriptor.ofVoid(        ValueLayout.ADDRESS,        ValueLayout.JAVA_INT,        ValueLayout.ADDRESS);MethodHandle radixsort = linker.downcallHandle(memorySegment, descriptor);// ä¸‹é¢çš„ä»£ç å°†ä½¿ç”¨è¿™ä¸ªå¤–éƒ¨å‡½æ•°å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åº// 2. åˆ†é…æ ˆä¸Šå†…å­˜æ¥å­˜å‚¨å››ä¸ªå­—ç¬¦ä¸²String[] javaStrings = {&quot;mouse&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;car&quot;};// 3. ä½¿ç”¨try-with-resourcesæ¥ç®¡ç†ç¦»å †å†…å­˜çš„ç”Ÿå‘½å‘¨æœŸtry (Arena offHeap = Arena.ofConfined()) {    // 4. åˆ†é…ä¸€æ®µç¦»å †å†…å­˜æ¥å­˜å‚¨å››ä¸ªæŒ‡é’ˆ    MemorySegment pointers = offHeap.allocateArray(ValueLayout.ADDRESS, javaStrings.length);    // 5. å°†å­—ç¬¦ä¸²ä»æ ˆä¸Šå†…å­˜å¤åˆ¶åˆ°ç¦»å †å†…å­˜    for (int i = 0; i &lt; javaStrings.length; i++) {        MemorySegment cString = offHeap.allocateUtf8String(javaStrings[i]);        pointers.setAtIndex(ValueLayout.ADDRESS, i, cString);    }    // 6. é€šè¿‡è°ƒç”¨å¤–éƒ¨å‡½æ•°å¯¹ç¦»å †æ•°æ®è¿›è¡Œæ’åº    radixsort.invoke(pointers, javaStrings.length, MemorySegment.NULL, &#39;\0&#39;);    // 7. å°†æ’åºåçš„å­—ç¬¦ä¸²ä»ç¦»å †å†…å­˜å¤åˆ¶å›æ ˆä¸Šå†…å­˜    for (int i = 0; i &lt; javaStrings.length; i++) {        MemorySegment cString = pointers.getAtIndex(ValueLayout.ADDRESS, i);        javaStrings[i] = cString.getUtf8String(0);    }} // 8. æ‰€æœ‰ç¦»å †å†…å­˜åœ¨æ­¤å¤„è¢«é‡Šæ”¾// éªŒè¯æ’åºç»“æœassert Arrays.equals(javaStrings, new String[] {&quot;car&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;});  // true</code></pre><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒJNIä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨å¤–éƒ¨ä»£ç çš„ï¼Œé‚£FFM APIç›¸è¾ƒäºJNIçš„ä¼˜åŠ¿åœ¨äºï¼š</p><ol><li>æ›´å®‰å…¨çš„å†…å­˜è®¿é—®ï¼šFFM API æä¾›äº†ä¸€ç§æ›´å®‰å…¨å’Œå—æ§çš„æ–¹å¼æ¥ä¸æœ¬åœ°ä»£ç äº¤äº’ï¼Œé¿å…äº†JNIä¸­å¸¸è§çš„å†…å­˜æ³„æ¼å’Œæ•°æ®æŸåé—®é¢˜ã€‚</li><li>ç›´æ¥è®¿é—®æœ¬åœ°å†…å­˜ï¼šFFM API å…è®¸Javaç¨‹åºç›´æ¥è®¿é—®æœ¬åœ°å†…å­˜ï¼ˆå³Javaå †å¤–çš„å†…å­˜ï¼‰ï¼Œè¿™ä½¿å¾—æ•°æ®å¤„ç†æ›´åŠ é«˜æ•ˆå’Œçµæ´»ã€‚</li><li>è·¨è¯­è¨€å‡½æ•°è°ƒç”¨ï¼šFFM API æ”¯æŒè°ƒç”¨Javaç¨‹åºçš„å¤–éƒ¨å‡½æ•°ï¼Œä»¥ä¸å¤–éƒ¨ä»£ç å’Œæ•°æ®ä¸€èµ·æ“ä½œï¼Œè€Œæ— éœ€ä¾èµ–JNIçš„å¤æ‚æœºåˆ¶ã€‚</li><li>æ›´é«˜æ•ˆçš„é›†æˆï¼šFFM API ä½¿å¾—Javaä¸Cã€C++ç­‰è¯­è¨€ç¼–å†™çš„åº“é›†æˆæ›´åŠ æ–¹ä¾¿å’Œé«˜æ•ˆï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®å¤„ç†å’Œæœºå™¨å­¦ä¹ ç­‰é¢†åŸŸã€‚</li><li>å‡å°‘ä»£ç å¤æ‚æ€§ï¼šFFM API æä¾›äº†ä¸€ç§æ›´ç®€æ´çš„APIï¼Œå‡å°‘äº†JNIä¸­å¤æ‚çš„ä»£ç ç¼–å†™å’Œç»´æŠ¤å·¥ä½œã€‚</li><li>æ›´å¹¿æ³›çš„é€‚ç”¨æ€§ï¼šFFM API ä¸ä»…é€‚ç”¨äºç®€å•çš„å‡½æ•°è°ƒç”¨ï¼Œè¿˜å¯ä»¥å¤„ç†å¤æ‚çš„å†…å­˜ç®¡ç†ä»»åŠ¡ï¼Œå¦‚å †å¤–å†…å­˜çš„ç®¡ç†ã€‚</li><li>æé«˜æ€§èƒ½ï¼šFFM API é€šè¿‡é«˜æ•ˆçš„è°ƒç”¨å¤–éƒ¨å‡½æ•°å’Œå®‰å…¨åœ°è®¿é—®å¤–éƒ¨å†…å­˜ï¼Œæé«˜äº†ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚</li></ol><h2 id="JEP-456-æœªå‘½åå˜é‡å’Œæ¨¡å¼ï¼ˆUnnamed-Variables-amp-Patternsï¼‰"><a href="#JEP-456-æœªå‘½åå˜é‡å’Œæ¨¡å¼ï¼ˆUnnamed-Variables-amp-Patternsï¼‰" class="headerlink" title="JEP 456: æœªå‘½åå˜é‡å’Œæ¨¡å¼ï¼ˆUnnamed Variables &amp; Patternsï¼‰"></a>JEP 456: æœªå‘½åå˜é‡å’Œæ¨¡å¼ï¼ˆUnnamed Variables &amp; Patternsï¼‰</h2><p>JEP 456: æœªå‘½åå˜é‡å’Œæ¨¡å¼ï¼ˆUnnamed Variables &amp; Patternsï¼‰æ˜¯ä¸€ä¸ªé‡è¦æ–°ç‰¹æ€§ï¼Œåœ¨Java21ä¸­é¢„è§ˆï¼Œåœ¨Java22ä¸­å‘å¸ƒã€‚æ—¨åœ¨æé«˜Javaä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚è¿™ä¸€ç‰¹æ€§å…è®¸å¼€å‘è€…åœ¨å£°æ˜å˜é‡æˆ–åµŒå¥—æ¨¡å¼æ—¶ä½¿ç”¨ä¸‹åˆ’çº¿å­—ç¬¦ï¼ˆ_ï¼‰æ¥è¡¨ç¤ºæœªå‘½åçš„å˜é‡æˆ–æ¨¡å¼ï¼Œä»è€Œç®€åŒ–ä»£ç å¹¶å‡å°‘ä¸å¿…è¦çš„å™ªå£°ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="java">public static void main(String[] args) {    var _ = new Point(1, 2);}record Point(int x, int y) {}</code></pre><p>è¿™ä¸ªå¯ä»¥ç”¨åœ¨ä»»ä½•å®šä¹‰å˜é‡çš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼š</p><ul><li><code>... instanceof Point(_, int y)</code></li><li><code>r instanceof Point _</code></li><li><code>switch â€¦â€¦ case Box(_)</code></li><li><code>for (Order _ : orders)</code></li><li><code>for (int i = 0, _ = sideEffect(); i &lt; 10; i++)</code></li><li><code>try { ... } catch (Exception _) { ... } catch (Throwable _) { ... }</code></li></ul><p>åªè¦æ˜¯è¿™ä¸ªä¸å‡†å¤‡ç”¨ï¼Œå¯ä»¥ä¸€å¾‹ä½¿ç”¨<code>_</code>ä»£æ›¿ã€‚</p><h2 id="JEP-458-å¯åŠ¨å¤šæ–‡ä»¶æºä»£ç ç¨‹åºï¼ˆLaunch-Multi-File-Source-Code-Programsï¼‰"><a href="#JEP-458-å¯åŠ¨å¤šæ–‡ä»¶æºä»£ç ç¨‹åºï¼ˆLaunch-Multi-File-Source-Code-Programsï¼‰" class="headerlink" title="JEP 458: å¯åŠ¨å¤šæ–‡ä»¶æºä»£ç ç¨‹åºï¼ˆLaunch Multi-File Source-Code Programsï¼‰"></a>JEP 458: å¯åŠ¨å¤šæ–‡ä»¶æºä»£ç ç¨‹åºï¼ˆLaunch Multi-File Source-Code Programsï¼‰</h2><p>è¿™ä¸ªåŠŸèƒ½ä¸»è¦æ˜¯æå‡<code>java</code>å‘½ä»¤çš„èƒ½åŠ›ã€‚æ¯”å¦‚æˆ‘ä»¬æ‰‹æ“äº†ä¸¤ä¸ªç±»ï¼š</p><pre><code class="java">// Prog.javaclass Prog {    public static void main(String[] args) { Helper.run(); }}// Helper.javaclass Helper {    static void run() { System.out.println(&quot;Hello!&quot;); }}</code></pre><p>æƒ³è¦è¿è¡Œ<code>Prog</code>çš„mainæ–¹æ³•ï¼Œåœ¨JEP 458ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç¼–è¯‘<code>Helper</code>ï¼Œç„¶åé€šè¿‡<code>-classpath</code>æŒ‡ä»¤åŠ è½½ç¼–è¯‘åçš„ç±»ï¼Œæ‰èƒ½è¿è¡Œ<code>Prog</code>ã€‚ä½†æ˜¯ç°åœ¨ï¼Œ<code>java</code>å¸®æˆ‘ä»¬åšäº†ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨<code>java Prog.java</code>å°±å¯ä»¥æ‰§è¡Œäº†ã€‚</p><p>å¾ˆæ–¹ä¾¿çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯ä¼¼ä¹å¥½åƒå¤§æ¦‚çœ‹èµ·æ¥æ²¡ä»€ä¹ˆç”¨ï¼Œä½†æ˜¯å¯¹äºJavaç”Ÿæ€æœ‰æ·±è¿œå½±å“ï¼š</p><ol><li>å¢å¼ºJavaå¯åŠ¨å™¨åŠŸèƒ½ï¼šJEP 458å…è®¸Javaå¯åŠ¨å™¨æ‰§è¡ŒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶çš„Javaæºç åº”ç”¨ç¨‹åºã€‚è¿™ä¸€æ”¹è¿›ä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´çµæ´»åœ°å¯åŠ¨å’Œè¿è¡ŒJavaç¨‹åºï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¤„ç†å¤šä¸ªæºæ–‡ä»¶çš„å¤æ‚é¡¹ç›®ä¸­ï¼Œè¿™ä¸€ç‰¹æ€§å°†å¤§å¤§æå‡å¼€å‘æ•ˆç‡å’Œä¾¿åˆ©æ€§ã€‚</li><li>ä¿ƒè¿›Javaç”Ÿæ€ç³»ç»Ÿçš„æŒç»­æ¼”è¿›ï¼šJEP 458çš„å¼•å…¥æ˜¯Javaç”Ÿæ€ç³»ç»ŸæŒç»­æ¼”è¿›çš„ä¸€éƒ¨åˆ†ï¼Œä¸Java21çš„æ–°ç‰¹æ€§å’ŒQuarkusçš„åˆ›æ–°åº”ç”¨ç›¸è¾…ç›¸æˆã€‚è¿™äº›æ›´æ–°ä¸ä»…æå‡äº†ä¸ç°ä»£Javaç”Ÿæ€ç³»ç»Ÿçš„å…¼å®¹æ€§ï¼Œè¿˜å¼•å…¥äº†é¢†åŸŸæ¨¡å‹éªŒè¯çš„æ”¹è¿›å’Œä¾èµ–äºJava17çš„æ–°ç‰¹æ€§ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ›´åŠ ç¨³å®šã€é«˜æ•ˆçš„å·¥å…·é›†ã€‚</li><li>æ¨åŠ¨Javaé¡¹ç›®çš„å‘å±•ï¼šJEP 458çš„æ–°ç‰¹æ€§è¢«å½’ç±»åˆ°å››ä¸ªä¸»è¦çš„Javaé¡¹ç›®ä¸­ï¼Œå³Amberã€Loomã€Panamaå’ŒValhallaã€‚è¿™äº›é¡¹ç›®æ—¨åœ¨é€šè¿‡ç²¾å·§çš„åˆå¹¶ï¼Œå­µåŒ–ä¸€ç³»åˆ—ç»„ä»¶ï¼Œä»¥ä¾¿æœ€ç»ˆå°†å…¶çº³å…¥åˆ°JDKä¸­ã€‚è¿™è¡¨æ˜JEP 458ä¸ä»…æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç‰¹æ€§ï¼Œè€Œæ˜¯Javaç”Ÿæ€ç³»ç»Ÿä¸­æ›´å¹¿æ³›æŠ€æœ¯æ¼”è¿›çš„ä¸€éƒ¨åˆ†ï¼Œæœ‰åŠ©äºæ¨åŠ¨æ•´ä¸ªJavaç”Ÿæ€ç³»ç»Ÿçš„åˆ›æ–°å’Œå‘å±•ã€‚</li><li>ç®€åŒ–Javaå¼€å‘æµç¨‹ï¼šé€šè¿‡ç®€åŒ–å¯åŠ¨å¤šæ–‡ä»¶æºç ç¨‹åºçš„è¿‡ç¨‹ï¼ŒJEP 458æœ‰åŠ©äºç®€åŒ–Javaå¼€å‘æµç¨‹ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´åŠ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼Œè€Œä¸æ˜¯åœ¨å¯åŠ¨å’Œè¿è¡Œç¨‹åºä¸ŠèŠ±è´¹è¿‡å¤šæ—¶é—´ã€‚</li></ol><h2 id="é¢„è§ˆåŠŸèƒ½"><a href="#é¢„è§ˆåŠŸèƒ½" class="headerlink" title="é¢„è§ˆåŠŸèƒ½"></a>é¢„è§ˆåŠŸèƒ½</h2><h3 id="JEP-447-super-â€¦-å‰ç½®è¯­å¥ï¼ˆStatements-before-super-â€¦-ï¼‰"><a href="#JEP-447-super-â€¦-å‰ç½®è¯­å¥ï¼ˆStatements-before-super-â€¦-ï¼‰" class="headerlink" title="JEP 447: super(â€¦)å‰ç½®è¯­å¥ï¼ˆStatements before super(â€¦)ï¼‰"></a>JEP 447: super(â€¦)å‰ç½®è¯­å¥ï¼ˆStatements before super(â€¦)ï¼‰</h3><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œå¦‚æœé€šè¿‡<code>super(â€¦â€¦)</code>è°ƒç”¨çˆ¶ç±»ï¼Œåœ¨<code>super</code>ä¹‹å‰æ˜¯ä¸å…è®¸æœ‰å…¶ä»–è¯­å¥çš„ã€‚</p><p>å¤§éƒ¨åˆ†çš„æ—¶å€™è¿™ç§é™åˆ¶éƒ½æ²¡é—®é¢˜ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸å¤ªçµæ´»ã€‚å¦‚æœæƒ³åœ¨<code>super</code>ä¹‹å‰åŠ ä¸Šä¸€äº›å­ç±»ç‰¹æœ‰é€»è¾‘ï¼Œæ¯”å¦‚æƒ³ç»Ÿè®¡ä¸‹å­ç±»æ„é€ è€—æ—¶ï¼Œå°±å¾—é‡å†™ä¸€éçˆ¶ç±»çš„å®ç°ã€‚</p><p>é™¤äº†æœ‰æŸçµæ´»æ€§ï¼Œè¿™ç§é‡å†™çš„åšæ³•ä¹Ÿä¼šé€ æˆçˆ¶å­ç±»ä¹‹é—´çš„å…³ç³»å˜å¾—å¥‡æ€ªã€‚å‡è®¾çˆ¶ç±»æ˜¯SDKä¸­çš„ä¸€ä¸ªç±»ï¼ŒSDKå‡çº§æ—¶åœ¨çˆ¶ç±»æ„é€ å‡½æ•°å¢åŠ äº†ä¸€äº›é€»è¾‘ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­æ˜¯æ— æ³•ç»§æ‰¿è¿™äº›é€»è¾‘çš„ï¼ŒæŸæ¬¡éœ€è¦å‡çº§SDKï¼ˆæ¯”å¦‚ä½ç‰ˆæœ¬æœ‰å®‰å…¨é£é™©ï¼‰ï¼ŒéªŒè¯ä¸å®Œæ•´çš„æƒ…å†µä¸‹ï¼Œå°±å¾ˆå®¹æ˜“å‡ºç°bugã€‚</p><p>åœ¨ JEP 447 ä¸­ï¼Œå…è®¸åœ¨æ„é€ å‡½æ•°ä¸­ä¸å¼•ç”¨æ­£åœ¨åˆ›å»ºçš„å®ä¾‹çš„è¯­å¥å‡ºç°åœ¨æ˜¾å¼æ„é€ å‡½æ•°è°ƒç”¨ï¼ˆå¦‚ super()ï¼‰ä¹‹å‰ã€‚è¿™ä¸€ç‰¹æ€§æ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›æ›´å¤šçš„çµæ´»æ€§ï¼Œå…è®¸åœ¨è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ä¹‹å‰æ‰§è¡Œä¸€äº›éªŒè¯æˆ–å…¶ä»–å¤„ç†æ“ä½œã€‚</p><p>å¼•å…¥è¿™ä¸€ç‰¹æ€§çš„ä¸»è¦åŠ¨æœºæ˜¯æé«˜æ„é€ å‡½æ•°çš„çµæ´»æ€§å’Œå¯è¯»æ€§ã€‚é€šè¿‡å…è®¸åœ¨ super() è°ƒç”¨ä¹‹å‰æ‰§è¡Œè¯­å¥ï¼Œå¼€å‘è€…å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ é¢å¤–çš„é€»è¾‘ï¼Œä¾‹å¦‚è¿›è¡Œä¸€äº›åˆå§‹åŒ–æ£€æŸ¥æˆ–æ‰§è¡Œä¸€äº›ç‰¹å®šçš„å¤„ç†æ“ä½œï¼Œè€Œä¸å¿…ä¾èµ–äº super() è°ƒç”¨ä¹‹åçš„ä»£ç ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹ç¤ºä¾‹ä»£ç ï¼š</p><pre><code class="java">public class PositiveBigInteger extends BigInteger {    public PositiveBigInteger(long value) {        if (value &lt;= 0) {            throw new IllegalArgumentException(&quot;non-positive value&quot;);        }        super(value);    }}</code></pre><h3 id="JEP-457-ç±»æ–‡ä»¶APIï¼ˆClass-File-APIï¼Œé¢„è§ˆï¼‰"><a href="#JEP-457-ç±»æ–‡ä»¶APIï¼ˆClass-File-APIï¼Œé¢„è§ˆï¼‰" class="headerlink" title="JEP 457: ç±»æ–‡ä»¶APIï¼ˆClass-File APIï¼Œé¢„è§ˆï¼‰"></a>JEP 457: ç±»æ–‡ä»¶APIï¼ˆClass-File APIï¼Œé¢„è§ˆï¼‰</h3><p>Javaä¸­ä¸€ç›´ç¼ºå°‘å®˜æ–¹çš„ç±»æ–‡ä»¶æ“ä½œAPIï¼Œæƒ³è¦æ“ä½œclassï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚javassistã€ASMã€ByteBuddyç­‰ã€‚ä»2017å¹´å¼€å§‹ï¼ŒJavaæ¯åŠå¹´æœ‰ä¸€æ¬¡å‡çº§ï¼Œç‰¹æ€§æ›´æ–°é¢‘ç‡å¢åŠ ï¼Œéœ€è¦ç¬¬ä¸‰æ–¹åº“åŒæ­¥æ›´æ–°ï¼Œæ˜¯æ¯”è¾ƒå›°éš¾çš„ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªåŸå› æ˜¯Javaä¸­ä½¿ç”¨äº†ASMå®ç°<code>jar</code>ã€<code>jlink</code>ç­‰å·¥å…·ï¼Œä»¥åŠlambdaè¡¨è¾¾å¼ç­‰ã€‚è¿™å°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼ŒJavaç‰ˆæœ¬Nä¾èµ–äº†ASMç‰ˆæœ¬Mï¼Œå¦‚æœJava Nä¸­æœ‰ç±»APIï¼ŒASM Mä¸­æ˜¯ä¸ä¼šæœ‰çš„ï¼Œåªæœ‰Java Nå‘å¸ƒåï¼ŒASMå‡çº§åˆ°M+1æ‰ä¼šæœ‰ï¼ŒJavaæƒ³è¦ä½¿ç”¨ASM M+1ï¼Œéœ€è¦å‡çº§åˆ°Java N+1ã€‚æ˜¯ä¸æ˜¯å¾ˆé¢ ï¼Œä¸€ä¸ªå®˜æ–¹åŸºç¡€è¯­è¨€ï¼Œå±…ç„¶è¦ä¾èµ–ä¸€ä¸ªä¾èµ–è¿™ä¸ªè¯­è¨€çš„ç¬¬ä¸‰æ–¹å·¥å…·ã€‚æ˜¯å¯å¿å­°ä¸å¯å¿ã€‚</p><p>äºæ˜¯æœ‰äº†JEP 457ï¼Œç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªå‡†ç¡®ã€å®Œæ•´ã€é«˜æ€§èƒ½ä¸”éµå¾ªJavaè™šæ‹Ÿæœºè§„èŒƒå®šä¹‰çš„ç±»æ–‡ä»¶æ ¼å¼çš„APIï¼Œæœ€ç»ˆä¹Ÿä¼šæ›¿æ¢JDKå†…éƒ¨çš„ASMå‰¯æœ¬ã€‚</p><p>å› ä¸ºå½“å‰è¿˜æ˜¯é¢„è§ˆç‰ˆï¼Œæˆ‘ä»¬å…ˆç®€å•çœ‹ä¸‹å®˜æ–¹ç¤ºä¾‹ï¼š</p><p>å¦‚æœè¦å®ç°ä¸‹é¢è¿™æ®µï¼š</p><pre><code class="java">void fooBar(boolean z, int x) {    if (z)        foo(x);    else        bar(x);}</code></pre><p>æˆ‘ä»¬åœ¨ASMçš„å†™æ³•ï¼š</p><pre><code class="java">ClassWriter classWriter = ...;MethodVisitor mv = classWriter.visitMethod(0, &quot;fooBar&quot;, &quot;(ZI)V&quot;, null, null);mv.visitCode();mv.visitVarInsn(ILOAD, 1);Label label1 = new Label();mv.visitJumpInsn(IFEQ, label1);mv.visitVarInsn(ALOAD, 0);mv.visitVarInsn(ILOAD, 2);mv.visitMethodInsn(INVOKEVIRTUAL, &quot;Foo&quot;, &quot;foo&quot;, &quot;(I)V&quot;, false);Label label2 = new Label();mv.visitJumpInsn(GOTO, label2);mv.visitLabel(label1);mv.visitVarInsn(ALOAD, 0);mv.visitVarInsn(ILOAD, 2);mv.visitMethodInsn(INVOKEVIRTUAL, &quot;Foo&quot;, &quot;bar&quot;, &quot;(I)V&quot;, false);mv.visitLabel(label2);mv.visitInsn(RETURN);mv.visitEnd();</code></pre><p>åœ¨JEP 457ä¸­çš„å†™æ³•ï¼š</p><pre><code class="java">ClassBuilder classBuilder = ...;classBuilder.withMethod(&quot;fooBar&quot;, MethodTypeDesc.of(CD_void, CD_boolean, CD_int), flags,                        methodBuilder -&gt; methodBuilder.withCode(codeBuilder -&gt; {    Label label1 = codeBuilder.newLabel();    Label label2 = codeBuilder.newLabel();    codeBuilder.iload(1)        .ifeq(label1)        .aload(0)        .iload(2)        .invokevirtual(ClassDesc.of(&quot;Foo&quot;), &quot;foo&quot;, MethodTypeDesc.of(CD_void, CD_int))        .goto_(label2)        .labelBinding(label1)        .aload(0)        .iload(2)        .invokevirtual(ClassDesc.of(&quot;Foo&quot;), &quot;bar&quot;, MethodTypeDesc.of(CD_void, CD_int))        .labelBinding(label2);        .return_();});</code></pre><p>è¿˜å¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="java">CodeBuilder classBuilder = ...;classBuilder.withMethod(&quot;fooBar&quot;, MethodTypeDesc.of(CD_void, CD_boolean, CD_int), flags,                        methodBuilder -&gt; methodBuilder.withCode(codeBuilder -&gt; {    codeBuilder.iload(codeBuilder.parameterSlot(0))               .ifThenElse(                   b1 -&gt; b1.aload(codeBuilder.receiverSlot())                           .iload(codeBuilder.parameterSlot(1))                           .invokevirtual(ClassDesc.of(&quot;Foo&quot;), &quot;foo&quot;,                                          MethodTypeDesc.of(CD_void, CD_int)),                   b2 -&gt; b2.aload(codeBuilder.receiverSlot())                           .iload(codeBuilder.parameterSlot(1))                           .invokevirtual(ClassDesc.of(&quot;Foo&quot;), &quot;bar&quot;,                                          MethodTypeDesc.of(CD_void, CD_int))               .return_();});</code></pre><p>å†™æ³•ä¸Šæ¯”ASMæ›´åŠ ä¼˜é›…ã€‚</p><h3 id="JEP-459-å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString-Templatesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"><a href="#JEP-459-å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString-Templatesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 459: å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString Templatesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"></a>JEP 459: å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString Templatesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</h3><p>å­—ç¬¦ä¸²æ¨¡æ¿æ˜¯ä¸€ä¸ªå€¼å¾—æœŸå¾…çš„åŠŸèƒ½ï¼Œæ—¨åœ¨å¢å¼ºJavaç¼–ç¨‹è¯­è¨€ã€‚è¯¥ç‰¹æ€§é€šè¿‡å°†æ–‡å­—æ–‡æœ¬ä¸åµŒå…¥å¼è¡¨è¾¾å¼å’Œæ¨¡æ¿å¤„ç†å™¨ç»“åˆï¼Œç”Ÿæˆä¸“é—¨çš„ç»“æœï¼Œä»è€Œè¡¥å……äº†Javaç°æœ‰çš„å­—ç¬¦ä¸²æ–‡å­—å’Œæ–‡æœ¬å—ã€‚</p><p>ç›¸å¯¹Java21ä¸­JEP 430ï¼Œä¸»è¦çš„ä¼˜åŒ–æ”¹åŠ¨åŒ…æ‹¬ï¼š</p><ul><li>å¢å¼ºçš„è¡¨è¾¾å¼æ”¯æŒï¼šå…è®¸åœ¨å­—ç¬¦ä¸²æ¨¡æ¿ä¸­åµŒå…¥æ›´å¤æ‚çš„è¡¨è¾¾å¼ï¼Œè¿™äº›è¡¨è¾¾å¼å¯ä»¥åœ¨è¿è¡Œæ—¶è¢«è®¡ç®—å’Œæ ¡éªŒã€‚</li><li>æ¨¡æ¿å¤„ç†å™¨ï¼šå¼•å…¥äº†æ¨¡æ¿å¤„ç†å™¨çš„æ¦‚å¿µï¼Œä½¿å¾—å­—ç¬¦ä¸²æ¨¡æ¿å¯ä»¥æ›´åŠ çµæ´»åœ°å¤„ç†ä¸åŒçš„æ•°æ®æ ¼å¼å’Œç»“æ„ã€‚</li><li>å®‰å…¨æ€§æå‡ï¼šé€šè¿‡åœ¨è¿è¡Œæ—¶å¯¹åµŒå…¥çš„è¡¨è¾¾å¼è¿›è¡Œæ ¡éªŒï¼Œæé«˜äº†ä»£ç çš„å®‰å…¨æ€§ã€‚</li></ul><p>å­—ç¬¦ä¸²æ¨¡æ¿é€šè¿‡å°†æ–‡æœ¬å’ŒåµŒå…¥å¼è¡¨è¾¾å¼ç»“åˆåœ¨ä¸€èµ·ï¼Œä½¿å¾—Javaç¨‹åºèƒ½å¤Ÿä»¥ä¸€ç§æ›´åŠ ç›´è§‚å’Œå®‰å…¨çš„æ–¹å¼æ„å»ºå­—ç¬¦ä¸²ã€‚ä¸ä¼ ç»Ÿçš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆä½¿ç”¨+æ“ä½œç¬¦ï¼‰ã€<code>StringBuilder</code>æˆ–<code>String.format</code> ç­‰æ–¹æ³•ç›¸æ¯”ï¼Œå­—ç¬¦ä¸²æ¨¡æ¿æä¾›äº†ä¸€ç§æ›´åŠ æ¸…æ™°å’Œå®‰å…¨çš„å­—ç¬¦ä¸²æ„å»ºæ–¹å¼ã€‚ç‰¹åˆ«æ˜¯å½“å­—ç¬¦ä¸²éœ€è¦ä»ç”¨æˆ·æä¾›çš„å€¼æ„å»ºå¹¶ä¼ é€’ç»™å…¶ä»–ç³»ç»Ÿæ—¶ï¼ˆä¾‹å¦‚ï¼Œæ„å»ºæ•°æ®åº“æŸ¥è¯¢ï¼‰ï¼Œä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿å¯ä»¥æœ‰æ•ˆåœ°éªŒè¯å’Œè½¬æ¢æ¨¡æ¿åŠå…¶åµŒå…¥è¡¨è¾¾å¼çš„å€¼ï¼Œä»è€Œæé«˜Javaç¨‹åºçš„å®‰å…¨æ€§ã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡ä»£ç çœ‹ä¸€ä¸‹è¿™ä¸ªç‰¹æ€§çš„é­…åŠ›ï¼š</p><pre><code class="java">public static void main(String[] args) {    // æ‹¼è£…å˜é‡    String name = &quot;çœ‹å±±&quot;;    String info = STR. &quot;My name is \{ name }&quot; ;    assert info.equals(&quot;My name is çœ‹å±±&quot;);    // æ‹¼è£…å˜é‡    String firstName = &quot;Howard&quot;;    String lastName = &quot;Liu&quot;;    String fullName = STR. &quot;\{ firstName } \{ lastName }&quot; ;    assert fullName.equals(&quot;Howard Liu&quot;);    String sortName = STR. &quot;\{ lastName }, \{ firstName }&quot; ;    assert sortName.equals(&quot;Liu, Howard&quot;);    // æ¨¡æ¿ä¸­è°ƒç”¨æ–¹æ³•    String s2 = STR. &quot;You have a \{ getOfferType() } waiting for you!&quot; ;    assert s2.equals(&quot;You have a gift waiting for you!&quot;);    Request req = new Request(&quot;2017-07-19&quot;, &quot;09:15&quot;, &quot;https://www.howardliu.cn&quot;);    // æ¨¡æ¿ä¸­å¼•ç”¨å¯¹è±¡å±æ€§    String s3 = STR. &quot;Access at \{ req.date } \{ req.time } from \{ req.address }&quot; ;    assert s3.equals(&quot;Access at 2017-07-19 09:15 from https://www.howardliu.cn&quot;);    LocalTime now = LocalTime.now();    String markTime = DateTimeFormatter            .ofPattern(&quot;HH:mm:ss&quot;)            .format(now);    // æ¨¡æ¿ä¸­è°ƒç”¨æ–¹æ³•    String time = STR. &quot;The time is \{            // The java.time.format package is very useful            DateTimeFormatter                    .ofPattern(&quot;HH:mm:ss&quot;)                    .format(now)            } right now&quot; ;    assert time.equals(&quot;The time is &quot; + markTime + &quot; right now&quot;);    // æ¨¡æ¿åµŒå¥—æ¨¡æ¿    String[] fruit = {&quot;apples&quot;, &quot;oranges&quot;, &quot;peaches&quot;};    String s4 = STR. &quot;\{ fruit[0] }, \{            STR. &quot;\{ fruit[1] }, \{ fruit[2] }&quot;            }&quot; ;    assert s4.equals(&quot;apples, oranges, peaches&quot;);    // æ¨¡æ¿ä¸æ–‡æœ¬å—ç»“åˆ    String title = &quot;My Web Page&quot;;    String text = &quot;Hello, world&quot;;    String html = STR. &quot;&quot;&quot;    &lt;html&gt;      &lt;head&gt;        &lt;title&gt;\{ title }&lt;/title&gt;      &lt;/head&gt;      &lt;body&gt;        &lt;p&gt;\{ text }&lt;/p&gt;      &lt;/body&gt;    &lt;/html&gt;    &quot;&quot;&quot; ;    assert html.equals(&quot;&quot;&quot;            &lt;html&gt;              &lt;head&gt;                &lt;title&gt;My Web Page&lt;/title&gt;              &lt;/head&gt;              &lt;body&gt;                &lt;p&gt;Hello, world&lt;/p&gt;              &lt;/body&gt;            &lt;/html&gt;            &quot;&quot;&quot;);    // å¸¦æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²æ¨¡æ¿    record Rectangle(String name, double width, double height) {        double area() {            return width * height;        }    }    Rectangle[] zone = new Rectangle[] {            new Rectangle(&quot;Alfa&quot;, 17.8, 31.4),            new Rectangle(&quot;Bravo&quot;, 9.6, 12.4),            new Rectangle(&quot;Charlie&quot;, 7.1, 11.23),    };    String table = FMT. &quot;&quot;&quot;        Description     Width    Height     Area        %-12s\{ zone[0].name }  %7.2f\{ zone[0].width }  %7.2f\{ zone[0].height }     %7.2f\{ zone[0].area() }        %-12s\{ zone[1].name }  %7.2f\{ zone[1].width }  %7.2f\{ zone[1].height }     %7.2f\{ zone[1].area() }        %-12s\{ zone[2].name }  %7.2f\{ zone[2].width }  %7.2f\{ zone[2].height }     %7.2f\{ zone[2].area() }        \{ &quot; &quot;.repeat(28) } Total %7.2f\{ zone[0].area() + zone[1].area() + zone[2].area() }        &quot;&quot;&quot;;    assert table.equals(&quot;&quot;&quot;            Description     Width    Height     Area            Alfa            17.80    31.40      558.92            Bravo            9.60    12.40      119.04            Charlie          7.10    11.23       79.73                                         Total  757.69            &quot;&quot;&quot;);}public static String getOfferType() {    return &quot;gift&quot;;}record Request(String date, String time, String address) {}</code></pre><p>è¿™ä¸ªåŠŸèƒ½å½“å‰æ˜¯ç¬¬äºŒæ¬¡é¢„è§ˆï¼ŒJava23çš„8.12ç‰ˆæœ¬ä¸­è¿˜æ²¡æœ‰å±•ç¤ºå­—ç¬¦ä¸²æ¨¡æ¿çš„ç¬¬ä¸‰æ¬¡é¢„è§ˆï¼ˆJEP 465: String Templatesï¼‰ï¼Œè¿˜ä¸èƒ½ç¡®å®šä»€ä¹ˆæ—¶å€™å¯ä»¥æ­£å¼ç”¨ä¸Šã€‚</p><h3 id="JEP-461-æµæ”¶é›†å™¨ï¼ˆStream-Gatherersï¼Œé¢„è§ˆï¼‰"><a href="#JEP-461-æµæ”¶é›†å™¨ï¼ˆStream-Gatherersï¼Œé¢„è§ˆï¼‰" class="headerlink" title="JEP 461: æµæ”¶é›†å™¨ï¼ˆStream Gatherersï¼Œé¢„è§ˆï¼‰"></a>JEP 461: æµæ”¶é›†å™¨ï¼ˆStream Gatherersï¼Œé¢„è§ˆï¼‰</h3><p>JEP 461æ—¨åœ¨å¢å¼ºJava Stream APIã€ä»¥æ”¯æŒè‡ªå®šä¹‰ä¸­é—´æ“ä½œã€‚è¿™ä¸€ç‰¹æ€§å…è®¸å¼€å‘è€…ä»¥æ›´çµæ´»å’Œé«˜æ•ˆçš„æ–¹å¼å¤„ç†æ•°æ®æµï¼Œä»è€Œæé«˜æµç®¡é“çš„è¡¨è¾¾èƒ½åŠ›å’Œè½¬æ¢æ•°æ®çš„èƒ½åŠ›ã€‚</p><p>æµæ”¶é›†å™¨é€šè¿‡å¼•å…¥æ–°çš„ä¸­é—´æ“ä½œ<code>Stream::gather(Gatherer)</code>ï¼Œå…è®¸å¼€å‘è€…å®šä¹‰è‡ªå®šä¹‰çš„è½¬æ¢å®ä½“ï¼ˆç§°ä¸ºGathererï¼‰ï¼Œä»è€Œå¯¹æµä¸­çš„å…ƒç´ è¿›è¡Œè½¬æ¢ã€‚è¿™äº›è½¬æ¢å¯ä»¥æ˜¯ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€æˆ–å¤šå¯¹å¤šçš„è½¬æ¢æ–¹å¼ã€‚æ­¤å¤–ï¼Œæµæ”¶é›†å™¨è¿˜æ”¯æŒä¿å­˜ä»¥å‰é‡åˆ°çš„å…ƒç´ ï¼Œä»¥ä¾¿è¿›è¡Œè¿›ä¸€æ­¥çš„å¤„ç†ã€‚</p><p>æˆ‘ä»¬é€šè¿‡å®ä¾‹æ„Ÿå—ä¸‹è¿™ä¸€ç‰¹æ€§çš„é­…åŠ›ï¼š</p><pre><code class="java">public record WindowFixed&lt;TR&gt;(int windowSize) implements Gatherer&lt;TR, ArrayList&lt;TR&gt;, List&lt;TR&gt;&gt; {    public static void main(String[] args) {        var list = Stream.of(1, 2, 3, 4, 5, 6, 7, 8, 9)                .gather(new WindowFixed&lt;&gt;(3))                .toList();        // [[1, 2, 3], [4, 5, 6], [7, 8, 9]]        System.out.println(list);    }    public WindowFixed {        // Validate input        if (windowSize &lt; 1) {            throw new IllegalArgumentException(&quot;window size must be positive&quot;);        }    }    @Override    public Supplier&lt;ArrayList&lt;TR&gt;&gt; initializer() {        // åˆ›å»ºä¸€ä¸ª ArrayList æ¥ä¿å­˜å½“å‰æ‰“å¼€çš„çª—å£        return () -&gt; new ArrayList&lt;&gt;(windowSize);    }    @Override    public Integrator&lt;ArrayList&lt;TR&gt;, TR, List&lt;TR&gt;&gt; integrator() {        // é›†æˆå™¨åœ¨æ¯æ¬¡æ¶ˆè´¹å…ƒç´ æ—¶è¢«è°ƒç”¨        return Gatherer.Integrator.ofGreedy((window, element, downstream) -&gt; {            // å°†å…ƒç´ æ·»åŠ åˆ°å½“å‰æ‰“å¼€çš„çª—å£            window.add(element);            // ç›´åˆ°è¾¾åˆ°æ‰€éœ€çš„çª—å£å¤§å°ï¼Œ            // è¿”å› true è¡¨ç¤ºå¸Œæœ›ç»§ç»­æ¥æ”¶æ›´å¤šå…ƒç´             if (window.size() &lt; windowSize) {                return true;            }            // å½“çª—å£å·²æ»¡æ—¶ï¼Œé€šè¿‡åˆ›å»ºå‰¯æœ¬å…³é—­çª—å£            var result = new ArrayList&lt;TR&gt;(window);            // æ¸…ç©ºçª—å£ä»¥ä¾¿å¼€å§‹æ–°çš„çª—å£            window.clear();            // å°†å…³é—­çš„çª—å£å‘é€åˆ°ä¸‹æ¸¸            return downstream.push(result);        });    }    // ç”±äºæ­¤æ“ä½œæœ¬è´¨ä¸Šæ˜¯é¡ºåºçš„ï¼Œå› æ­¤æ— æ³•å¹¶è¡ŒåŒ–ï¼Œå› æ­¤çœç•¥äº†åˆå¹¶å™¨    @Override    public BiConsumer&lt;ArrayList&lt;TR&gt;, Downstream&lt;? super List&lt;TR&gt;&gt;&gt; finisher() {        // ç»ˆç»“å™¨åœ¨æ²¡æœ‰æ›´å¤šå…ƒç´ ä¼ é€’æ—¶è¿è¡Œ        return (window, downstream) -&gt; {            // å¦‚æœä¸‹æ¸¸ä»ç„¶æ¥å—æ›´å¤šå…ƒç´ ä¸”å½“å‰æ‰“å¼€çš„çª—å£éç©ºï¼Œåˆ™å°†å…¶å‰¯æœ¬å‘é€åˆ°ä¸‹æ¸¸            if (!downstream.isRejecting() &amp;&amp; !window.isEmpty()) {                downstream.push(new ArrayList&lt;TR&gt;(window));                window.clear();            }        };    }}</code></pre><p>è¯¥ç‰¹æ€§è¿˜æ˜¯é¢„è§ˆç‰ˆï¼Œç­‰æ­£å¼å‘å¸ƒåå†ç»†è¯´ã€‚</p><h3 id="JEP-462-ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured-Concurrencyï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"><a href="#JEP-462-ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured-Concurrencyï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 462: ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured Concurrencyï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"></a>JEP 462: ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured Concurrencyï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</h3><p>ç»“æ„åŒ–å¹¶å‘APIï¼ˆStructured Concurrency APIï¼‰æ—¨åœ¨ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªAPIæ¥å¤„ç†åœ¨ä¸åŒçº¿ç¨‹ä¸­è¿è¡Œçš„å¤šä¸ªä»»åŠ¡ä½œä¸ºä¸€ä¸ªå•ä¸€å·¥ä½œå•å…ƒï¼Œä»è€Œç®€åŒ–é”™è¯¯å¤„ç†å’Œå–æ¶ˆæ“ä½œï¼Œæé«˜å¯é æ€§ï¼Œå¹¶å¢å¼ºå¯è§‚æµ‹æ€§ã€‚æœ¬æ¬¡å‘å¸ƒæ˜¯ç¬¬ä¸€æ¬¡é¢„è§ˆã€‚</p><p>ç»“æ„åŒ–å¹¶å‘APIæä¾›äº†æ˜ç¡®çš„è¯­æ³•ç»“æ„æ¥å®šä¹‰å­ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶å¯ç”¨ä¸€ä¸ªè¿è¡Œæ—¶è¡¨ç¤ºçº¿ç¨‹é—´çš„å±‚æ¬¡ç»“æ„ã€‚è¿™æœ‰åŠ©äºå®ç°é”™è¯¯ä¼ æ’­å’Œå–æ¶ˆä»¥åŠå¹¶å‘ç¨‹åºçš„æœ‰æ„ä¹‰è§‚å¯Ÿã€‚</p><p>åœ¨JEP 462ä¸­ï¼Œç»“æ„åŒ–å¹¶å‘APIè¢«è¿›ä¸€æ­¥å®Œå–„ï¼Œä½¿å…¶æ›´åŠ æ˜“äºä½¿ç”¨å’Œç»´æŠ¤ã€‚ä¸»è¦çš„ä¼˜åŒ–åŒ…æ‹¬ï¼š</p><ul><li>å·¥ä½œå•å…ƒæ¦‚å¿µï¼šå°†ä¸€ç»„ç›¸å…³ä»»åŠ¡è§†ä¸ºä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œè¿™æ ·å¯ä»¥ç®€åŒ–é”™è¯¯å¤„ç†å’Œå–æ¶ˆæ“ä½œã€‚</li><li>å¢å¼ºçš„å¯è§‚æµ‹æ€§ï¼šé€šè¿‡APIæä¾›äº†æ›´å¥½çš„é”™è¯¯å¤„ç†æœºåˆ¶å’Œä»»åŠ¡çŠ¶æ€è·Ÿè¸ªåŠŸèƒ½ï¼Œå¢å¼ºäº†ä»£ç çš„å¯è§‚å¯Ÿæ€§ã€‚</li><li>è™šæ‹Ÿçº¿ç¨‹æ”¯æŒï¼šä¸Project Loomé¡¹ç›®ç»“åˆï¼Œæ”¯æŒåœ¨çº¿ç¨‹å†…å’Œçº¿ç¨‹é—´å…±äº«ä¸å¯å˜æ•°æ®ï¼Œè¿™åœ¨ä½¿ç”¨å¤§é‡è™šæ‹Ÿçº¿ç¨‹æ—¶å°¤å…¶æœ‰ç”¨ã€‚</li></ul><p>Javaä½¿ç”¨å¼‚å¸¸å¤„ç†æœºåˆ¶æ¥ç®¡ç†è¿è¡Œæ—¶é”™è¯¯å’Œå…¶ä»–å¼‚å¸¸ã€‚å½“å¼‚å¸¸åœ¨ä»£ç ä¸­äº§ç”Ÿæ—¶ï¼Œå¦‚ä½•è¢«ä¼ é€’å’Œå¤„ç†çš„è¿‡ç¨‹ç§°ä¸ºå¼‚å¸¸ä¼ æ’­ã€‚</p><p>åœ¨ç»“æ„åŒ–å¹¶å‘ç¯å¢ƒä¸­ï¼Œå¼‚å¸¸å¯ä»¥é€šè¿‡æ˜¾å¼åœ°ä»å½“å‰ç¯å¢ƒä¸­æŠ›å‡ºå¹¶ä¼ æ’­åˆ°æ›´å¤§çš„ç¯å¢ƒä¸­å»å¤„ç†ã€‚</p><p>åœ¨Javaå¹¶å‘ç¼–ç¨‹ä¸­ï¼Œéå—æ£€å¼‚å¸¸çš„å¤„ç†æ˜¯ç¨‹åºå¥å£®æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ç‰¹åˆ«æ˜¯å¯¹äºéå—æ£€å¼‚å¸¸çš„å¤„ç†ï¼Œè¿™å…³ç³»åˆ°ç¨‹åºåœ¨é‡åˆ°é”™è¯¯æ—¶æ˜¯å¦èƒ½å¤Ÿä¼˜é›…åœ°ç»§ç»­è¿è¡Œæˆ–è€…è‡³å°‘æä¾›æœ‰æ„ä¹‰çš„åé¦ˆã€‚</p><pre><code class="java">try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {    var task1 = scope.fork(() -&gt; {        Thread.sleep(1000);        return &quot;Result from task 1&quot;;    });    var task2 = scope.fork(() -&gt; {        Thread.sleep(2000);        return &quot;Result from task 2&quot;;    });    scope.join();    scope.throwIfFailed(RuntimeException::new);    System.out.println(task1.get());    System.out.println(task2.get());} catch (Exception e) {    e.printStackTrace();}</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œhandle()æ–¹æ³•ä½¿ç”¨StructuredTaskScopeæ¥å¹¶è¡Œæ‰§è¡Œä¸¤ä¸ªå­ä»»åŠ¡ï¼štask1å’Œtask2ã€‚é€šè¿‡ä½¿ç”¨try-with-resourcesè¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œå¹¶ç¡®ä¿æ‰€æœ‰å­ä»»åŠ¡éƒ½åœ¨tryå—ç»“æŸæ—¶æ­£ç¡®å®Œæˆæˆ–è¢«å–æ¶ˆã€‚è¿™ç§æ–¹å¼ä½¿å¾—çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œä»»åŠ¡çš„é€»è¾‘ç»“æ„ç´§å¯†ç›¸å…³ï¼Œæé«˜äº†ä»£ç çš„æ¸…æ™°åº¦å’Œé”™è¯¯å¤„ç†çš„æ•ˆç‡ã€‚ä½¿ç”¨ StructuredTaskScope å¯ä»¥ç¡®ä¿ä¸€äº›æœ‰ä»·å€¼çš„å±æ€§ï¼š</p><ul><li>é”™è¯¯å¤„ç†ä¸çŸ­è·¯ï¼šå¦‚æœtask1æˆ–task2å­ä»»åŠ¡ä¸­çš„ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦ä¸€ä¸ªå¦‚æœå°šæœªå®Œæˆåˆ™ä¼šè¢«å–æ¶ˆã€‚ï¼ˆè¿™ç”± ShutdownOnFailure å®ç°çš„å…³é—­ç­–ç•¥æ¥ç®¡ç†ï¼›è¿˜æœ‰å…¶ä»–ç­–ç•¥å¯èƒ½ï¼‰ã€‚</li><li>å–æ¶ˆä¼ æ’­ï¼šå¦‚æœåœ¨è¿è¡Œä¸Šé¢æ–¹æ³•çš„çº¿ç¨‹åœ¨è°ƒç”¨ join() ä¹‹å‰æˆ–ä¹‹ä¸­è¢«ä¸­æ–­ï¼Œåˆ™çº¿ç¨‹åœ¨é€€å‡ºä½œç”¨åŸŸæ—¶ä¼šè‡ªåŠ¨å–æ¶ˆä¸¤ä¸ªå­ä»»åŠ¡ã€‚</li><li>æ¸…æ™°æ€§ï¼šè®¾ç½®å­ä»»åŠ¡ï¼Œç­‰å¾…å®ƒä»¬å®Œæˆæˆ–è¢«å–æ¶ˆï¼Œç„¶åå†³å®šæ˜¯æˆåŠŸï¼ˆå¹¶å¤„ç†å·²ç»å®Œæˆçš„å­ä»»åŠ¡çš„ç»“æœï¼‰è¿˜æ˜¯å¤±è´¥ï¼ˆå­ä»»åŠ¡å·²ç»å®Œæˆï¼Œå› æ­¤æ²¡æœ‰æ›´å¤šéœ€è¦æ¸…ç†çš„ï¼‰ã€‚</li><li>å¯è§‚å¯Ÿæ€§ï¼šçº¿ç¨‹è½¬å‚¨æ¸…æ¥šåœ°æ˜¾ç¤ºäº†ä»»åŠ¡å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­è¿è¡Œtask1æˆ–task2çš„çº¿ç¨‹è¢«æ˜¾ç¤ºä¸ºä½œç”¨åŸŸçš„å­ä»»åŠ¡ã€‚</li></ul><p>ä¸Šé¢çš„ç¤ºä¾‹èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³æˆ‘ä»¬çš„ä¸€ä¸ªç—›ç‚¹ï¼Œæœ‰ä¸¤ä¸ªå¯å¹¶è¡Œçš„ä»»åŠ¡Aå’ŒBï¼ŒA+Bæ‰æ˜¯å®Œæ•´ç»“æœï¼Œä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿä¸éœ€è¦æˆåŠŸï¼Œç»“æ„åŒ–å¹¶å‘APIå°±å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°è¿™ä¸ªé€»è¾‘ã€‚</p><h3 id="JEP-463-éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹ä¸»æ–¹æ³•ï¼ˆImplicitly-Declared-Classes-and-Instance-Main-Methodsï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"><a href="#JEP-463-éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹ä¸»æ–¹æ³•ï¼ˆImplicitly-Declared-Classes-and-Instance-Main-Methodsï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 463: éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹ä¸»æ–¹æ³•ï¼ˆImplicitly Declared Classes and Instance Main Methodsï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"></a>JEP 463: éšå¼å£°æ˜çš„ç±»å’Œå®ä¾‹ä¸»æ–¹æ³•ï¼ˆImplicitly Declared Classes and Instance Main Methodsï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</h3><p>æ— è®ºå­¦ä¹ å“ªé—¨è¯­è¨€ï¼Œç¬¬ä¸€è¯¾ä¸€å®šæ˜¯æ‰“å°<code>Hello, World!</code>ï¼ŒJavaä¸­çš„å†™æ³•æ˜¯ï¼š</p><pre><code class="java">public class HelloWorld {    public static void main(String[] args) {        System.out.println (&quot;Hello, World!&quot;);    }}</code></pre><p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œä¸€å®šä¼šæœ‰å¾ˆå¤šç–‘é—®ï¼Œ<code>public</code>å¹²å•¥çš„ï¼Œ<code>main</code>æ–¹æ³•çš„çº¦å®šå‚æ•°<code>args</code>æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿç„¶åè€å¸ˆå°±è¯´ï¼Œè¿™å°±æ˜¯æ¨¡æ¿ï¼Œç…§ç€æŠ„å°±è¡Œï¼Œä¸è¿™æ ·å†™ä¸è¿è¡Œã€‚</p><p>JEP 445ç‰¹æ€§åï¼Œå¯ä»¥ç®€åŒ–ä¸ºï¼š</p><pre><code class="java">class HelloWorld {    void main() {        System.out.println (&quot;Hello, World!&quot;);    }}</code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="java">String greeting() { return &quot;Hello, World!&quot;; }void main() {    System.out.println(greeting());}</code></pre><p><code>main</code>æ–¹æ³•ç›´æ¥ç®€åŒ–ä¸ºåå­—å’Œæ‹¬å·ï¼Œç”šè‡³è¿ç±»ä¹Ÿä¸éœ€è¦æ˜¾æ€§å®šä¹‰äº†ã€‚è™½ç„¶çœ‹èµ·æ¥æ²¡å•¥ç”¨ï¼Œä½†æ˜¯åœ¨JShellä¸­ä½¿ç”¨ï¼Œå°±æ¯”è¾ƒå‹å¥½äº†ã€‚</p><h3 id="JEP-464-ä½œç”¨åŸŸå€¼ï¼ˆScoped-Valuesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"><a href="#JEP-464-ä½œç”¨åŸŸå€¼ï¼ˆScoped-Valuesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 464: ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"></a>JEP 464: ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</h3><p>ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼‰åœ¨Java20å­µåŒ–ï¼Œåœ¨Java21ç¬¬ä¸€æ¬¡é¢„è§ˆï¼Œåœ¨Java22ç¬¬äºŒæ¬¡é¢„è§ˆï¼Œæ—¨åœ¨æä¾›ä¸€ç§å®‰å…¨ä¸”é«˜æ•ˆçš„æ–¹æ³•æ¥å…±äº«æ•°æ®ï¼Œæ— éœ€ä½¿ç”¨æ–¹æ³•å‚æ•°ã€‚è¿™ä¸€ç‰¹æ€§å…è®¸åœ¨ä¸ä½¿ç”¨æ–¹æ³•å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå°†æ•°æ®å®‰å…¨åœ°å…±äº«ç»™æ–¹æ³•ï¼Œä¼˜å…ˆäºçº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨å¤§é‡è™šæ‹Ÿçº¿ç¨‹æ—¶ã€‚</p><p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œä½œç”¨åŸŸå€¼å¯ä»¥åœ¨çº¿ç¨‹å†…å’Œçº¿ç¨‹é—´å…±äº«ä¸å¯å˜æ•°æ®ï¼Œä¾‹å¦‚ä»çˆ¶çº¿ç¨‹å‘å­çº¿ç¨‹ä¼ é€’æ•°æ®ï¼Œä»è€Œè§£å†³äº†åœ¨å¤šçº¿ç¨‹åº”ç”¨ä¸­ä¼ é€’æ•°æ®çš„é—®é¢˜ã€‚æ­¤å¤–ï¼Œä½œç”¨åŸŸå€¼æé«˜äº†æ•°æ®çš„å®‰å…¨æ€§ã€ä¸å˜æ€§å’Œå°è£…æ€§ï¼Œå¹¶ä¸”åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨äº‹åŠ¡ã€å®‰å…¨ä¸»ä½“å’Œå…¶ä»–å½¢å¼çš„å…±äº«ä¸Šä¸‹æ–‡çš„åº”ç”¨ç¨‹åºä¸­è¡¨ç°å°¤ä¸ºçªå‡ºã€‚</p><p>ä½œç”¨åŸŸå€¼çš„ä¸»è¦ç‰¹ç‚¹ï¼š</p><ul><li>ä¸å¯å˜æ€§ï¼šä½œç”¨åŸŸå€¼æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦è®¾ç½®ï¼Œå…¶å€¼å°±ä¸èƒ½æ›´æ”¹ã€‚è¿™ç§ä¸å¯å˜æ€§å‡å°‘äº†å¹¶å‘ç¼–ç¨‹ä¸­æ„å¤–å‰¯ä½œç”¨çš„é£é™©ã€‚</li><li>ä½œç”¨åŸŸç”Ÿå‘½å‘¨æœŸï¼šä½œç”¨åŸŸå€¼çš„ç”Ÿå‘½å‘¨æœŸä»…é™äº run æ–¹æ³•å®šä¹‰çš„ä½œç”¨åŸŸã€‚ä¸€æ—¦æ‰§è¡Œç¦»å¼€è¯¥ä½œç”¨åŸŸï¼Œä½œç”¨åŸŸå€¼å°†ä¸å†å¯è®¿é—®ã€‚</li><li>ç»§æ‰¿æ€§ï¼šå­çº¿ç¨‹ä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶çº¿ç¨‹çš„ä½œç”¨åŸŸå€¼ï¼Œä»è€Œå…è®¸åœ¨çº¿ç¨‹è¾¹ç•Œé—´æ— ç¼å…±äº«æ•°æ®ã€‚</li></ul><p>åœ¨è¿™ä¸ªåŠŸèƒ½ä¹‹å‰ï¼Œåœ¨å¤šçº¿ç¨‹é—´ä¼ é€’æ•°æ®ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p><ol><li>æ–¹æ³•å‚æ•°ï¼šæ˜¾ç¤ºå‚æ•°ä¼ é€’ï¼›ç¼ºç‚¹æ˜¯æ–°å¢å‚æ•°æ—¶ä¿®æ”¹è”åŠ¨ä¿®æ”¹ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå¦‚æœæ˜¯æ¡†æ¶æˆ–SDKå±‚é¢çš„ï¼Œæ— æ³•åšåˆ°å‘ä¸‹å…¼å®¹ã€‚</li><li><code>ThreadLocal</code>ï¼šåœ¨<code>ThreadLocal</code>ä¿å­˜å½“å‰çº¿ç¨‹å˜é‡ã€‚</li></ol><p>ä½¿ç”¨è¿‡<code>ThreadLocal</code>çš„éƒ½æ¸…æ¥šï¼Œ<code>ThreadLocal</code>ä¼šæœ‰ä¸‰å¤§é—®é¢˜ã€‚</p><ol><li>æ— çº¦æŸçš„å¯å˜æ€§ï¼šæ¯ä¸ªçº¿ç¨‹å±€éƒ¨å˜é‡éƒ½æ˜¯å¯å˜çš„ã€‚ä»»ä½•å¯ä»¥è°ƒç”¨çº¿ç¨‹å±€éƒ¨å˜é‡çš„<code>get</code>æ–¹æ³•çš„ä»£ç éƒ½å¯ä»¥éšæ—¶è°ƒç”¨è¯¥å˜é‡çš„<code>set</code>æ–¹æ³•ã€‚å³ä½¿çº¿ç¨‹å±€éƒ¨å˜é‡ä¸­çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œæ¯ä¸ªå­—æ®µéƒ½è¢«å£°æ˜ä¸ºfinalï¼Œæƒ…å†µä»ç„¶å¦‚æ­¤ã€‚<code>ThreadLocal</code> APIå…è®¸è¿™æ ·åšï¼Œä»¥ä¾¿æ”¯æŒä¸€ä¸ªå®Œå…¨é€šç”¨çš„é€šä¿¡æ¨¡å‹ï¼Œåœ¨è¯¥æ¨¡å‹ä¸­ï¼Œæ•°æ®å¯ä»¥åœ¨æ–¹æ³•ä¹‹é—´ä»¥ä»»ä½•æ–¹å‘æµåŠ¨ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ•°æ®æµæ··ä¹±ï¼Œå¯¼è‡´ç¨‹åºéš¾ä»¥åˆ†è¾¨å“ªä¸ªæ–¹æ³•æ›´æ–°å…±äº«çŠ¶æ€ä»¥åŠä»¥ä½•ç§é¡ºåºè¿›è¡Œã€‚</li><li>æ— ç•Œç”Ÿå­˜æœŸï¼šä¸€æ—¦é€šè¿‡<code>set</code>æ–¹æ³•è®¾ç½®äº†ä¸€ä¸ªçº¿ç¨‹å±€éƒ¨å˜é‡çš„å‰¯æœ¬ï¼Œè¯¥å€¼å°±ä¼šåœ¨è¯¥çº¿ç¨‹çš„ç”Ÿå­˜æœŸå†…ä¿ç•™ï¼Œæˆ–è€…ç›´åˆ°è¯¥çº¿ç¨‹ä¸­çš„ä»£ç è°ƒç”¨<code>remove</code>æ–¹æ³•ã€‚æˆ‘ä»¬æœ‰æ—¶å€™ä¼šå¿˜è®°è°ƒç”¨<code>remove</code>ï¼Œå¦‚æœä½¿ç”¨çº¿ç¨‹æ± ï¼Œåœ¨ä¸€ä¸ªä»»åŠ¡ä¸­è®¾ç½®çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼å¦‚æœä¸æ¸…é™¤ï¼Œå¯èƒ½ä¼šæ„å¤–æ³„æ¼åˆ°æ— å…³çš„ä»»åŠ¡ä¸­ï¼Œå¯¼è‡´å±é™©çš„å®‰å…¨æ¼æ´ï¼ˆæ¯”å¦‚äººå‘˜SSOï¼‰ã€‚å¯¹äºä¾èµ–äºçº¿ç¨‹å±€éƒ¨å˜é‡çš„æ— çº¦æŸå¯å˜æ€§çš„ç¨‹åºæ¥è¯´ï¼Œå¯èƒ½æ²¡æœ‰æ˜ç¡®çš„ç‚¹å¯ä»¥ä¿è¯çº¿ç¨‹è°ƒç”¨<code>remove</code>æ˜¯å®‰å…¨çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹çš„æ•°æ®åœ¨é€€å‡ºä¹‹å‰éƒ½ä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚</li><li>æ˜‚è´µçš„ç»§æ‰¿ï¼šå½“ä½¿ç”¨å¤§é‡çº¿ç¨‹æ—¶ï¼Œçº¿ç¨‹å±€éƒ¨å˜é‡çš„å¼€é”€å¯èƒ½ä¼šæ›´ç³Ÿç³•ï¼Œå› ä¸ºçˆ¶çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡å¯ä»¥è¢«å­çº¿ç¨‹ç»§æ‰¿ã€‚ï¼ˆäº‹å®ä¸Šï¼Œçº¿ç¨‹å±€éƒ¨å˜é‡å¹¶ä¸æ˜¯æŸä¸ªç‰¹å®šçº¿ç¨‹çš„æœ¬åœ°å˜é‡ã€‚ï¼‰å½“å¼€å‘äººå‘˜é€‰æ‹©åˆ›å»ºä¸€ä¸ªç»§æ‰¿äº†çº¿ç¨‹å±€éƒ¨å˜é‡çš„å­çº¿ç¨‹æ—¶ï¼Œè¯¥å­çº¿ç¨‹å¿…é¡»ä¸ºä¹‹å‰åœ¨çˆ¶çº¿ç¨‹ä¸­å†™å…¥çš„æ¯ä¸ªçº¿ç¨‹å±€éƒ¨å˜é‡åˆ†é…å­˜å‚¨ç©ºé—´ã€‚è¿™å¯èƒ½ä¼šæ˜¾è‘—å¢åŠ å†…å­˜å ç”¨ã€‚å­çº¿ç¨‹ä¸èƒ½å…±äº«çˆ¶çº¿ç¨‹ä½¿ç”¨çš„å­˜å‚¨ï¼Œå› ä¸ºThreadLocal APIè¦æ±‚æ›´æ”¹çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡å‰¯æœ¬åœ¨å…¶ä»–çº¿ç¨‹ä¸­ä¸å¯è§ã€‚è¿™ä¹Ÿä¼šæœ‰å¦ä¸€ä¸ªéšè—çš„é—®é¢˜ï¼Œå­çº¿ç¨‹æ²¡æœ‰åŠæ³•å‘çˆ¶çº¿ç¨‹<code>set</code>æ•°æ®ã€‚</li></ol><p>ä½œç”¨åŸŸå€¼å¯ä»¥æœ‰æ•ˆè§£å†³ä¸Šé¢æåˆ°çš„é—®é¢˜ï¼Œè€Œä¸”å†™èµ·æ¥æ›´åŠ ä¼˜é›…ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹ä½œç”¨åŸŸå€¼çš„ä½¿ç”¨ï¼š</p><pre><code class="java">// å£°æ˜ä¸€ä¸ªä½œç”¨åŸŸå€¼ç”¨äºå­˜å‚¨ç”¨æˆ·åpublic final static ScopedValue&lt;String&gt; USERNAME = ScopedValue.newInstance();private static final Runnable printUsername = () -&gt;        System.out.println(Thread.currentThread().threadId() + &quot; ç”¨æˆ·åæ˜¯ &quot; + USERNAME.get());public static void main(String[] args) throws Exception {    // å°†ç”¨æˆ·å &quot;Bob&quot; ç»‘å®šåˆ°ä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Bob&quot;).run(() -&gt; {        printUsername.run();        new Thread(printUsername).start();    });    // å°†ç”¨æˆ·å &quot;Chris&quot; ç»‘å®šåˆ°å¦ä¸€ä¸ªä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Chris&quot;).run(() -&gt; {        printUsername.run();        new Thread(() -&gt; {            new Thread(printUsername).start();            printUsername.run();        }).start();    });    // æ£€æŸ¥åœ¨ä»»ä½•ä½œç”¨åŸŸå¤– USERNAME æ˜¯å¦è¢«ç»‘å®š    System.out.println(&quot;ç”¨æˆ·åæ˜¯å¦è¢«ç»‘å®š: &quot; + USERNAME.isBound());}</code></pre><p>å†™èµ·æ¥å¹²å‡€åˆ©ç´¢ï¼Œè€Œä¸”åŠŸèƒ½æ›´å¼ºã€‚</p><h2 id="å­µåŒ–åŠŸèƒ½"><a href="#å­µåŒ–åŠŸèƒ½" class="headerlink" title="å­µåŒ–åŠŸèƒ½"></a>å­µåŒ–åŠŸèƒ½</h2><h3 id="JEP-460-å‘é‡APIï¼ˆVector-APIï¼Œç¬¬ä¸ƒæ¬¡å­µåŒ–ï¼‰"><a href="#JEP-460-å‘é‡APIï¼ˆVector-APIï¼Œç¬¬ä¸ƒæ¬¡å­µåŒ–ï¼‰" class="headerlink" title="JEP 460: å‘é‡APIï¼ˆVector APIï¼Œç¬¬ä¸ƒæ¬¡å­µåŒ–ï¼‰"></a>JEP 460: å‘é‡APIï¼ˆVector APIï¼Œç¬¬ä¸ƒæ¬¡å­µåŒ–ï¼‰</h3><p>å‘é‡APIçš„åŠŸèƒ½æ˜¯æä¾›ä¸€ä¸ªè¡¨è¾¾å‘é‡è®¡ç®—çš„APIï¼Œæ—¨åœ¨é€šè¿‡å¼•å…¥å‘é‡è®¡ç®—APIæ¥æé«˜Javaåº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚è¿™ä¸€APIå…è®¸å¼€å‘è€…åœ¨æ”¯æŒçš„CPUæ¶æ„ä¸Šå¯é åœ°ç¼–è¯‘ä¸ºæœ€ä½³å‘é‡æŒ‡ä»¤ï¼Œä»è€Œå®ç°æ¯”ç­‰æ•ˆçš„æ ‡é‡è®¡ç®—æ›´é«˜çš„æ€§èƒ½ã€‚è¿™äº›è®¡ç®—åœ¨è¿è¡Œæ—¶å¯é åœ°ç¼–è¯‘æˆæ”¯æŒçš„CPUæ¶æ„ä¸Šçš„æœ€ä¼˜å‘é‡æŒ‡ä»¤ï¼Œä»è€Œå®ç°æ¯”ç­‰æ•ˆæ ‡é‡è®¡ç®—æ›´ä¼˜çš„æ€§èƒ½ã€‚</p><p>ä¸‹é¢è¿™ä¸ªæ˜¯å®˜æ–¹ç»™çš„ç¤ºä¾‹ï¼š</p><pre><code class="java">// æ ‡é‡è®¡ç®—ç¤ºä¾‹void scalarComputation(float[] a, float[] b, float[] c) {    for (int i = 0; i &lt; a.length ; i++) {        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;    }}// ä½¿ç”¨å‘é‡APIçš„å‘é‡è®¡ç®—ç¤ºä¾‹static final VectorSpecies&lt;Float&gt; SPECIES = FloatVector.SPECIES_PREFERRED;void vectorComputation(float[] a, float[] b, float[] c) {    int i = 0;    int upperBound = SPECIES.loopBound(a.length);    for (; i &lt; upperBound; i += SPECIES.length()) {        // FloatVector va, vb, vc;        var va = FloatVector.fromArray(SPECIES, a, i);        var vb = FloatVector.fromArray(SPECIES, b, i);        var vc = va.mul(va).add(vb.mul(vb)).neg();        vc.intoArray(c, i);    }    for (; i &lt; a.length; i++) {        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;    }}</code></pre><p>å‘é‡APIåœ¨Javaä¸­çš„ç‹¬ç‰¹ä¼˜åŠ¿åœ¨äºå…¶é«˜æ•ˆçš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ã€ä¸°å¯Œçš„å‘é‡åŒ–æŒ‡ä»¤é›†ã€è·¨å¹³å°çš„æ•°æ®å¹¶è¡Œç®—æ³•æ”¯æŒä»¥åŠå¯¹æœºå™¨å­¦ä¹ çš„ç‰¹åˆ«ä¼˜åŒ–ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java22 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä» <a href="https://openjdk.org/projects/jdk/22/" target="_blank" rel="noopener">https://openjdk.org/projects/jdk/22/</a> æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java/java-22-features">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava22 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava22 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚è®©æˆ‘ä»¬è·Ÿéš Java çš„è„šæ­¥ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œçœ‹ä¸€çœ‹æ¯ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ï¼Œæœ¬æœŸæ˜¯ Java22 çš„æ–°ç‰¹æ€§ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java22" scheme="https://www.howardliu.cn/tags/Java22/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava21 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java/java-21-features/"/>
    <id>https://www.howardliu.cn/java/java-21-features/</id>
    <published>2024-09-13T00:20:00.000Z</published>
    <updated>2024-12-05T03:07:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><a id="more"></a><p><img src="https://static.howardliu.cn/202409122326976.jpg" alt="Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava21 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚è®©æˆ‘ä»¬è·Ÿéš Java çš„è„šæ­¥ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œçœ‹ä¸€çœ‹æ¯ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ï¼Œæœ¬æœŸæ˜¯ Java21 çš„æ–°ç‰¹æ€§ã€‚</p><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Java21 åœ¨ 2023 å¹´ 9 æœˆ 19 æ—¥å‘å¸ƒGAç‰ˆæœ¬ï¼ŒJava21æ˜¯é•¿æœŸæ”¯æŒç‰ˆï¼ˆLTSï¼ŒLong-Term Supportï¼‰ï¼Œå…±åäº”å¤§ç‰¹æ€§ï¼š</p><ul><li>JEP 430: å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString Templatesï¼Œé¢„è§ˆï¼‰</li><li>JEP 431: æœ‰åºé›†åˆï¼ˆSequenced Collectionsï¼‰</li><li>JEP 439: åˆ†ä»£ZGCï¼ˆGenerational ZGCï¼‰</li><li>JEP 440: Recordæ¨¡å¼ï¼ˆRecord Patternsï¼‰</li><li>JEP 441: switchæ¨¡å¼åŒ¹é…ï¼ˆPattern Matching for switchï¼‰</li><li>JEP 442: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign Function &amp; Memory APIï¼ŒFFM APIï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰</li><li>JEP 443: æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆUnnamed Patterns and Variablesï¼Œé¢„è§ˆï¼‰</li><li>JEP 444: è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰</li><li>JEP 445: æœªå‘½åç±»å’Œç¤ºä¾‹mainæ–¹æ³•ï¼ˆUnnamed Classes and Instance Main Methodsï¼Œé¢„è§ˆï¼‰</li><li>JEP 446: ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼Œé¢„è§ˆï¼‰</li><li>JEP 448: å‘é‡APIï¼ˆVector APIï¼Œç¬¬å…­æ¬¡å­µåŒ–ï¼‰</li><li>JEP 449: å¯ç”¨Windows32ä½ x86æ”¯æŒï¼ˆDeprecate the Windows 32-bit x86 Port for Removalï¼‰</li><li>JEP 451: å‡†å¤‡ç¦æ­¢åŠ¨æ€åŠ è½½ä»£ç†ï¼ˆPrepare to Disallow the Dynamic Loading of Agentsï¼‰</li><li>JEP 452: å¯†é’¥å°è£…æœºåˆ¶ APIï¼ˆKey Encapsulation Mechanism APIï¼‰</li><li>JEP 453: ç»“æ„åŒ–å¹¶å‘APIï¼ˆStructured Concurrencyï¼Œé¢„è§ˆï¼‰</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚</p><h2 id="JEP-431-æœ‰åºé›†åˆï¼ˆSequenced-Collectionsï¼‰"><a href="#JEP-431-æœ‰åºé›†åˆï¼ˆSequenced-Collectionsï¼‰" class="headerlink" title="JEP 431: æœ‰åºé›†åˆï¼ˆSequenced Collectionsï¼‰"></a>JEP 431: æœ‰åºé›†åˆï¼ˆSequenced Collectionsï¼‰</h2><p>JEP 431:æœ‰åºé›†åˆæ˜¯Java21ç‰ˆæœ¬ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œæ—¨åœ¨ä¸ºJavaé›†åˆæ¡†æ¶æ·»åŠ å¯¹æœ‰åºé›†åˆçš„æ”¯æŒã€‚</p><p>æœ‰åºé›†åˆæ˜¯ä¸€ç§å…·æœ‰å®šä¹‰å¥½çš„å…ƒç´ è®¿é—®é¡ºåºçš„é›†åˆç±»å‹ï¼Œå®ƒå…è®¸ä»¥ä¸€è‡´çš„æ–¹å¼è®¿é—®å’Œå¤„ç†é›†åˆä¸­çš„å…ƒç´ ï¼Œæ— è®ºæ˜¯ä»ç¬¬ä¸€ä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿˜æ˜¯ä»æœ€åä¸€ä¸ªå…ƒç´ åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p>åœ¨ Java ä¸­ï¼Œé›†åˆç±»åº“éå¸¸é‡è¦ä¸”ä½¿ç”¨é¢‘ç‡éå¸¸é«˜ï¼Œä½†æ˜¯ç¼ºä¹ä¸€ç§èƒ½å¤Ÿè¡¨ç¤ºå…·æœ‰å®šä¹‰å¥½çš„å…ƒç´ è®¿é—®é¡ºåºçš„é›†åˆç±»å‹ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>List</code>å’Œ<code>Deque</code>éƒ½å®šä¹‰äº†å…ƒç´ çš„è®¿é—®é¡ºåºï¼Œä½†å®ƒä»¬çš„å…±åŒçˆ¶æ¥å£<code>Collection</code>å´æ²¡æœ‰ã€‚åŒæ ·ï¼ŒSetä¸å®šä¹‰å…ƒç´ çš„è®¿é—®é¡ºåºï¼Œå…¶å­ç±»å‹å¦‚<code>HashSet</code>ä¹Ÿæ²¡æœ‰å®šä¹‰ï¼Œä½†å­ç±»å‹å¦‚<code>SortedSet</code>å’Œ<code>LinkedHashSet</code>åˆ™æœ‰å®šä¹‰ã€‚å› æ­¤ï¼Œæ”¯æŒè®¿é—®é¡ºåºçš„åŠŸèƒ½æ•£å¸ƒåœ¨æ•´ä¸ªç±»å‹å±‚æ¬¡ç»“æ„ä¸­ï¼Œä½¿å¾—åœ¨APIä¸­è¡¨è¾¾æŸäº›æœ‰ç”¨çš„æ¦‚å¿µå˜å¾—å›°éš¾ã€‚<code>Collection</code>å¤ªé€šç”¨ï¼Œå°†æ­¤ç±»çº¦æŸç•™ç»™æ–‡æ¡£è§„èŒƒï¼Œå¯èƒ½å¯¼è‡´éš¾ä»¥è°ƒè¯•çš„é”™è¯¯ã€‚</p><p>è€Œä¸”ï¼Œè™½ç„¶æŸäº›é›†åˆæœ‰é¡ºåºæ“ä½œæ–¹æ³•ï¼Œä½†æ˜¯å´ä¸å°½ç›¸åŒï¼Œæ¯”å¦‚</p><table><thead><tr><th></th><th>First element</th><th>Last element</th></tr></thead><tbody><tr><td>List</td><td>list.get(0)</td><td>list.get(list.size() - 1)</td></tr><tr><td>Deque</td><td>deque.getFirst()</td><td>deque.getLast()</td></tr><tr><td>SortedSet</td><td>sortedSet.first()</td><td>sortedSet.last()</td></tr><tr><td>LinkedHashSet</td><td>linkedHashSet.iterator().next()</td><td>ç¼ºå¤±</td></tr></tbody></table><p>äºæ˜¯åœ¨Java21æä¾›äº†æœ‰åºé›†åˆ<code>SequencedCollection</code>ã€<code>SequencedSet</code>ã€<code>SequencedMap</code>ï¼š</p><pre><code class="java">interface SequencedCollection&lt;E&gt; extends Collection&lt;E&gt; {    // new method    SequencedCollection&lt;E&gt; reversed();    // methods promoted from Deque    void addFirst(E);    void addLast(E);    E getFirst();    E getLast();    E removeFirst();    E removeLast();}interface SequencedSet&lt;E&gt; extends Set&lt;E&gt;, SequencedCollection&lt;E&gt; {    SequencedSet&lt;E&gt; reversed();    // covariant override}interface SequencedMap&lt;K,V&gt; extends Map&lt;K,V&gt; {    // new methods    SequencedMap&lt;K,V&gt; reversed();    SequencedSet&lt;K&gt; sequencedKeySet();    SequencedCollection&lt;V&gt; sequencedValues();    SequencedSet&lt;Entry&lt;K,V&gt;&gt; sequencedEntrySet();    V putFirst(K, V);    V putLast(K, V);    // methods promoted from NavigableMap    Entry&lt;K, V&gt; firstEntry();    Entry&lt;K, V&gt; lastEntry();    Entry&lt;K, V&gt; pollFirstEntry();    Entry&lt;K, V&gt; pollLastEntry();}</code></pre><p><code>SequencedCollection</code>çš„<code>reversed()</code>æ–¹æ³•æä¾›äº†ä¸€ä¸ªåŸå§‹é›†åˆçš„åå‘è§†å›¾ã€‚ä»»ä½•å¯¹åŸå§‹é›†åˆçš„ä¿®æ”¹éƒ½ä¼šåœ¨è§†å›¾ä¸­å¯è§ã€‚å¦‚æœå…è®¸ï¼Œè§†å›¾ä¸­çš„ä¿®æ”¹ä¼šå†™å›åˆ°åŸå§‹é›†åˆã€‚</p><p><img src="https://static.howardliu.cn/SequencedCollectionDiagram20220216.png" alt="JEP 431: æœ‰åºé›†åˆï¼ˆSequenced Collectionsï¼‰"></p><p>æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªLinkedHashSetï¼Œç°åœ¨æˆ‘ä»¬æƒ³è¦è·å–å®ƒçš„åå‘è§†å›¾å¹¶ä»¥åå‘é¡ºåºéå†å®ƒï¼š</p><pre><code class="java">LinkedHashSet&lt;Integer&gt; linkedHashSet = new LinkedHashSet&lt;&gt;(Arrays.asList(3, 2, 1));// è·å–åå‘è§†å›¾SequencedCollection&lt;Integer&gt; reversed = linkedHashSet.reversed();// åå‘éå†System.out.println(&quot;åŸå§‹æ•°æ®ï¼š&quot; + linkedHashSet);System.out.println(&quot;åè½¬æ•°æ®ï¼š&quot; + reversed);// è¿è¡Œç»“æœï¼š// åŸå§‹æ•°æ®ï¼š[3, 2, 1]// åè½¬æ•°æ®ï¼š[1, 2, 3]</code></pre><p>è¿™äº›æ–¹æ³•éƒ½æ˜¯ä¾¿æ·æ–¹æ³•ï¼Œå†…éƒ¨æ•°æ®ç»“æ„æ²¡æœ‰å˜åŒ–ï¼Œå…¶å®æœ¬è´¨ä¹Ÿæ˜¯åŸæ¥çš„ç”¨æ³•ã€‚æ¯”å¦‚<code>ArrayList</code>ä¸­çš„<code>getFirst</code>å’Œ<code>getLast</code>æ–¹æ³•ï¼š</p><pre><code class="java">/** * {@inheritDoc} * * @throws NoSuchElementException {@inheritDoc} * @since 21 */public E getFirst() {    if (size == 0) {        throw new NoSuchElementException();    } else {        return elementData(0);    }}/** * {@inheritDoc} * * @throws NoSuchElementException {@inheritDoc} * @since 21 */public E getLast() {    int last = size - 1;    if (last &lt; 0) {        throw new NoSuchElementException();    } else {        return elementData(last);    }}</code></pre><h2 id="JEP-439-åˆ†ä»£ZGCï¼ˆGenerational-ZGCï¼‰"><a href="#JEP-439-åˆ†ä»£ZGCï¼ˆGenerational-ZGCï¼‰" class="headerlink" title="JEP 439: åˆ†ä»£ZGCï¼ˆGenerational ZGCï¼‰"></a>JEP 439: åˆ†ä»£ZGCï¼ˆGenerational ZGCï¼‰</h2><p>ZGCä»Java11å¼€å§‹é¢„è§ˆï¼ŒJava15æä¾›ç”Ÿäº§æ”¯æŒï¼ŒJava16å¢åŠ å¹¶å‘çº¿ç¨‹å †æ ˆå¤„ç†ï¼Œå‘å±•åˆ°Java21æä¾›äº†åˆ†ä»£ZGCï¼Œå…·ä½“å‘å±•å†ç¨‹å¯ä»¥æŸ¥çœ‹<a href="https://wiki.openjdk.org/display/zgc/Main" target="_blank" rel="noopener">https://wiki.openjdk.org/display/zgc/Main</a>ã€‚</p><p>æ±Ÿæ¹–ä¼ è¯´ï¼ŒZGCï¼ˆZ Garbage Collectorï¼‰çš„Zè¡¨ç¤ºæœ€åä¸€ä¸ªGCï¼Œå¯è§å…¶é›„å¿ƒå‹ƒå‹ƒã€‚è€Œåˆ†ä»£ZGCçš„å‡ºç°ï¼Œå°±æ˜¯é©è‡ªå·±çš„å‘½ã€‚</p><p>ä¸éåˆ†ä»£ZGCç›¸æ¯”ï¼Œåœ¨ä¸å½±å“ååé‡çš„çš„æƒ…å†µä¸‹ï¼Œå¸¦æ¥æ›´å¤šçš„å¥½å¤„ï¼š</p><ul><li>æ›´ä½çš„åˆ†é…åœé¡¿é£é™©ï¼›</li><li>æ›´ä½çš„å †å†…å­˜å¼€é”€ï¼›</li><li>æ›´ä½çš„CPUå¼€é”€ã€‚</li></ul><p>åˆ†ä»£ZGCçš„ç›®æ ‡æ˜¯ï¼š</p><ul><li>æš‚åœæ—¶é—´ä¸è¶…è¿‡1msï¼ˆZGCçš„ç›®æ ‡æ˜¯10msï¼‰</li><li>æ”¯æŒä»å‡ Må­—èŠ‚åˆ°å‡ Tå­—èŠ‚çš„å †å¤§å°ï¼›</li><li>å°½é‡å°‘çš„é…ç½®ã€‚</li></ul><p>åœ¨Java21ä¸­ï¼Œåˆ†ä»£ZGCçš„å®ç°ç»†èŠ‚ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li>åˆ†ä»£è®¾è®¡ï¼šåŸºäºã€Œå¤§éƒ¨åˆ†å¯¹è±¡æœç”Ÿå¤•æ­»ã€çš„åˆ†ä»£å‡è¯´ï¼Œåˆ†ä»£ZGCå°†å†…å­˜åˆ’åˆ†ä¸ºå¹´è½»ä»£å’Œè€å¹´ä»£ï¼Œå¹¶ä¸ºè¿™ä¸¤ç§ä»£åˆ†åˆ«ç»´æŠ¤ä¸åŒçš„åƒåœ¾æ”¶é›†ç­–ç•¥ã€‚è¿™ç§è®¾è®¡å¯ä»¥æ›´æœ‰æ•ˆåœ°å¤„ç†ä¸åŒç”Ÿå‘½å‘¨æœŸçš„å¯¹è±¡ï¼Œä»è€Œæé«˜æ•´ä½“æ€§èƒ½ã€‚</li><li>å½©è‰²æŒ‡é’ˆç»“æ„ï¼šåˆ†ä»£ZGCä½¿ç”¨å½©è‰²æŒ‡é’ˆç»“æ„æ¥ä¼˜åŒ–å†…å­˜è®¿é—®ã€‚å…ƒæ•°æ®è¢«æ”¾åœ¨æŒ‡é’ˆçš„ä½é˜¶ä½ï¼Œè€Œå¯¹è±¡åœ°å€è¢«æ”¾åœ¨é«˜é˜¶ä½ã€‚è¿™ç§ç»“æ„å¯ä»¥å‡å°‘åŠ è½½å±éšœä¸­çš„æœºå™¨æŒ‡ä»¤æ•°é‡ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</li><li>å†™å±éšœæŠ€æœ¯ï¼šåˆ†ä»£ZGCå¼•å…¥äº†å†™å±éšœæŠ€æœ¯ï¼Œä»¥ç¡®ä¿åœ¨å¯¹è±¡å¹´é¾„æ›´æ–°æ—¶èƒ½å¤Ÿæ­£ç¡®åœ°é€šçŸ¥åƒåœ¾æ”¶é›†å™¨ã€‚è¿™æœ‰åŠ©äºå‡å°‘åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­å¯¹åº”ç”¨ç¨‹åºçš„å½±å“ã€‚</li><li>å†…å­˜ç®¡ç†ä¼˜åŒ–ï¼šé€šè¿‡åˆ†ä»£æ”¶é›†ï¼Œåˆ†ä»£ZGCå¯ä»¥æ›´é¢‘ç¹åœ°å¯¹æ–°ç”Ÿä»£è¿›è¡Œåƒåœ¾æ”¶é›†ï¼Œä»è€Œå‡å°‘åˆ†é…åœé¡¿çš„é£é™©ï¼Œé™ä½å†…å­˜å¼€é”€ï¼Œå¹¶å‡å°‘åƒåœ¾æ”¶é›†çš„CPUå¼€é”€ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤<code>-XX:+UseZGC -XX:+ZGenerational</code>ä½¿ç”¨åˆ†ä»£ZGCã€‚</p><p>ä¸ºäº†å¹³ç¨³çš„è¿‡æ¸¡ï¼Œåœ¨Java21ä¸­å¿…é¡»å¢åŠ <code>-XX:+ZGenerational</code>å‚æ•°ï¼Œæ˜¾æ€§çš„æŒ‡æ˜ä½¿ç”¨åˆ†ä»£ZGCï¼Œåœ¨æœªæ¥ï¼Œéåˆ†ä»£ZGCå°†è¢«ç§»é™¤ï¼Œ<code>ZGenerational</code>å‚æ•°ä¹Ÿå°±ä½œåºŸäº†ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹<a href="https://kstefanj.github.io/2023/11/07/hazelcast-on-generational-zgc.html" target="_blank" rel="noopener">Hazelcast Jet on Generational ZGC</a>ä¸­ç»™å‡ºçš„æµ‹è¯„æ•ˆæœï¼š</p><p><img src="https://static.howardliu.cn/p9999-event-latency.png" alt="JEP 439: åˆ†ä»£ZGCï¼ˆGenerational ZGCï¼‰"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œéåˆ†ä»£ ZGC åœ¨ä½è´Ÿè½½ä¸‹è¡¨ç°éå¸¸å¥½ï¼Œä½†éšç€åˆ†é…å‹åŠ›çš„å¢åŠ ï¼Œå»¶è¿Ÿä¹Ÿä¼šå¢åŠ ã€‚ä½¿ç”¨åˆ†ä»£ ZGC åï¼Œå³ä½¿åœ¨é«˜è´Ÿè½½ä¸‹ï¼Œå»¶è¿Ÿä¹Ÿéå¸¸ä½ï¼Œè€Œä¸”å»¶è¿Ÿæ•ˆæœä¼˜äºG1ã€‚</p><h2 id="JEP-440-Recordæ¨¡å¼ï¼ˆRecord-Patternsï¼‰"><a href="#JEP-440-Recordæ¨¡å¼ï¼ˆRecord-Patternsï¼‰" class="headerlink" title="JEP 440: Recordæ¨¡å¼ï¼ˆRecord Patternsï¼‰"></a>JEP 440: Recordæ¨¡å¼ï¼ˆRecord Patternsï¼‰</h2><p>Recordç±»å‹æä¾›ä¸å¯å˜å¯¹è±¡çš„ç®€å•å®ç°ï¼ˆå…¶å®å°±æ˜¯Java Beanï¼Œä½†æ˜¯çœç•¥ä¸€å †çš„getterã€setterã€hashcodeã€equalsã€toStringç­‰æ–¹æ³•ï¼‰ï¼ŒJava16å¼€å§‹ä¸€ç›´åœ¨æ¼”åŒ–å¢å¼ºï¼ˆå‚è§<a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a>ï¼‰ã€‚</p><p>Recordæ¨¡å¼å½’å±äºAmberé¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼ŒAmberé¡¹ç›®æ—¨åœ¨é€šè¿‡å°è€Œç¾çš„æ–¹å¼ï¼Œå¢å¼ºJavaè¯­è¨€ç‰¹æ€§ã€‚æœ¬æ¬¡çš„Recordæ¨¡å¼ï¼Œä¸»è¦æ˜¯ä½¿Recordç±»å‹å¯ä»¥ç›´æ¥åœ¨instanceofå’Œswitchæ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨ã€‚</p><p>Recordæ¨¡å¼æœ€åˆä½œä¸ºé¢„è§ˆåŠŸèƒ½åœ¨JEP 405ä¸­æå‡ºï¼Œå¹¶åœ¨Java19ä¸­äº¤ä»˜ã€‚JEP 432æå‡ºäº†ç¬¬äºŒæ¬¡é¢„è§ˆï¼ŒåŸºäºæŒç»­çš„ç»éªŒå’Œåé¦ˆè¿›è¡Œäº†è¿›ä¸€æ­¥çš„å®Œå–„ã€‚ç»ˆäºåœ¨JEP 440æ­£å¼è½¬æ­£ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸ªç¤ºä¾‹ï¼Œæ¯”å¦‚æœ‰ä¸‹é¢å‡ ä¸ªåŸºç¡€å…ƒç´ ï¼š</p><pre><code class="java">// é¢œè‰²enum Color { RED, GREEN, BLUE}// ç‚¹record Point(int x, int y) {}// å¸¦é¢œè‰²çš„ç‚¹record ColoredPoint(Point p, Color color) {}// æ­£æ–¹å½¢record Square(ColoredPoint upperLeft, ColoredPoint lowerRight) {}</code></pre><p>æˆ‘ä»¬åˆ†åˆ«é€šè¿‡instanceofæ¨¡å¼åŒ¹é…å’Œswitchæ¨¡å¼åŒ¹é…åˆ¤æ–­è¾“å…¥å‚æ•°çš„ç±»å‹ï¼Œæ‰“å°ä¸åŒçš„æ ¼å¼ï¼š</p><pre><code class="java">private static void instancePatternsAndPrint(Object o) {    if (o instanceof Square(ColoredPoint upperLeft, ColoredPoint lowerRight)) {        System.out.println(&quot;Squareç±»å‹ï¼š&quot; + upperLeft + &quot; &quot; + lowerRight);    } else if (o instanceof ColoredPoint(Point(int x, int y), Color color)) {        System.out.println(&quot;ColoredPointç±»å‹ï¼š&quot; + x + &quot; &quot; + y + &quot; &quot; + color);    } else if (o instanceof Point p) {        System.out.println(&quot;Pointç±»å‹ï¼š&quot; + p);    }}private static void switchPatternsAndPrint(Object o) {    switch (o) {        case Square(ColoredPoint upperLeft, ColoredPoint lowerRight) -&gt; {            System.out.println(&quot;Squareç±»å‹ï¼š&quot; + upperLeft + &quot; &quot; + lowerRight);        }        case ColoredPoint(Point(int x, int y), Color color) -&gt; {            System.out.println(&quot;ColoredPointç±»å‹ï¼š&quot; + x + &quot; &quot; + y + &quot; &quot; + color);        }        case Point p -&gt; {            System.out.println(&quot;Pointç±»å‹ï¼š&quot; + p);        }        default -&gt; throw new IllegalStateException(&quot;Unexpected value: &quot; + o);    }}</code></pre><p>æˆ‘ä»¬é€šè¿‡mainæ–¹æ³•æ‰§è¡Œä¸‹ï¼š</p><pre><code class="java">public static void main(String[] args) {    var p = new Point(1, 2);    var cp1 = new ColoredPoint(p, Color.RED);    var cp2 = new ColoredPoint(p, Color.GREEN);    var square = new Square(cp1, cp2);    instancePatternsAndPrint(square);    instancePatternsAndPrint(cp1);    instancePatternsAndPrint(p);    switchPatternsAndPrint(square);    switchPatternsAndPrint(cp1);    switchPatternsAndPrint(p);}// ç»“æœæ˜¯ï¼š//// Squareç±»å‹ï¼šColoredPoint[p=Point[x=1, y=2], color=RED] ColoredPoint[p=Point[x=1, y=2], color=GREEN]// ColoredPointç±»å‹ï¼š1 2 RED// Pointç±»å‹ï¼šPoint[x=1, y=2]//// Squareç±»å‹ï¼šColoredPoint[p=Point[x=1, y=2], color=RED] ColoredPoint[p=Point[x=1, y=2], color=GREEN]// ColoredPointç±»å‹ï¼š1 2 RED// Pointç±»å‹ï¼šPoint[x=1, y=2]</code></pre><h2 id="JEP-441-switchæ¨¡å¼åŒ¹é…ï¼ˆPattern-Matching-for-switchï¼‰"><a href="#JEP-441-switchæ¨¡å¼åŒ¹é…ï¼ˆPattern-Matching-for-switchï¼‰" class="headerlink" title="JEP 441: switchæ¨¡å¼åŒ¹é…ï¼ˆPattern Matching for switchï¼‰"></a>JEP 441: switchæ¨¡å¼åŒ¹é…ï¼ˆPattern Matching for switchï¼‰</h2><p>switchæ¨¡å¼ç»è¿‡å››æ¬¡é¢„è§ˆï¼Œç»ˆäºè½¬æ­£ã€‚</p><p>switchæ¨¡å¼åŒ¹é…æ˜¯ä¸€ä¸ªéå¸¸èµçš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨é€‰æ‹©å™¨è¡¨è¾¾å¼ä½¿ç”¨åŸºç¡€åˆ¤æ–­å’Œä»»æ„å¼•ç”¨ç±»å‹ï¼ŒåŒ…æ‹¬instanceofæ“ä½œç¬¦ã€‚è¿™æ„å‘³ç€å¯ä»¥æ›´çµæ´»åœ°ä½¿ç”¨å¯¹è±¡ã€æ•°ç»„ã€åˆ—è¡¨ç­‰å¤æ‚æ•°æ®ç»“æ„ä½œä¸ºswitchè¯­å¥çš„åŸºç¡€ï¼Œä»è€Œç®€åŒ–ä»£ç å¹¶æé«˜å¯è¯»æ€§ã€‚</p><p>switchæ¨¡å¼åŒ¹é…å…è®¸åœ¨switchè¯­å¥ä¸­ä½¿ç”¨æ¨¡å¼æ¥æµ‹è¯•è¡¨è¾¾å¼ï¼Œæ¯ä¸ªæ¨¡å¼éƒ½æœ‰ç‰¹å®šçš„åŠ¨ä½œï¼Œä»è€Œå¯ä»¥ç®€æ´ã€å®‰å…¨åœ°è¡¨è¾¾å¤æ‚çš„æ•°æ®å¯¼å‘æŸ¥è¯¢ã€‚</p><p>é€šè¿‡ä»£ç çœ‹ä¸‹switchæ¨¡å¼åŒ¹é…çš„é­…åŠ›ï¼›</p><pre><code class="java">static String formatValue(Object obj) {    return switch (obj) {        case null -&gt; &quot;null&quot;;        case Integer i -&gt; String.format(&quot;int %d&quot;, i);        case Long l -&gt; String.format(&quot;long %d&quot;, l);        case Double d -&gt; String.format(&quot;double %f&quot;, d);        case String s -&gt; String.format(&quot;String %s&quot;, s);        case Person(String name, String address) -&gt; String.format(&quot;Person %s %s&quot;, name, address);        default -&gt; obj.toString();    };}public record Person(String name, String address) {}public static void main(String[] args) {    System.out.println(formatValue(10));    System.out.println(formatValue(20L));    System.out.println(formatValue(3.14));    System.out.println(formatValue(&quot;Hello&quot;));    System.out.println(formatValue(null));    System.out.println(formatValue(new Person(&quot;Howard&quot;, &quot;Beijing&quot;)));}// è¿è¡Œç»“æœ// int 10// long 20// double 3.140000// String Hello// null// Person Howard Beijing</code></pre><h2 id="JEP-444-è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual-Threadsï¼‰"><a href="#JEP-444-è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual-Threadsï¼‰" class="headerlink" title="JEP 444: è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰"></a>JEP 444: è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰</h2><p>è™šæ‹Ÿçº¿ç¨‹æ˜¯ä¸€ç§è½»é‡çº§çš„çº¿ç¨‹å®ç°ï¼Œæ—¨åœ¨æ˜¾è‘—é™ä½ç¼–å†™ã€ç»´æŠ¤å’Œè§‚å¯Ÿé«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºçš„éš¾åº¦ã€‚å®ƒä»¬å ç”¨çš„èµ„æºå°‘ï¼Œä¸éœ€è¦è¢«æ± åŒ–ï¼Œå¯ä»¥åˆ›å»ºå¤§é‡è™šæ‹Ÿçº¿ç¨‹ï¼Œç‰¹åˆ«é€‚ç”¨äºIOå¯†é›†å‹ä»»åŠ¡ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é«˜æ•ˆåœ°è°ƒåº¦å¤§é‡è™šæ‹Ÿçº¿ç¨‹æ¥å¤„ç†å¹¶å‘è¯·æ±‚ï¼Œä»è€Œæ˜¾è‘—æé«˜ç¨‹åºçš„ååé‡å’Œå“åº”é€Ÿåº¦ã€‚</p><p>è™šæ‹Ÿçº¿ç¨‹æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ol><li>è½»é‡çº§ï¼šè™šæ‹Ÿçº¿ç¨‹æ˜¯JVMå†…éƒ¨å®ç°çš„è½»é‡çº§çº¿ç¨‹ï¼Œä¸éœ€è¦æ“ä½œç³»ç»Ÿå†…æ ¸å‚ä¸ï¼Œåˆ›å»ºå’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æˆæœ¬è¿œä½äºä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼ˆå³å¹³å°çº¿ç¨‹ï¼‰ï¼Œä¸”å ç”¨çš„å†…å­˜èµ„æºè¾ƒå°‘ã€‚</li><li>å‡å°‘CPUæ—¶é—´æ¶ˆè€—ï¼šç”±äºè™šæ‹Ÿçº¿ç¨‹ä¸ä¾èµ–äºæ“ä½œç³»ç»Ÿå¹³å°çº¿ç¨‹ï¼Œå› æ­¤åœ¨è¿›è¡Œçº¿ç¨‹åˆ‡æ¢æ—¶è€—è´¹çš„CPUæ—¶é—´ä¼šå¤§å¤§å‡å°‘ï¼Œä»è€Œæé«˜äº†ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</li><li>ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼šè™šæ‹Ÿçº¿ç¨‹é€šè¿‡ç»“æ„åŒ–å¹¶å‘APIæ¥ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´å®¹æ˜“åœ°ç¼–å†™ã€ç»´æŠ¤å’Œè§‚å¯Ÿé«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºã€‚</li><li>é€‚ç”¨äºå¤§é‡ä»»åŠ¡åœºæ™¯ï¼šè™šæ‹Ÿçº¿ç¨‹éå¸¸é€‚åˆéœ€è¦åˆ›å»ºå’Œé”€æ¯å¤§é‡çº¿ç¨‹çš„ä»»åŠ¡ã€éœ€è¦æ‰§è¡Œå¤§é‡è®¡ç®—çš„ä»»åŠ¡ï¼ˆå¦‚æ•°æ®å¤„ç†ã€ç§‘å­¦è®¡ç®—ç­‰ï¼‰ä»¥åŠéœ€è¦å®ç°ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œä»¥æé«˜ç¨‹åºæ€§èƒ½çš„åœºæ™¯ã€‚</li><li>æé«˜ç³»ç»Ÿååé‡ï¼šé€šè¿‡å¯¹è™šæ‹Ÿçº¿ç¨‹çš„ä»‹ç»å’Œä¸Goåç¨‹çš„å¯¹æ¯”ï¼Œå¯ä»¥çœ‹å‡ºè™šæ‹Ÿçº¿ç¨‹èƒ½å¤Ÿå¤§å¹…æé«˜ç³»ç»Ÿçš„æ•´ä½“ååé‡ã€‚</li></ol><p>ä¸è€ƒè™‘è™šæ‹Ÿçº¿ç¨‹å®ç°åŸç†ï¼Œå¯¹å¼€å‘è€…è€Œè¨€ï¼Œä½¿ç”¨ä½“éªŒä¸Šä¸ä¼ ç»Ÿçº¿ç¨‹å‡ ä¹æ²¡æœ‰åŒºåˆ«ã€‚æˆ‘ä»¬ä¸€èµ·è¯•ç”¨ä¸‹ã€‚</p><pre><code class="java">try (var executor = Executors.newVirtualThreadPerTaskExecutor()) {    IntStream.range(0, 10_000).forEach(i -&gt; {        executor.submit(() -&gt; {            Thread.sleep(Duration.ofSeconds(1));            System.out.println(Thread.currentThread().getName() + &quot;: &quot; + i);            return i;        });    });}Thread.startVirtualThread(() -&gt; {    System.out.println(&quot;Hello from a virtual thread[Thread.startVirtualThread]&quot;);});final ThreadFactory factory = Thread.ofVirtual().factory();factory.newThread(() -&gt; {            System.out.println(&quot;Hello from a virtual thread[ThreadFactory.newThread]&quot;);        })        .start();</code></pre><p>è™šæ‹Ÿçº¿ç¨‹ä¸ºäº†é™ä½ä½¿ç”¨é—¨æ§›ï¼Œç›´æ¥æä¾›äº†ä¸åŸç”Ÿçº¿ç¨‹ç±»ä¼¼çš„æ–¹æ³•ï¼š</p><ul><li><code>Executors.newVirtualThreadPerTaskExecutor()</code>ï¼Œå¯ä»¥åƒæ™®é€šçº¿ç¨‹æ± ä¸€æ ·åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹ã€‚</li><li><code>Thread.startVirtualThread</code>ï¼Œé€šè¿‡å·¥å…·æ–¹æ³•ç›´æ¥åˆ›å»ºå¹¶è¿è¡Œè™šæ‹Ÿçº¿ç¨‹ã€‚</li><li><code>Thread.ofVirtual().factory().newThread()</code>ï¼Œå¦ä¸€ä¸ªå·¥å…·æ–¹æ³•å¯ä»¥åˆ›å»ºå¹¶è¿è¡Œè™šæ‹Ÿçº¿ç¨‹ã€‚<code>Thread</code>è¿˜æœ‰ä¸€ä¸ª<code>ofPlatform()</code>æ–¹æ³•ï¼Œç”¨æ¥æ„å»ºæ™®é€šçº¿ç¨‹ã€‚</li></ul><p>é€šè¿‡æœ¬åœ°ç®€å•æµ‹è¯•ï¼ˆåœ¨ã€Œå…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹ã€å›å¤â€javaâ€è·å–æºç ï¼‰ï¼Œ1wä¸ªæ¨¡æ‹Ÿçº¿ç¨‹è¿è¡Œæ—¶ï¼Œæ€§èƒ½æ–¹é¢è™šæ‹Ÿçº¿ç¨‹ &gt; çº¿ç¨‹æ± ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™šæ‹Ÿçº¿ç¨‹é€‚ç”¨äºIOå¯†é›†åœºæ™¯ï¼Œè€ŒéCPUå¯†é›†çš„åœºæ™¯ã€‚</p><h2 id="JEP-452-å¯†é’¥å°è£…æœºåˆ¶-APIï¼ˆKey-Encapsulation-Mechanism-API-KEM-APIï¼‰"><a href="#JEP-452-å¯†é’¥å°è£…æœºåˆ¶-APIï¼ˆKey-Encapsulation-Mechanism-API-KEM-APIï¼‰" class="headerlink" title="JEP 452: å¯†é’¥å°è£…æœºåˆ¶ APIï¼ˆKey Encapsulation Mechanism API, KEM APIï¼‰"></a>JEP 452: å¯†é’¥å°è£…æœºåˆ¶ APIï¼ˆKey Encapsulation Mechanism API, KEM APIï¼‰</h2><p>KEMæ˜¯ä¸€ç§ç°ä»£åŠ å¯†æŠ€æœ¯ï¼Œå®ƒé€šè¿‡ä½¿ç”¨éå¯¹ç§°æˆ–å…¬é’¥å¯†ç å­¦æ¥ä¿æŠ¤å¯¹ç§°å¯†é’¥ã€‚ä¸ä¼ ç»Ÿçš„åŠ å¯†æ–¹æ³•ä¸åŒï¼ŒKEMä½¿ç”¨å…¬é’¥çš„å±æ€§æ¥æ´¾ç”Ÿä¸€ä¸ªç›¸å…³çš„å¯¹ç§°å¯†é’¥ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦å¡«å……ï¼Œå› æ­¤å¯ä»¥æ›´å®¹æ˜“åœ°è¯æ˜å…¶å®‰å…¨æ€§ã€‚</p><p>KEMçš„å·¥ä½œæµç¨‹</p><ol><li>å¯†é’¥å¯¹ç”Ÿæˆå‡½æ•°ï¼šè¿”å›åŒ…å«å…¬é’¥å’Œç§é’¥çš„ä¸€å¯¹å¯†é’¥ã€‚</li><li>å¯†é’¥å°è£…å‡½æ•°ï¼šç”±å‘é€æ–¹è°ƒç”¨ï¼Œæ¥å—æ¥æ”¶æ–¹çš„å…¬é’¥å’ŒåŠ å¯†é€‰é¡¹ï¼›è¿”å›ä¸€ä¸ªç§˜å¯†å¯†é’¥Kå’Œä¸€ä¸ªå¯†é’¥å°è£…æ¶ˆæ¯ï¼ˆåœ¨ISO 18033-2ä¸­ç§°ä¸ºciphertextï¼‰ã€‚å‘é€æ–¹å°†å¯†é’¥å°è£…æ¶ˆæ¯å‘é€ç»™æ¥æ”¶æ–¹ã€‚</li><li>å¯†é’¥è§£å°å‡½æ•°ï¼šç”±æ¥æ”¶æ–¹è°ƒç”¨ï¼Œæ¥å—æ¥æ”¶æ–¹çš„ç§é’¥å’Œæ”¶åˆ°çš„å¯†é’¥å°è£…æ¶ˆæ¯ï¼›è¿”å›ç§˜å¯†å¯†é’¥Kã€‚</li></ol><p>æ®è¯´è¿™ç§ç®—æ³•æ˜¯å¯ä»¥è§£å†³é‡å­è®¡ç®—å¨èƒï¼Œè‹¥æœ‰æœ‰å®‰å…¨éœ€æ±‚ï¼Œå¯ä»¥æ·±å…¥ç ”ç©¶ä¸‹ã€‚</p><h2 id="é¢„è§ˆåŠŸèƒ½"><a href="#é¢„è§ˆåŠŸèƒ½" class="headerlink" title="é¢„è§ˆåŠŸèƒ½"></a>é¢„è§ˆåŠŸèƒ½</h2><h3 id="JEP-430-å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString-Templatesï¼Œé¢„è§ˆï¼‰"><a href="#JEP-430-å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString-Templatesï¼Œé¢„è§ˆï¼‰" class="headerlink" title="JEP 430: å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString Templatesï¼Œé¢„è§ˆï¼‰"></a>JEP 430: å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString Templatesï¼Œé¢„è§ˆï¼‰</h3><p>å­—ç¬¦ä¸²æ¨¡æ¿æ˜¯ä¸€ä¸ªå€¼å¾—æœŸå¾…çš„åŠŸèƒ½ï¼ŒJava21ä¸­æä¾›äº†é¢„è§ˆç‰ˆã€‚</p><p>å­—ç¬¦ä¸²æ¨¡æ¿é€šè¿‡å°†æ–‡æœ¬å’ŒåµŒå…¥å¼è¡¨è¾¾å¼ç»“åˆåœ¨ä¸€èµ·ï¼Œä½¿å¾—Javaç¨‹åºèƒ½å¤Ÿä»¥ä¸€ç§æ›´åŠ ç›´è§‚å’Œå®‰å…¨çš„æ–¹å¼æ„å»ºå­—ç¬¦ä¸²ã€‚ä¸ä¼ ç»Ÿçš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆä½¿ç”¨+æ“ä½œç¬¦ï¼‰ã€<code>StringBuilder</code>æˆ–<code>String.format</code> ç­‰æ–¹æ³•ç›¸æ¯”ï¼Œå­—ç¬¦ä¸²æ¨¡æ¿æä¾›äº†ä¸€ç§æ›´åŠ æ¸…æ™°å’Œå®‰å…¨çš„å­—ç¬¦ä¸²æ„å»ºæ–¹å¼ã€‚ç‰¹åˆ«æ˜¯å½“å­—ç¬¦ä¸²éœ€è¦ä»ç”¨æˆ·æä¾›çš„å€¼æ„å»ºå¹¶ä¼ é€’ç»™å…¶ä»–ç³»ç»Ÿæ—¶ï¼ˆä¾‹å¦‚ï¼Œæ„å»ºæ•°æ®åº“æŸ¥è¯¢ï¼‰ï¼Œä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿å¯ä»¥æœ‰æ•ˆåœ°éªŒè¯å’Œè½¬æ¢æ¨¡æ¿åŠå…¶åµŒå…¥è¡¨è¾¾å¼çš„å€¼ï¼Œä»è€Œæé«˜Javaç¨‹åºçš„å®‰å…¨æ€§ã€‚</p><p>è®©æˆ‘ä»¬é€šè¿‡ä»£ç çœ‹ä¸€ä¸‹è¿™ä¸ªç‰¹æ€§çš„é­…åŠ›ï¼š</p><pre><code class="java">public static void main(String[] args) {    // æ‹¼è£…å˜é‡    String name = &quot;çœ‹å±±&quot;;    String info = STR. &quot;My name is \{ name }&quot; ;    assert info.equals(&quot;My name is çœ‹å±±&quot;);    // æ‹¼è£…å˜é‡    String firstName = &quot;Howard&quot;;    String lastName = &quot;Liu&quot;;    String fullName = STR. &quot;\{ firstName } \{ lastName }&quot; ;    assert fullName.equals(&quot;Howard Liu&quot;);    String sortName = STR. &quot;\{ lastName }, \{ firstName }&quot; ;    assert sortName.equals(&quot;Liu, Howard&quot;);    // æ¨¡æ¿ä¸­è°ƒç”¨æ–¹æ³•    String s2 = STR. &quot;You have a \{ getOfferType() } waiting for you!&quot; ;    assert s2.equals(&quot;You have a gift waiting for you!&quot;);    Request req = new Request(&quot;2017-07-19&quot;, &quot;09:15&quot;, &quot;https://www.howardliu.cn&quot;);    // æ¨¡æ¿ä¸­å¼•ç”¨å¯¹è±¡å±æ€§    String s3 = STR. &quot;Access at \{ req.date } \{ req.time } from \{ req.address }&quot; ;    assert s3.equals(&quot;Access at 2017-07-19 09:15 from https://www.howardliu.cn&quot;);    LocalTime now = LocalTime.now();    String markTime = DateTimeFormatter            .ofPattern(&quot;HH:mm:ss&quot;)            .format(now);    // æ¨¡æ¿ä¸­è°ƒç”¨æ–¹æ³•    String time = STR. &quot;The time is \{            // The java.time.format package is very useful            DateTimeFormatter                    .ofPattern(&quot;HH:mm:ss&quot;)                    .format(now)            } right now&quot; ;    assert time.equals(&quot;The time is &quot; + markTime + &quot; right now&quot;);    // æ¨¡æ¿åµŒå¥—æ¨¡æ¿    String[] fruit = {&quot;apples&quot;, &quot;oranges&quot;, &quot;peaches&quot;};    String s4 = STR. &quot;\{ fruit[0] }, \{            STR. &quot;\{ fruit[1] }, \{ fruit[2] }&quot;            }&quot; ;    assert s4.equals(&quot;apples, oranges, peaches&quot;);    // æ¨¡æ¿ä¸æ–‡æœ¬å—ç»“åˆ    String title = &quot;My Web Page&quot;;    String text = &quot;Hello, world&quot;;    String html = STR. &quot;&quot;&quot;    &lt;html&gt;      &lt;head&gt;        &lt;title&gt;\{ title }&lt;/title&gt;      &lt;/head&gt;      &lt;body&gt;        &lt;p&gt;\{ text }&lt;/p&gt;      &lt;/body&gt;    &lt;/html&gt;    &quot;&quot;&quot; ;    assert html.equals(&quot;&quot;&quot;            &lt;html&gt;              &lt;head&gt;                &lt;title&gt;My Web Page&lt;/title&gt;              &lt;/head&gt;              &lt;body&gt;                &lt;p&gt;Hello, world&lt;/p&gt;              &lt;/body&gt;            &lt;/html&gt;            &quot;&quot;&quot;);    // å¸¦æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²æ¨¡æ¿    record Rectangle(String name, double width, double height) {        double area() {            return width * height;        }    }    Rectangle[] zone = new Rectangle[] {            new Rectangle(&quot;Alfa&quot;, 17.8, 31.4),            new Rectangle(&quot;Bravo&quot;, 9.6, 12.4),            new Rectangle(&quot;Charlie&quot;, 7.1, 11.23),    };    String table = FMT. &quot;&quot;&quot;        Description     Width    Height     Area        %-12s\{ zone[0].name }  %7.2f\{ zone[0].width }  %7.2f\{ zone[0].height }     %7.2f\{ zone[0].area() }        %-12s\{ zone[1].name }  %7.2f\{ zone[1].width }  %7.2f\{ zone[1].height }     %7.2f\{ zone[1].area() }        %-12s\{ zone[2].name }  %7.2f\{ zone[2].width }  %7.2f\{ zone[2].height }     %7.2f\{ zone[2].area() }        \{ &quot; &quot;.repeat(28) } Total %7.2f\{ zone[0].area() + zone[1].area() + zone[2].area() }        &quot;&quot;&quot;;    assert table.equals(&quot;&quot;&quot;            Description     Width    Height     Area            Alfa            17.80    31.40      558.92            Bravo            9.60    12.40      119.04            Charlie          7.10    11.23       79.73                                         Total  757.69            &quot;&quot;&quot;);}public static String getOfferType() {    return &quot;gift&quot;;}record Request(String date, String time, String address) {}</code></pre><p>è¿™ä¸ªåŠŸèƒ½å½“å‰æ˜¯ç¬¬ä¸€æ¬¡é¢„è§ˆï¼Œåœ¨Java22ç¬¬äºŒæ¬¡é¢„è§ˆï¼ŒJava23çš„8.12ç‰ˆæœ¬ä¸­è¿˜æ²¡æœ‰å±•ç¤ºå­—ç¬¦ä¸²æ¨¡æ¿çš„ç¬¬ä¸‰æ¬¡é¢„è§ˆï¼ˆJEP 465: String Templatesï¼‰ï¼Œè¿˜ä¸èƒ½ç¡®å®šä»€ä¹ˆæ—¶å€™å¯ä»¥æ­£å¼ç”¨ä¸Šã€‚</p><h3 id="JEP-442-å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign-Function-amp-Memory-APIï¼ŒFFM-APIï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰"><a href="#JEP-442-å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign-Function-amp-Memory-APIï¼ŒFFM-APIï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 442: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign Function &amp; Memory APIï¼ŒFFM APIï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰"></a>JEP 442: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign Function &amp; Memory APIï¼ŒFFM APIï¼Œç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰</h3><p>FFM APIç»å†è¿‡å¤šæ¬¡çš„é¢„è§ˆåŠæ”¹è¿›ï¼Œä»JEP 412ï¼ˆç¬¬ä¸€è½®å­µåŒ–ï¼‰å¼€å§‹ï¼Œé€æ­¥å‘å±•åˆ°JEP 442ï¼ˆç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰ã€‚ç›¸è¾ƒäºå‰ä¸¤æ¬¡çš„æ”¹è¿›ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li>ç®¡ç†æœ¬åœ°å†…å­˜æ®µçš„ç”Ÿå‘½å‘¨æœŸï¼šåœ¨JEP 442ä¸­ï¼Œé€šè¿‡æ–°çš„Arena APIé›†ä¸­ç®¡ç†æœ¬åœ°å†…å­˜æ®µçš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™ä½¿å¾—å†…å­˜ç®¡ç†æ›´åŠ é«˜æ•ˆå’Œå®‰å…¨ã€‚</li><li>å¢å¼ºå¸ƒå±€è·¯å¾„ï¼šå¼•å…¥äº†ä¸€ä¸ªæ–°çš„å…ƒç´ æ¥è§£å¼•ç”¨åœ°å€å¸ƒå±€ï¼Œè¿™ä½¿å¾—å†…å­˜å¸ƒå±€æ›´åŠ çµæ´»å’Œå¼ºå¤§ã€‚</li><li>ä¼˜åŒ–çŸ­æš‚ä½¿ç”¨æœŸå‡½æ•°è°ƒç”¨ï¼šæä¾›äº†ä¸€ä¸ªé“¾æ¥å™¨é€‰é¡¹ï¼Œä¼˜åŒ–äº†å¯¹çŸ­æš‚ä½¿ç”¨æœŸå‡½æ•°ï¼ˆä¾‹å¦‚clock_gettimeï¼‰çš„è°ƒç”¨ï¼Œè¿™äº›å‡½æ•°ä¸ä¼šè°ƒç”¨åˆ°Javaä»£ç ã€‚</li><li>æœ¬åœ°é“¾æ¥å™¨å®ç°ï¼šå¼•å…¥äº†ä¸€ä¸ªåŸºäºlibffiçš„æœ¬åœ°é“¾æ¥å™¨å®ç°ï¼Œä»¥ä¾¿äºç§»æ¤ã€‚</li><li>ç§»é™¤VaListï¼šåœ¨JEP 442ä¸­ç§»é™¤äº†VaListï¼Œè¿™æ˜¯å¯¹APIçš„ä¸€æ¬¡ç®€åŒ–ã€‚</li></ol><p>æˆ‘ä»¬çœ‹ä¸‹å®˜æ–¹ç¤ºä¾‹ï¼š</p><pre><code class="java">// 1. åœ¨Cåº“è·¯å¾„ä¸ŠæŸ¥æ‰¾åä¸ºradixsortçš„å¤–éƒ¨å‡½æ•°Linker linker = Linker.nativeLinker();SymbolLookup stdlib = linker.defaultLookup();final MemorySegment memorySegment = stdlib.find(&quot;radixsort&quot;).orElseThrow();FunctionDescriptor descriptor = FunctionDescriptor.ofVoid(        ValueLayout.ADDRESS,        ValueLayout.JAVA_INT,        ValueLayout.ADDRESS);MethodHandle radixsort = linker.downcallHandle(memorySegment, descriptor);// ä¸‹é¢çš„ä»£ç å°†ä½¿ç”¨è¿™ä¸ªå¤–éƒ¨å‡½æ•°å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åº// 2. åˆ†é…æ ˆä¸Šå†…å­˜æ¥å­˜å‚¨å››ä¸ªå­—ç¬¦ä¸²String[] javaStrings = {&quot;mouse&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;car&quot;};// 3. ä½¿ç”¨try-with-resourcesæ¥ç®¡ç†ç¦»å †å†…å­˜çš„ç”Ÿå‘½å‘¨æœŸtry (Arena offHeap = Arena.ofConfined()) {    // 4. åˆ†é…ä¸€æ®µç¦»å †å†…å­˜æ¥å­˜å‚¨å››ä¸ªæŒ‡é’ˆ    MemorySegment pointers = offHeap.allocateArray(ValueLayout.ADDRESS, javaStrings.length);    // 5. å°†å­—ç¬¦ä¸²ä»æ ˆä¸Šå†…å­˜å¤åˆ¶åˆ°ç¦»å †å†…å­˜    for (int i = 0; i &lt; javaStrings.length; i++) {        MemorySegment cString = offHeap.allocateUtf8String(javaStrings[i]);        pointers.setAtIndex(ValueLayout.ADDRESS, i, cString);    }    // 6. é€šè¿‡è°ƒç”¨å¤–éƒ¨å‡½æ•°å¯¹ç¦»å †æ•°æ®è¿›è¡Œæ’åº    radixsort.invoke(pointers, javaStrings.length, MemorySegment.NULL, &#39;\0&#39;);    // 7. å°†æ’åºåçš„å­—ç¬¦ä¸²ä»ç¦»å †å†…å­˜å¤åˆ¶å›æ ˆä¸Šå†…å­˜    for (int i = 0; i &lt; javaStrings.length; i++) {        MemorySegment cString = pointers.getAtIndex(ValueLayout.ADDRESS, i);        javaStrings[i] = cString.getUtf8String(0);    }} // 8. æ‰€æœ‰ç¦»å †å†…å­˜åœ¨æ­¤å¤„è¢«é‡Šæ”¾// éªŒè¯æ’åºç»“æœassert Arrays.equals(javaStrings, new String[] {&quot;car&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;});  // true</code></pre><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒJNIä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨å¤–éƒ¨ä»£ç çš„ï¼Œé‚£FFM APIç›¸è¾ƒäºJNIçš„ä¼˜åŠ¿åœ¨äºï¼š</p><ol><li>æ›´å®‰å…¨çš„å†…å­˜è®¿é—®ï¼šFFM API æä¾›äº†ä¸€ç§æ›´å®‰å…¨å’Œå—æ§çš„æ–¹å¼æ¥ä¸æœ¬åœ°ä»£ç äº¤äº’ï¼Œé¿å…äº†JNIä¸­å¸¸è§çš„å†…å­˜æ³„æ¼å’Œæ•°æ®æŸåé—®é¢˜ã€‚</li><li>ç›´æ¥è®¿é—®æœ¬åœ°å†…å­˜ï¼šFFM API å…è®¸Javaç¨‹åºç›´æ¥è®¿é—®æœ¬åœ°å†…å­˜ï¼ˆå³Javaå †å¤–çš„å†…å­˜ï¼‰ï¼Œè¿™ä½¿å¾—æ•°æ®å¤„ç†æ›´åŠ é«˜æ•ˆå’Œçµæ´»ã€‚</li><li>è·¨è¯­è¨€å‡½æ•°è°ƒç”¨ï¼šFFM API æ”¯æŒè°ƒç”¨Javaç¨‹åºçš„å¤–éƒ¨å‡½æ•°ï¼Œä»¥ä¸å¤–éƒ¨ä»£ç å’Œæ•°æ®ä¸€èµ·æ“ä½œï¼Œè€Œæ— éœ€ä¾èµ–JNIçš„å¤æ‚æœºåˆ¶ã€‚</li><li>æ›´é«˜æ•ˆçš„é›†æˆï¼šFFM API ä½¿å¾—Javaä¸Cã€C++ç­‰è¯­è¨€ç¼–å†™çš„åº“é›†æˆæ›´åŠ æ–¹ä¾¿å’Œé«˜æ•ˆï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®å¤„ç†å’Œæœºå™¨å­¦ä¹ ç­‰é¢†åŸŸã€‚</li><li>å‡å°‘ä»£ç å¤æ‚æ€§ï¼šFFM API æä¾›äº†ä¸€ç§æ›´ç®€æ´çš„APIï¼Œå‡å°‘äº†JNIä¸­å¤æ‚çš„ä»£ç ç¼–å†™å’Œç»´æŠ¤å·¥ä½œã€‚</li><li>æ›´å¹¿æ³›çš„é€‚ç”¨æ€§ï¼šFFM API ä¸ä»…é€‚ç”¨äºç®€å•çš„å‡½æ•°è°ƒç”¨ï¼Œè¿˜å¯ä»¥å¤„ç†å¤æ‚çš„å†…å­˜ç®¡ç†ä»»åŠ¡ï¼Œå¦‚å †å¤–å†…å­˜çš„ç®¡ç†ã€‚</li><li>æé«˜æ€§èƒ½ï¼šFFM API é€šè¿‡é«˜æ•ˆåœ°è°ƒç”¨å¤–éƒ¨å‡½æ•°å’Œå®‰å…¨åœ°è®¿é—®å¤–éƒ¨å†…å­˜ï¼Œæé«˜äº†ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚</li></ol><p>è¿™ä¸ªåŠŸèƒ½å°†åœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬ Java22 æ­£å¼å‘å¸ƒã€‚</p><h3 id="JEP-443-æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆUnnamed-Patterns-and-Variablesï¼Œé¢„è§ˆï¼‰"><a href="#JEP-443-æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆUnnamed-Patterns-and-Variablesï¼Œé¢„è§ˆï¼‰" class="headerlink" title="JEP 443: æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆUnnamed Patterns and Variablesï¼Œé¢„è§ˆï¼‰"></a>JEP 443: æœªå‘½åæ¨¡å¼å’Œå˜é‡ï¼ˆUnnamed Patterns and Variablesï¼Œé¢„è§ˆï¼‰</h3><p>è¯¥ç‰¹æ€§ä½¿ç”¨ä¸‹åˆ’çº¿å­—ç¬¦ <code>_</code> æ¥è¡¨ç¤ºæœªå‘½åçš„æ¨¡å¼å’Œå˜é‡ï¼Œä»è€Œç®€åŒ–ä»£ç å¹¶æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="java">public static void main(String[] args) {    var _ = new Point(1, 2);}record Point(int x, int y) {}</code></pre><p>è¿™ä¸ªå¯ä»¥ç”¨åœ¨ä»»ä½•å®šä¹‰å˜é‡çš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼š</p><ul><li><code>... instanceof Point(_, int y)</code></li><li><code>r instanceof Point _</code></li><li><code>switch â€¦â€¦ case Box(_)</code></li><li><code>for (Order _ : orders)</code></li><li><code>for (int i = 0, _ = sideEffect(); i &lt; 10; i++)</code></li><li><code>try { ... } catch (Exception _) { ... } catch (Throwable _) { ... }</code></li></ul><p>åªè¦æ˜¯è¿™ä¸ªä¸å‡†å¤‡ç”¨ï¼Œå¯ä»¥ä¸€å¾‹ä½¿ç”¨<code>_</code>ä»£æ›¿ã€‚</p><h3 id="JEP-445-æœªå‘½åç±»å’Œç¤ºä¾‹mainæ–¹æ³•ï¼ˆUnnamed-Classes-and-Instance-Main-Methodsï¼Œé¢„è§ˆï¼‰"><a href="#JEP-445-æœªå‘½åç±»å’Œç¤ºä¾‹mainæ–¹æ³•ï¼ˆUnnamed-Classes-and-Instance-Main-Methodsï¼Œé¢„è§ˆï¼‰" class="headerlink" title="JEP 445: æœªå‘½åç±»å’Œç¤ºä¾‹mainæ–¹æ³•ï¼ˆUnnamed Classes and Instance Main Methodsï¼Œé¢„è§ˆï¼‰"></a>JEP 445: æœªå‘½åç±»å’Œç¤ºä¾‹mainæ–¹æ³•ï¼ˆUnnamed Classes and Instance Main Methodsï¼Œé¢„è§ˆï¼‰</h3><p>æ— è®ºå­¦ä¹ å“ªé—¨è¯­è¨€ï¼Œç¬¬ä¸€è¯¾ä¸€å®šæ˜¯æ‰“å°<code>Hello, World!</code>ï¼ŒJavaä¸­çš„å†™æ³•æ˜¯ï¼š</p><pre><code class="java">public class HelloWorld {    public static void main(String[] args) {        System.out.println (&quot;Hello, World!&quot;);    }}</code></pre><p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œä¸€å®šä¼šæœ‰å¾ˆå¤šç–‘é—®ï¼Œ<code>public</code>å¹²å•¥çš„ï¼Œ<code>main</code>æ–¹æ³•çš„çº¦å®šå‚æ•°<code>args</code>æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿç„¶åè€å¸ˆå°±è¯´ï¼Œè¿™å°±æ˜¯æ¨¡æ¿ï¼Œç…§ç€æŠ„å°±è¡Œï¼Œä¸è¿™æ ·å†™ä¸è¿è¡Œã€‚</p><p>JEP 445ç‰¹æ€§åï¼Œå¯ä»¥ç®€åŒ–ä¸ºï¼š</p><pre><code class="java">class HelloWorld {    void main() {        System.out.println (&quot;Hello, World!&quot;);    }}</code></pre><p>æˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="java">String greeting() { return &quot;Hello, World!&quot;; }void main() {    System.out.println(greeting());}</code></pre><p>è™½ç„¶çœ‹èµ·æ¥æ²¡å•¥ç”¨ï¼Œä½†æ˜¯åœ¨JShellä¸­ä½¿ç”¨ï¼Œå°±æ¯”è¾ƒå‹å¥½äº†ã€‚</p><h3 id="JEP-446-ä½œç”¨åŸŸå€¼ï¼ˆScoped-Valuesï¼Œé¢„è§ˆï¼‰"><a href="#JEP-446-ä½œç”¨åŸŸå€¼ï¼ˆScoped-Valuesï¼Œé¢„è§ˆï¼‰" class="headerlink" title="JEP 446: ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼Œé¢„è§ˆï¼‰"></a>JEP 446: ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼Œé¢„è§ˆï¼‰</h3><p>ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼‰åœ¨Java20å­µåŒ–ï¼Œåœ¨Java21é¢„è§ˆï¼Œæ—¨åœ¨æä¾›ä¸€ç§å®‰å…¨ä¸”é«˜æ•ˆçš„æ–¹æ³•æ¥å…±äº«æ•°æ®ï¼Œæ— éœ€ä½¿ç”¨æ–¹æ³•å‚æ•°ã€‚è¿™ä¸€ç‰¹æ€§å…è®¸åœ¨ä¸ä½¿ç”¨æ–¹æ³•å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå°†æ•°æ®å®‰å…¨åœ°å…±äº«ç»™æ–¹æ³•ï¼Œä¼˜å…ˆäºçº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨å¤§é‡è™šæ‹Ÿçº¿ç¨‹æ—¶ã€‚</p><p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œä½œç”¨åŸŸå€¼å¯ä»¥åœ¨çº¿ç¨‹å†…å’Œçº¿ç¨‹é—´å…±äº«ä¸å¯å˜æ•°æ®ï¼Œä¾‹å¦‚ä»çˆ¶çº¿ç¨‹å‘å­çº¿ç¨‹ä¼ é€’æ•°æ®ï¼Œä»è€Œè§£å†³äº†åœ¨å¤šçº¿ç¨‹åº”ç”¨ä¸­ä¼ é€’æ•°æ®çš„é—®é¢˜ã€‚æ­¤å¤–ï¼Œä½œç”¨åŸŸå€¼æé«˜äº†æ•°æ®çš„å®‰å…¨æ€§ã€ä¸å˜æ€§å’Œå°è£…æ€§ï¼Œå¹¶ä¸”åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨äº‹åŠ¡ã€å®‰å…¨ä¸»ä½“å’Œå…¶ä»–å½¢å¼çš„å…±äº«ä¸Šä¸‹æ–‡çš„åº”ç”¨ç¨‹åºä¸­è¡¨ç°å°¤ä¸ºçªå‡ºã€‚</p><p>ä½œç”¨åŸŸå€¼çš„ä¸»è¦ç‰¹ç‚¹ï¼š</p><ul><li>ä¸å¯å˜æ€§ï¼šä½œç”¨åŸŸå€¼æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦è®¾ç½®ï¼Œå…¶å€¼å°±ä¸èƒ½æ›´æ”¹ã€‚è¿™ç§ä¸å¯å˜æ€§å‡å°‘äº†å¹¶å‘ç¼–ç¨‹ä¸­æ„å¤–å‰¯ä½œç”¨çš„é£é™©ã€‚</li><li>ä½œç”¨åŸŸç”Ÿå‘½å‘¨æœŸï¼šä½œç”¨åŸŸå€¼çš„ç”Ÿå‘½å‘¨æœŸä»…é™äº run æ–¹æ³•å®šä¹‰çš„ä½œç”¨åŸŸã€‚ä¸€æ—¦æ‰§è¡Œç¦»å¼€è¯¥ä½œç”¨åŸŸï¼Œä½œç”¨åŸŸå€¼å°†ä¸å†å¯è®¿é—®ã€‚</li><li>ç»§æ‰¿æ€§ï¼šå­çº¿ç¨‹ä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶çº¿ç¨‹çš„ä½œç”¨åŸŸå€¼ï¼Œä»è€Œå…è®¸åœ¨çº¿ç¨‹è¾¹ç•Œé—´æ— ç¼å…±äº«æ•°æ®ã€‚</li></ul><p>åœ¨è¿™ä¸ªåŠŸèƒ½ä¹‹å‰ï¼Œåœ¨å¤šçº¿ç¨‹é—´ä¼ é€’æ•°æ®ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p><ol><li>æ–¹æ³•å‚æ•°ï¼šæ˜¾ç¤ºå‚æ•°ä¼ é€’ï¼›ç¼ºç‚¹æ˜¯æ–°å¢å‚æ•°æ—¶ä¿®æ”¹è”åŠ¨ä¿®æ”¹ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå¦‚æœæ˜¯æ¡†æ¶æˆ–SDKå±‚é¢çš„ï¼Œæ— æ³•åšåˆ°å‘ä¸‹å…¼å®¹ã€‚</li><li><code>ThreadLocal</code>ï¼šåœ¨<code>ThreadLocal</code>ä¿å­˜å½“å‰çº¿ç¨‹å˜é‡ã€‚</li></ol><p>ä½¿ç”¨è¿‡<code>ThreadLocal</code>çš„éƒ½æ¸…æ¥šï¼Œ<code>ThreadLocal</code>ä¼šæœ‰ä¸‰å¤§é—®é¢˜ã€‚</p><ol><li>æ— çº¦æŸçš„å¯å˜æ€§ï¼šæ¯ä¸ªçº¿ç¨‹å±€éƒ¨å˜é‡éƒ½æ˜¯å¯å˜çš„ã€‚ä»»ä½•å¯ä»¥è°ƒç”¨çº¿ç¨‹å±€éƒ¨å˜é‡çš„<code>get</code>æ–¹æ³•çš„ä»£ç éƒ½å¯ä»¥éšæ—¶è°ƒç”¨è¯¥å˜é‡çš„<code>set</code>æ–¹æ³•ã€‚å³ä½¿çº¿ç¨‹å±€éƒ¨å˜é‡ä¸­çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œæ¯ä¸ªå­—æ®µéƒ½è¢«å£°æ˜ä¸ºfinalï¼Œæƒ…å†µä»ç„¶å¦‚æ­¤ã€‚<code>ThreadLocal</code> APIå…è®¸è¿™æ ·åšï¼Œä»¥ä¾¿æ”¯æŒä¸€ä¸ªå®Œå…¨é€šç”¨çš„é€šä¿¡æ¨¡å‹ï¼Œåœ¨è¯¥æ¨¡å‹ä¸­ï¼Œæ•°æ®å¯ä»¥åœ¨æ–¹æ³•ä¹‹é—´ä»¥ä»»ä½•æ–¹å‘æµåŠ¨ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ•°æ®æµæ··ä¹±ï¼Œå¯¼è‡´ç¨‹åºéš¾ä»¥åˆ†è¾¨å“ªä¸ªæ–¹æ³•æ›´æ–°å…±äº«çŠ¶æ€ä»¥åŠä»¥ä½•ç§é¡ºåºè¿›è¡Œã€‚</li><li>æ— ç•Œç”Ÿå­˜æœŸï¼šä¸€æ—¦é€šè¿‡<code>set</code>æ–¹æ³•è®¾ç½®äº†ä¸€ä¸ªçº¿ç¨‹å±€éƒ¨å˜é‡çš„å‰¯æœ¬ï¼Œè¯¥å€¼å°±ä¼šåœ¨è¯¥çº¿ç¨‹çš„ç”Ÿå­˜æœŸå†…ä¿ç•™ï¼Œæˆ–è€…ç›´åˆ°è¯¥çº¿ç¨‹ä¸­çš„ä»£ç è°ƒç”¨<code>remove</code>æ–¹æ³•ã€‚æˆ‘ä»¬æœ‰æ—¶å€™ä¼šå¿˜è®°è°ƒç”¨<code>remove</code>ï¼Œå¦‚æœä½¿ç”¨çº¿ç¨‹æ± ï¼Œåœ¨ä¸€ä¸ªä»»åŠ¡ä¸­è®¾ç½®çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼å¦‚æœä¸æ¸…é™¤ï¼Œå¯èƒ½ä¼šæ„å¤–æ³„æ¼åˆ°æ— å…³çš„ä»»åŠ¡ä¸­ï¼Œå¯¼è‡´å±é™©çš„å®‰å…¨æ¼æ´ï¼ˆæ¯”å¦‚äººå‘˜SSOï¼‰ã€‚å¯¹äºä¾èµ–äºçº¿ç¨‹å±€éƒ¨å˜é‡çš„æ— çº¦æŸå¯å˜æ€§çš„ç¨‹åºæ¥è¯´ï¼Œå¯èƒ½æ²¡æœ‰æ˜ç¡®çš„ç‚¹å¯ä»¥ä¿è¯çº¿ç¨‹è°ƒç”¨<code>remove</code>æ˜¯å®‰å…¨çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹çš„æ•°æ®åœ¨é€€å‡ºä¹‹å‰éƒ½ä¸ä¼šè¢«åƒåœ¾å›æ”¶ã€‚</li><li>æ˜‚è´µçš„ç»§æ‰¿ï¼šå½“ä½¿ç”¨å¤§é‡çº¿ç¨‹æ—¶ï¼Œçº¿ç¨‹å±€éƒ¨å˜é‡çš„å¼€é”€å¯èƒ½ä¼šæ›´ç³Ÿç³•ï¼Œå› ä¸ºçˆ¶çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡å¯ä»¥è¢«å­çº¿ç¨‹ç»§æ‰¿ã€‚ï¼ˆäº‹å®ä¸Šï¼Œçº¿ç¨‹å±€éƒ¨å˜é‡å¹¶ä¸æ˜¯æŸä¸ªç‰¹å®šçº¿ç¨‹çš„æœ¬åœ°å˜é‡ã€‚ï¼‰å½“å¼€å‘äººå‘˜é€‰æ‹©åˆ›å»ºä¸€ä¸ªç»§æ‰¿äº†çº¿ç¨‹å±€éƒ¨å˜é‡çš„å­çº¿ç¨‹æ—¶ï¼Œè¯¥å­çº¿ç¨‹å¿…é¡»ä¸ºä¹‹å‰åœ¨çˆ¶çº¿ç¨‹ä¸­å†™å…¥çš„æ¯ä¸ªçº¿ç¨‹å±€éƒ¨å˜é‡åˆ†é…å­˜å‚¨ç©ºé—´ã€‚è¿™å¯èƒ½ä¼šæ˜¾è‘—å¢åŠ å†…å­˜å ç”¨ã€‚å­çº¿ç¨‹ä¸èƒ½å…±äº«çˆ¶çº¿ç¨‹ä½¿ç”¨çš„å­˜å‚¨ï¼Œå› ä¸ºThreadLocal APIè¦æ±‚æ›´æ”¹çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡å‰¯æœ¬åœ¨å…¶ä»–çº¿ç¨‹ä¸­ä¸å¯è§ã€‚è¿™ä¹Ÿä¼šæœ‰å¦ä¸€ä¸ªéšè—çš„é—®é¢˜ï¼Œå­çº¿ç¨‹æ²¡æœ‰åŠæ³•å‘çˆ¶çº¿ç¨‹<code>set</code>æ•°æ®ã€‚</li></ol><p>ä½œç”¨åŸŸå€¼å¯ä»¥æœ‰æ•ˆè§£å†³ä¸Šé¢æåˆ°çš„é—®é¢˜ï¼Œè€Œä¸”å†™èµ·æ¥æ›´åŠ ä¼˜é›…ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹ä½œç”¨åŸŸå€¼çš„ä½¿ç”¨ï¼š</p><pre><code class="java">// å£°æ˜ä¸€ä¸ªä½œç”¨åŸŸå€¼ç”¨äºå­˜å‚¨ç”¨æˆ·åpublic final static ScopedValue&lt;String&gt; USERNAME = ScopedValue.newInstance();private static final Runnable printUsername = () -&gt;        System.out.println(Thread.currentThread().threadId() + &quot; ç”¨æˆ·åæ˜¯ &quot; + USERNAME.get());public static void main(String[] args) throws Exception {    // å°†ç”¨æˆ·å &quot;Bob&quot; ç»‘å®šåˆ°ä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Bob&quot;).run(() -&gt; {        printUsername.run();        new Thread(printUsername).start();    });    // å°†ç”¨æˆ·å &quot;Chris&quot; ç»‘å®šåˆ°å¦ä¸€ä¸ªä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Chris&quot;).run(() -&gt; {        printUsername.run();        new Thread(() -&gt; {            new Thread(printUsername).start();            printUsername.run();        }).start();    });    // æ£€æŸ¥åœ¨ä»»ä½•ä½œç”¨åŸŸå¤– USERNAME æ˜¯å¦è¢«ç»‘å®š    System.out.println(&quot;ç”¨æˆ·åæ˜¯å¦è¢«ç»‘å®š: &quot; + USERNAME.isBound());}</code></pre><p>å†™èµ·æ¥å¹²å‡€åˆ©ç´¢ï¼Œè€Œä¸”åŠŸèƒ½æ›´å¼ºã€‚</p><h3 id="JEP-453-ç»“æ„åŒ–å¹¶å‘APIï¼ˆStructured-Concurrencyï¼Œé¢„è§ˆï¼‰"><a href="#JEP-453-ç»“æ„åŒ–å¹¶å‘APIï¼ˆStructured-Concurrencyï¼Œé¢„è§ˆï¼‰" class="headerlink" title="JEP 453: ç»“æ„åŒ–å¹¶å‘APIï¼ˆStructured Concurrencyï¼Œé¢„è§ˆï¼‰"></a>JEP 453: ç»“æ„åŒ–å¹¶å‘APIï¼ˆStructured Concurrencyï¼Œé¢„è§ˆï¼‰</h3><p>JEP 453: ç»“æ„åŒ–å¹¶å‘APIï¼ˆStructured Concurrency APIï¼‰æ—¨åœ¨ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªAPIæ¥å¤„ç†åœ¨ä¸åŒçº¿ç¨‹ä¸­è¿è¡Œçš„å¤šä¸ªä»»åŠ¡ä½œä¸ºä¸€ä¸ªå•ä¸€å·¥ä½œå•å…ƒï¼Œä»è€Œç®€åŒ–é”™è¯¯å¤„ç†å’Œå–æ¶ˆæ“ä½œï¼Œæé«˜å¯é æ€§ï¼Œå¹¶å¢å¼ºå¯è§‚æµ‹æ€§ã€‚æœ¬æ¬¡å‘å¸ƒæ˜¯ç¬¬ä¸€æ¬¡é¢„è§ˆã€‚</p><p>ç»“æ„åŒ–å¹¶å‘APIæä¾›äº†æ˜ç¡®çš„è¯­æ³•ç»“æ„æ¥å®šä¹‰å­ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶å¯ç”¨ä¸€ä¸ªè¿è¡Œæ—¶è¡¨ç¤ºçº¿ç¨‹é—´çš„å±‚æ¬¡ç»“æ„ã€‚è¿™æœ‰åŠ©äºå®ç°é”™è¯¯ä¼ æ’­å’Œå–æ¶ˆä»¥åŠå¹¶å‘ç¨‹åºçš„æœ‰æ„ä¹‰è§‚å¯Ÿã€‚</p><p>Javaä½¿ç”¨å¼‚å¸¸å¤„ç†æœºåˆ¶æ¥ç®¡ç†è¿è¡Œæ—¶é”™è¯¯å’Œå…¶ä»–å¼‚å¸¸ã€‚å½“å¼‚å¸¸åœ¨ä»£ç ä¸­äº§ç”Ÿæ—¶ï¼Œå¦‚ä½•è¢«ä¼ é€’å’Œå¤„ç†çš„è¿‡ç¨‹ç§°ä¸ºå¼‚å¸¸ä¼ æ’­ã€‚</p><p>åœ¨ç»“æ„åŒ–å¹¶å‘ç¯å¢ƒä¸­ï¼Œå¼‚å¸¸å¯ä»¥é€šè¿‡æ˜¾å¼åœ°ä»å½“å‰ç¯å¢ƒä¸­æŠ›å‡ºå¹¶ä¼ æ’­åˆ°æ›´å¤§çš„ç¯å¢ƒä¸­å»å¤„ç†ã€‚</p><p>åœ¨Javaå¹¶å‘ç¼–ç¨‹ä¸­ï¼Œéå—æ£€å¼‚å¸¸çš„å¤„ç†æ˜¯ç¨‹åºå¥å£®æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ç‰¹åˆ«æ˜¯å¯¹äºéå—æ£€å¼‚å¸¸çš„å¤„ç†ï¼Œè¿™å…³ç³»åˆ°ç¨‹åºåœ¨é‡åˆ°é”™è¯¯æ—¶æ˜¯å¦èƒ½å¤Ÿä¼˜é›…åœ°ç»§ç»­è¿è¡Œæˆ–è€…è‡³å°‘æä¾›æœ‰æ„ä¹‰çš„åé¦ˆã€‚</p><pre><code class="java">try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {    var task1 = scope.fork(() -&gt; {        Thread.sleep(1000);        return &quot;Result from task 1&quot;;    });    var task2 = scope.fork(() -&gt; {        Thread.sleep(2000);        return &quot;Result from task 2&quot;;    });    scope.join();    scope.throwIfFailed(RuntimeException::new);    System.out.println(task1.get());    System.out.println(task2.get());} catch (Exception e) {    e.printStackTrace();}</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œhandle()æ–¹æ³•ä½¿ç”¨StructuredTaskScopeæ¥å¹¶è¡Œæ‰§è¡Œä¸¤ä¸ªå­ä»»åŠ¡ï¼štask1å’Œtask2ã€‚é€šè¿‡ä½¿ç”¨try-with-resourcesè¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œå¹¶ç¡®ä¿æ‰€æœ‰å­ä»»åŠ¡éƒ½åœ¨tryå—ç»“æŸæ—¶æ­£ç¡®å®Œæˆæˆ–è¢«å–æ¶ˆã€‚è¿™ç§æ–¹å¼ä½¿å¾—çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œä»»åŠ¡çš„é€»è¾‘ç»“æ„ç´§å¯†ç›¸å…³ï¼Œæé«˜äº†ä»£ç çš„æ¸…æ™°åº¦å’Œé”™è¯¯å¤„ç†çš„æ•ˆç‡ã€‚ä½¿ç”¨ StructuredTaskScope å¯ä»¥ç¡®ä¿ä¸€äº›æœ‰ä»·å€¼çš„å±æ€§ï¼š</p><ul><li>é”™è¯¯å¤„ç†ä¸çŸ­è·¯ï¼šå¦‚æœtask1æˆ–task2å­ä»»åŠ¡ä¸­çš„ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦ä¸€ä¸ªå¦‚æœå°šæœªå®Œæˆåˆ™ä¼šè¢«å–æ¶ˆã€‚ï¼ˆè¿™ç”± ShutdownOnFailure å®ç°çš„å…³é—­ç­–ç•¥æ¥ç®¡ç†ï¼›è¿˜æœ‰å…¶ä»–ç­–ç•¥å¯èƒ½ï¼‰ã€‚</li><li>å–æ¶ˆä¼ æ’­ï¼šå¦‚æœåœ¨è¿è¡Œä¸Šé¢æ–¹æ³•çš„çº¿ç¨‹åœ¨è°ƒç”¨ join() ä¹‹å‰æˆ–ä¹‹ä¸­è¢«ä¸­æ–­ï¼Œåˆ™çº¿ç¨‹åœ¨é€€å‡ºä½œç”¨åŸŸæ—¶ä¼šè‡ªåŠ¨å–æ¶ˆä¸¤ä¸ªå­ä»»åŠ¡ã€‚</li><li>æ¸…æ™°æ€§ï¼šè®¾ç½®å­ä»»åŠ¡ï¼Œç­‰å¾…å®ƒä»¬å®Œæˆæˆ–è¢«å–æ¶ˆï¼Œç„¶åå†³å®šæ˜¯æˆåŠŸï¼ˆå¹¶å¤„ç†å·²ç»å®Œæˆçš„å­ä»»åŠ¡çš„ç»“æœï¼‰è¿˜æ˜¯å¤±è´¥ï¼ˆå­ä»»åŠ¡å·²ç»å®Œæˆï¼Œå› æ­¤æ²¡æœ‰æ›´å¤šéœ€è¦æ¸…ç†çš„ï¼‰ã€‚</li><li>å¯è§‚å¯Ÿæ€§ï¼šçº¿ç¨‹è½¬å‚¨æ¸…æ¥šåœ°æ˜¾ç¤ºäº†ä»»åŠ¡å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­è¿è¡Œtask1æˆ–task2çš„çº¿ç¨‹è¢«æ˜¾ç¤ºä¸ºä½œç”¨åŸŸçš„å­ä»»åŠ¡ã€‚</li></ul><p>ä¸Šé¢çš„ç¤ºä¾‹èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³æˆ‘ä»¬çš„ä¸€ä¸ªç—›ç‚¹ï¼Œæœ‰ä¸¤ä¸ªå¯å¹¶è¡Œçš„ä»»åŠ¡Aå’ŒBï¼ŒA+Bæ‰æ˜¯å®Œæ•´ç»“æœï¼Œä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿä¸éœ€è¦æˆåŠŸï¼Œç»“æ„åŒ–å¹¶å‘APIå°±å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°è¿™ä¸ªé€»è¾‘ã€‚</p><h2 id="å­µåŒ–åŠŸèƒ½"><a href="#å­µåŒ–åŠŸèƒ½" class="headerlink" title="å­µåŒ–åŠŸèƒ½"></a>å­µåŒ–åŠŸèƒ½</h2><h3 id="JEP-448-å‘é‡APIï¼ˆVector-APIï¼Œç¬¬å…­æ¬¡å­µåŒ–ï¼‰"><a href="#JEP-448-å‘é‡APIï¼ˆVector-APIï¼Œç¬¬å…­æ¬¡å­µåŒ–ï¼‰" class="headerlink" title="JEP 448: å‘é‡APIï¼ˆVector APIï¼Œç¬¬å…­æ¬¡å­µåŒ–ï¼‰"></a>JEP 448: å‘é‡APIï¼ˆVector APIï¼Œç¬¬å…­æ¬¡å­µåŒ–ï¼‰</h3><p>å‘é‡APIçš„åŠŸèƒ½æ˜¯æä¾›ä¸€ä¸ªè¡¨è¾¾å‘é‡è®¡ç®—çš„APIï¼Œæ—¨åœ¨é€šè¿‡å¼•å…¥å‘é‡è®¡ç®—APIæ¥æé«˜Javaåº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚è¿™ä¸€APIå…è®¸å¼€å‘è€…åœ¨æ”¯æŒçš„CPUæ¶æ„ä¸Šå¯é åœ°ç¼–è¯‘ä¸ºæœ€ä½³å‘é‡æŒ‡ä»¤ï¼Œä»è€Œå®ç°æ¯”ç­‰æ•ˆçš„æ ‡é‡è®¡ç®—æ›´é«˜çš„æ€§èƒ½ã€‚è¿™äº›è®¡ç®—åœ¨è¿è¡Œæ—¶å¯é åœ°ç¼–è¯‘æˆæ”¯æŒçš„CPUæ¶æ„ä¸Šçš„æœ€ä¼˜å‘é‡æŒ‡ä»¤ï¼Œä»è€Œå®ç°æ¯”ç­‰æ•ˆæ ‡é‡è®¡ç®—æ›´ä¼˜çš„æ€§èƒ½ã€‚</p><p>ä¸‹é¢è¿™ä¸ªæ˜¯å®˜æ–¹ç»™çš„ç¤ºä¾‹ï¼š</p><pre><code class="java">// æ ‡é‡è®¡ç®—ç¤ºä¾‹void scalarComputation(float[] a, float[] b, float[] c) {    for (int i = 0; i &lt; a.length ; i++) {        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;    }}// ä½¿ç”¨å‘é‡APIçš„å‘é‡è®¡ç®—ç¤ºä¾‹static final VectorSpecies&lt;Float&gt; SPECIES = FloatVector.SPECIES_PREFERRED;void vectorComputation(float[] a, float[] b, float[] c) {    int i = 0;    int upperBound = SPECIES.loopBound(a.length);    for (; i &lt; upperBound; i += SPECIES.length()) {        // FloatVector va, vb, vc;        var va = FloatVector.fromArray(SPECIES, a, i);        var vb = FloatVector.fromArray(SPECIES, b, i);        var vc = va.mul(va).add(vb.mul(vb)).neg();        vc.intoArray(c, i);    }    for (; i &lt; a.length; i++) {        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;    }}</code></pre><p>å‘é‡APIåœ¨Javaä¸­çš„ç‹¬ç‰¹ä¼˜åŠ¿åœ¨äºå…¶é«˜æ•ˆçš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ã€ä¸°å¯Œçš„å‘é‡åŒ–æŒ‡ä»¤é›†ã€è·¨å¹³å°çš„æ•°æ®å¹¶è¡Œç®—æ³•æ”¯æŒä»¥åŠå¯¹æœºå™¨å­¦ä¹ çš„ç‰¹åˆ«ä¼˜åŒ–ã€‚</p><h2 id="å¼ƒç”¨"><a href="#å¼ƒç”¨" class="headerlink" title="å¼ƒç”¨"></a>å¼ƒç”¨</h2><h3 id="JEP-449-å¯ç”¨Windows32ä½-x86æ”¯æŒï¼ˆDeprecate-the-Windows-32-bit-x86-Port-for-Removalï¼‰"><a href="#JEP-449-å¯ç”¨Windows32ä½-x86æ”¯æŒï¼ˆDeprecate-the-Windows-32-bit-x86-Port-for-Removalï¼‰" class="headerlink" title="JEP 449: å¯ç”¨Windows32ä½ x86æ”¯æŒï¼ˆDeprecate the Windows 32-bit x86 Port for Removalï¼‰"></a>JEP 449: å¯ç”¨Windows32ä½ x86æ”¯æŒï¼ˆDeprecate the Windows 32-bit x86 Port for Removalï¼‰</h3><p>æ—¨åœ¨å¼ƒç”¨å¹¶æœ€ç»ˆç§»é™¤Windows 32ä½x86å¹³å°ä¸Šçš„Javaæ”¯æŒï¼ŒåŸå› æ˜¯è¯¥å¹³å°å·²ç»é€æ¸è¢«æ·˜æ±°ã€æ€§èƒ½é™åˆ¶å’Œå®‰å…¨é—®é¢˜ç­‰ã€‚ä¸»è¦å½±å“å¯¹è±¡æ˜¯OpenJDKçš„å¼€å‘è€…å’ŒWindows 32ä½x86å¹³å°ä¸Šçš„Javaç”¨æˆ·ã€‚</p><h3 id="JEP-451-å‡†å¤‡ç¦æ­¢åŠ¨æ€åŠ è½½ä»£ç†ï¼ˆPrepare-to-Disallow-the-Dynamic-Loading-of-Agentsï¼‰"><a href="#JEP-451-å‡†å¤‡ç¦æ­¢åŠ¨æ€åŠ è½½ä»£ç†ï¼ˆPrepare-to-Disallow-the-Dynamic-Loading-of-Agentsï¼‰" class="headerlink" title="JEP 451: å‡†å¤‡ç¦æ­¢åŠ¨æ€åŠ è½½ä»£ç†ï¼ˆPrepare to Disallow the Dynamic Loading of Agentsï¼‰"></a>JEP 451: å‡†å¤‡ç¦æ­¢åŠ¨æ€åŠ è½½ä»£ç†ï¼ˆPrepare to Disallow the Dynamic Loading of Agentsï¼‰</h3><p>è¯¥ç‰¹æ€§ä¸»è¦ç›®çš„æ˜¯é€šè¿‡åœ¨è¿è¡Œä¸­çš„JVMä¸­åŠ¨æ€åŠ è½½ä»£ç†æ—¶å‘å‡ºè­¦å‘Šï¼Œæ¥å¸®åŠ©ç”¨æˆ·ä¸ºå°†æ¥çš„ç‰ˆæœ¬åšå¥½å‡†å¤‡ã€‚è¿™äº›è­¦å‘Šæ—¨åœ¨æé«˜JVMçš„é»˜è®¤å®Œæ•´æ€§ï¼Œå› ä¸ºæœªæ¥çš„ç‰ˆæœ¬å°†é»˜è®¤ç¦æ­¢åŠ¨æ€åŠ è½½ä»£ç†ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java21 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä» <a href="https://openjdk.org/projects/jdk/21/" target="_blank" rel="noopener">https://openjdk.org/projects/jdk/21/</a> æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java/java-21-features">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava21 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava21 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      Java21 åœ¨ 2023 å¹´ 9 æœˆ 19 æ—¥å‘å¸ƒGAç‰ˆæœ¬ï¼ŒJava21æ˜¯é•¿æœŸæ”¯æŒç‰ˆï¼ˆLTSï¼ŒLong-Term Supportï¼‰ï¼Œå…±åäº”å¤§ç‰¹æ€§ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java21" scheme="https://www.howardliu.cn/tags/Java21/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava20 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java/java-20-features/"/>
    <id>https://www.howardliu.cn/java/java-20-features/</id>
    <published>2024-09-12T01:00:00.000Z</published>
    <updated>2024-12-05T03:07:46.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/woman-8388428_1920.jpg" alt="Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava20 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚è®©æˆ‘ä»¬è·Ÿéš Java çš„è„šæ­¥ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œçœ‹ä¸€çœ‹æ¯ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ï¼Œæœ¬æœŸæ˜¯ Java20 çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Java20 åœ¨ 2023 å¹´ 3 æœˆ 21 æ—¥å‘å¸ƒGAç‰ˆæœ¬ï¼Œå…±ä¸ƒå¤§ç‰¹æ€§ï¼Œè¿™äº›æ–°ç‰¹æ€§å¤„äºé¢„è§ˆæˆ–å­µåŒ–é˜¶æ®µï¼Œæ—¨åœ¨ç®€åŒ–å¹¶å‘ç¼–ç¨‹ã€æé«˜æ€§èƒ½å’Œå¢å¼ºè¯­è¨€è¡¨è¾¾èƒ½åŠ›ã€‚è¿™ä¸ƒå¤§ç‰¹æ€§åˆ†åˆ«æ˜¯ï¼š</p><ul><li>JEP 429: ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼Œå­µåŒ–ï¼‰ï¼Œæ¥è‡ªAmberé¡¹ç›®ï¼Œå…è®¸åœ¨çº¿ç¨‹å†…å’Œçº¿ç¨‹é—´å…±äº«ä¸å¯å˜æ•°æ®ï¼Œä¼˜äºä¼ ç»Ÿçš„çº¿ç¨‹å±€éƒ¨å˜é‡ã€‚å®ƒä¸»è¦ç”¨äºåœ¨å¤šçº¿ç¨‹åº”ç”¨ä¸­å®‰å…¨åœ°ä¼ é€’å’Œè®¿é—®æ•°æ®ï¼Œä¾‹å¦‚ä»çˆ¶çº¿ç¨‹å‘å­çº¿ç¨‹ä¼ é€’æ•°æ®ã€‚</li><li>JEP 432: Recordæ¨¡å¼ï¼ˆRecord Patternsï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰ï¼Œæ¥è‡ªAmberé¡¹ç›®ï¼Œç”¨äºç®€åŒ–æ•°æ®ç»“æ„çš„æ¨¡å¼åŒ¹é…ã€‚</li><li>JEP 433: Switchæ¨¡å¼åŒ¹é…ï¼ˆPattern Matching for switchï¼Œç¬¬å››æ¬¡é¢„è§ˆï¼‰ï¼Œæ¥è‡ªAmberé¡¹ç›®ï¼Œç”¨äºæ”¹è¿›switchè¯­å¥ä¸­çš„æ¨¡å¼åŒ¹é…ã€‚</li><li>JEP 434: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign Function &amp; Memory APIï¼ŒFFM APIï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰ï¼Œæ¥è‡ªLoomé¡¹ç›®ï¼Œæ—¨åœ¨æä¾›æ›´é«˜æ•ˆçš„å†…å­˜ç®¡ç†å’Œå¤–éƒ¨å‡½æ•°è°ƒç”¨èƒ½åŠ›ã€‚</li><li>JEP 436: è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼Œç¬¬äºŒæ¬¡é¢„è§ˆï¼‰ï¼Œæ¥è‡ªLoomé¡¹ç›®ï¼Œé€šè¿‡å¼•å…¥è½»é‡çº§è™šæ‹Ÿçº¿ç¨‹æ¥ç®€åŒ–é«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºçš„å¼€å‘å’Œç»´æŠ¤ã€‚</li><li>JEP 437: ç»“æ„åŒ–å¹¶å‘API (Structured Concurrencyï¼Œç¬¬äºŒæ¬¡å­µåŒ–)ï¼Œæ¥è‡ªLoomé¡¹ç›®ï¼Œæ—¨åœ¨ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„å¯é æ€§å’Œå¯è§‚å¯Ÿæ€§ã€‚</li><li>JEP 438: å‘é‡APIï¼ˆVector APIï¼Œç¬¬äº”æ¬¡å­µåŒ–ï¼‰ï¼Œç”¨äºè¡¨è¾¾å‘é‡è®¡ç®—ï¼Œæé«˜äº†æ€§èƒ½å’Œä»£ç å¯è¯»æ€§ã€‚</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚</p><h2 id="é¢„è§ˆåŠŸèƒ½"><a href="#é¢„è§ˆåŠŸèƒ½" class="headerlink" title="é¢„è§ˆåŠŸèƒ½"></a>é¢„è§ˆåŠŸèƒ½</h2><h3 id="JEP-432-Recordæ¨¡å¼ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"><a href="#JEP-432-Recordæ¨¡å¼ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 432: Recordæ¨¡å¼ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"></a>JEP 432: Recordæ¨¡å¼ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</h3><p>Recordç±»å‹æä¾›ä¸å¯å˜å¯¹è±¡çš„ç®€å•å®ç°ï¼ˆå…¶å®å°±æ˜¯Java Beanï¼Œä½†æ˜¯çœç•¥ä¸€å †çš„getterã€setterã€hashcodeã€equalsã€toStringç­‰æ–¹æ³•ï¼‰ï¼ŒJava16å¼€å§‹ä¸€ç›´åœ¨æ¼”åŒ–å¢å¼ºï¼ˆå‚è§<a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a>ï¼‰ã€‚</p><p>Recordæ¨¡å¼å½’å±äºAmberé¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼ŒAmberé¡¹ç›®æ—¨åœ¨é€šè¿‡å°è€Œç¾çš„æ–¹å¼ï¼Œå¢å¼ºJavaè¯­è¨€ç‰¹æ€§ã€‚æœ¬æ¬¡çš„Recordæ¨¡å¼ï¼Œä¸»è¦æ˜¯ä½¿Recordç±»å‹å¯ä»¥ç›´æ¥åœ¨instanceofå’Œswitchæ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨ã€‚</p><p>Recordæ¨¡å¼æœ€åˆä½œä¸ºé¢„è§ˆåŠŸèƒ½åœ¨JEP 405ä¸­æå‡ºï¼Œå¹¶åœ¨Java19ä¸­äº¤ä»˜ã€‚JEP 432æå‡ºäº†ç¬¬äºŒæ¬¡é¢„è§ˆï¼ŒåŸºäºæŒç»­çš„ç»éªŒå’Œåé¦ˆè¿›è¡Œäº†è¿›ä¸€æ­¥çš„å®Œå–„ã€‚ä¸»è¦å˜åŒ–åŒ…æ‹¬ï¼š</p><ul><li>æ”¯æŒæ¨æ–­æ³›å‹è®°å½•æ¨¡å¼çš„ç±»å‹å‚æ•°ï¼Œ</li><li>å…è®¸è®°å½•æ¨¡å¼å‡ºç°åœ¨å¢å¼ºforå¾ªç¯çš„å¤´éƒ¨ï¼Œ</li><li>ç§»é™¤äº†å¯¹å‘½åè®°å½•æ¨¡å¼çš„æ”¯æŒã€‚</li></ul><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸ªç¤ºä¾‹ï¼Œæ¯”å¦‚æœ‰ä¸‹é¢å‡ ä¸ªåŸºç¡€å…ƒç´ ï¼š</p><pre><code class="java">// é¢œè‰²enum Color { RED, GREEN, BLUE}// ç‚¹record Point(int x, int y) {}// å¸¦é¢œè‰²çš„ç‚¹record ColoredPoint(Point p, Color color) {}// æ­£æ–¹å½¢record Square(ColoredPoint upperLeft, ColoredPoint lowerRight) {}</code></pre><p>æˆ‘ä»¬åˆ†åˆ«é€šè¿‡instanceofæ¨¡å¼åŒ¹é…å’Œswitchæ¨¡å¼åŒ¹é…åˆ¤æ–­è¾“å…¥å‚æ•°çš„ç±»å‹ï¼Œæ‰“å°ä¸åŒçš„æ ¼å¼ï¼š</p><pre><code class="java">private static void instancePatternsAndPrint(Object o) {    if (o instanceof Square(ColoredPoint upperLeft, ColoredPoint lowerRight)) {        System.out.println(&quot;Squareç±»å‹ï¼š&quot; + upperLeft + &quot; &quot; + lowerRight);    } else if (o instanceof ColoredPoint(Point(int x, int y), Color color)) {        System.out.println(&quot;ColoredPointç±»å‹ï¼š&quot; + x + &quot; &quot; + y + &quot; &quot; + color);    } else if (o instanceof Point p) {        System.out.println(&quot;Pointç±»å‹ï¼š&quot; + p);    }}private static void switchPatternsAndPrint(Object o) {    switch (o) {        case Square(ColoredPoint upperLeft, ColoredPoint lowerRight) -&gt; {            System.out.println(&quot;Squareç±»å‹ï¼š&quot; + upperLeft + &quot; &quot; + lowerRight);        }        case ColoredPoint(Point(int x, int y), Color color) -&gt; {            System.out.println(&quot;ColoredPointç±»å‹ï¼š&quot; + x + &quot; &quot; + y + &quot; &quot; + color);        }        case Point p -&gt; {            System.out.println(&quot;Pointç±»å‹ï¼š&quot; + p);        }        default -&gt; throw new IllegalStateException(&quot;Unexpected value: &quot; + o);    }}</code></pre><p>æˆ‘ä»¬é€šè¿‡mainæ–¹æ³•æ‰§è¡Œä¸‹ï¼š</p><pre><code class="java">public static void main(String[] args) {    var p = new Point(1, 2);    var cp1 = new ColoredPoint(p, Color.RED);    var cp2 = new ColoredPoint(p, Color.GREEN);    var square = new Square(cp1, cp2);    instancePatternsAndPrint(square);    instancePatternsAndPrint(cp1);    instancePatternsAndPrint(p);    switchPatternsAndPrint(square);    switchPatternsAndPrint(cp1);    switchPatternsAndPrint(p);}// ç»“æœæ˜¯ï¼š//// Squareç±»å‹ï¼šColoredPoint[p=Point[x=1, y=2], color=RED] ColoredPoint[p=Point[x=1, y=2], color=GREEN]// ColoredPointç±»å‹ï¼š1 2 RED// Pointç±»å‹ï¼šPoint[x=1, y=2]//// Squareç±»å‹ï¼šColoredPoint[p=Point[x=1, y=2], color=RED] ColoredPoint[p=Point[x=1, y=2], color=GREEN]// ColoredPointç±»å‹ï¼š1 2 RED// Pointç±»å‹ï¼šPoint[x=1, y=2]</code></pre><h3 id="JEP-433-switchæ¨¡å¼åŒ¹é…ï¼ˆç¬¬å››æ¬¡é¢„è§ˆï¼‰"><a href="#JEP-433-switchæ¨¡å¼åŒ¹é…ï¼ˆç¬¬å››æ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 433: switchæ¨¡å¼åŒ¹é…ï¼ˆç¬¬å››æ¬¡é¢„è§ˆï¼‰"></a>JEP 433: switchæ¨¡å¼åŒ¹é…ï¼ˆç¬¬å››æ¬¡é¢„è§ˆï¼‰</h3><p>åœ¨Java20ä¹‹å‰ï¼Œswitchæ¨¡å¼åŒ¹é…çš„é€‰æ‹©å™¨è¡¨è¾¾å¼åªèƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æˆ–å­—ç¬¦ä¸²ã€‚åœ¨Java20ä¸­ï¼Œè¿™ä¸€é™åˆ¶è¢«å–æ¶ˆï¼Œå…è®¸é€‰æ‹©å™¨è¡¨è¾¾å¼ä¸ºä»»ä½•å¼•ç”¨ç±»å‹ï¼ŒåŒ…æ‹¬instanceofæ“ä½œç¬¦ã€‚è¿™æ„å‘³ç€å¯ä»¥æ›´çµæ´»åœ°ä½¿ç”¨å¯¹è±¡ã€æ•°ç»„ã€åˆ—è¡¨ç­‰å¤æ‚æ•°æ®ç»“æ„ä½œä¸ºswitchè¯­å¥çš„åŸºç¡€ï¼Œä»è€Œç®€åŒ–ä»£ç å¹¶æé«˜å¯è¯»æ€§ã€‚</p><p>switchæ¨¡å¼åŒ¹é…å…è®¸åœ¨switchè¯­å¥ä¸­ä½¿ç”¨æ¨¡å¼æ¥æµ‹è¯•è¡¨è¾¾å¼ï¼Œæ¯ä¸ªæ¨¡å¼éƒ½æœ‰ç‰¹å®šçš„åŠ¨ä½œï¼Œä»è€Œå¯ä»¥ç®€æ´ã€å®‰å…¨åœ°è¡¨è¾¾å¤æ‚çš„æ•°æ®å¯¼å‘æŸ¥è¯¢ã€‚</p><p>ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li>å¢å¼ºè¡¨è¾¾æ€§å’Œé€‚ç”¨æ€§ï¼šå…è®¸åœ¨caseæ ‡ç­¾ä¸­å‡ºç°æ¨¡å¼ï¼Œæ‰©å±•äº†switchè¡¨è¾¾å¼å’Œè¯­å¥çš„è¡¨è¾¾èƒ½åŠ›å’Œé€‚ç”¨èŒƒå›´ã€‚</li><li>æ”¾å®½å¯¹nullçš„æ•Œæ„ï¼šå½“éœ€è¦æ—¶ï¼Œå¯ä»¥æ”¾å®½switchå¯¹nullçš„æ•Œæ„ã€‚</li><li>æé«˜å®‰å…¨æ€§ï¼šè¦æ±‚æ¨¡å¼switchè¯­å¥è¦†ç›–æ‰€æœ‰å¯èƒ½çš„è¾“å…¥å€¼ï¼Œå¢åŠ äº†switchè¯­å¥çš„å®‰å…¨æ€§ã€‚</li><li>ä¿æŒå…¼å®¹æ€§ï¼šç¡®ä¿æ‰€æœ‰ç°æœ‰çš„switchè¡¨è¾¾å¼å’Œè¯­å¥ç»§ç»­æ— å˜åŒ–åœ°ç¼–è¯‘å¹¶ä»¥ç›¸åŒçš„è¯­ä¹‰æ‰§è¡Œã€‚</li></ul><p>é€šè¿‡ä»£ç çœ‹ä¸‹switchæ¨¡å¼åŒ¹é…çš„é­…åŠ›ï¼›</p><pre><code class="java">static String formatValue(Object obj) {    return switch (obj) {        case null -&gt; &quot;null&quot;;        case Integer i -&gt; String.format(&quot;int %d&quot;, i);        case Long l -&gt; String.format(&quot;long %d&quot;, l);        case Double d -&gt; String.format(&quot;double %f&quot;, d);        case String s -&gt; String.format(&quot;String %s&quot;, s);        case Person(String name, String address) -&gt; String.format(&quot;Person %s %s&quot;, name, address);        default -&gt; obj.toString();    };}public record Person(String name, String address) {}public static void main(String[] args) {    System.out.println(formatValue(10));    System.out.println(formatValue(20L));    System.out.println(formatValue(3.14));    System.out.println(formatValue(&quot;Hello&quot;));    System.out.println(formatValue(null));    System.out.println(formatValue(new Person(&quot;Howard&quot;, &quot;Beijing&quot;)));}// è¿è¡Œç»“æœ// int 10// long 20// double 3.140000// String Hello// null// Person Howard Beijing</code></pre><h3 id="JEP-434-å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"><a href="#JEP-434-å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 434: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"></a>JEP 434: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</h3><p>å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign Function &amp; Memory APIï¼Œç®€ç§°FFM APIï¼‰æ—¨åœ¨æä¾›ä¸€ç§æœºåˆ¶ï¼Œä½¿Javaç¨‹åºèƒ½å¤Ÿä¸Javaè¿è¡Œæ—¶ä¹‹å¤–çš„ä»£ç å’Œæ•°æ®è¿›è¡Œäº’æ“ä½œã€‚é€šè¿‡é«˜æ•ˆåœ°è°ƒç”¨å¤–éƒ¨å‡½æ•°ï¼ˆå³JVMä¹‹å¤–çš„ä»£ç ï¼‰ä»¥åŠå®‰å…¨åœ°è®¿é—®å¤–éƒ¨å†…å­˜ï¼ˆå³éJVMç®¡ç†çš„å†…å­˜ï¼‰ï¼Œè¯¥APIä½¿å¾—Javaç¨‹åºèƒ½å¤Ÿè°ƒç”¨æœ¬åœ°åº“å¹¶å¤„ç†æœ¬åœ°æ•°æ®ï¼Œè€Œæ— éœ€ä½¿ç”¨JNIå¸¦æ¥çš„è„†å¼±æ€§å’Œå±é™©ã€‚</p><p>ç®€å•è¯´ï¼ŒFFM APIæ˜¯ä¸ºäº†æ›¿æ¢JNIçš„å‡½æ•°ï¼Œåœ¨Java20ä¸­æ˜¯ç¬¬äºŒæ¬¡é¢„è§ˆç‰ˆï¼Œæœ€ç»ˆä¼šåœ¨Java22ä¸­è½¬æ­£ã€‚</p><p>FFM APIçš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li>æ˜“ç”¨æ€§ï¼šç”¨ä¸€ä¸ªæ›´ä¼˜è¶Šã€å®Œå…¨Javaå¼€å‘æ¨¡å‹æ›¿ä»£äº†JavaåŸç”Ÿæ¥å£ï¼ˆJNIï¼‰ã€‚</li><li>æ€§èƒ½ï¼šæä¾›ä¸ç°æœ‰APIï¼ˆå¦‚JNIå’Œsun.misc.Unsafe ï¼‰ç›¸å½“ç”šè‡³æ›´å¥½çš„æ€§èƒ½ã€‚</li><li>é€šç”¨æ€§ï¼šæ”¯æŒæ“ä½œä¸åŒç±»å‹çš„å¤–éƒ¨å†…å­˜ï¼ˆä¾‹å¦‚ï¼Œæœ¬åœ°å†…å­˜ã€æŒä¹…å†…å­˜å’Œæ‰˜ç®¡å †å†…å­˜ï¼‰ï¼Œå¹¶è®¡åˆ’éšç€æ—¶é—´çš„æ¨ç§»é€‚åº”å…¶ä»–å¹³å°ï¼ˆä¾‹å¦‚ï¼Œ32ä½x86ï¼‰å’Œç”¨Cè¯­è¨€ä¹‹å¤–çš„è¯­è¨€ï¼ˆä¾‹å¦‚C++ã€Fortranï¼‰ç¼–å†™çš„å¤–éƒ¨å‡½æ•°ã€‚</li><li>å®‰å…¨æ€§ï¼šå…è®¸ç¨‹åºåœ¨é»˜è®¤æƒ…å†µä¸‹å¯¹å¤–éƒ¨å†…å­˜æ‰§è¡Œä¸å®‰å…¨çš„æ“ä½œï¼Œä½†ä¼šå‘ç”¨æˆ·å‘å‡ºè­¦å‘Šã€‚</li></ul><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®˜æ–¹ç»™çš„ç¤ºä¾‹ï¼šå¦‚ä½•è·å–Cåº“å‡½æ•°<code>radixsort</code>çš„æ–¹æ³•å¥æŸ„ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å¯¹å››ä¸ªå­—ç¬¦ä¸²è¿›è¡Œæ’åºã€‚</p><pre><code class="java">// 1. æ‰¾åˆ°Cåº“è·¯å¾„ä¸Šçš„å¤–éƒ¨å‡½æ•°Linker linker = Linker.nativeLinker();SymbolLookup stdlib = linker.defaultLookup();MethodHandle radixSort = linker.downcallHandle(stdlib.lookup (&quot;radixsort&quot;), ...);// 2. åœ¨å †ä¸Šåˆ†é…å†…å­˜å­˜å‚¨å››ä¸ªå­—ç¬¦ä¸²String[] javaStrings = { &quot;mouse&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;car&quot; };// 3. åœ¨éå †ä¸Šåˆ†é…å†…å­˜å­˜å‚¨å››ä¸ªæŒ‡é’ˆSegmentAllocator allocator = SegmentAllocator.implicitAllocator();MemorySegment offHeap = allocator.allocateArray(ValueLayout.ADDRESS, javaStrings.length );// 4. å°†å­—ç¬¦ä¸²ä»å †ä¸Šå¤åˆ¶åˆ°éå †ä¸Šfor (int i = 0; i &lt; javaStrings.length ; i++) {    // åˆ†é…ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°éå †ä¸Šï¼Œç„¶åå­˜å‚¨å…¶æŒ‡é’ˆ    MemorySegment cString = allocator.allocateUtf8String(javaStrings[i]);    offHeap.setAtIndex(ValueLayout.ADDRESS, i, cString);}// 5. è°ƒç”¨å¤–éƒ¨å‡½æ•°å¯¹éå †ä¸Šçš„æ•°æ®è¿›è¡Œæ’åºradixSort.invoke (offHeap, javaStrings.length , MemoryAddress.NULL, &#39;\0&#39;);// 6. å°†ï¼ˆé‡æ–°æ’åºçš„ï¼‰å­—ç¬¦ä¸²ä»éå †ä¸Šå¤åˆ¶å›å †ä¸Šfor (int i = 0; i &lt; javaStrings.length ; i++) {    MemoryAddress cStringPtr = offHeap.getAtIndex(ValueLayout.ADDRESS, i);    javaStrings[i] = cStringPtr.getUtf8String(0);}assert Arrays.equals (javaStrings, new String[] {&quot;car&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;}); // true</code></pre><blockquote><p>å‹æƒ…æç¤ºï¼šå®˜æ–¹çš„ä»£ç ä»…æ˜¯ç¤ºæ„ï¼Œå¾ˆå¤šAPIè¿˜åœ¨è°ƒæ•´ï¼Œåªæœ‰ç­‰åˆ°æ­£å¼å‘è¡Œæ—¶æ‰èƒ½æš‚æ—¶ç¡®å®šä¸‹æ¥ã€‚</p></blockquote><h3 id="JEP-436-è™šæ‹Ÿçº¿ç¨‹ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"><a href="#JEP-436-è™šæ‹Ÿçº¿ç¨‹ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 436: è™šæ‹Ÿçº¿ç¨‹ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"></a>JEP 436: è™šæ‹Ÿçº¿ç¨‹ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</h3><p>è™šæ‹Ÿçº¿ç¨‹æ˜¯ä¸€ç§è½»é‡çº§çš„çº¿ç¨‹å®ç°ï¼Œæ—¨åœ¨æ˜¾è‘—é™ä½ç¼–å†™ã€ç»´æŠ¤å’Œè§‚å¯Ÿé«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºçš„éš¾åº¦ã€‚å®ƒä»¬å ç”¨çš„èµ„æºå°‘ï¼Œä¸éœ€è¦è¢«æ± åŒ–ï¼Œå¯ä»¥åˆ›å»ºå¤§é‡è™šæ‹Ÿçº¿ç¨‹ï¼Œç‰¹åˆ«é€‚ç”¨äºIOå¯†é›†å‹ä»»åŠ¡ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é«˜æ•ˆåœ°è°ƒåº¦å¤§é‡è™šæ‹Ÿçº¿ç¨‹æ¥å¤„ç†å¹¶å‘è¯·æ±‚ï¼Œä»è€Œæ˜¾è‘—æé«˜ç¨‹åºçš„ååé‡å’Œå“åº”é€Ÿåº¦ã€‚</p><p>ç›¸æ¯”äºä¼ ç»Ÿç°æˆï¼Œè™šæ‹Ÿçº¿ç¨‹æ€§èƒ½æ˜¾è‘—æå‡ã€‚</p><p>è™šæ‹Ÿçº¿ç¨‹åœ¨Java19ä¸­ç¬¬ä¸€æ¬¡é¢„è§ˆï¼Œåœ¨Java20ç¬¬äºŒæ¬¡é¢„è§ˆï¼Œæœ¬æ¬¡é¢„è§ˆæ²¡æœ‰å¼•å…¥æ–°çš„APIï¼Œåšäº†ä¸€äº›æœ€ç»ˆåŒ–å¤„ç†ï¼Œä¸ºJava21æ­£å¼å‘å¸ƒåšå‡†å¤‡ã€‚</p><p>è™šæ‹Ÿçº¿ç¨‹æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ol><li>è½»é‡çº§ï¼šè™šæ‹Ÿçº¿ç¨‹æ˜¯JVMå†…éƒ¨å®ç°çš„è½»é‡çº§çº¿ç¨‹ï¼Œä¸éœ€è¦æ“ä½œç³»ç»Ÿå†…æ ¸å‚ä¸ï¼Œåˆ›å»ºå’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æˆæœ¬è¿œä½äºä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼ˆå³å¹³å°çº¿ç¨‹ï¼‰ï¼Œä¸”å ç”¨çš„å†…å­˜èµ„æºè¾ƒå°‘ã€‚</li><li>å‡å°‘CPUæ—¶é—´æ¶ˆè€—ï¼šç”±äºè™šæ‹Ÿçº¿ç¨‹ä¸ä¾èµ–äºæ“ä½œç³»ç»Ÿå¹³å°çº¿ç¨‹ï¼Œå› æ­¤åœ¨è¿›è¡Œçº¿ç¨‹åˆ‡æ¢æ—¶è€—è´¹çš„CPUæ—¶é—´ä¼šå¤§å¤§å‡å°‘ï¼Œä»è€Œæé«˜äº†ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</li><li>ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼šè™šæ‹Ÿçº¿ç¨‹é€šè¿‡ç»“æ„åŒ–å¹¶å‘APIæ¥ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´å®¹æ˜“åœ°ç¼–å†™ã€ç»´æŠ¤å’Œè§‚å¯Ÿé«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºã€‚</li><li>é€‚ç”¨äºå¤§é‡ä»»åŠ¡åœºæ™¯ï¼šè™šæ‹Ÿçº¿ç¨‹éå¸¸é€‚åˆéœ€è¦åˆ›å»ºå’Œé”€æ¯å¤§é‡çº¿ç¨‹çš„ä»»åŠ¡ã€éœ€è¦æ‰§è¡Œå¤§é‡è®¡ç®—çš„ä»»åŠ¡ï¼ˆå¦‚æ•°æ®å¤„ç†ã€ç§‘å­¦è®¡ç®—ç­‰ï¼‰ä»¥åŠéœ€è¦å®ç°ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œä»¥æé«˜ç¨‹åºæ€§èƒ½çš„åœºæ™¯ã€‚</li><li>æé«˜ç³»ç»Ÿååé‡ï¼šé€šè¿‡å¯¹è™šæ‹Ÿçº¿ç¨‹çš„ä»‹ç»å’Œä¸Goåç¨‹çš„å¯¹æ¯”ï¼Œå¯ä»¥çœ‹å‡ºè™šæ‹Ÿçº¿ç¨‹èƒ½å¤Ÿå¤§å¹…æé«˜ç³»ç»Ÿçš„æ•´ä½“ååé‡ã€‚</li></ol><p>è™½ç„¶è™šæ‹Ÿçº¿ç¨‹æ˜¯é¢„è§ˆåŠŸèƒ½ï¼Œä¸å¦¨ç¢æˆ‘ä»¬ä¸€èµ·è¯•ç”¨ä¸‹ã€‚</p><pre><code class="java">try (var executor = Executors.newVirtualThreadPerTaskExecutor()) {    IntStream.range(0, 10_000).forEach(i -&gt; {        executor.submit(() -&gt; {            Thread.sleep(Duration.ofSeconds(1));            System.out.println(Thread.currentThread().getName() + &quot;: &quot; + i);            return i;        });    });}Thread.startVirtualThread(() -&gt; {    System.out.println(&quot;Hello from a virtual thread[Thread.startVirtualThread]&quot;);});final ThreadFactory factory = Thread.ofVirtual().factory();factory.newThread(() -&gt; {            System.out.println(&quot;Hello from a virtual thread[ThreadFactory.newThread]&quot;);        })        .start();</code></pre><p>è™šæ‹Ÿçº¿ç¨‹ä¸ºäº†é™ä½ä½¿ç”¨é—¨æ§›ï¼Œç›´æ¥æä¾›äº†ä¸åŸç”Ÿçº¿ç¨‹ç±»ä¼¼çš„æ–¹æ³•ï¼š</p><ul><li><code>Executors.newVirtualThreadPerTaskExecutor()</code>ï¼Œå¯ä»¥åƒæ™®é€šçº¿ç¨‹æ± ä¸€æ ·åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹ã€‚</li><li><code>Thread.startVirtualThread</code>ï¼Œé€šè¿‡å·¥å…·æ–¹æ³•ç›´æ¥åˆ›å»ºå¹¶è¿è¡Œè™šæ‹Ÿçº¿ç¨‹ã€‚</li><li><code>Thread.ofVirtual().factory().newThread()</code>ï¼Œå¦ä¸€ä¸ªå·¥å…·æ–¹æ³•å¯ä»¥åˆ›å»ºå¹¶è¿è¡Œè™šæ‹Ÿçº¿ç¨‹ã€‚<code>Thread</code>è¿˜æœ‰ä¸€ä¸ª<code>ofPlatform()</code>æ–¹æ³•ï¼Œç”¨æ¥æ„å»ºæ™®é€šçº¿ç¨‹ã€‚</li></ul><p>é€šè¿‡æœ¬åœ°ç®€å•æµ‹è¯•ï¼ˆåœ¨ã€Œå…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹ã€å›å¤â€javaâ€è·å–æºç ï¼‰ï¼Œ1wä¸ªæ¨¡æ‹Ÿçº¿ç¨‹è¿è¡Œæ—¶ï¼Œæ€§èƒ½æ–¹é¢è™šæ‹Ÿçº¿ç¨‹ &gt; çº¿ç¨‹æ± ã€‚</p><h2 id="å­µåŒ–åŠŸèƒ½"><a href="#å­µåŒ–åŠŸèƒ½" class="headerlink" title="å­µåŒ–åŠŸèƒ½"></a>å­µåŒ–åŠŸèƒ½</h2><h3 id="JEP-429-ä½œç”¨åŸŸå€¼ï¼ˆå­µåŒ–ï¼‰"><a href="#JEP-429-ä½œç”¨åŸŸå€¼ï¼ˆå­µåŒ–ï¼‰" class="headerlink" title="JEP 429: ä½œç”¨åŸŸå€¼ï¼ˆå­µåŒ–ï¼‰"></a>JEP 429: ä½œç”¨åŸŸå€¼ï¼ˆå­µåŒ–ï¼‰</h3><p>JEP 429: ä½œç”¨åŸŸå€¼ï¼ˆScoped Valuesï¼‰ï¼Œæ—¨åœ¨ä¿ƒè¿›åœ¨çº¿ç¨‹å†…å’Œçº¿ç¨‹é—´å…±äº«ä¸å¯å˜æ•°æ®ã€‚è¿™ä¸€ç‰¹æ€§ä¸ºç°ä»£ Java åº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§æ›´é«˜æ•ˆå’Œå®‰å…¨çš„æ›¿ä»£ä¼ ç»Ÿ ThreadLocal æœºåˆ¶çš„æ–¹æ³•ï¼Œå°¤å…¶æ˜¯åœ¨å¹¶å‘ç¼–ç¨‹çš„èƒŒæ™¯ä¸‹ã€‚</p><p>ä½œç”¨åŸŸå€¼å…è®¸å¼€å‘è€…å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè¯¥å˜é‡å¯ä»¥åœ¨ç‰¹å®šçš„ä½œç”¨åŸŸå†…è®¿é—®ï¼ŒåŒ…æ‹¬å½“å‰çº¿ç¨‹åŠå…¶åˆ›å»ºçš„ä»»ä½•å­çº¿ç¨‹ã€‚è¿™ä¸€æœºåˆ¶ç‰¹åˆ«é€‚ç”¨äºåœ¨æ–¹æ³•è°ƒç”¨é“¾ä¸­éšå¼ä¼ é€’æ•°æ®ï¼Œè€Œæ— éœ€åœ¨æ–¹æ³•ç­¾åä¸­æ·»åŠ é¢å¤–çš„å‚æ•°ã€‚</p><p>ä½œç”¨åŸŸå€¼çš„ä¸»è¦ç‰¹ç‚¹ï¼š</p><ul><li>ä¸å¯å˜æ€§ï¼šä½œç”¨åŸŸå€¼æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦è®¾ç½®ï¼Œå…¶å€¼å°±ä¸èƒ½æ›´æ”¹ã€‚è¿™ç§ä¸å¯å˜æ€§å‡å°‘äº†å¹¶å‘ç¼–ç¨‹ä¸­æ„å¤–å‰¯ä½œç”¨çš„é£é™©ã€‚</li><li>ä½œç”¨åŸŸç”Ÿå‘½å‘¨æœŸï¼šä½œç”¨åŸŸå€¼çš„ç”Ÿå‘½å‘¨æœŸä»…é™äº run æ–¹æ³•å®šä¹‰çš„ä½œç”¨åŸŸã€‚ä¸€æ—¦æ‰§è¡Œç¦»å¼€è¯¥ä½œç”¨åŸŸï¼Œä½œç”¨åŸŸå€¼å°†ä¸å†å¯è®¿é—®ã€‚</li><li>ç»§æ‰¿æ€§ï¼šå­çº¿ç¨‹ä¼šè‡ªåŠ¨ç»§æ‰¿çˆ¶çº¿ç¨‹çš„ä½œç”¨åŸŸå€¼ï¼Œä»è€Œå…è®¸åœ¨çº¿ç¨‹è¾¹ç•Œé—´æ— ç¼å…±äº«æ•°æ®ã€‚</li></ul><p>åœ¨ä¹‹å‰ï¼Œåœ¨å¤šçº¿ç¨‹é—´ä¼ é€’æ•°æ®ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨<code>ThreadLocal</code>æ¥ä¿å­˜å½“å‰çº¿ç¨‹å˜é‡ï¼Œç”¨å®Œéœ€è¦æ‰‹åŠ¨æ¸…ç†ï¼Œå¦‚æœå¿˜è®°æ¸…ç†æˆ–è€…ä½¿ç”¨ä¸è§„èŒƒï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ç­‰é—®é¢˜ã€‚ä½œç”¨åŸŸå€¼é€šè¿‡è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸå’Œå†…å­˜ï¼Œå‡å°‘äº†è¿™ç§é£é™©ã€‚</p><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹ä½œç”¨åŸŸå€¼çš„ä½¿ç”¨ï¼š</p><pre><code class="java">// å£°æ˜ä¸€ä¸ªä½œç”¨åŸŸå€¼ç”¨äºå­˜å‚¨ç”¨æˆ·åpublic final static ScopedValue&lt;String&gt; USERNAME = ScopedValue.newInstance();private static final Runnable printUsername = () -&gt;        System.out.println(Thread.currentThread().threadId() + &quot; ç”¨æˆ·åæ˜¯ &quot; + USERNAME.get());public static void main(String[] args) throws Exception {    // å°†ç”¨æˆ·å &quot;Bob&quot; ç»‘å®šåˆ°ä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Bob&quot;).run(() -&gt; {        printUsername.run();        new Thread(printUsername).start();    });    // å°†ç”¨æˆ·å &quot;Chris&quot; ç»‘å®šåˆ°å¦ä¸€ä¸ªä½œç”¨åŸŸå¹¶æ‰§è¡Œ Runnable    ScopedValue.where(USERNAME, &quot;Chris&quot;).run(() -&gt; {        printUsername.run();        new Thread(() -&gt; {            new Thread(printUsername).start();            printUsername.run();        }).start();    });    // æ£€æŸ¥åœ¨ä»»ä½•ä½œç”¨åŸŸå¤– USERNAME æ˜¯å¦è¢«ç»‘å®š    System.out.println(&quot;ç”¨æˆ·åæ˜¯å¦è¢«ç»‘å®š: &quot; + USERNAME.isBound());}</code></pre><p>å†™èµ·æ¥å¹²å‡€åˆ©ç´¢ï¼Œè€Œä¸”åŠŸèƒ½æ›´å¼ºã€‚</p><h3 id="JEP-437-ç»“æ„åŒ–å¹¶å‘API-ç¬¬äºŒæ¬¡å­µåŒ–"><a href="#JEP-437-ç»“æ„åŒ–å¹¶å‘API-ç¬¬äºŒæ¬¡å­µåŒ–" class="headerlink" title="JEP 437: ç»“æ„åŒ–å¹¶å‘API (ç¬¬äºŒæ¬¡å­µåŒ–)"></a>JEP 437: ç»“æ„åŒ–å¹¶å‘API (ç¬¬äºŒæ¬¡å­µåŒ–)</h3><p>JEP 437: ç»“æ„åŒ–å¹¶å‘APIï¼ˆStructured Concurrency APIï¼‰æ—¨åœ¨ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œé€šè¿‡å¼•å…¥ä¸€ä¸ªAPIæ¥å¤„ç†åœ¨ä¸åŒçº¿ç¨‹ä¸­è¿è¡Œçš„å¤šä¸ªä»»åŠ¡ä½œä¸ºä¸€ä¸ªå•ä¸€å·¥ä½œå•å…ƒï¼Œä»è€Œç®€åŒ–é”™è¯¯å¤„ç†å’Œå–æ¶ˆæ“ä½œï¼Œæé«˜å¯é æ€§ï¼Œå¹¶å¢å¼ºå¯è§‚æµ‹æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªå¤„äºå­µåŒ–é˜¶æ®µçš„APIã€‚</p><p>ç»“æ„åŒ–å¹¶å‘APIæä¾›äº†æ˜ç¡®çš„è¯­æ³•ç»“æ„æ¥å®šä¹‰å­ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶å¯ç”¨ä¸€ä¸ªè¿è¡Œæ—¶è¡¨ç¤ºçº¿ç¨‹é—´çš„å±‚æ¬¡ç»“æ„ã€‚è¿™æœ‰åŠ©äºå®ç°é”™è¯¯ä¼ æ’­å’Œå–æ¶ˆä»¥åŠå¹¶å‘ç¨‹åºçš„æœ‰æ„ä¹‰è§‚å¯Ÿã€‚</p><p>Javaä½¿ç”¨å¼‚å¸¸å¤„ç†æœºåˆ¶æ¥ç®¡ç†è¿è¡Œæ—¶é”™è¯¯å’Œå…¶ä»–å¼‚å¸¸ã€‚å½“å¼‚å¸¸åœ¨ä»£ç ä¸­äº§ç”Ÿæ—¶ï¼Œå¦‚ä½•è¢«ä¼ é€’å’Œå¤„ç†çš„è¿‡ç¨‹ç§°ä¸ºå¼‚å¸¸ä¼ æ’­ã€‚</p><p>åœ¨ç»“æ„åŒ–å¹¶å‘ç¯å¢ƒä¸­ï¼Œå¼‚å¸¸å¯ä»¥é€šè¿‡æ˜¾å¼åœ°ä»å½“å‰ç¯å¢ƒä¸­æŠ›å‡ºå¹¶ä¼ æ’­åˆ°æ›´å¤§çš„ç¯å¢ƒä¸­å»å¤„ç†ã€‚</p><p>åœ¨Javaå¹¶å‘ç¼–ç¨‹ä¸­ï¼Œéå—æ£€å¼‚å¸¸çš„å¤„ç†æ˜¯ç¨‹åºå¥å£®æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ç‰¹åˆ«æ˜¯å¯¹äºéå—æ£€å¼‚å¸¸çš„å¤„ç†ï¼Œè¿™å…³ç³»åˆ°ç¨‹åºåœ¨é‡åˆ°é”™è¯¯æ—¶æ˜¯å¦èƒ½å¤Ÿä¼˜é›…åœ°ç»§ç»­è¿è¡Œæˆ–è€…è‡³å°‘æä¾›æœ‰æ„ä¹‰çš„åé¦ˆã€‚</p><pre><code class="java">try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {    var task1 = scope.fork(() -&gt; {        Thread.sleep(1000);        return &quot;Result from task 1&quot;;    });    var task2 = scope.fork(() -&gt; {        Thread.sleep(2000);        return &quot;Result from task 2&quot;;    });    scope.join();    scope.throwIfFailed(RuntimeException::new);    System.out.println(task1.get());    System.out.println(task2.get());} catch (Exception e) {    e.printStackTrace();}</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œhandle()æ–¹æ³•ä½¿ç”¨StructuredTaskScopeæ¥å¹¶è¡Œæ‰§è¡Œä¸¤ä¸ªå­ä»»åŠ¡ï¼štask1å’Œtask2ã€‚é€šè¿‡ä½¿ç”¨try-with-resourcesè¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œå¹¶ç¡®ä¿æ‰€æœ‰å­ä»»åŠ¡éƒ½åœ¨tryå—ç»“æŸæ—¶æ­£ç¡®å®Œæˆæˆ–è¢«å–æ¶ˆã€‚è¿™ç§æ–¹å¼ä½¿å¾—çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œä»»åŠ¡çš„é€»è¾‘ç»“æ„ç´§å¯†ç›¸å…³ï¼Œæé«˜äº†ä»£ç çš„æ¸…æ™°åº¦å’Œé”™è¯¯å¤„ç†çš„æ•ˆç‡ã€‚ä½¿ç”¨ StructuredTaskScope å¯ä»¥ç¡®ä¿ä¸€äº›æœ‰ä»·å€¼çš„å±æ€§ï¼š</p><ul><li>é”™è¯¯å¤„ç†ä¸çŸ­è·¯ï¼šå¦‚æœtask1æˆ–task2å­ä»»åŠ¡ä¸­çš„ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦ä¸€ä¸ªå¦‚æœå°šæœªå®Œæˆåˆ™ä¼šè¢«å–æ¶ˆã€‚ï¼ˆè¿™ç”± ShutdownOnFailure å®ç°çš„å…³é—­ç­–ç•¥æ¥ç®¡ç†ï¼›è¿˜æœ‰å…¶ä»–ç­–ç•¥å¯èƒ½ï¼‰ã€‚</li><li>å–æ¶ˆä¼ æ’­ï¼šå¦‚æœåœ¨è¿è¡Œä¸Šé¢æ–¹æ³•çš„çº¿ç¨‹åœ¨è°ƒç”¨ join() ä¹‹å‰æˆ–ä¹‹ä¸­è¢«ä¸­æ–­ï¼Œåˆ™çº¿ç¨‹åœ¨é€€å‡ºä½œç”¨åŸŸæ—¶ä¼šè‡ªåŠ¨å–æ¶ˆä¸¤ä¸ªå­ä»»åŠ¡ã€‚</li><li>æ¸…æ™°æ€§ï¼šè®¾ç½®å­ä»»åŠ¡ï¼Œç­‰å¾…å®ƒä»¬å®Œæˆæˆ–è¢«å–æ¶ˆï¼Œç„¶åå†³å®šæ˜¯æˆåŠŸï¼ˆå¹¶å¤„ç†å·²ç»å®Œæˆçš„å­ä»»åŠ¡çš„ç»“æœï¼‰è¿˜æ˜¯å¤±è´¥ï¼ˆå­ä»»åŠ¡å·²ç»å®Œæˆï¼Œå› æ­¤æ²¡æœ‰æ›´å¤šéœ€è¦æ¸…ç†çš„ï¼‰ã€‚</li><li>å¯è§‚å¯Ÿæ€§ï¼šçº¿ç¨‹è½¬å‚¨æ¸…æ¥šåœ°æ˜¾ç¤ºäº†ä»»åŠ¡å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­è¿è¡Œtask1æˆ–task2çš„çº¿ç¨‹è¢«æ˜¾ç¤ºä¸ºä½œç”¨åŸŸçš„å­ä»»åŠ¡ã€‚</li></ul><p>ä¸Šé¢çš„ç¤ºä¾‹èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³æˆ‘ä»¬çš„ä¸€ä¸ªç—›ç‚¹ï¼Œæœ‰ä¸¤ä¸ªå¯å¹¶è¡Œçš„ä»»åŠ¡Aå’ŒBï¼ŒA+Bæ‰æ˜¯å®Œæ•´ç»“æœï¼Œä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿä¸éœ€è¦æˆåŠŸï¼Œç»“æ„åŒ–å¹¶å‘APIå°±å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°è¿™ä¸ªé€»è¾‘ã€‚</p><h3 id="JEP-438-å‘é‡APIï¼ˆç¬¬äº”æ¬¡å­µåŒ–ï¼‰"><a href="#JEP-438-å‘é‡APIï¼ˆç¬¬äº”æ¬¡å­µåŒ–ï¼‰" class="headerlink" title="JEP 438: å‘é‡APIï¼ˆç¬¬äº”æ¬¡å­µåŒ–ï¼‰"></a>JEP 438: å‘é‡APIï¼ˆç¬¬äº”æ¬¡å­µåŒ–ï¼‰</h3><p>å‘é‡APIçš„åŠŸèƒ½æ˜¯æä¾›ä¸€ä¸ªè¡¨è¾¾å‘é‡è®¡ç®—çš„APIï¼Œè¿™äº›è®¡ç®—åœ¨è¿è¡Œæ—¶å¯é åœ°ç¼–è¯‘æˆæ”¯æŒçš„CPUæ¶æ„ä¸Šçš„æœ€ä¼˜å‘é‡æŒ‡ä»¤ï¼Œä»è€Œå®ç°æ¯”ç­‰æ•ˆæ ‡é‡è®¡ç®—æ›´ä¼˜çš„æ€§èƒ½ã€‚</p><p>ä¸‹é¢è¿™ä¸ªæ˜¯å®˜æ–¹ç»™çš„ç¤ºä¾‹ï¼š</p><pre><code class="java">// æ ‡é‡è®¡ç®—ç¤ºä¾‹void scalarComputation(float[] a, float[] b, float[] c) {    for (int i = 0; i &lt; a.length ; i++) {        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;    }}// ä½¿ç”¨å‘é‡APIçš„å‘é‡è®¡ç®—ç¤ºä¾‹static final VectorSpecies&lt;Float&gt; SPECIES = FloatVector.SPECIES_PREFERRED;void vectorComputation(float[] a, float[] b, float[] c) {    int i = 0;    int upperBound = SPECIES.loopBound(a.length);    for (; i &lt; upperBound; i += SPECIES.length()) {        // FloatVector va, vb, vc;        var va = FloatVector.fromArray(SPECIES, a, i);        var vb = FloatVector.fromArray(SPECIES, b, i);        var vc = va.mul(va).add(vb.mul(vb)).neg();        vc.intoArray(c, i);    }    for (; i &lt; a.length; i++) {        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;    }}</code></pre><p>å‘é‡APIåœ¨Javaä¸­çš„ç‹¬ç‰¹ä¼˜åŠ¿åœ¨äºå…¶é«˜æ•ˆçš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ã€ä¸°å¯Œçš„å‘é‡åŒ–æŒ‡ä»¤é›†ã€è·¨å¹³å°çš„æ•°æ®å¹¶è¡Œç®—æ³•æ”¯æŒä»¥åŠå¯¹æœºå™¨å­¦ä¹ çš„ç‰¹åˆ«ä¼˜åŒ–ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java20 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä» <a href="https://openjdk.org/projects/jdk/20/" target="_blank" rel="noopener">https://openjdk.org/projects/jdk/20/</a> æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java/java-20-features">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava20 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava20 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      Java20 åœ¨ 2023 å¹´ 3 æœˆ 21 æ—¥å‘å¸ƒGAç‰ˆæœ¬ï¼Œå…±ä¸ƒå¤§ç‰¹æ€§ï¼Œè¿™äº›æ–°ç‰¹æ€§å¤„äºé¢„è§ˆæˆ–å­µåŒ–é˜¶æ®µï¼Œæ—¨åœ¨ç®€åŒ–å¹¶å‘ç¼–ç¨‹ã€æé«˜æ€§èƒ½å’Œå¢å¼ºè¯­è¨€è¡¨è¾¾èƒ½åŠ›ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java20" scheme="https://www.howardliu.cn/tags/Java20/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava19 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java/java-19-features/"/>
    <id>https://www.howardliu.cn/java/java-19-features/</id>
    <published>2024-09-11T00:20:00.000Z</published>
    <updated>2024-12-05T03:03:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/bird-8936789_1920.jpg" alt="Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava19 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚è®©æˆ‘ä»¬è·Ÿéš Java çš„è„šæ­¥ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œçœ‹ä¸€çœ‹æ¯ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ï¼Œæœ¬æœŸæ˜¯ Java19 çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Java19 åœ¨ 2022 å¹´ 9 æœˆ 20 æ—¥å‘å¸ƒGAç‰ˆæœ¬ï¼Œå…±ä¸ƒå¤§ç‰¹æ€§ï¼Œè¿™äº›æ–°ç‰¹æ€§å¤§å¤šå¤„äºé¢„è§ˆæˆ–å­µåŒ–é˜¶æ®µï¼Œæ—¨åœ¨ç®€åŒ–å¹¶å‘ç¼–ç¨‹ã€æé«˜æ€§èƒ½å’Œå¢å¼ºè¯­è¨€è¡¨è¾¾èƒ½åŠ›ã€‚è¿™ä¸ƒå¤§ç‰¹æ€§åˆ†åˆ«æ˜¯ï¼š</p><ul><li>JEP 405: Record æ¨¡å¼ï¼ˆé¢„è§ˆï¼‰</li><li>JEP 422: Linux/RISC-Vç§»æ¤</li><li>JEP 424: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆé¢„è§ˆï¼‰</li><li>JEP 425: è™šæ‹Ÿçº¿ç¨‹ï¼ˆé¢„è§ˆï¼‰</li><li>JEP 426: å‘é‡APIï¼ˆç¬¬å››æ¬¡å­µåŒ–ï¼‰</li><li>JEP 427: Switchæ¨¡å¼åŒ¹é…ï¼ˆç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰</li><li>JEP 428: ç»“æ„åŒ–å¹¶å‘API (å­µåŒ–)</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚</p><h2 id="JEP-422-Linux-RISC-V-ç§»æ¤"><a href="#JEP-422-Linux-RISC-V-ç§»æ¤" class="headerlink" title="JEP 422: Linux/RISC-V ç§»æ¤"></a>JEP 422: Linux/RISC-V ç§»æ¤</h2><p>JEP 422 æ˜¯å°† Java å¼€å‘ç¯å¢ƒï¼ˆJDKï¼‰ç§»æ¤åˆ°åŸºäº RISC-V æŒ‡ä»¤é›†æ¶æ„çš„ Linux ç³»ç»Ÿä¸Šã€‚</p><p>RISC-V æ˜¯ä¸€ç§å¼€æºä¸”æ— ç‰ˆç¨çš„æŒ‡ä»¤é›†æ¶æ„ï¼Œæœ€åˆç”±åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡è®¾è®¡ï¼Œå¹¶ç”± RISC-V å›½é™…åŸºé‡‘ä¼šå…±åŒå¼€å‘å’Œç»´æŠ¤ã€‚</p><p>è¯¥ç§»æ¤é¡¹ç›®çš„ç›®æ ‡åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li>æ”¯æŒå¤šç§å­ç³»ç»Ÿï¼šç§»æ¤ç‰ˆæœ¬å°†æ”¯æŒæ¨¡æ¿è§£é‡Šå™¨ã€C1 å’Œ C2 JIT ç¼–è¯‘å™¨ä»¥åŠæ‰€æœ‰å½“å‰çš„ä¸»è¦åƒåœ¾å›æ”¶å™¨ï¼Œå¦‚ ZGC å’Œ Shenandoahã€‚</li><li>ç¡¬ä»¶é…ç½®æ”¯æŒï¼šç›®å‰ä»…æ”¯æŒ RV64GV é…ç½®ï¼Œè¿™æ˜¯ä¸€ç§é€šç”¨çš„ 64 ä½ ISAï¼ŒåŒ…å«å‘é‡æŒ‡ä»¤ã€‚æœªæ¥å¯èƒ½ä¼šè€ƒè™‘æ”¯æŒå…¶ä»– RISC-V é…ç½®ï¼Œä¾‹å¦‚ RV32G çš„ä¸€èˆ¬ç”¨é€” 32 ä½é…ç½®ã€‚</li><li>é›†æˆåˆ° JDK ä¸»çº¿ä»£ç åº“ä¸­ï¼šé‡ç‚¹åœ¨äºå°†ç§»æ¤çš„å†…å®¹é›†æˆåˆ° JDK çš„ä¸»ä»“åº“ä¸­ï¼Œç¡®ä¿å…¶èƒ½å¤Ÿåœ¨ RISC-V æ¶æ„ä¸Šæ­£å¸¸è¿è¡Œã€‚</li></ul><p>æ­¤å¤–ï¼ŒRISC-V æ¶æ„å…·æœ‰æ¨¡å—åŒ–è®¾è®¡ï¼Œé‡‡ç”¨ç²¾ç®€ã€å¯é ä¸”æ”¯æŒå¤šå¹³å°çš„ä¼˜ç‚¹ï¼Œè¿™ä½¿å¾—å®ƒåœ¨åµŒå…¥å¼ç³»ç»Ÿå’Œé«˜æ€§èƒ½è®¡ç®—é¢†åŸŸæœ‰å¹¿æ³›çš„åº”ç”¨å‰æ™¯ã€‚</p><p>é€šè¿‡æ­¤æ¬¡ç§»æ¤ï¼ŒJava å°†èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”è¿™äº›æ–°å…´çš„ç¡¬ä»¶å¹³å°ï¼Œä»è€Œæ‰©å±•å…¶ç”Ÿæ€ç³»ç»Ÿå¹¶æé«˜å…¶åœ¨ä¸åŒç¡¬ä»¶æ¶æ„ä¸Šçš„å…¼å®¹æ€§å’Œå¯ç”¨æ€§ï¼Œå¢å¼º Java åœ¨åµŒå…¥å¼ç³»ç»Ÿå’Œé«˜æ€§èƒ½è®¡ç®—ç­‰é¢†åŸŸçš„åº”ç”¨èƒ½åŠ›.</p><h2 id="é¢„è§ˆåŠŸèƒ½"><a href="#é¢„è§ˆåŠŸèƒ½" class="headerlink" title="é¢„è§ˆåŠŸèƒ½"></a>é¢„è§ˆåŠŸèƒ½</h2><h3 id="JEP-405-Record-æ¨¡å¼ï¼ˆé¢„è§ˆï¼‰"><a href="#JEP-405-Record-æ¨¡å¼ï¼ˆé¢„è§ˆï¼‰" class="headerlink" title="JEP 405: Record æ¨¡å¼ï¼ˆé¢„è§ˆï¼‰"></a>JEP 405: Record æ¨¡å¼ï¼ˆé¢„è§ˆï¼‰</h3><p>Recordæ˜¯Java16æ­£å¼å‘å¸ƒçš„åŸºç¡€ç±»å‹ï¼Œæä¾›ä¸å¯å˜å¯¹è±¡çš„ç®€å•å®ç°ï¼ˆå…¶å®å°±æ˜¯Java Beanï¼Œä½†æ˜¯çœç•¥ä¸€å †çš„getterã€setterã€hashcodeã€equalsã€toStringç­‰æ–¹æ³•ï¼‰ï¼ˆå‚è§<a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a>ï¼‰ã€‚</p><p>JEP 405: Recordæ¨¡å¼å½’å±äºAmberé¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼ŒAmberé¡¹ç›®æ—¨åœ¨é€šè¿‡å°è€Œç¾çš„æ–¹å¼ï¼Œå¢å¼ºJavaè¯­è¨€ç‰¹æ€§ã€‚æœ¬æ¬¡çš„Recordæ¨¡å¼ï¼Œä¸»è¦æ˜¯ä½¿Recordç±»å‹å¯ä»¥ç›´æ¥åœ¨instanceofå’Œswitchæ¨¡å¼åŒ¹é…ä¸­ä½¿ç”¨ã€‚ä¸»è¦ä½“ç°åœ¨4ä¸ªæ–¹é¢ï¼š</p><ol><li>è§£æ„è®°å½•å€¼ï¼šRecordæ¨¡å¼å…è®¸ç”¨æˆ·å¯¹Recordçš„å€¼è¿›è¡Œè§£æ„ï¼Œè¿™æ„å‘³ç€å¯ä»¥å°†ä¸€ä¸ªRecordç±»å‹çš„å®ä¾‹åˆ†è§£æˆå…¶å„ä¸ªç»„æˆå…ƒç´ ã€‚</li><li>åµŒå¥—Recordæ¨¡å¼å’Œinstanceofæ¨¡å¼ï¼šRecordæ¨¡å¼å¯ä»¥ä¸instanceofæ¨¡å¼åŒ¹é…åµŒå¥—ä½¿ç”¨ï¼Œä»è€Œåˆ›å»ºå¼ºå¤§ã€å£°æ˜æ€§å’Œå¯ç»„åˆçš„æ•°æ®å¯¼èˆªå’Œå¤„ç†å½¢å¼ã€‚è¿™ç§åµŒå¥—ä½¿å¾—æ•°æ®æŸ¥è¯¢å’Œå¤„ç†æ›´åŠ çµæ´»å’Œå¤æ‚ã€‚</li><li>è¯­æ³•å’Œä»£ç ç”Ÿæˆçš„å˜åŒ–ï¼šä¸ºäº†æ”¯æŒRecordæ¨¡å¼ï¼ŒJava19éœ€è¦ä»è¯­æ³•åˆ°ä»£ç ç”Ÿæˆä»¥åŠDOMæ¨¡å‹è¿›è¡Œå¤§é‡çš„ä¿®æ”¹ã€‚è¿™è¡¨æ˜JEP 405ä¸ä»…åœ¨åŠŸèƒ½ä¸Šå¸¦æ¥äº†æ–°çš„ç‰¹æ€§ï¼Œè¿˜åœ¨è¯­è¨€å†…éƒ¨ç»“æ„ä¸Šè¿›è¡Œäº†æ·±å…¥çš„è°ƒæ•´ã€‚</li><li>ç›®æ ‡å’Œç”¨é€”ï¼šJEP 405çš„ç›®æ ‡æ˜¯æ‰©å±•æ¨¡å¼åŒ¹é…çš„èƒ½åŠ›ï¼Œå®ç°æ›´å¤æ‚çš„æ•°æ®æŸ¥è¯¢å’Œå¤„ç†ã€‚é€šè¿‡å¼•å…¥Recordæ¨¡å¼ï¼Œå¼€å‘è€…å¯ä»¥ä»¥ä¸€ç§æ›´åŠ å£°æ˜æ€§å’Œå¯ç»„åˆçš„æ–¹å¼è¿›è¡Œæ•°æ®å¯¼èˆªå’Œå¤„ç†ã€‚</li></ol><p>æˆ‘ä»¬ä¸€èµ·çœ‹ä¸ªç¤ºä¾‹ï¼Œæ¯”å¦‚æœ‰ä¸‹é¢å‡ ä¸ªåŸºç¡€å…ƒç´ ï¼š</p><pre><code class="java">// é¢œè‰²enum Color { RED, GREEN, BLUE}// ç‚¹record Point(int x, int y) {}// å¸¦é¢œè‰²çš„ç‚¹record ColoredPoint(Point p, Color color) {}// æ­£æ–¹å½¢record Square(ColoredPoint upperLeft, ColoredPoint lowerRight) {}</code></pre><p>æˆ‘ä»¬åˆ†åˆ«é€šè¿‡instanceofæ¨¡å¼åŒ¹é…å’Œswitchæ¨¡å¼åŒ¹é…åˆ¤æ–­è¾“å…¥å‚æ•°çš„ç±»å‹ï¼Œæ‰“å°ä¸åŒçš„æ ¼å¼ï¼š</p><pre><code class="java">private static void instancePatternsAndPrint(Object o) {    if (o instanceof Square(ColoredPoint upperLeft, ColoredPoint lowerRight)) {        System.out.println(&quot;Squareç±»å‹ï¼š&quot; + upperLeft + &quot; &quot; + lowerRight);    } else if (o instanceof ColoredPoint(Point(int x, int y), Color color)) {        System.out.println(&quot;ColoredPointç±»å‹ï¼š&quot; + x + &quot; &quot; + y + &quot; &quot; + color);    } else if (o instanceof Point p) {        System.out.println(&quot;Pointç±»å‹ï¼š&quot; + p);    }}private static void switchPatternsAndPrint(Object o) {    switch (o) {        case Square(ColoredPoint upperLeft, ColoredPoint lowerRight) -&gt; {            System.out.println(&quot;Squareç±»å‹ï¼š&quot; + upperLeft + &quot; &quot; + lowerRight);        }        case ColoredPoint(Point(int x, int y), Color color) -&gt; {            System.out.println(&quot;ColoredPointç±»å‹ï¼š&quot; + x + &quot; &quot; + y + &quot; &quot; + color);        }        case Point p -&gt; {            System.out.println(&quot;Pointç±»å‹ï¼š&quot; + p);        }        default -&gt; throw new IllegalStateException(&quot;Unexpected value: &quot; + o);    }}</code></pre><p>æˆ‘ä»¬é€šè¿‡mainæ–¹æ³•æ‰§è¡Œä¸‹ï¼š</p><pre><code class="java">public static void main(String[] args) {    var p = new Point(1, 2);    var cp1 = new ColoredPoint(p, Color.RED);    var cp2 = new ColoredPoint(p, Color.GREEN);    var square = new Square(cp1, cp2);    instancePatternsAndPrint(square);    instancePatternsAndPrint(cp1);    instancePatternsAndPrint(p);    switchPatternsAndPrint(square);    switchPatternsAndPrint(cp1);    switchPatternsAndPrint(p);}// ç»“æœæ˜¯ï¼š//// Squareç±»å‹ï¼šColoredPoint[p=Point[x=1, y=2], color=RED] ColoredPoint[p=Point[x=1, y=2], color=GREEN]// ColoredPointç±»å‹ï¼š1 2 RED// Pointç±»å‹ï¼šPoint[x=1, y=2]//// Squareç±»å‹ï¼šColoredPoint[p=Point[x=1, y=2], color=RED] ColoredPoint[p=Point[x=1, y=2], color=GREEN]// ColoredPointç±»å‹ï¼š1 2 RED// Pointç±»å‹ï¼šPoint[x=1, y=2]</code></pre><p>æ˜¯ä¸æ˜¯å¾ˆç®€æ´ï¼Œå°±åƒJava8æä¾›çš„Lambdaè¡¨è¾¾å¼ä¸€æ ·ï¼Œå¾ˆä¸æ»‘ã€‚</p><h3 id="JEP-424-å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆé¢„è§ˆï¼‰"><a href="#JEP-424-å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆé¢„è§ˆï¼‰" class="headerlink" title="JEP 424: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆé¢„è§ˆï¼‰"></a>JEP 424: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆé¢„è§ˆï¼‰</h3><p>JEP 424: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIï¼ˆForeign Function &amp; Memory APIï¼Œç®€ç§°FFM APIï¼‰æ—¨åœ¨æä¾›ä¸€ç§æœºåˆ¶ï¼Œä½¿Javaç¨‹åºèƒ½å¤Ÿä¸Javaè¿è¡Œæ—¶ä¹‹å¤–çš„ä»£ç å’Œæ•°æ®è¿›è¡Œäº’æ“ä½œã€‚é€šè¿‡é«˜æ•ˆåœ°è°ƒç”¨å¤–éƒ¨å‡½æ•°ï¼ˆå³JVMä¹‹å¤–çš„ä»£ç ï¼‰ä»¥åŠå®‰å…¨åœ°è®¿é—®å¤–éƒ¨å†…å­˜ï¼ˆå³éJVMç®¡ç†çš„å†…å­˜ï¼‰ï¼Œè¯¥APIä½¿å¾—Javaç¨‹åºèƒ½å¤Ÿè°ƒç”¨æœ¬åœ°åº“å¹¶å¤„ç†æœ¬åœ°æ•°æ®ï¼Œè€Œæ— éœ€ä½¿ç”¨JNIå¸¦æ¥çš„è„†å¼±æ€§å’Œå±é™©ã€‚</p><p>ç®€å•è¯´ï¼ŒFFM APIæ˜¯ä¸ºäº†æ›¿æ¢JNIçš„å‡½æ•°ï¼Œåœ¨Java19ä¸­æ˜¯ç¬¬ä¸€æ¬¡é¢„è§ˆç‰ˆï¼Œæœ€ç»ˆä¼šåœ¨Java22ä¸­è½¬æ­£ã€‚</p><p>FFM APIçš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li>æ˜“ç”¨æ€§ï¼šç”¨ä¸€ä¸ªæ›´ä¼˜è¶Šã€å®Œå…¨Javaå¼€å‘æ¨¡å‹æ›¿ä»£äº†JavaåŸç”Ÿæ¥å£ï¼ˆJNIï¼‰ã€‚</li><li>æ€§èƒ½ï¼šæä¾›ä¸ç°æœ‰APIï¼ˆå¦‚JNIå’Œsun.misc.Unsafe ï¼‰ç›¸å½“ç”šè‡³æ›´å¥½çš„æ€§èƒ½ã€‚</li><li>é€šç”¨æ€§ï¼šæ”¯æŒæ“ä½œä¸åŒç±»å‹çš„å¤–éƒ¨å†…å­˜ï¼ˆä¾‹å¦‚ï¼Œæœ¬åœ°å†…å­˜ã€æŒä¹…å†…å­˜å’Œæ‰˜ç®¡å †å†…å­˜ï¼‰ï¼Œå¹¶è®¡åˆ’éšç€æ—¶é—´çš„æ¨ç§»é€‚åº”å…¶ä»–å¹³å°ï¼ˆä¾‹å¦‚ï¼Œ32ä½x86ï¼‰å’Œç”¨Cè¯­è¨€ä¹‹å¤–çš„è¯­è¨€ï¼ˆä¾‹å¦‚C++ã€Fortranï¼‰ç¼–å†™çš„å¤–éƒ¨å‡½æ•°ã€‚</li><li>å®‰å…¨æ€§ï¼šå…è®¸ç¨‹åºåœ¨é»˜è®¤æƒ…å†µä¸‹å¯¹å¤–éƒ¨å†…å­˜æ‰§è¡Œä¸å®‰å…¨çš„æ“ä½œï¼Œä½†ä¼šå‘ç”¨æˆ·å‘å‡ºè­¦å‘Šã€‚</li></ul><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®˜æ–¹ç»™çš„ç¤ºä¾‹ï¼šå¦‚ä½•è·å–Cåº“å‡½æ•°<code>radixsort</code>çš„æ–¹æ³•å¥æŸ„ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å¯¹å››ä¸ªå­—ç¬¦ä¸²è¿›è¡Œæ’åºã€‚</p><pre><code class="java">// 1. æ‰¾åˆ°Cåº“è·¯å¾„ä¸Šçš„å¤–éƒ¨å‡½æ•°Linker linker = Linker.nativeLinker();SymbolLookup stdlib = linker.defaultLookup();MethodHandle radixSort = linker.downcallHandle(stdlib.lookup (&quot;radixsort&quot;), ...);// 2. åœ¨å †ä¸Šåˆ†é…å†…å­˜å­˜å‚¨å››ä¸ªå­—ç¬¦ä¸²String[] javaStrings = { &quot;mouse&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;car&quot; };// 3. åœ¨éå †ä¸Šåˆ†é…å†…å­˜å­˜å‚¨å››ä¸ªæŒ‡é’ˆSegmentAllocator allocator = SegmentAllocator.implicitAllocator();MemorySegment offHeap = allocator.allocateArray(ValueLayout.ADDRESS, javaStrings.length );// 4. å°†å­—ç¬¦ä¸²ä»å †ä¸Šå¤åˆ¶åˆ°éå †ä¸Šfor (int i = 0; i &lt; javaStrings.length ; i++) {    // åˆ†é…ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°éå †ä¸Šï¼Œç„¶åå­˜å‚¨å…¶æŒ‡é’ˆ    MemorySegment cString = allocator.allocateUtf8String(javaStrings[i]);    offHeap.setAtIndex(ValueLayout.ADDRESS, i, cString);}// 5. è°ƒç”¨å¤–éƒ¨å‡½æ•°å¯¹éå †ä¸Šçš„æ•°æ®è¿›è¡Œæ’åºradixSort.invoke (offHeap, javaStrings.length , MemoryAddress.NULL, &#39;\0&#39;);// 6. å°†ï¼ˆé‡æ–°æ’åºçš„ï¼‰å­—ç¬¦ä¸²ä»éå †ä¸Šå¤åˆ¶å›å †ä¸Šfor (int i = 0; i &lt; javaStrings.length ; i++) {    MemoryAddress cStringPtr = offHeap.getAtIndex(ValueLayout.ADDRESS, i);    javaStrings[i] = cStringPtr.getUtf8String(0);}assert Arrays.equals (javaStrings, new String[] {&quot;car&quot;, &quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;}); // true</code></pre><blockquote><p>å‹æƒ…æç¤ºï¼šå®˜æ–¹çš„ä»£ç ä»…æ˜¯ç¤ºæ„ï¼Œå¾ˆå¤šAPIè¿˜åœ¨è°ƒæ•´ï¼Œåªæœ‰ç­‰åˆ°æ­£å¼å‘è¡Œæ—¶æ‰èƒ½æš‚æ—¶ç¡®å®šä¸‹æ¥ã€‚</p></blockquote><h3 id="JEP-425-è™šæ‹Ÿçº¿ç¨‹ï¼ˆé¢„è§ˆï¼‰"><a href="#JEP-425-è™šæ‹Ÿçº¿ç¨‹ï¼ˆé¢„è§ˆï¼‰" class="headerlink" title="JEP 425: è™šæ‹Ÿçº¿ç¨‹ï¼ˆé¢„è§ˆï¼‰"></a>JEP 425: è™šæ‹Ÿçº¿ç¨‹ï¼ˆé¢„è§ˆï¼‰</h3><p>è™šæ‹Ÿçº¿ç¨‹æ˜¯ä¸€ç§è½»é‡çº§çš„çº¿ç¨‹å®ç°ï¼Œæ—¨åœ¨æ˜¾è‘—é™ä½ç¼–å†™ã€ç»´æŠ¤å’Œè§‚å¯Ÿé«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºçš„éš¾åº¦ã€‚å®ƒä»¬å ç”¨çš„èµ„æºå°‘ï¼Œä¸éœ€è¦è¢«æ± åŒ–ï¼Œå¯ä»¥åˆ›å»ºå¤§é‡è™šæ‹Ÿçº¿ç¨‹ï¼Œç‰¹åˆ«é€‚ç”¨äºIOå¯†é›†å‹ä»»åŠ¡ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é«˜æ•ˆåœ°è°ƒåº¦å¤§é‡è™šæ‹Ÿçº¿ç¨‹æ¥å¤„ç†å¹¶å‘è¯·æ±‚ï¼Œä»è€Œæ˜¾è‘—æé«˜ç¨‹åºçš„ååé‡å’Œå“åº”é€Ÿåº¦ã€‚</p><p>ç›¸æ¯”äºä¼ ç»Ÿç°æˆï¼Œè™šæ‹Ÿçº¿ç¨‹æ€§èƒ½æ˜¾è‘—æå‡ã€‚</p><p>è™šæ‹Ÿçº¿ç¨‹æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ol><li>è½»é‡çº§ï¼šè™šæ‹Ÿçº¿ç¨‹æ˜¯JVMå†…éƒ¨å®ç°çš„è½»é‡çº§çº¿ç¨‹ï¼Œä¸éœ€è¦æ“ä½œç³»ç»Ÿå†…æ ¸å‚ä¸ï¼Œåˆ›å»ºå’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„æˆæœ¬è¿œä½äºä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼ˆå³å¹³å°çº¿ç¨‹ï¼‰ï¼Œä¸”å ç”¨çš„å†…å­˜èµ„æºè¾ƒå°‘ã€‚</li><li>å‡å°‘CPUæ—¶é—´æ¶ˆè€—ï¼šç”±äºè™šæ‹Ÿçº¿ç¨‹ä¸ä¾èµ–äºæ“ä½œç³»ç»Ÿå¹³å°çº¿ç¨‹ï¼Œå› æ­¤åœ¨è¿›è¡Œçº¿ç¨‹åˆ‡æ¢æ—¶è€—è´¹çš„CPUæ—¶é—´ä¼šå¤§å¤§å‡å°‘ï¼Œä»è€Œæé«˜äº†ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚</li><li>ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼šè™šæ‹Ÿçº¿ç¨‹é€šè¿‡ç»“æ„åŒ–å¹¶å‘APIæ¥ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´å®¹æ˜“åœ°ç¼–å†™ã€ç»´æŠ¤å’Œè§‚å¯Ÿé«˜ååé‡å¹¶å‘åº”ç”¨ç¨‹åºã€‚</li><li>é€‚ç”¨äºå¤§é‡ä»»åŠ¡åœºæ™¯ï¼šè™šæ‹Ÿçº¿ç¨‹éå¸¸é€‚åˆéœ€è¦åˆ›å»ºå’Œé”€æ¯å¤§é‡çº¿ç¨‹çš„ä»»åŠ¡ã€éœ€è¦æ‰§è¡Œå¤§é‡è®¡ç®—çš„ä»»åŠ¡ï¼ˆå¦‚æ•°æ®å¤„ç†ã€ç§‘å­¦è®¡ç®—ç­‰ï¼‰ä»¥åŠéœ€è¦å®ç°ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œä»¥æé«˜ç¨‹åºæ€§èƒ½çš„åœºæ™¯ã€‚</li><li>æé«˜ç³»ç»Ÿååé‡ï¼šé€šè¿‡å¯¹è™šæ‹Ÿçº¿ç¨‹çš„ä»‹ç»å’Œä¸Goåç¨‹çš„å¯¹æ¯”ï¼Œå¯ä»¥çœ‹å‡ºè™šæ‹Ÿçº¿ç¨‹èƒ½å¤Ÿå¤§å¹…æé«˜ç³»ç»Ÿçš„æ•´ä½“ååé‡ã€‚</li></ol><p>è™½ç„¶è™šæ‹Ÿçº¿ç¨‹åœ¨Java19ä¸­æ˜¯é¢„è§ˆåŠŸèƒ½ï¼Œä¸å¦¨ç¢æˆ‘ä»¬ä¸€èµ·è¯•ç”¨ä¸‹ã€‚</p><pre><code class="java">try (var executor = Executors.newVirtualThreadPerTaskExecutor()) {    IntStream.range(0, 10_000).forEach(i -&gt; {        executor.submit(() -&gt; {            Thread.sleep(Duration.ofSeconds(1));            System.out.println(Thread.currentThread().getName() + &quot;: &quot; + i);            return i;        });    });}Thread.startVirtualThread(() -&gt; {    System.out.println(&quot;Hello from a virtual thread[Thread.startVirtualThread]&quot;);});final ThreadFactory factory = Thread.ofVirtual().factory();factory.newThread(() -&gt; {            System.out.println(&quot;Hello from a virtual thread[ThreadFactory.newThread]&quot;);        })        .start();</code></pre><p>è™šæ‹Ÿçº¿ç¨‹ä¸ºäº†é™ä½ä½¿ç”¨é—¨æ§›ï¼Œç›´æ¥æä¾›äº†ä¸åŸç”Ÿçº¿ç¨‹ç±»ä¼¼çš„æ–¹æ³•ï¼š</p><ul><li><code>Executors.newVirtualThreadPerTaskExecutor()</code>ï¼Œå¯ä»¥åƒæ™®é€šçº¿ç¨‹æ± ä¸€æ ·åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹ã€‚</li><li><code>Thread.startVirtualThread</code>ï¼Œé€šè¿‡å·¥å…·æ–¹æ³•ç›´æ¥åˆ›å»ºå¹¶è¿è¡Œè™šæ‹Ÿçº¿ç¨‹ã€‚</li><li><code>Thread.ofVirtual().factory().newThread()</code>ï¼Œå¦ä¸€ä¸ªå·¥å…·æ–¹æ³•å¯ä»¥åˆ›å»ºå¹¶è¿è¡Œè™šæ‹Ÿçº¿ç¨‹ã€‚<code>Thread</code>è¿˜æœ‰ä¸€ä¸ª<code>ofPlatform()</code>æ–¹æ³•ï¼Œç”¨æ¥æ„å»ºæ™®é€šçº¿ç¨‹ã€‚</li></ul><p>é€šè¿‡æœ¬åœ°ç®€å•æµ‹è¯•ï¼ˆåœ¨ã€Œå…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹ã€å›å¤â€javaâ€è·å–æºç ï¼‰ï¼Œ1wä¸ªæ¨¡æ‹Ÿçº¿ç¨‹è¿è¡Œæ—¶ï¼Œæ€§èƒ½æ–¹é¢è™šæ‹Ÿçº¿ç¨‹ &gt; çº¿ç¨‹æ± ã€‚</p><h3 id="JEP-427-Switchæ¨¡å¼åŒ¹é…ï¼ˆç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰"><a href="#JEP-427-Switchæ¨¡å¼åŒ¹é…ï¼ˆç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 427: Switchæ¨¡å¼åŒ¹é…ï¼ˆç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰"></a>JEP 427: Switchæ¨¡å¼åŒ¹é…ï¼ˆç¬¬ä¸‰æ¬¡é¢„è§ˆï¼‰</h3><p>switchæ¨¡å¼åŒ¹é…æ˜¯è€æœ‹å‹äº†ï¼Œæœ€ç»ˆä¼šåœ¨Java21è½¬æ­£ã€‚</p><p>switchæ¨¡å¼åŒ¹é…å…è®¸åœ¨switchè¯­å¥ä¸­ä½¿ç”¨æ¨¡å¼æ¥æµ‹è¯•è¡¨è¾¾å¼ï¼Œæ¯ä¸ªæ¨¡å¼éƒ½æœ‰ç‰¹å®šçš„åŠ¨ä½œï¼Œä»è€Œå¯ä»¥ç®€æ´ã€å®‰å…¨åœ°è¡¨è¾¾å¤æ‚çš„æ•°æ®å¯¼å‘æŸ¥è¯¢ã€‚</p><p>ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li>å¢å¼ºè¡¨è¾¾æ€§å’Œé€‚ç”¨æ€§ï¼šå…è®¸åœ¨caseæ ‡ç­¾ä¸­å‡ºç°æ¨¡å¼ï¼Œæ‰©å±•äº†switchè¡¨è¾¾å¼å’Œè¯­å¥çš„è¡¨è¾¾èƒ½åŠ›å’Œé€‚ç”¨èŒƒå›´ã€‚</li><li>æ”¾å®½å¯¹nullçš„æ•Œæ„ï¼šå½“éœ€è¦æ—¶ï¼Œå¯ä»¥æ”¾å®½switchå¯¹nullçš„æ•Œæ„ã€‚</li><li>æé«˜å®‰å…¨æ€§ï¼šè¦æ±‚æ¨¡å¼switchè¯­å¥è¦†ç›–æ‰€æœ‰å¯èƒ½çš„è¾“å…¥å€¼ï¼Œå¢åŠ äº†switchè¯­å¥çš„å®‰å…¨æ€§ã€‚</li><li>ä¿æŒå…¼å®¹æ€§ï¼šç¡®ä¿æ‰€æœ‰ç°æœ‰çš„switchè¡¨è¾¾å¼å’Œè¯­å¥ç»§ç»­æ— å˜åŒ–åœ°ç¼–è¯‘å¹¶ä»¥ç›¸åŒçš„è¯­ä¹‰æ‰§è¡Œã€‚</li></ul><pre><code class="java">static String formatValue(Object obj) {    return switch (obj) {        case null -&gt; &quot;null&quot;;        case Integer i -&gt; String.format(&quot;int %d&quot;, i);        case Long l -&gt; String.format(&quot;long %d&quot;, l);        case Double d -&gt; String.format(&quot;double %f&quot;, d);        case String s -&gt; String.format(&quot;String %s&quot;, s);        default -&gt; obj.toString();    };}public record Person(String name, String address) {}public static void main(String[] args) {    System.out.println(formatValue(10));    System.out.println(formatValue(20L));    System.out.println(formatValue(3.14));    System.out.println(formatValue(&quot;Hello&quot;));    System.out.println(formatValue(null));}// è¿è¡Œç»“æœ// int 10// long 20// double 3.140000// String Hello// null</code></pre><h2 id="å­µåŒ–åŠŸèƒ½"><a href="#å­µåŒ–åŠŸèƒ½" class="headerlink" title="å­µåŒ–åŠŸèƒ½"></a>å­µåŒ–åŠŸèƒ½</h2><h3 id="JEP-426-å‘é‡APIï¼ˆç¬¬å››æ¬¡å­µåŒ–ï¼‰"><a href="#JEP-426-å‘é‡APIï¼ˆç¬¬å››æ¬¡å­µåŒ–ï¼‰" class="headerlink" title="JEP 426: å‘é‡APIï¼ˆç¬¬å››æ¬¡å­µåŒ–ï¼‰"></a>JEP 426: å‘é‡APIï¼ˆç¬¬å››æ¬¡å­µåŒ–ï¼‰</h3><p>å‘é‡APIçš„åŠŸèƒ½æ˜¯æä¾›ä¸€ä¸ªè¡¨è¾¾å‘é‡è®¡ç®—çš„APIï¼Œè¿™äº›è®¡ç®—åœ¨è¿è¡Œæ—¶å¯é åœ°ç¼–è¯‘æˆæ”¯æŒçš„CPUæ¶æ„ä¸Šçš„æœ€ä¼˜å‘é‡æŒ‡ä»¤ï¼Œä»è€Œå®ç°æ¯”ç­‰æ•ˆæ ‡é‡è®¡ç®—æ›´ä¼˜çš„æ€§èƒ½ã€‚</p><p>ä¸‹é¢è¿™ä¸ªæ˜¯å®˜æ–¹ç»™çš„ç¤ºä¾‹ï¼š</p><pre><code class="java">// æ ‡é‡è®¡ç®—ç¤ºä¾‹void scalarComputation(float[] a, float[] b, float[] c) {    for (int i = 0; i &lt; a.length ; i++) {        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;    }}// ä½¿ç”¨å‘é‡APIçš„å‘é‡è®¡ç®—ç¤ºä¾‹static final VectorSpecies&lt;Float&gt; SPECIES = FloatVector.SPECIES_PREFERRED;void vectorComputation(float[] a, float[] b, float[] c) {    int i = 0;    int upperBound = SPECIES.loopBound(a.length);    for (; i &lt; upperBound; i += SPECIES.length()) {        // FloatVector va, vb, vc;        var va = FloatVector.fromArray(SPECIES, a, i);        var vb = FloatVector.fromArray(SPECIES, b, i);        var vc = va.mul(va).add(vb.mul(vb)).neg();        vc.intoArray(c, i);    }    for (; i &lt; a.length; i++) {        c[i] = (a[i] * a[i] + b[i] * b[i]) * -1.0f;    }}</code></pre><p>åœ¨Java19ä¸­ï¼Œå‘é‡APIï¼ˆVector APIï¼‰çš„æ€§èƒ½æ”¹è¿›ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li>å‘é‡è®¡ç®—çš„ç¼–è¯‘ä¼˜åŒ–ï¼šJava 19ä¸­çš„Vector APIèƒ½å¤Ÿå°†å‘é‡è®¡ç®—è¡¨è¾¾å¼åœ¨è¿è¡Œæ—¶å¯é åœ°ç¼–è¯‘ä¸ºæ”¯æŒçš„CPUæ¶æ„ä¸Šçš„æœ€ä½³å‘é‡æŒ‡ä»¤ã€‚è¿™æ„å‘³ç€å®ƒèƒ½å¤Ÿåˆ©ç”¨ç‰¹å®šCPUæ¶æ„çš„å‘é‡æŒ‡ä»¤é›†æ¥æ‰§è¡Œè®¡ç®—ï¼Œä»è€Œå®ç°æ¯”ç­‰æ•ˆæ ‡é‡è®¡ç®—æ›´ä¼˜çš„æ€§èƒ½ã€‚</li><li>åŠ è½½å’Œå­˜å‚¨å‘é‡æ“ä½œï¼šæ ¹æ®å¤–éƒ¨å‡½æ•°å’Œå†…å­˜APIé¢„è§ˆçš„å®šä¹‰ï¼Œåœ¨MemorySegmentä¹‹é—´åŠ è½½å’Œå­˜å‚¨å‘é‡ã€‚è¿™ä½¿å¾—å‘é‡æ•°æ®çš„å¤„ç†æ›´åŠ é«˜æ•ˆï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦é¢‘ç¹è®¿é—®å¤§é‡æ•°æ®çš„æƒ…å†µä¸‹ã€‚</li><li>æ–°å¢äº¤å‰é€šé“å‘é‡æ“ä½œï¼šJava 19è¿˜å¢åŠ äº†ä¸¤ä¸ªæ–°çš„äº¤å‰é€šé“å‘é‡æ“ä½œï¼Œå³å‹ç¼©å’Œæ‰©å±•ã€‚è¿™äº›æ“ä½œè¿›ä¸€æ­¥å¢å¼ºäº†å‘é‡è®¡ç®—çš„èƒ½åŠ›ï¼Œä½¿å…¶å¯ä»¥æ›´çµæ´»åœ°å¤„ç†ä¸åŒç±»å‹çš„å‘é‡æ•°æ®ã€‚</li><li>ç¬¬å››è½®å­µåŒ–ï¼šVector APIåœ¨Java 19ä¸­è¿›è¡Œäº†ç¬¬å››è½®å­µåŒ–ï¼Œè¿™æ„å‘³ç€ç»è¿‡å‰ä¸‰è½®å­µåŒ–çš„åé¦ˆå’Œæ”¹è¿›åï¼Œè¯¥APIå·²ç»å˜å¾—æ›´åŠ æˆç†Ÿå’Œç¨³å®šã€‚è¿™ç§æŒç»­çš„è¿­ä»£å’Œä¼˜åŒ–ç¡®ä¿äº†å…¶åœ¨å®é™…åº”ç”¨ä¸­çš„å¯é æ€§å’Œæ€§èƒ½ã€‚</li></ul><p>å‘é‡APIåœ¨Javaä¸­çš„ç‹¬ç‰¹ä¼˜åŠ¿åœ¨äºå…¶é«˜æ•ˆçš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ã€ä¸°å¯Œçš„å‘é‡åŒ–æŒ‡ä»¤é›†ã€è·¨å¹³å°çš„æ•°æ®å¹¶è¡Œç®—æ³•æ”¯æŒä»¥åŠå¯¹æœºå™¨å­¦ä¹ çš„ç‰¹åˆ«ä¼˜åŒ–ã€‚</p><h3 id="JEP-428-ç»“æ„åŒ–å¹¶å‘API-å­µåŒ–"><a href="#JEP-428-ç»“æ„åŒ–å¹¶å‘API-å­µåŒ–" class="headerlink" title="JEP 428: ç»“æ„åŒ–å¹¶å‘API (å­µåŒ–)"></a>JEP 428: ç»“æ„åŒ–å¹¶å‘API (å­µåŒ–)</h3><p>ç»“æ„åŒ–å¹¶å‘APIï¼Œæ—¨åœ¨ç®€åŒ–å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚ç»“æ„åŒ–å¹¶å‘æ˜¯ä¸€ç§å¤šçº¿ç¨‹ç¼–ç¨‹æ–¹æ³•ï¼Œé€šè¿‡ä½¿ç”¨æ–°çš„APIæ¥ç®¡ç†å¤šçº¿ç¨‹ä»£ç ã€‚å°†ä¸åŒçº¿ç¨‹ä¸­çš„å¤šä¸ªä»»åŠ¡è§†ä¸ºå•ä¸ªå·¥ä½œå•å…ƒï¼Œç®€åŒ–é”™è¯¯å¤„ç†å’Œæé«˜å¯é æ€§ã€‚</p><p>ç»“æ„åŒ–å¹¶å‘APIæä¾›äº†æ˜ç¡®çš„è¯­æ³•ç»“æ„æ¥å®šä¹‰å­ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶å¯ç”¨ä¸€ä¸ªè¿è¡Œæ—¶è¡¨ç¤ºçº¿ç¨‹é—´çš„å±‚æ¬¡ç»“æ„ã€‚è¿™æœ‰åŠ©äºå®ç°é”™è¯¯ä¼ æ’­å’Œå–æ¶ˆä»¥åŠå¹¶å‘ç¨‹åºçš„æœ‰æ„ä¹‰è§‚å¯Ÿã€‚</p><p>Javaä½¿ç”¨å¼‚å¸¸å¤„ç†æœºåˆ¶æ¥ç®¡ç†è¿è¡Œæ—¶é”™è¯¯å’Œå…¶ä»–å¼‚å¸¸ã€‚å½“å¼‚å¸¸åœ¨ä»£ç ä¸­äº§ç”Ÿæ—¶ï¼Œå¦‚ä½•è¢«ä¼ é€’å’Œå¤„ç†çš„è¿‡ç¨‹ç§°ä¸ºå¼‚å¸¸ä¼ æ’­ã€‚</p><p>åœ¨ç»“æ„åŒ–å¹¶å‘ç¯å¢ƒä¸­ï¼Œå¼‚å¸¸å¯ä»¥é€šè¿‡æ˜¾å¼åœ°ä»å½“å‰ç¯å¢ƒä¸­æŠ›å‡ºå¹¶ä¼ æ’­åˆ°æ›´å¤§çš„ç¯å¢ƒä¸­å»å¤„ç†ã€‚</p><p>åœ¨Javaå¹¶å‘ç¼–ç¨‹ä¸­ï¼Œéå—æ£€å¼‚å¸¸çš„å¤„ç†æ˜¯ç¨‹åºå¥å£®æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ç‰¹åˆ«æ˜¯å¯¹äºéå—æ£€å¼‚å¸¸çš„å¤„ç†ï¼Œè¿™å…³ç³»åˆ°ç¨‹åºåœ¨é‡åˆ°é”™è¯¯æ—¶æ˜¯å¦èƒ½å¤Ÿä¼˜é›…åœ°ç»§ç»­è¿è¡Œæˆ–è€…è‡³å°‘æä¾›æœ‰æ„ä¹‰çš„åé¦ˆã€‚</p><pre><code class="java">try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {    var task1 = scope.fork(() -&gt; {        Thread.sleep(1000);        return &quot;Result from task 1&quot;;    });    var task2 = scope.fork(() -&gt; {        Thread.sleep(2000);        return &quot;Result from task 2&quot;;    });    scope.join();    scope.throwIfFailed(RuntimeException::new);    System.out.println(task1.get());    System.out.println(task2.get());} catch (Exception e) {    e.printStackTrace();}</code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œhandle()æ–¹æ³•ä½¿ç”¨StructuredTaskScopeæ¥å¹¶è¡Œæ‰§è¡Œä¸¤ä¸ªå­ä»»åŠ¡ï¼štask1å’Œtask2ã€‚é€šè¿‡ä½¿ç”¨try-with-resourcesè¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æºï¼Œå¹¶ç¡®ä¿æ‰€æœ‰å­ä»»åŠ¡éƒ½åœ¨tryå—ç»“æŸæ—¶æ­£ç¡®å®Œæˆæˆ–è¢«å–æ¶ˆã€‚è¿™ç§æ–¹å¼ä½¿å¾—çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå’Œä»»åŠ¡çš„é€»è¾‘ç»“æ„ç´§å¯†ç›¸å…³ï¼Œæé«˜äº†ä»£ç çš„æ¸…æ™°åº¦å’Œé”™è¯¯å¤„ç†çš„æ•ˆç‡ã€‚ä½¿ç”¨ StructuredTaskScope å¯ä»¥ç¡®ä¿ä¸€äº›æœ‰ä»·å€¼çš„å±æ€§ï¼š</p><ul><li>é”™è¯¯å¤„ç†ä¸çŸ­è·¯ï¼šå¦‚æœtask1æˆ–task2å­ä»»åŠ¡ä¸­çš„ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦ä¸€ä¸ªå¦‚æœå°šæœªå®Œæˆåˆ™ä¼šè¢«å–æ¶ˆã€‚ï¼ˆè¿™ç”± ShutdownOnFailure å®ç°çš„å…³é—­ç­–ç•¥æ¥ç®¡ç†ï¼›è¿˜æœ‰å…¶ä»–ç­–ç•¥å¯èƒ½ï¼‰ã€‚</li><li>å–æ¶ˆä¼ æ’­ï¼šå¦‚æœåœ¨è¿è¡Œä¸Šé¢æ–¹æ³•çš„çº¿ç¨‹åœ¨è°ƒç”¨ join() ä¹‹å‰æˆ–ä¹‹ä¸­è¢«ä¸­æ–­ï¼Œåˆ™çº¿ç¨‹åœ¨é€€å‡ºä½œç”¨åŸŸæ—¶ä¼šè‡ªåŠ¨å–æ¶ˆä¸¤ä¸ªå­ä»»åŠ¡ã€‚</li><li>æ¸…æ™°æ€§ï¼šè®¾ç½®å­ä»»åŠ¡ï¼Œç­‰å¾…å®ƒä»¬å®Œæˆæˆ–è¢«å–æ¶ˆï¼Œç„¶åå†³å®šæ˜¯æˆåŠŸï¼ˆå¹¶å¤„ç†å·²ç»å®Œæˆçš„å­ä»»åŠ¡çš„ç»“æœï¼‰è¿˜æ˜¯å¤±è´¥ï¼ˆå­ä»»åŠ¡å·²ç»å®Œæˆï¼Œå› æ­¤æ²¡æœ‰æ›´å¤šéœ€è¦æ¸…ç†çš„ï¼‰ã€‚</li><li>å¯è§‚å¯Ÿæ€§ï¼šçº¿ç¨‹è½¬å‚¨æ¸…æ¥šåœ°æ˜¾ç¤ºäº†ä»»åŠ¡å±‚æ¬¡ç»“æ„ï¼Œå…¶ä¸­è¿è¡Œtask1æˆ–task2çš„çº¿ç¨‹è¢«æ˜¾ç¤ºä¸ºä½œç”¨åŸŸçš„å­ä»»åŠ¡ã€‚</li></ul><p>ä¸Šé¢çš„ç¤ºä¾‹èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³æˆ‘ä»¬çš„ä¸€ä¸ªç—›ç‚¹ï¼Œæœ‰ä¸¤ä¸ªå¯å¹¶è¡Œçš„ä»»åŠ¡Aå’ŒBï¼ŒA+Bæ‰æ˜¯å®Œæ•´ç»“æœï¼Œä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œå¦å¤–ä¸€ä¸ªä¹Ÿä¸éœ€è¦æˆåŠŸï¼Œç»“æ„åŒ–å¹¶å‘APIå°±å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°è¿™ä¸ªé€»è¾‘ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java19 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä» <a href="https://openjdk.org/projects/jdk/19/" target="_blank" rel="noopener">https://openjdk.org/projects/jdk/19/</a> æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java/java-19-features">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava19 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava19 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      Java19 åœ¨ 2022 å¹´ 9 æœˆ 20 æ—¥å‘å¸ƒGAç‰ˆæœ¬ï¼Œå…±ä¸ƒå¤§ç‰¹æ€§ï¼Œè¿™äº›æ–°ç‰¹æ€§å¤§å¤šå¤„äºé¢„è§ˆæˆ–å­µåŒ–é˜¶æ®µï¼Œæ—¨åœ¨ç®€åŒ–å¹¶å‘ç¼–ç¨‹ã€æé«˜æ€§èƒ½å’Œå¢å¼ºè¯­è¨€è¡¨è¾¾èƒ½åŠ›ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java19" scheme="https://www.howardliu.cn/tags/Java19/"/>
    
  </entry>
  
  <entry>
    <title>Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava18 çš„æ–°ç‰¹æ€§</title>
    <link href="https://www.howardliu.cn/java/java-18-features/"/>
    <id>https://www.howardliu.cn/java/java-18-features/</id>
    <published>2024-09-10T00:20:00.000Z</published>
    <updated>2024-12-05T02:30:53.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/bird-8922501_1920.jpg" alt="Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava18 çš„æ–°ç‰¹æ€§"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚è®©æˆ‘ä»¬è·Ÿéš Java çš„è„šæ­¥ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œçœ‹ä¸€çœ‹æ¯ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ï¼Œæœ¬æœŸæ˜¯ Java18 çš„æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Java18 æ˜¯åœ¨ 2022 å¹´ 3 æœˆ 22 æ—¥æ­£å¼å‘å¸ƒï¼Œæœ‰9å¤§ç‰¹æ€§ï¼š</p><ul><li>JEP 400: ä½¿ç”¨ UTF-8 ä½œä¸ºé»˜è®¤å­—ç¬¦é›†</li><li>JEP 408: ç®€å•çš„ç½‘ç»œæœåŠ¡å™¨</li><li>JEP 413: Java API æ–‡æ¡£ä¸­çš„ä»£ç ç‰‡æ®µ</li><li>JEP 416: ä½¿ç”¨æ–¹æ³•å¥æŸ„é‡æ–°å®ç°æ ¸å¿ƒåå°„æœºåˆ¶</li><li>JEP 417: Vector APIï¼ˆç¬¬ä¸‰æ¬¡å­µåŒ–ï¼‰</li><li>JEP 418: Internet-Addressåœ°å€è§£æ SPI</li><li>JEP 419: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜ API (ç¬¬äºŒæ¬¡å­µåŒ–)</li><li>JEP 420: switch æ¨¡å¼åŒ¹é…ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</li><li>JEP 421: å¼ƒç”¨ Finalization</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è¿™äº›ç‰¹æ€§ã€‚</p><h2 id="JEP-400-ä½¿ç”¨-UTF-8-ä½œä¸ºé»˜è®¤å­—ç¬¦é›†"><a href="#JEP-400-ä½¿ç”¨-UTF-8-ä½œä¸ºé»˜è®¤å­—ç¬¦é›†" class="headerlink" title="JEP 400: ä½¿ç”¨ UTF-8 ä½œä¸ºé»˜è®¤å­—ç¬¦é›†"></a>JEP 400: ä½¿ç”¨ UTF-8 ä½œä¸ºé»˜è®¤å­—ç¬¦é›†</h2><p>Javaä»å‡ºç”Ÿç›®æ ‡å°±æ˜¯è·¨å¹³å°ä½¿ç”¨ï¼Œâ€œä¸€å¤„ç¼–ç ï¼Œå¤„å¤„è¿è¡Œâ€ï¼Œæ‰€ä»¥æœ‰ä¸€äº›é€‚é…ä¸åŒå¹³å°çš„é€»è¾‘ï¼Œå­—ç¬¦é›†å°±æ˜¯å…¶ä¸­ä¸€ä¸ªã€‚åœ¨Java 18ä¹‹å‰ï¼ŒJavaçš„é»˜è®¤å­—ç¬¦é›†æ˜¯åŸºäºç³»ç»Ÿç¯å¢ƒçš„ã€‚</p><p>å¯ä»¥é€šè¿‡å‘½ä»¤æŸ¥çœ‹ï¼š</p><pre><code class="shell">java -XshowSettings:properties -version 2&gt;&amp;1 | grep file.encoding</code></pre><p>æˆ–è€…ï¼š</p><pre><code class="java">Charset.defaultCharset()</code></pre><p>ä½†æ˜¯åœ¨è·¨å¹³å°ä½¿ç”¨æ—¶ï¼Œè¿™ç§ç‰¹æ€§å¯èƒ½å¯¼è‡´å­—ç¬¦ç¼–ç çš„é—®é¢˜ã€‚</p><p>æ¯”å¦‚ï¼š</p><ul><li>ä»£ç çš„ç¼–è¯‘å­—ç¬¦é›†æ˜¯UTF-8ï¼Œè¿è¡Œå­—ç¬¦é›†æ˜¯å…¶ä»–çš„ï¼Œå‡è®¾æ˜¯è¾“å‡ºä¸­æ–‡å­—ç¬¦ï¼Œæ¯”å¦‚<code>System.out.println(&quot;ä½ å¥½&quot;);</code>ï¼Œåœ¨Macå’ŒWindowsä¸Šè¡¨ç°å°±ä¼šä¸ä¸€è‡´ï¼Œåœ¨Windowsä¸Šå°±ä¼šå‡ºç°ä¹±ç ï¼Œè¿™æ˜¯å› ä¸ºï¼Œåœ¨Java18ä¹‹å‰ï¼ŒWindowsé»˜è®¤å­—ç¬¦é›†æ˜¯GBKï¼›</li><li>IOæ–‡ä»¶æµæ“ä½œï¼Œæ¯”å¦‚æ–‡ä»¶æ˜¯UTF-8å­—ç¬¦é›†ç¼–å†™ï¼Œåœ¨ä¸åŒç¯å¢ƒè¯»å–æ–‡ä»¶å†…å®¹ï¼Œè¡¨ç°å°±ä¼šä¸ä¸€è‡´ã€‚æœ€å¸¸è§çš„å°±æ˜¯ä¹±ç ç¥å…½â€œ<strong>é”Ÿæ–¤æ‹·</strong>â€ã€‚</li></ul><p>é€šè¿‡å°†UTF-8ä½œä¸ºé»˜è®¤å­—ç¬¦é›†ï¼Œä¸å†éœ€è¦è®¾ç½®file.encodingï¼Œå¯ä»¥ç»Ÿä¸€å­—ç¬¦ç¼–ç çš„å¤„ç†æ–¹å¼ï¼Œæé«˜å›½é™…åŒ–åº”ç”¨çš„å…¼å®¹æ€§ã€‚å¼€å‘è€…å¯ä»¥æ›´æ–¹ä¾¿åœ°è¿›è¡Œå¼€å‘å’Œéƒ¨ç½²ï¼Œå‡å°‘äº†å› å­—ç¬¦é›†ä¸ä¸€è‡´å¯¼è‡´çš„è°ƒè¯•å’Œç»´æŠ¤é—®é¢˜ã€‚</p><p>Java 18ä¸­é»˜è®¤ä½¿ç”¨UTF-8å­—ç¬¦é›†ä¸ä»…ç®€åŒ–äº†å¼€å‘æµç¨‹ï¼Œè¿˜æ˜¾è‘—æå‡äº†ä»£ç çš„å¯é¢„æµ‹æ€§å’Œå¯ç§»æ¤æ€§ï¼ŒåŒæ—¶å¢å¼ºäº†å¯¹å…¨çƒåŒ–å’Œå¤šè¯­è¨€åº”ç”¨çš„æ”¯æŒã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªROIå¾ˆé«˜çš„ç‰¹æ€§ã€‚</p><h2 id="JEP-408-ç®€å•çš„ç½‘ç»œæœåŠ¡å™¨"><a href="#JEP-408-ç®€å•çš„ç½‘ç»œæœåŠ¡å™¨" class="headerlink" title="JEP 408: ç®€å•çš„ç½‘ç»œæœåŠ¡å™¨"></a>JEP 408: ç®€å•çš„ç½‘ç»œæœåŠ¡å™¨</h2><p>JEP 408æ˜¯ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªè½»é‡çº§ã€ç®€å•æ˜“ç”¨çš„ HTTP æœåŠ¡å™¨ï¼Œé€šè¿‡å‘½ä»¤è¡Œå·¥å…·<code>jwebserver</code>å¯ä»¥å¯åŠ¨ä¸€ä¸ªæœ€å°åŒ–çš„é™æ€ Web æœåŠ¡å™¨ï¼Œè¿™ä¸ªæœåŠ¡å™¨ä»…æ”¯æŒé™æ€èµ„æºçš„è®¿é—®ï¼Œä¸æ”¯æŒ CGIï¼ˆCommon Gateway Interfaceï¼‰æˆ–ç±»ä¼¼ servlet çš„åŠŸèƒ½ï¼Œä¸»è¦ç”¨äºåŸå‹åˆ¶ä½œã€æµ‹è¯•å’Œå¼€å‘ç¯å¢ƒä¸­çš„é™æ€æ–‡ä»¶æ‰˜ç®¡ä¸å…±äº«ã€‚</p><p>å®ƒçš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ul><li>åŸå‹å¼€å‘ï¼šç”±äºå…¶ç®€å•æ˜“ç”¨çš„ç‰¹æ€§ï¼Œjwebserver å¯ä»¥ä½œä¸ºå¿«é€ŸåŸå‹å¼€å‘å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨çŸ­æ—¶é—´å†…æ­å»ºèµ·ä¸€ä¸ªå¯ä»¥è®¿é—®é™æ€èµ„æºçš„ Web æœåŠ¡ã€‚è¿™å¯¹äºéœ€è¦éªŒè¯æŸä¸ªåŠŸèƒ½æˆ–æ¦‚å¿µçš„åˆæœŸé˜¶æ®µéå¸¸æœ‰ç”¨ã€‚</li><li>å¿«é€Ÿéƒ¨ç½²ï¼šå¯¹äºä¸€äº›å°è§„æ¨¡çš„åº”ç”¨æˆ–è€…ä¸´æ—¶æ€§çš„é¡¹ç›®ï¼Œä½¿ç”¨ jwebserver å¯ä»¥å¿«é€Ÿå¯åŠ¨å¹¶è¿è¡Œä¸€ä¸ªç®€å•çš„ Web æœåŠ¡ï¼Œè€Œæ— éœ€å¤æ‚çš„é…ç½®å’Œç¯å¢ƒæ­å»ºã€‚è¿™ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè¿…é€Ÿå°†æƒ³æ³•è½¬åŒ–ä¸ºå®é™…çš„å¯è®¿é—®æœåŠ¡ã€‚</li><li>å­¦ä¹ ä¸æ•™è‚²ï¼šjwebserver æä¾›äº†ä¸€ä¸ªç›´è§‚çš„å¹³å°ï¼Œè®©åˆå­¦è€…å¯ä»¥è½»æ¾ä¸Šæ‰‹ Java Web å¼€å‘ã€‚é€šè¿‡ç®€å•çš„å‘½ä»¤è¡Œæ“ä½œï¼Œç”¨æˆ·å¯ä»¥å¿«é€Ÿç†è§£ Web æœåŠ¡å™¨çš„å·¥ä½œåŸç†åŠå…¶åŸºæœ¬é…ç½®ã€‚</li><li>æµ‹è¯•ä¸è°ƒè¯•ï¼šåœ¨è¿›è¡Œ Web åº”ç”¨çš„æµ‹è¯•å’Œè°ƒè¯•æ—¶ï¼Œjwebserver å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å·¥å…·æ¥æä¾›é™æ€æ–‡ä»¶çš„è®¿é—®æœåŠ¡ï¼Œä»è€Œæ–¹ä¾¿å¼€å‘è€…å¯¹åº”ç”¨è¿›è¡Œæµ‹è¯•å’Œè°ƒè¯•ã€‚</li><li>æœ¬åœ°å¼€å‘ç¯å¢ƒï¼šåœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒä¸­ï¼Œjwebserver å¯ä»¥æ›¿ä»£ä¼ ç»Ÿçš„ Web æœåŠ¡å™¨å¦‚ Apache Tomcat æˆ– Nginxï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªè½»é‡çº§çš„é€‰æ‹©ï¼Œä»¥å‡å°‘ç³»ç»Ÿèµ„æºçš„å ç”¨ã€‚</li></ul><p>æˆ‘ä»¬å¯ä»¥ç®€å•è¯•ä¸€ä¸‹ï¼Œåœ¨å½“å‰ç›®å½•ç¼–å†™index.htmlï¼š</p><pre><code class="html">&lt;html&gt;&lt;head&gt;    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;&lt;/head&gt;&lt;body&gt;    &lt;h2&gt;æ¬¢è¿å‚è§‚&lt;/h2&gt;    &lt;h3&gt;&lt;a href=&quot;https://www.howardliu.cn/&quot;&gt;çœ‹å±±çš„å°å±‹ howardliu.cn&lt;/a&gt;&lt;/h3&gt;    &lt;p&gt;        ä¸€èµ·&lt;strong&gt;å¼€å¿ƒ&lt;/strong&gt;å­¦æŠ€æœ¯    &lt;/p&gt;    &lt;p&gt;        è®©æˆ‘ä»¬ä¸€èµ·&lt;strong&gt;æ‰¬å¸†èµ·èˆª&lt;/strong&gt;    &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>è¿è¡Œ<code>jwebserver</code>å‘½ä»¤ï¼š</p><pre><code class="shell">$ ./bin/jwebserverBinding to loopback by default. For all interfaces use &quot;-b 0.0.0.0&quot; or &quot;-b ::&quot;.Serving /Users/liuxinghao/Library/Java/JavaVirtualMachines/temurin-18.0.2.1/Contents/Home and subdirectories on 127.0.0.1 port 8000URL http://127.0.0.1:8000/</code></pre><p>æ‰“å¼€<code>http://127.0.0.1:8000/</code>å°±å¯ä»¥ç›´æ¥çœ‹åˆ°index.htmlçš„æ•ˆæœï¼š</p><p><img src="https://static.howardliu.cn/20240803-114331.png" alt="çœ‹å±±çš„å°å±‹ howardliu.cn"></p><p><code>jwebserver</code>è¿˜æ”¯æŒæŒ‡å®šåœ°å€å’Œç«¯å£ç­‰å‚æ•°ï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥é€šè¿‡å‘½ä»¤æŸ¥çœ‹ï¼š</p><pre><code class="shell">$ ./bin/jwebserver -hUsage: jwebserver [-b bind address] [-p port] [-d directory]                  [-o none|info|verbose] [-h to show options]                  [-version to show version information]Options:-b, --bind-address    - Address to bind to. Default: 127.0.0.1 (loopback).                        For all interfaces use &quot;-b 0.0.0.0&quot; or &quot;-b ::&quot;.-d, --directory       - Directory to serve. Default: current directory.-o, --output          - Output format. none|info|verbose. Default: info.-p, --port            - Port to listen on. Default: 8000.-h, -?, --help        - Prints this help message and exits.-version, --version   - Prints version information and exits.</code></pre><h2 id="JEP-413-Java-API-æ–‡æ¡£ä¸­çš„ä»£ç ç‰‡æ®µ"><a href="#JEP-413-Java-API-æ–‡æ¡£ä¸­çš„ä»£ç ç‰‡æ®µ" class="headerlink" title="JEP 413: Java API æ–‡æ¡£ä¸­çš„ä»£ç ç‰‡æ®µ"></a>JEP 413: Java API æ–‡æ¡£ä¸­çš„ä»£ç ç‰‡æ®µ</h2><p>JEP 413æ˜¯Java 18ä¸­çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œæ—¨åœ¨ç®€åŒ–åœ¨Java APIæ–‡æ¡£ä¸­åµŒå…¥ç¤ºä¾‹æºä»£ç çš„è¿‡ç¨‹ã€‚è¿™ä¸€ç‰¹æ€§é€šè¿‡å¼•å…¥ä¸€ä¸ªæ–°çš„<code>@snippet</code>æ ‡ç­¾æ¥å®ç°ï¼Œè¯¥æ ‡ç­¾å¯ä»¥ç”¨äºæ ‡å‡†çš„JavaDocç”Ÿæˆå™¨ã€‚</p><p>åœ¨JEP 413ä¹‹å‰ï¼Œè¦åœ¨Javaä»£ç æ³¨é‡Šä¸­æ·»åŠ ç¤ºä¾‹ä»£ç éå¸¸éº»çƒ¦ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨å¤æ‚çš„å­—ç¬¦è½¬ä¹‰æˆ–é¢„å®šä¹‰çš„æ ‡è®°ï¼ˆå¦‚ <code>{@code ...}</code>æ ‡è®°æˆ–<code>&lt;pre&gt;</code>æ ‡ç­¾ï¼‰ï¼Œè¿™ä¸ä»…å¢åŠ äº†ç¼–å†™å’Œç»´æŠ¤æ–‡æ¡£çš„å¤æ‚æ€§ï¼Œè¿˜å¯èƒ½å¯¼è‡´æ–‡æ¡£ä¸­çš„ä»£ç ç‰‡æ®µæ— æ³•æ­£ç¡®æ˜¾ç¤ºã€‚è€ŒJEP 413é€šè¿‡å¼•å…¥<code>@snippet</code>æ ‡ç­¾ï¼Œä½¿å¾—åœ¨APIæ–‡æ¡£ä¸­åµŒå…¥ç¤ºä¾‹æºä»£ç å˜å¾—æ›´åŠ ç®€å•å’Œç›´è§‚ã€‚</p><p><code>@snippet</code>æ ‡ç­¾æœ‰ä¸¤ç§ç”¨æ³•ï¼š</p><ol><li>å†…è”ç‰‡æ®µï¼ˆinline snippetï¼‰ï¼Œå³ä»£ç ç‰‡æ®µç›´æ¥åŒ…å«åœ¨æ ‡ç­¾å†…ï¼›<pre><code class="java">/*** The following code shows how to use {@code Optional.isPresent}:* {@snippet :* if (v.isPresent()) {*     System.out.println(&quot;v: &quot; + v.get());* }* }*/</code></pre></li><li>å¤–éƒ¨ç‰‡æ®µï¼ˆexternal snippetï¼‰ï¼Œå³ä»£ç ç‰‡æ®µä»å•ç‹¬çš„æºæ–‡ä»¶ä¸­è¯»å–ã€‚<pre><code class="java">/*** The following code shows how to use {@code Optional.isPresent}:* {@snippet file=&quot;ShowOptional.java&quot; region=&quot;example&quot;}*/</code></pre>å¼•ç”¨ä»£ç å¦‚ä¸‹ï¼š<pre><code class="java">public class ShowOptional { void show(Optional&lt;String&gt; v) {     // @start region=&quot;example&quot;     if (v.isPresent()) {         System.out.println(&quot;v: &quot; + v.get());     }     // @end }}</code></pre></li></ol><blockquote><p>éœ€è¦æ³¨æ„çš„ï¼Œå¼•å…¥å¤–éƒ¨ç‰‡æ®µçš„æ—¶å€™ï¼Œfileå‚æ•°æŒ‡å®šçš„æ–‡ä»¶é€šå¸¸ä½äºä¸æºæ–‡ä»¶åŒä¸€å±‚çº§ä¸‹çš„ä¸€çº§ç›®å½•ä¸­çš„snippet-filesç›®å½•å†…ã€‚</p></blockquote><p>JEP 413åœ¨Java APIæ–‡æ¡£çš„å¢å¼ºä¸»è¦æ˜¯ä¸‹é¢å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li>å¼•å…¥<code>@snippet</code> JavaDocæ ‡ç­¾ï¼šJEP 413å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ ‡å‡†Docletæ ‡ç­¾<code>@snippet</code>JavaDocï¼Œè¿™ä½¿å¾—åœ¨APIæ–‡æ¡£ä¸­åµŒå…¥ç¤ºä¾‹æºä»£ç å˜å¾—æ›´åŠ ç®€å•ã€‚è¿™ä¸ªæ ‡ç­¾å…è®¸å¼€å‘è€…ç›´æ¥åœ¨Javadocæ³¨é‡Šä¸­åŒ…å«å¯ç¼–è¯‘çš„æºä»£ç ç‰‡æ®µï¼Œä»è€Œæé«˜äº†æ–‡æ¡£çš„å¯è¯»æ€§å’Œå®ç”¨æ€§ã€‚</li><li>ç®€åŒ–ä»£ç ç¤ºä¾‹çš„åµŒå…¥ï¼šåœ¨JEP 413ä¹‹å‰ï¼Œè¦åœ¨JavaDocä¸­æ·»åŠ ä»£ç ç¤ºä¾‹é€šå¸¸éœ€è¦ä½¿ç”¨å¤æ‚çš„æ ‡è®°ï¼Œå¦‚<pre>æ ‡ç­¾æˆ–é€šè¿‡<code>@code</code>æ ‡ç­¾åŒ…è£¹ä»£ç æ®µã€‚è€ŒJEP 413é€šè¿‡ç®€åŒ–è¿™äº›è¿‡ç¨‹ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´æ–¹ä¾¿åœ°åœ¨æ–‡æ¡£ä¸­åµŒå…¥ä»£ç ç¤ºä¾‹ã€‚</li><li>å¢å¼ºéªŒè¯å’Œç»´æŠ¤èƒ½åŠ›ï¼šé€šè¿‡æä¾›å¯¹æºä»£ç ç‰‡æ®µçš„APIè®¿é—®ï¼ŒJEP 413ä¸ä»…ç®€åŒ–äº†æ–‡æ¡£çš„ç¼–å†™ï¼Œè¿˜å¢å¼ºäº†æºä»£ç ç‰‡æ®µçš„éªŒè¯èƒ½åŠ›ã€‚å°½ç®¡æœ€ç»ˆæ­£ç¡®æ€§ä»ç”±ä½œè€…è´Ÿè´£ï¼Œä½†æ–°çš„å·¥å…·æ”¯æŒä½¿å¾—å®ç°è¿™ä¸€ç›®æ ‡å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</li><li>è¯­æ³•é«˜äº®å’Œæ ¼å¼åŒ–æ”¯æŒï¼šä¸ä¹‹å‰çš„ç‰ˆæœ¬ç›¸æ¯”ï¼ŒJEP 413ä¸ä»…æ”¯æŒä»£ç ç‰‡æ®µçš„åµŒå…¥ï¼Œè¿˜æä¾›äº†è¯­æ³•é«˜äº®å’Œæ ¼å¼åŒ–çš„åŠŸèƒ½ã€‚è¿™æ„å‘³ç€åœ¨ç”Ÿæˆçš„Javadocæ–‡æ¡£ä¸­ï¼Œä»£ç ç¤ºä¾‹ä¼šä»¥æ›´æ¸…æ™°ã€æ˜“è¯»çš„æ–¹å¼å±•ç¤ºï¼Œä»è€Œæé«˜æ–‡æ¡£çš„å¯è¯»æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</li><li>æå‡ç”¨æˆ·ä½“éªŒï¼šJEP 413çš„å¼•å…¥å¤§å¤§æ”¹å–„äº†åœ¨JavaDocä¸­åµŒå…¥ä»£ç ç¤ºä¾‹çš„ä½“éªŒã€‚ä¾‹å¦‚ï¼Œåœ¨ä¹‹å‰ç‰ˆæœ¬ä¸­ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨å¤„ç†å¤§é‡çš„HTMLå’ŒXMLæ ‡è®°ï¼Œè€ŒJEP 413åˆ™é€šè¿‡æ ‡å‡†åŒ–çš„æ–¹å¼å‡å°‘äº†è¿™äº›å·¥ä½œé‡ã€‚</li><li>æé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ï¼šé€šè¿‡ä½¿ç”¨è§„èŒƒä¸”æ›´æ–°åŠæ—¶çš„APIæ–‡æ¡£ï¼Œå¼€å‘è€…å¯ä»¥æ›´å¿«åœ°ç†è§£å’Œä½¿ç”¨åº“ä¸­çš„åŠŸèƒ½ã€‚è¿™ç§æ¸…æ™°çš„æ–‡æ¡£æœ‰åŠ©äºå‡å°‘é”™è¯¯å’Œæ··æ·†ï¼Œä»è€Œæé«˜æ•´ä½“çš„å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</li></ul><blockquote><p>æˆ‘åªæœ‰åœ¨å†™åŸºç¡€å·¥å…·çš„æ—¶å€™æ‰ä¼šå†™è¿™æ–¹é¢çš„å®åŠ›ï¼Œå…¶ä»–æ—¶å€™ä½¿ç”¨æ™®é€šæ³¨é‡Šå°±è¡Œäº†ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªåŠŸèƒ½ä½¿ç”¨çš„æ¦‚ç‡æ¯”è¾ƒå°ï¼Œå¤§å®¶äº†è§£ä¸‹å°±å¥½ã€‚ğŸ¶</p></blockquote><h2 id="JEP-416-ä½¿ç”¨æ–¹æ³•å¥æŸ„é‡æ–°å®ç°æ ¸å¿ƒåå°„æœºåˆ¶"><a href="#JEP-416-ä½¿ç”¨æ–¹æ³•å¥æŸ„é‡æ–°å®ç°æ ¸å¿ƒåå°„æœºåˆ¶" class="headerlink" title="JEP 416: ä½¿ç”¨æ–¹æ³•å¥æŸ„é‡æ–°å®ç°æ ¸å¿ƒåå°„æœºåˆ¶"></a>JEP 416: ä½¿ç”¨æ–¹æ³•å¥æŸ„é‡æ–°å®ç°æ ¸å¿ƒåå°„æœºåˆ¶</h2><p>JEP 416 æ˜¯ Java18 ä¸­çš„ä¸€ä¸ªé‡è¦æ–°ç‰¹æ€§ï¼Œå…¶æ ¸å¿ƒå†…å®¹æ˜¯ä½¿ç”¨æ–¹æ³•å¥æŸ„ï¼ˆMethod Handlesï¼‰é‡æ–°å®ç° Java æ ¸å¿ƒåå°„æœºåˆ¶ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒåœ¨ java.lang.invoke çš„æ–¹æ³•å¥æŸ„ä¹‹ä¸Šé‡æ„äº† java.lang.reflect.Method ã€Constructor å’Œ Field ç­‰ç±»çš„å®ç°é€»è¾‘ã€‚</p><p>JEP 416ä¸»è¦ç›®æ ‡æ˜¯æŠŠåå°„APIä¸JVMå†…éƒ¨ç»“æ„è§£è€¦ï¼Œä¾¿äºç»´æŠ¤å’Œæ›´æ–°ï¼Œé™ä½æˆæœ¬å’Œå¤æ‚åº¦ï¼Œè€Œä¸”éœ€è¦å…¼é¡¾æ€§èƒ½å’Œå…¼å®¹æ€§ã€‚</p><p>è¿™ä¸€æ”¹åŠ¨ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li>æ€§èƒ½æå‡ï¼šé€šè¿‡ä½¿ç”¨æ–¹æ³•å¥æŸ„æ¥å¤„ç†åå°„æ“ä½œï¼ŒJava18 æ˜¾è‘—æé«˜äº†åå°„æ“ä½œçš„æ€§èƒ½å’Œé€Ÿåº¦ã€‚è¿™æ„å‘³ç€åœ¨è¿›è¡Œåå°„æ“ä½œæ—¶ï¼Œå¦‚è°ƒç”¨æ–¹æ³•ã€æ„é€ å‡½æ•°æˆ–è®¿é—®å­—æ®µç­‰ï¼Œå¯ä»¥æ›´å¿«åœ°å®Œæˆè¿™äº›æ“ä½œã€‚</li><li>ä»£ç é‡å‡å°‘ï¼šç”±äºæ–¹æ³•å¥æŸ„çš„å¼•å…¥ï¼Œå¼€å‘è€…åœ¨ç¼–å†™åå°„ç›¸å…³çš„ä»£ç æ—¶ï¼Œå¯ä»¥æ›´ç®€æ´åœ°è¡¨è¾¾æ„å›¾ï¼Œä»è€Œå‡å°‘ä»£ç é‡ã€‚è¿™ä¸ä»…ä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°æ˜“è¯»ï¼Œä¹Ÿè¿›ä¸€æ­¥æå‡äº†å¼€å‘æ•ˆç‡ã€‚</li><li>æ— éœ€ä¿®æ”¹ç°æœ‰ APIï¼šè¿™é¡¹æ”¹åŠ¨ä¸ä¼šå½±å“ç°æœ‰çš„ Java åå°„ APIï¼Œå› æ­¤å¼€å‘è€…æ— éœ€å¯¹ç°æœ‰çš„åå°„ç›¸å…³ä»£ç è¿›è¡Œä¿®æ”¹å³å¯ä½“éªŒåˆ°æ€§èƒ½ä¸Šçš„æå‡ã€‚è¿™å¯¹äºå·²ç»åœ¨ä½¿ç”¨åå°„åŠŸèƒ½çš„é¡¹ç›®æ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸å‹å¥½çš„ç‰¹æ€§ã€‚</li><li>é‡æ„æ ¸å¿ƒåå°„æœºåˆ¶ï¼šåœ¨ java.lang.invoke çš„æ–¹æ³•å¥æŸ„ä¹‹ä¸Šï¼ŒJava 18 å¯¹ java.lang.reflect.Method ã€Constructor å’Œ Field ç­‰ç±»è¿›è¡Œäº†é‡æ„ï¼Œä½¿å¾—å®ƒä»¬çš„å®ç°é€»è¾‘æ›´åŠ é«˜æ•ˆã€‚è¿™ç§é‡æ„ä¸ä»…ä¼˜åŒ–äº†å†…éƒ¨å®ç°ï¼Œè¿˜å¯èƒ½å¸¦æ¥ä¸€äº›æœªé¢„è§çš„æ€§èƒ½æå‡ã€‚</li></ol><p>è¿™é¡¹æ”¹åŠ¨ä¸ä¼šæ”¹å˜ç°æœ‰çš„åå°„ç›¸å…³ APIï¼Œå› æ­¤å¼€å‘è€…å¯ä»¥åœ¨ä¸ä¿®æ”¹ç°æœ‰ä»£ç çš„æƒ…å†µä¸‹ä½“éªŒåˆ°æ›´å¥½çš„åå°„æ€§èƒ½ã€‚æ€»çš„æ¥è¯´ï¼ŒJEP 416 çš„å¼•å…¥æ—¨åœ¨ç®€åŒ– Java åå°„æœºåˆ¶çš„ç»´æŠ¤å·¥ä½œï¼Œå¹¶æå‡å…¶è¿è¡Œæ•ˆç‡ã€‚</p><p>å®˜æ–¹ç»™çš„åŸºå‡†æµ‹è¯•æ•°æ®å¦‚ä¸‹ï¼š</p><p>åŸºå‡†çº¿ï¼ˆJava18 ä¹‹å‰å®ç°ï¼‰</p><pre><code>Benchmark                                     Mode  Cnt   Score  Error  UnitsReflectionSpeedBenchmark.constructorConst     avgt   10  68.049 Â± 0.872  ns/opReflectionSpeedBenchmark.constructorPoly      avgt   10  94.132 Â± 1.805  ns/opReflectionSpeedBenchmark.constructorVar       avgt   10  64.543 Â± 0.799  ns/opReflectionSpeedBenchmark.instanceFieldConst   avgt   10  35.361 Â± 0.492  ns/opReflectionSpeedBenchmark.instanceFieldPoly    avgt   10  67.089 Â± 3.288  ns/opReflectionSpeedBenchmark.instanceFieldVar     avgt   10  35.745 Â± 0.554  ns/opReflectionSpeedBenchmark.instanceMethodConst  avgt   10  77.925 Â± 2.026  ns/opReflectionSpeedBenchmark.instanceMethodPoly   avgt   10  96.094 Â± 2.269  ns/opReflectionSpeedBenchmark.instanceMethodVar    avgt   10  80.002 Â± 4.267  ns/opReflectionSpeedBenchmark.staticFieldConst     avgt   10  33.442 Â± 2.659  ns/opReflectionSpeedBenchmark.staticFieldPoly      avgt   10  51.918 Â± 1.522  ns/opReflectionSpeedBenchmark.staticFieldVar       avgt   10  33.967 Â± 0.451  ns/opReflectionSpeedBenchmark.staticMethodConst    avgt   10  75.380 Â± 1.660  ns/opReflectionSpeedBenchmark.staticMethodPoly     avgt   10  93.553 Â± 1.037  ns/opReflectionSpeedBenchmark.staticMethodVar      avgt   10  76.728 Â± 1.614  ns/op</code></pre><p>å½“å‰ï¼ˆJava18 å®ç°ï¼‰</p><pre><code>Benchmark                                     Mode  Cnt    Score   Error  UnitsReflectionSpeedBenchmark.constructorConst     avgt   10   32.392 Â± 0.473  ns/opReflectionSpeedBenchmark.constructorPoly      avgt   10  113.947 Â± 1.205  ns/opReflectionSpeedBenchmark.constructorVar       avgt   10   76.885 Â± 1.128  ns/opReflectionSpeedBenchmark.instanceFieldConst   avgt   10   18.569 Â± 0.161  ns/opReflectionSpeedBenchmark.instanceFieldPoly    avgt   10   98.671 Â± 2.015  ns/opReflectionSpeedBenchmark.instanceFieldVar     avgt   10   54.193 Â± 3.510  ns/opReflectionSpeedBenchmark.instanceMethodConst  avgt   10   33.421 Â± 0.406  ns/opReflectionSpeedBenchmark.instanceMethodPoly   avgt   10  109.129 Â± 1.959  ns/opReflectionSpeedBenchmark.instanceMethodVar    avgt   10   90.420 Â± 2.187  ns/opReflectionSpeedBenchmark.staticFieldConst     avgt   10   19.080 Â± 0.179  ns/opReflectionSpeedBenchmark.staticFieldPoly      avgt   10   92.130 Â± 2.729  ns/opReflectionSpeedBenchmark.staticFieldVar       avgt   10   53.899 Â± 1.051  ns/opReflectionSpeedBenchmark.staticMethodConst    avgt   10   35.907 Â± 0.456  ns/opReflectionSpeedBenchmark.staticMethodPoly     avgt   10  102.895 Â± 1.604  ns/opReflectionSpeedBenchmark.staticMethodVar      avgt   10   82.123 Â± 0.629  ns/op</code></pre><p>ä»åŸºå‡†æµ‹è¯•æ¥çœ‹ï¼Œæ–°å®ç°æœ‰å¥½æœ‰åï¼Œæ•ˆæœå·®åˆ«ä¸å¤§ï¼ŒåŸºæœ¬ç¬¦åˆæ–°æ‰©å±•ä¾¿äºç»´æŠ¤åˆå¯¹æ€§èƒ½æ²¡æœ‰æ˜æ˜¾å½±å“çš„é¢„æœŸã€‚</p><h2 id="JEP-418-Internet-Address-åœ°å€è§£æ-SPI"><a href="#JEP-418-Internet-Address-åœ°å€è§£æ-SPI" class="headerlink" title="JEP 418: Internet-Address åœ°å€è§£æ SPI"></a>JEP 418: Internet-Address åœ°å€è§£æ SPI</h2><p>JEP 418æ—¨åœ¨æ”¹è¿›Internet-Address åœ°å€è§£æçš„çµæ´»æ€§å’Œå¯é…ç½®æ€§ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒå¼•å…¥äº†ä¸€ä¸ªæœåŠ¡æä¾›è€…æ¥å£ï¼ˆSPIï¼‰ï¼Œä½¿å¾—<code>java.net.InetAddress</code>å¯ä»¥ä½¿ç”¨å¹³å°å†…ç½®è§£æå™¨ä¹‹å¤–çš„ç¬¬ä¸‰æ–¹è§£æå™¨ã€‚</p><p>åœ¨Java18ä¹‹å‰ç‰ˆæœ¬ä¸­ï¼ŒInternet-Address åœ°å€è§£æä¸»è¦ä¾èµ–äºå†…ç½®çš„è§£æå™¨ï¼Œè¿™äº›è§£æå™¨é€šå¸¸ä¼šç»“åˆæœ¬åœ°çš„hostsæ–‡ä»¶å’ŒDNSæ¥è§£æä¸»æœºåå’ŒIPåœ°å€ã€‚ç„¶è€Œï¼Œè¿™ç§è®¾è®¡é™åˆ¶äº†å¼€å‘è€…å¯¹è§£æå™¨çš„é€‰æ‹©å’Œå®šåˆ¶èƒ½åŠ›ã€‚é€šè¿‡å¼•å…¥SPIï¼ŒJEP 418å…è®¸å¼€å‘è€…è‡ªå®šä¹‰ç½‘ç»œåœ°å€è§£æç­–ç•¥ï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p><p>ä¾‹å¦‚ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡å®ç°SPIæ¥å£ï¼Œåˆ›å»ºè‡ªå·±çš„è§£æå™¨ï¼Œå¹¶å°†å…¶æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ï¼Œè¿™æ ·java.net.InetAddress.getByName()æ–¹æ³•å°±å¯ä»¥ä½¿ç”¨è¿™äº›è‡ªå®šä¹‰è§£æå™¨æ¥è¿›è¡Œåœ°å€è§£æäº†ã€‚è¿™ä¸ä»…å¢å¼ºäº†ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œè¿˜ä¸ºç‰¹å®šéœ€æ±‚æä¾›äº†æ›´å¤šçš„é€‰æ‹©å’Œæ§åˆ¶ã€‚</p><h2 id="é¢„è§ˆåŠŸèƒ½"><a href="#é¢„è§ˆåŠŸèƒ½" class="headerlink" title="é¢„è§ˆåŠŸèƒ½"></a>é¢„è§ˆåŠŸèƒ½</h2><h3 id="JEP-420-switch-æ¨¡å¼åŒ¹é…ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"><a href="#JEP-420-switch-æ¨¡å¼åŒ¹é…ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰" class="headerlink" title="JEP 420: switch æ¨¡å¼åŒ¹é…ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰"></a>JEP 420: switch æ¨¡å¼åŒ¹é…ï¼ˆç¬¬äºŒæ¬¡é¢„è§ˆï¼‰</h3><p>switch æ¨¡å¼åŒ¹é…ç¬¬ä¸€æ¬¡é¢„è§ˆæ˜¯åœ¨Java17ä¸­ï¼ˆJEP 406ï¼Œå‚è§<a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a>ï¼‰ï¼Œæ—¨åœ¨é€šè¿‡å¼•å…¥æ¨¡å¼åŒ¹é…æ¥å¢å¼ºJavaç¼–ç¨‹è¯­è¨€çš„è¡¨è¾¾èƒ½åŠ›ï¼Œä½¿å¾—åœ¨switchè¯­å¥å’Œè¡¨è¾¾å¼ä¸­å¯ä»¥æ›´çµæ´»åœ°è¿›è¡Œæ¡ä»¶åˆ¤æ–­å’Œåˆ†æ”¯é€‰æ‹©ã€‚</p><p>JEP 420å…è®¸åœ¨switchçš„é€‰æ‹©å™¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ä»»ä½•å¼•ç”¨ç±»å‹ï¼Œå¹¶ä¸”caseæ ‡ç­¾å¯ä»¥åŒ…å«æ¨¡å¼ï¼ŒåŒ…æ‹¬æ¡ä»¶æ¨¡å¼ã€‚è¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥åœ¨switchè¯­å¥ä¸­ç›´æ¥åŒ¹é…å˜é‡çš„ä¸åŒçŠ¶æ€æˆ–ç±»å‹ï¼Œä»è€Œç®€åŒ–ä»£ç å¹¶æé«˜å…¶å¯è¯»æ€§å’Œå¥å£®æ€§ã€‚</p><p>åŸºäºè¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå¤æ‚çš„if-elseç»“æ„è½¬æ¢ä¸ºæ›´åŠ ç®€æ´çš„switchæ¨¡å¼åŒ¹é…ç»“æ„ï¼Œè¿™ä¸ä»…æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œè¿˜å‡å°‘äº†å‡ºé”™çš„å¯èƒ½æ€§ã€‚</p><p>æ­¤å¤–ï¼ŒJEP 420è¿˜æ‰©å±•äº†æ¨¡å¼åŒ¹é…çš„è¯­è¨€ç‰¹æ€§ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿå¯¹æ•°æ®è¿›è¡Œæ›´å¤æ‚ã€æ›´ç›´è§‚çš„æŸ¥è¯¢å’Œæ“ä½œã€‚è¿™ç§æ”¹è¿›ç‰¹åˆ«é€‚ç”¨äºå¤„ç†å¤šæ ·çš„æ•°æ®ç»“æ„å’Œå¤æ‚çš„æ•°æ®æŸ¥è¯¢åœºæ™¯ï¼Œæœ‰åŠ©äºæå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p><p>æ€»ç»“è€Œè¨€ï¼ŒJEP 420é€šè¿‡å¼•å…¥switchæ¨¡å¼åŒ¹é…ï¼Œè¿›ä¸€æ­¥ä¸°å¯Œäº†Javaçš„æ§åˆ¶æµç»“æ„ï¼Œä½¿ä»£ç ç¼–å†™æ›´åŠ é«˜æ•ˆå’Œæ˜“æ‡‚ã€‚</p><p>åœ¨JEP 420ä¸­ï¼Œswitchè¯­å¥çš„æ¨¡å¼åŒ¹é…è¯­æ³•å¦‚ä¸‹ï¼š</p><pre><code class="java">switch (è¡¨è¾¾å¼) {case æ¨¡å¼1 -&gt; æ“ä½œ1;case æ¨¡å¼2 -&gt; æ“ä½œ2;// å¯ä»¥æœ‰å¤šä¸ªcaseå­å¥default -&gt; é»˜è®¤æ“ä½œ;}</code></pre><h2 id="å­µåŒ–åŠŸèƒ½"><a href="#å­µåŒ–åŠŸèƒ½" class="headerlink" title="å­µåŒ–åŠŸèƒ½"></a>å­µåŒ–åŠŸèƒ½</h2><h3 id="JEP-417-Vector-APIï¼ˆç¬¬ä¸‰æ¬¡å­µåŒ–ï¼‰"><a href="#JEP-417-Vector-APIï¼ˆç¬¬ä¸‰æ¬¡å­µåŒ–ï¼‰" class="headerlink" title="JEP 417: Vector APIï¼ˆç¬¬ä¸‰æ¬¡å­µåŒ–ï¼‰"></a>JEP 417: Vector APIï¼ˆç¬¬ä¸‰æ¬¡å­µåŒ–ï¼‰</h3><p>Vector å‘é‡è®¡ç®— API æ˜¯åœ¨ Java16 å¼•å…¥ï¼ˆJEP 338ï¼Œå‚è§ <a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a>ï¼‰ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶å€ŸåŠ© CPU å‘é‡è¿ç®—æŒ‡ä»¤ï¼Œå®ç°æ›´ä¼˜çš„è®¡ç®—èƒ½åŠ›ã€‚åœ¨ Java17 ç¬¬äºŒæ¬¡å­µåŒ–ï¼ˆJEP 414ï¼Œå‚è§<a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a>ï¼‰ï¼Œé’ˆå¯¹æ€§èƒ½å’Œå®ç°è¿›è¡Œäº†æ”¹è¿›ï¼ŒåŒ…æ‹¬å­—èŠ‚å‘é‡ä¸å¸ƒå°”æ•°ç»„ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚</p><p>Vector å‘é‡è®¡ç®— APIæ˜¯ä¸€ä¸ªä¸ºäº†é«˜æ€§èƒ½è®¡ç®—è®¾è®¡çš„APIï¼Œæ—¨åœ¨åˆ©ç”¨CPUçš„å‘é‡æŒ‡ä»¤é›†æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨ç§‘å­¦è®¡ç®—é¢†åŸŸã€‚å…¶ç›®æ ‡æ˜¯æä¾›ä¸€ç§æ›´é«˜æ•ˆçš„ç¼–ç¨‹æ–¹å¼ï¼Œä¸ºJavaè¯­è¨€çš„æœªæ¥å‘å±•å¥ å®šåŸºç¡€ã€‚</p><blockquote><p>Vector å‘é‡è®¡ç®— APIåœ¨æœ€æ–°çš„Java23ä¸­è¿˜åœ¨å­µåŒ–ï¼Œä¸€æ—¶åŠä¼šè¿˜ç”¨ä¸äº†ï¼Œæˆ‘ä»¬å°±æŒç»­å…³æ³¨ç€å§ã€‚</p></blockquote><h3 id="JEP-419-å¤–éƒ¨å‡½æ•°å’Œå†…å­˜-API-ç¬¬äºŒæ¬¡å­µåŒ–"><a href="#JEP-419-å¤–éƒ¨å‡½æ•°å’Œå†…å­˜-API-ç¬¬äºŒæ¬¡å­µåŒ–" class="headerlink" title="JEP 419: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜ API (ç¬¬äºŒæ¬¡å­µåŒ–)"></a>JEP 419: å¤–éƒ¨å‡½æ•°å’Œå†…å­˜ API (ç¬¬äºŒæ¬¡å­µåŒ–)</h3><p>å¤–éƒ¨å‡½æ•°å’Œå†…å­˜ APIç¬¬ä¸€æ¬¡å­µåŒ–æ˜¯åœ¨Java17ä¸­ï¼ˆJEP 412ï¼Œå‚è§<a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a>ï¼‰ã€‚</p><p>JEP 419æ—¨åœ¨ä½¿Javaç¨‹åºèƒ½å¤Ÿæ›´å®‰å…¨ã€é«˜æ•ˆåœ°ä¸æœ¬åœ°ä»£ç å’Œæ•°æ®è¿›è¡Œäº’æ“ä½œã€‚é€šè¿‡è¿™ä¸ªAPIï¼Œå¼€å‘è€…å¯ä»¥è°ƒç”¨JVMä¹‹å¤–çš„å¤–éƒ¨å‡½æ•°ï¼Œå¹¶ä¸”èƒ½å¤Ÿå®‰å…¨åœ°è®¿é—®ä¸å—JVMç®¡ç†çš„å¤–éƒ¨å†…å­˜ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œè¯¥APIå®šä¹‰äº†ä¸€ç³»åˆ—ç±»å’Œæ¥å£ï¼Œä½¿å¾—å®¢æˆ·ç«¯ä»£ç å¯ä»¥åœ¨åº“å’Œåº”ç”¨ç¨‹åºä¸­åˆ†é…å¤–éƒ¨å†…å­˜ï¼ˆå¦‚MemorySegmentã€MemoryAddresså’ŒSegmentAllocatorï¼‰ã€æ“ä½œå’Œè®¿é—®ç»“æ„åŒ–å¤–éƒ¨å†…å­˜ï¼ˆå¦‚MemoryLayoutå’ŒVarHandleï¼‰ï¼Œå¹¶ç®¡ç†å¤–éƒ¨èµ„æºçš„ç”Ÿå‘½å‘¨æœŸã€‚è¿™ä½¿å¾—Javaç¨‹åºæ— éœ€ä½¿ç”¨JNIï¼ˆJava Native Interfaceï¼‰å³å¯ç›´æ¥è°ƒç”¨æœ¬åœ°åº“å’Œå¤„ç†æœ¬åœ°æ•°æ®ï¼Œä»è€Œé¿å…äº†JNIå¸¦æ¥çš„æ½œåœ¨é£é™©å’Œå¤æ‚æ€§ã€‚</p><p>é€šè¿‡æ›´åŠ ä¼˜é›…çš„æ–¹å¼è®¿é—®å¤–éƒ¨å‡½æ•°æ˜¯ä» Java14 å¼€å§‹çš„ï¼Œç»å†äº†å¤šä¸ªå­µåŒ–ç‰ˆæœ¬ï¼š</p><ul><li>Java14 çš„ JEP 370ï¼šå¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆå­µåŒ–ï¼‰</li><li>Java15 çš„ JEP 383ï¼šå¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆç¬¬äºŒç‰ˆå­µåŒ–åŠŸèƒ½ï¼‰</li><li>Java16 çš„ JEP 389ï¼šå¤–éƒ¨é“¾æ¥å™¨ APIï¼ˆå­µåŒ–åŠŸèƒ½ï¼‰</li><li>Java16 çš„ JEP 393ï¼šå¤–éƒ¨å­˜å‚¨å™¨è®¿é—® APIï¼ˆç¬¬ä¸‰ç‰ˆå­µåŒ–åŠŸèƒ½ï¼‰</li><li>Java17 çš„ JEP 412ï¼šå¤–éƒ¨å‡½æ•°å’Œå†…å­˜ API</li></ul><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œè™½ç„¶ä¸€ç›´åœ¨å­µåŒ–ï¼Œä½†æ˜¯åŠŸèƒ½è¶Šæ¥è¶Šå¼ºå¤§äº†ã€‚</p><h2 id="å¼ƒç”¨å’Œåˆ é™¤"><a href="#å¼ƒç”¨å’Œåˆ é™¤" class="headerlink" title="å¼ƒç”¨å’Œåˆ é™¤"></a>å¼ƒç”¨å’Œåˆ é™¤</h2><h3 id="JEP-421-å¼ƒç”¨-Finalization"><a href="#JEP-421-å¼ƒç”¨-Finalization" class="headerlink" title="JEP 421: å¼ƒç”¨ Finalization"></a>JEP 421: å¼ƒç”¨ Finalization</h3><p>å°† Finalization æ ‡è®°ä¸ºè¿‡æœŸï¼š<code>@Deprecated(forRemoval=true)</code>ï¼Œå…·ä½“APIåŒ…æ‹¬ï¼š</p><ul><li>java.lang.Object.finalize()</li><li>java.lang.Enum.finalize()</li><li>java.awt.Graphics.finalize()</li><li>java.awt.PrintJob.finalize()</li><li>java.util.concurrent.ThreadPoolExecutor.finalize()</li><li>javax.imageio.spi.ServiceRegistry.finalize()</li><li>javax.imageio.stream.FileCacheImageInputStream.finalize()</li><li>javax.imageio.stream.FileImageInputStream.finalize()</li><li>javax.imageio.stream.FileImageOutputStream.finalize()</li><li>javax.imageio.stream.ImageInputStreamImpl.finalize()</li><li>javax.imageio.stream.MemoryCacheImageInputStream.finalize()</li></ul><p>äº†è§£è¿‡JVM GCé€»è¾‘çš„éƒ½çŸ¥é“ï¼Œfinalizeè™½ç„¶æä¾›äº†èµ„æºå›æ”¶ï¼Œä½†å…¶å®å¹¶ä¸å¯é å’Œå®‰å…¨ï¼Œä¸ºäº†è§„èŒƒä½¿ç”¨ï¼Œå¼€å§‹ä¸»é”®æ·˜æ±°è¿™äº›è¿‡æœŸçš„è®¾è®¡æ–¹æ¡ˆã€‚</p><p>å…³äºèµ„æºå›æ”¶ï¼Œæ¨èä½¿ç”¨ try-with-resources æˆ–è€… java.lang.ref.Cleanerï¼Œè¿™äº›éƒ½æ˜¯ç®€å•ç›´æ¥é«˜æ•ˆçš„å›æ”¶æ–¹å¼ã€‚</p><p>æˆ‘ä»¬åº”è¯¥åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œåº”è¯¥æœ‰æ„è¯†çš„å†™ä¼˜é›…çš„ä»£ç ã€‚ä»£ç åŠŸåŠ›ï¼Œæ²¡æœ‰æ­¦åŠŸç§˜ç¬ˆå¯ä»¥åœ¨çŸ­æ—¶é—´å¿«é€Ÿæå‡ï¼Œéƒ½æ˜¯æ—¥å¸¸ä¸€è¡Œä¸€è¡Œç§¯æ”’çš„ï¼Œé‡å˜å¼•èµ·è´¨å˜ï¼Œä½è´¨é‡çš„ç¼–ç ï¼Œæ˜¯æ— æ³•å¼•èµ·è´¨å˜çš„ã€‚</p><p>ä½ æˆ‘å…±å‹‰ã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Java18 æ–°å¢çš„ç‰¹æ€§ï¼Œå®Œæ•´çš„ç‰¹æ€§æ¸…å•å¯ä»¥ä» <a href="https://openjdk.org/projects/jdk/18/" target="_blank" rel="noopener">https://openjdk.org/projects/jdk/18/</a> æŸ¥çœ‹ã€‚åç»­å†…å®¹ä¼šå‘å¸ƒåœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/W6Esovb7zzCL_seXgY84jA" target="_blank" rel="noopener">Java18 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/WutbAX_IQNqP4M3rud9f_g" target="_blank" rel="noopener">Java19 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/DvZYrZTtGfdXNsXGzmQN1A" target="_blank" rel="noopener">Java20 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/iiXa9rpJu1Vedpke0XpBzQ" target="_blank" rel="noopener">Java21 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/eHHFaJErH8XH4QSRrfcehQ" target="_blank" rel="noopener">Java22 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/XvB0D2vzhaAvHESupdALag" target="_blank" rel="noopener">Java23 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378" target="_blank" rel="noopener">Java24 çš„æ–°ç‰¹æ€§</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java/java-18-features">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava18 çš„æ–°ç‰¹æ€§</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">Java æ¯åŠå¹´å°±ä¼šæ›´æ–°ä¸€æ¬¡æ–°ç‰¹æ€§ï¼Œå†ä¸æŒæ¡å°±è¦è½ä¼äº†ï¼šJava18 çš„æ–°ç‰¹æ€§</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      ä» 2017 å¹´å¼€å§‹ï¼ŒJava ç‰ˆæœ¬æ›´æ–°ç­–ç•¥ä»åŸæ¥çš„æ¯ä¸¤å¹´ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ”¹ä¸ºæ¯å…­ä¸ªæœˆä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥å¿«é€ŸéªŒè¯æ–°ç‰¹æ€§ï¼Œæ¨åŠ¨ Java çš„å‘å±•ã€‚è®©æˆ‘ä»¬è·Ÿéš Java çš„è„šæ­¥ï¼Œé…åˆç¤ºä¾‹è®²è§£ï¼Œçœ‹ä¸€çœ‹æ¯ä¸ªç‰ˆæœ¬çš„æ–°ç‰¹æ€§ï¼Œæœ¬æœŸæ˜¯ Java18 çš„æ–°ç‰¹æ€§ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="Java" scheme="https://www.howardliu.cn/tags/Java/"/>
    
      <category term="Java18" scheme="https://www.howardliu.cn/tags/Java18/"/>
    
  </entry>
  
  <entry>
    <title>ç¾Šä¸ç¾Šçš„å…³æˆ‘ä»€ä¹ˆäº‹ï¼Ÿ</title>
    <link href="https://www.howardliu.cn/what-i-think-of-covid-19/"/>
    <id>https://www.howardliu.cn/what-i-think-of-covid-19/</id>
    <published>2023-01-07T14:40:56.000Z</published>
    <updated>2023-01-07T14:40:56.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/raving/b919bbc6863c45cb94c7f5a0ce376f18.jpg" alt="è¿™æ®µç»å†ç»ˆå°†æˆä¸ºå†å²"></p><blockquote><p>æœ¬æ–‡å…±ï¼š1976å­— é¢„è®¡é˜…è¯»æ—¶é—´ï¼š5åˆ†é’Ÿ</p></blockquote><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>ä¸å‡ºæ„å¤–ï¼Œçœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„äººå…«æˆé˜³äº†ã€‚</p><p>å…ˆæ”¾ä¸ªç»Ÿè®¡ï¼Œ12æœˆ23å·çš„æ—¶å€™ï¼Œéƒ¨é—¨å‘èµ·äº†ä¸€æ¬¡æŠ•ç¥¨ï¼Œ480äººå‚ä¸ï¼Œåªæœ‰20%çš„å£®å£«è¿˜æ²¡é˜³ã€‚</p><a id="more"></a><p><img src="https://static.howardliu.cn/raving/1.jpeg" alt="æ˜¯å¦æ„ŸæŸ“æ–°å† ç»Ÿè®¡"></p><p>åœ¨è¿™ä¸€æ³¢é«˜å³°æœŸå‰ï¼Œæˆ‘ä»¬å…¬å¸å·²ç»å±…å®¶å¥½å‡ ä¸ªå‘¨äº†ï¼Œæ‰€ä»¥æŠ•ç¥¨ç»“æœåŸºæœ¬ä¸Šèƒ½å¤Ÿååº”ç¤¾ä¼šæƒ…å†µã€‚</p><p>ä»Šå¤©å°±æƒ³èŠä¸¤ä»¶äº‹ï¼š</p><ol><li>ä¸ºå•¥çªç„¶æ”¾å¼€äº†ï¼Ÿ</li><li>æˆ‘å¯¹æ”¾å¼€çš„çœ‹æ³•ã€‚</li></ol><h2 id="ä¸ºå•¥æ”¾å¼€"><a href="#ä¸ºå•¥æ”¾å¼€" class="headerlink" title="ä¸ºå•¥æ”¾å¼€"></a>ä¸ºå•¥æ”¾å¼€</h2><p>ä»€ä¹ˆæƒ…å†µä¸‹å¯ä»¥æ”¾å¼€ï¼ŸåŸºæœ¬ä¸Šæœ‰ä¸‰ç§æƒ…å†µï¼š</p><ol><li>ç¬¬ä¸€ç§æƒ…å†µæ˜¯å¤§å®¶å¸Œæœ›çš„ï¼ŒåƒSARSä¸€æ ·ï¼Œæ–°å† ç—…æ¯’æ¶ˆå¤±äº†ï¼›</li><li>ç¬¬äºŒç§æƒ…å†µæ˜¯ä¸éœ€è¦é˜²ï¼Œæ–°å† ç—…æ¯’è‡´æ­»ç‡é‡ç—‡ç‡é™ä½åˆ°å¯å®¹å¿èŒƒå›´ï¼ˆæ¯”å¦‚æ— é™æ¥è¿‘0ï¼‰ï¼Œæˆ‘ä»¬ä¸ç—…æ¯’å…±ç”Ÿäº†ï¼›</li><li>ç¬¬ä¸‰ç§æƒ…å†µæ˜¯é˜²ä¸ä½ï¼Œè™½ç„¶ç—…æ¯’è‡´æ­»ç‡è¿˜å¾ˆé«˜ï¼Œä½†ä¸€ä¸ªçœ¼ç¥äº¤æµå°±ä¼šä¼ æŸ“ï¼Œé˜²ä¸èƒœé˜²äº†ã€‚</li></ol><p>ç°åœ¨æ˜¾ç„¶ä¸æ˜¯ç¬¬ä¸€ç§æƒ…å†µã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªæ•°æ®ï¼š</p><p>æ–°å† ç—…æ¯’åŸå§‹æ¯’æ ªçš„R0å€¼åœ¨3-5ï¼›å¾·å°”å¡”æ¯’æ ªçš„R0å€¼ä¸º6-8ï¼›å¥¥å¯†å…‹æˆBA.1çš„R0å€¼çº¦ä¸º9.5ï¼›å¥¥å¯†å…‹æˆBA.2çš„R0å€¼çº¦ä¸º13.3ï¼›å¥¥å¯†å…‹æˆBA.4/5çš„R0å€¼å¯èƒ½è¾¾åˆ°18.6â€¦â€¦</p><p>R0å€¼ï¼ˆR naughtï¼‰æ˜¯åŸºæœ¬ä¼ æŸ“æ•°ï¼ˆbasic reproductive numberï¼‰çš„ç®€ç§°ï¼Œåˆè¯‘ä½œåŸºæœ¬å†ç”Ÿæ•°ï¼ŒæŒ‡çš„æ˜¯åœ¨æ²¡æœ‰é‡‡å–ä»»ä½•å¹²é¢„æªæ–½çš„æƒ…å†µä¸‹ï¼Œå¹³å‡æ¯ä½æ„ŸæŸ“è€…åœ¨ä¼ æŸ“æœŸå†…ä½¿æ˜“æ„Ÿè€…ä¸ªä½“è‡´ç—…çš„æ•°é‡ã€‚æ•°å­—è¶Šå¤§è¯´æ˜ä¼ æ’­èƒ½åŠ›è¶Šå¼ºï¼Œæ§åˆ¶éš¾åº¦è¶Šå¤§ã€‚</p><p>ç®€å•è¯´å°±æ˜¯ï¼ŒR0æ˜¯2æ—¶ï¼Œä¸€ä¸ªä¼ æŸ“ä¿©ï¼Œä¸¤ä¸ªä¼ å››ä¸ªï¼Œå››ä¸ªä¼ å…«ä¸ªï¼Œä»¥æ­¤ç±»æ¨â€¦â€¦ç»è¿‡4ä¸ªå¾ªç¯ï¼Œç—…ä¾‹æ•°å°±å¢åŠ åˆ°64äººã€‚</p><p>å’±ä»¬æŠŠæ–°å† ç—…æ¯’çš„R0å€¼åšä¸ªå›¾ï¼š</p><p><img src="https://static.howardliu.cn/raving/B1234E4F-0095-4002-99A4-74530209393F.png" alt="æ–°å† é›†ä¸­æ¯’æ ªçš„R0å€¼æ›²çº¿"></p><p>è¿™å°±æ˜¯æ‰€è°“çš„æŒ‡æ•°çˆ†ç‚¸ï¼š</p><ul><li>å½“R0ç­‰äº3çš„æ—¶å€™ï¼Œç»è¿‡4æ¬¡ä¼ æ’­ï¼Œç»“æœæ˜¯81ï¼›</li><li>å½“R0ç­‰äº6çš„æ—¶å€™ï¼Œç»è¿‡4æ¬¡ä¼ æ’­ï¼Œç»“æœæ˜¯1296ï¼›</li><li>å½“R0ç­‰äº9çš„æ—¶å€™ï¼Œç»è¿‡4æ¬¡ä¼ æ’­ï¼Œç»“æœæ˜¯6561ï¼›</li><li>å½“R0ç­‰äº13çš„æ—¶å€™ï¼Œç»è¿‡4æ¬¡ä¼ æ’­ï¼Œç»“æœæ˜¯28561ï¼›</li><li>â€¦â€¦</li></ul><p>å½“R0è¶…è¿‡ä¸€å®šèŒƒå›´ï¼Œä¸æ˜¯æˆ‘ä»¬æƒ³é˜²å°±èƒ½é˜²å¾—ä½çš„ã€‚å°±æ¯”å¦‚å¹´åˆçš„ä¸Šæµ·ï¼Œå¥¥å¯†å…‹æˆçš„é«˜ä¼ æ’­æ€§è¿…é€Ÿå‡»æºƒäº†ç²¾å‡†é˜²æ§ï¼Œæ¼”å˜æˆåæ¥çš„å°åŸã€‚</p><p>å¥¥å¯†å…‹æˆçš„å˜å¼‚æ ªçš„ä¼ æŸ“èƒ½åŠ›è¿˜åœ¨å¢å¼ºï¼Œæ®è¯´ç°åœ¨æ˜¯21äº†ï¼ˆæ²¡æœ‰æŸ¥åˆ°å®˜æ–¹æ•°æ®ï¼‰ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¦‚æœè¿˜æƒ³åƒå‰å‡ å¹´ä¼¼çš„ï¼Œæƒ³é€šè¿‡å°æ§æ¥é˜»æ–­ä¼ æŸ“ï¼Œå°±è¦ä¸¾å…¨å›½ä¹‹åŠ›äº†ã€‚é‚£ç§æƒ…å†µä¸‹ï¼Œå¤§å®¶å°±åªèƒ½å¾…åœ¨å®¶é‡Œï¼Œå„ç§è¡Œä¸šåœæ‘†ã€‚æ˜¾ç„¶æ˜¯ä¸ç°å®çš„ï¼Œä¸æ˜¯æ¯å®¶éƒ½æœ‰èƒ½å¤Ÿåƒä¸€ä¸ªæœˆçš„æˆ˜ç•¥å‚¨å¤‡ç²®ï¼Œä¹Ÿä¸æ˜¯æ¯å®¶éƒ½èƒ½å¤Ÿå•¥ä¹Ÿä¸å¹²ç™½æ¥ä¸€ä¸ªæœˆé’±çš„ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨æ˜¯é˜²ä¸ä½äº†ã€‚</p><p><img src="https://static.howardliu.cn/raving/1BE20C5B-4E99-462F-A95C-60550E27304A.png" alt="ä¸ç”¨ä¸‹æ¥¼ä¼šæ„ŸæŸ“äº†æ–°å† "></p><p>ç„¶åæˆ‘ä»¬å†çœ‹çœ‹è‡´ç—…æ€§ï¼Œé‰´äºå¤§å®¶æˆ–è€…å‘¨å›´äººéƒ½é˜³è¿‡ï¼Œå°±ç®—æ˜¯æœ‰ç»éªŒã€‚æˆ‘èº«è¾¹äººé˜³äº†ä¹‹åçš„å¾å…†åŸºæœ¬ä¸Šè¿™è¿™å‡ ç§ï¼š</p><ol><li>å‘çƒ§ï¼Œæœ‰çš„ä½çƒ§å¥½å‡ å¤©ï¼ˆå…ç–«åŠ›å·®ï¼‰ã€æœ‰çš„é«˜çƒ§ä¸€ä¸¤å¤©ï¼ˆå…ç–«åŠ›å¼ºï¼‰ï¼›</li><li>å’³å—½ï¼Œå¹²å’³æˆ–è€…æ¹¿å’³ï¼Œå› äººè€Œå¼‚ï¼›</li><li>å—“å­ç–¼ï¼Œæˆç§°å®å¨Ÿå—“ï¼Œä¸¥é‡åœ°è¯´ä¸å‡ºè¯ï¼Œæ„Ÿè§‰åƒæ˜¯ååˆ€ç‰‡ä¸€æ ·ï¼›</li><li>æµ‘èº«ç–¼ï¼Œä¸»è¦å˜ç°æ˜¯è‚Œè‚‰é…¸ç–¼ï¼Œæµ‘èº«æ²¡åŠ²ï¼›</li></ol><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›ç—‡çŠ¶å’Œæ™®é€šçš„æµæ„Ÿå¾ˆåƒã€‚ç”šè‡³æ²¡æœ‰æŠ—åŸçš„æƒ…å†µä¸‹ï¼Œéƒ½ä¸èƒ½æ–­å®šè‡ªå·±æ˜¯æµæ„Ÿè¿˜æ˜¯æ–°å† ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤§éƒ¨åˆ†äººé˜³äº†ä¹‹åç—‡çŠ¶éƒ½å¾ˆè½»ï¼Œä¸”å±äºä¸Šå‘¼å¸é“çš„ç—‡çŠ¶ï¼ŒåŸºæœ¬ä¸Šå¯¹è‚ºéƒ¨æ²¡å•¥å½±å“ã€‚</p><p>è¿™æ ·å°±ç¬¦åˆç¬¬äºŒç§æƒ…å†µäº†ï¼Œæˆ‘ä»¬å¤§å¤šæ•°äººå¯ä»¥ä¸æ–°å† ç—…æ¯’å…±ç”Ÿäº†ã€‚</p><p>ä»ç»æµçš„è§’åº¦çœ‹ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ— é™æœŸçš„æ”¶ç´§é˜²æ§æªæ–½ï¼Œå¾ˆå¤šä¼ä¸šåœ¨è¿™æ®µå°æ§æœŸé—´è‰°éš¾åº¦æ—¥ï¼Œæ¯ä¸€æ¬¡æ”¶ç´§ï¼Œä¼ä¸šéƒ½ä¼šå—åˆ°å†²å‡»ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ä¸è®¡æˆæœ¬çš„å°æ§ï¼Œå­©å­è¦é•¿å¤§ï¼Œæˆäººè¦å·¥ä½œï¼Œä¼ä¸šè¦å‘å±•ï¼Œäººä»¬è¦ç”Ÿæ´»ã€‚æ—¶ç§»ä¸–æ˜“ï¼Œå½“å°æ§æˆæœ¬è¿œè¿œå¤§äºæ”¶ç›Šæ—¶ï¼Œå½“æ„ŸæŸ“åå¯¹èº«ä½“å½±å“å¾ˆå°æ—¶ï¼Œæˆ‘ä»¬å°±è¦é€‰æ‹©æ›´é€‚åˆçš„æ–¹å¼ã€‚</p><h2 id="æˆ‘çš„çœ‹æ³•"><a href="#æˆ‘çš„çœ‹æ³•" class="headerlink" title="æˆ‘çš„çœ‹æ³•"></a>æˆ‘çš„çœ‹æ³•</h2><p>å†æ¥è¯´ä¸‹æˆ‘å¯¹æ”¾å¼€çš„çœ‹æ³•ï¼šåšå†³æ‹¥æŠ¤ï¼Œä½†ä¹Ÿä¼šåšå¥½ä¸ªäººé˜²æŠ¤ã€‚</p><p>é¦–å…ˆè¯´ä¸ªäººé˜²æŠ¤ï¼Œç›¸ä¿¡å¤§å®¶ä»å„ç§æ¸ é“äº†è§£è¿‡ï¼Œç—…æ¯’æ˜¯RNAå¤åˆ¶ï¼Œå˜å¼‚æ–¹å‘å¤šå˜ä¸”é€Ÿåº¦å¿«ï¼Œå°±æœ‰æ¦‚ç‡å‡ºç°ä¼ æŸ“æ€§å¼ºä¸”è‡´æ­»ç‡é«˜çš„æ¯’æ ªã€‚åªè¦æˆ‘ä»¬åšå¥½é˜²æŠ¤ï¼Œåˆ«è®©ç—…æ¯’åœ¨æˆ‘ä»¬ä½“å†…æœ‰å¤åˆ¶çš„æœºä¼šï¼Œé‚£å˜å¼‚çš„æœºä¼šå°±ä¼šå°‘å¾ˆå¤šã€‚</p><p>ç„¶åè¯´åšå†³æ‹¥æŠ¤ï¼Œå°±è¿™å‡ å‘¨çœ‹è¿‡æ¥ï¼Œå•†åœºåœ¨æ¸æ¸æ¢å¤ï¼Œå¤§å®¶ç”Ÿæ´»è½»æ¾å¾ˆå¤šï¼Œè¿å‰å‡ å¤©å‡ ä¹ç˜«ç—ªçš„ç‰©æµå¿«é€’ä¸šï¼Œç°åœ¨ä¹Ÿé€æ¸æ¢å¤äº†ã€‚ä¸€åˆ‡éƒ½åœ¨å‘å¥½çš„æ–¹å‘å‘å±•ï¼Œæœ‰ä»€ä¹ˆç†ç”±ä¸æ‹¥æŠ¤å‘¢ï¼Ÿ</p><p>ç»™å¤§å®¶çœ‹ä¸€ä¸‹åŒ—äº¬åœ°é“æœ€è¿‘15æ—¥å®¢æµé‡å’Œå¾€å¹´æ—¥å‡å®¢æµé‡å›¾ã€‚</p><p><img src="https://static.howardliu.cn/raving/B5237931-A4EE-47B1-8E68-0B1A7399572C.png" alt="åŒ—äº¬åœ°é“æœ€è¿‘15æ—¥å®¢æµé‡"></p><p><img src="https://static.howardliu.cn/raving/375EB016-DA3D-4D34-A161-CCF332189190.png" alt="åŒ—äº¬åœ°é“å¾€å¹´æ—¥å‡å®¢æµé‡"></p><p>æœ€è¿‘15æ—¥å®¢æµé‡æ¯ä¸ªå·¥ä½œæ—¥éƒ½åœ¨é€’å¢ï¼Œåœ¨1æœˆ6æ—¥å·²ç»è¾¾åˆ°769ä¸‡ã€‚å†çœ‹å¹´æ—¥å‡å®¢æµï¼Œ2023å¹´åˆšå¼€å§‹7å¤©ï¼Œæ—¥å‡å®¢æµé‡å·²ç»è¾¾åˆ°å»å¹´å¹³å‡æ°´å¹³ã€‚</p><p>å›æƒ³å‰æ®µæ—¶é—´ï¼Œ2022å¹´11æœˆ25æ—¥å®¢æµé‡è·Œåˆ°äº†108ä¸‡ï¼Œåœ¨æ”¾å¼€ä¹‹åï¼Œé€æ­¥æ¢å¤ç”Ÿæœºã€‚</p><p>ä»ä¸Šå¸è§†è§’çœ‹ï¼Œä¸­å¤®è¸©åˆ¹è½¦æ‰“æ–¹å‘ç›˜çš„ä¸¾æªæ˜¯æ­£ç¡®çš„ã€‚å°±è¿™å‡ å¤©å¤å·¥ç»å†çœ‹ï¼ŒåŒäº‹ä»¬å¸¦ç€å£ç½©ï¼Œå¶å°”å¬åˆ°å‡ å£°å’³å—½ï¼Œä¹Ÿéƒ½æ²¡äººåœ¨æ„ï¼Œæˆ‘ä»¬ä»¥è¾ƒå°çš„æˆæœ¬å®ç°äº†ä¸æ–°å† å…±å­˜ã€‚</p><p>æ”¾ä¸€ä¸ªæ–°åç¤¾çš„<a href="https://h5.xinhuaxmt.com/h5/m1/covid19/index.html" target="_blank" rel="noopener">æ–°å† é˜²ç–«æ‰‹å†Œ</a>ï¼Œè™½ç„¶ç—…æ¯’æ¯’æ€§å¼±äº†ï¼Œä½†æ˜¯é˜³çš„æ—¶å€™è¿˜æ˜¯å¾ˆéš¾å—çš„ï¼Œèƒ½ä¸é‡é˜³å°±ä¸é‡é˜³å§ã€‚</p><p>æœ€åï¼Œå¤šå¹´ä¹‹åï¼Œå½“æˆ‘ä»¬å›å¿†èµ·è¿™ä¸‰å¹´ï¼Œå¯èƒ½æœ‰æ„Ÿæ…¨ã€æœ‰æ€€å¿µã€æœ‰æ‚²ä¼¤ï¼Œæ›´å¤šçš„å¯èƒ½æ˜¯å¯¹å½“ä¸‹ç¾å¥½ç”Ÿæ´»çš„çæƒœã€‚</p><p>ç¥å¤§å®¶èº«ä½“å¥åº·ã€‚</p><p><img src="https://static.howardliu.cn/raving/1FE35223-7DD2-4910-89C7-081ACCF12BE3.jpg" alt="æŠ¤ä½“é‡‘é’Ÿç½©"></p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/what-i-think-of-covid-19/">ç¾Šä¸ç¾Šçš„å…³æˆ‘ä»€ä¹ˆäº‹ï¼Ÿ</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://static.howardliu.cn/raving/b919bbc6863c45cb94c7f5a0ce376f18.jpg&quot; alt=&quot;è¿™æ®µç»å†ç»ˆå°†æˆä¸ºå†å²&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡å…±ï¼š1976å­— é¢„è®¡é˜…è¯»æ—¶é—´ï¼š5åˆ†é’Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚&lt;/p&gt;
&lt;p&gt;ä¸å‡ºæ„å¤–ï¼Œçœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„äººå…«æˆé˜³äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆæ”¾ä¸ªç»Ÿè®¡ï¼Œ12æœˆ23å·çš„æ—¶å€™ï¼Œéƒ¨é—¨å‘èµ·äº†ä¸€æ¬¡æŠ•ç¥¨ï¼Œ480äººå‚ä¸ï¼Œåªæœ‰20%çš„å£®å£«è¿˜æ²¡é˜³ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="é—²èŠ" scheme="https://www.howardliu.cn/categories/%E9%97%B2%E8%81%8A/"/>
    
    
      <category term="é—²èŠ" scheme="https://www.howardliu.cn/tags/%E9%97%B2%E8%81%8A/"/>
    
      <category term="æ–°å† " scheme="https://www.howardliu.cn/tags/%E6%96%B0%E5%86%A0/"/>
    
      <category term="covid-19" scheme="https://www.howardliu.cn/tags/covid-19/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource ä¸ Nacos ç»„åˆå®ç°åŠ¨æ€é…ç½®èƒ½åŠ›</title>
    <link href="https://www.howardliu.cn/springboot-action-messagesource-nacos/"/>
    <id>https://www.howardliu.cn/springboot-action-messagesource-nacos/</id>
    <published>2022-08-14T02:52:50.000Z</published>
    <updated>2022-08-14T02:52:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/jellyfish-g1ec9e22b7_1920.jpeg" alt="SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource ä¸ Nacos ç»„åˆå®ç°åŠ¨æ€é…ç½®èƒ½åŠ›"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>å‰é¢ä»‹ç»äº† Spring çš„ MessageSource ç»„ä»¶çš„ç”¨æ³•ã€æ‰§è¡Œé€»è¾‘å’Œæºç ï¼Œæœ¬æ–‡æˆ‘ä»¬å°†æ ¹æ®å‰é¢çš„çŸ¥è¯†ï¼Œå®ç°è‡ªå·±çš„åŠ¨æ€åˆ·æ–°çš„å›½é™…åŒ–ç»„ä»¶ã€‚</p><a id="more"></a><p>ç°åœ¨å¤§å®¶éƒ½ç”¨çš„æ˜¯å¾®æœåŠ¡ï¼Œä¸ºäº†é«˜å¯ç”¨ï¼Œæ¯ä¸ªæœåŠ¡éƒ¨ç½²æ—¶æœ€å°‘ä¸¤ä¸ªå®ä¾‹ã€‚</p><ul><li>å¦‚æœä½¿ç”¨<code>ResourceBundleMessageSource</code>å®ç°å›½é™…åŒ–ï¼Œæ¯æ¬¡ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œéƒ½éœ€è¦é‡å¯æœåŠ¡ã€‚</li><li>å¦‚æœä½¿ç”¨<code>ReloadableResourceBundleMessageSource</code>ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©å¤šä¸ªæœåŠ¡æŒ‚åœ¨åŒä¸€ä¸ªç£ç›˜æˆ–åŒä¸€ä¸ªå·è¯»å–åŒä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå€ŸåŠ©è¿œç¨‹å·¥å…·ï¼Œä¿®æ”¹æ–‡ä»¶å®ç°åŠ¨æ€é…ç½®å†…å®¹çš„ä¿®æ”¹ã€‚ä½†æ˜¯è¿™å°±æ¶‰åŠåˆ°æ–‡æœ¬ç¼–è¾‘ï¼Œä¸èƒ½å¾ˆå¥½çš„å®ç°å®¡è®¡è®°å½•å’Œæ–‡ä»¶ç®¡æ§ã€‚</li></ul><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦å®ç°ä¸€ä¸ªé€‚ç”¨äºå¾®æœåŠ¡æ¶æ„ã€æ–¹ä¾¿ä¿®æ”¹ã€å…·å¤‡å®¡è®¡åŠŸèƒ½çš„åŠ¨æ€çš„å›½é™…åŒ–é…ç½®ç»„ä»¶ã€‚æœ¬æ–‡é€‰æ‹© Nacos å®ç°ï¼ŒNacos æœ‰é…ç½®ä¸­å¿ƒçš„èƒ½åŠ›ï¼Œé€‚åˆåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨ï¼ŒåŒæ—¶ä¹Ÿå…·å¤‡æ–¹ä¾¿ä¿®æ”¹å’Œå®¡è®¡èƒ½åŠ›ï¼Œåªè¦æˆ‘ä»¬å®ç°ä» Nacos åŠ è½½å›½é™…åŒ–é…ç½®çš„èƒ½åŠ›ï¼Œå°±å¯ä»¥è½»æ¾å®ç°ç›®æ ‡ã€‚</p><h2 id="å‡ ä¸ªå…³é”®ç‚¹"><a href="#å‡ ä¸ªå…³é”®ç‚¹" class="headerlink" title="å‡ ä¸ªå…³é”®ç‚¹"></a>å‡ ä¸ªå…³é”®ç‚¹</h2><p>Spring æä¾›çš„é»˜è®¤å®ç°ä¸­ï¼Œ<code>ReloadableResourceBundleMessageSource</code>å®ç°äº†åŠ¨æ€åˆ·æ–°çš„èƒ½åŠ›ï¼Œåªä¸è¿‡æ˜¯ä»æ–‡ä»¶è¯»å–å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>ReloadableResourceBundleMessageSource</code>çš„é€»è¾‘å®ç°ï¼Œåªæ˜¯å°†å…¶æ”¹ä¸ºä» Nacos è¯»å–å†…å®¹ã€‚</p><p>è¿™ä¸ªå®ç°ï¼Œé€šå¸¸å¯ä»¥æœ‰ä¸¤ç§æ–¹æ¡ˆï¼ˆå‡è®¾æˆ‘ä»¬æ–°å®ç°çš„ç±»å‘½åä¸º<code>NacosBundleMessageSource</code>ï¼‰ï¼š</p><ol><li>ç»§æ‰¿<code>ReloadableResourceBundleMessageSource</code>ï¼šé‡å†™è¯»å–é…ç½®çš„æ–¹æ³•ï¼Œç„¶åé€šè¿‡ Spring æ³¨å…¥æ–°çš„æ–¹æ³•ã€‚è¿™ç§æ–¹å¼æœ‰ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š<ol><li>ä¼˜ç‚¹ 1ï¼šæˆ‘ä»¬å¯ä»¥ä¿æŒä¸<code>ReloadableResourceBundleMessageSource</code>ç›¸ä¼¼çš„ç»“æ„å’Œæ‰§è¡Œé€»è¾‘ï¼Œå½“ Spring è¿›è¡Œå‡çº§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡ç»§æ‰¿è·å–äº†èƒ½åŠ›ï¼›</li><li>ä¼˜ç‚¹ 2ï¼šæˆ‘ä»¬åªéœ€è¦è¦†ç›–å‡ ä¸ªå…³é”®æ–¹æ³•ï¼Œéœ€è¦é‡å†™çš„æ–¹æ³•æ¯”è¾ƒå°‘ï¼›</li><li>ç¼ºç‚¹ 1ï¼šå½“æˆ‘ä»¬æœŸæœ›åœ¨ç³»ç»Ÿä¸­å¼•å…¥å¤šç§ç±»å‹çš„ MessageSource ç»„ä»¶æ—¶ï¼Œå°±ä¸èƒ½ç®€å•çš„é€šè¿‡ç±»å‹åŠ è½½äº†ã€‚æ¯”å¦‚<code>applicationContext.getBean(ReloadableResourceBundleMessageSource.class)</code>ä¼šæ‰¾åˆ°<code>ReloadableResourceBundleMessageSource</code>å’Œ<code>NacosBundleMessageSource</code>ä¸¤ä¸ª Beanï¼ŒSpring å®¹å™¨å°±ä¸çŸ¥é“è¯¥è¿”å›å“ªä¸ªäº†ï¼›</li><li>ç¼ºç‚¹ 2ï¼šè™½ç„¶ç»§æ‰¿èƒ½å¤Ÿå°‘å†™ä»£ç ï¼Œä½†æ˜¯ä¸€æ—¦ Spring ä¿®æ”¹äº†æ‰§è¡Œé€»è¾‘ï¼Œæˆ‘ä»¬çš„<code>NacosBundleMessageSource</code>å°±å¯èƒ½éœ€è¦é‡å†™ã€‚</li></ol></li><li>æ¨¡ä»¿<code>ReloadableResourceBundleMessageSource</code>ï¼šå®Œå…¨å®ç°è‡ªå·±çš„ä¸€ä¸ªåŠ¨æ€åŠ è½½ç±»ã€‚ä¸ç¬¬ä¸€ç§çš„ä¼˜ç¼ºç‚¹æ­£å¥½ç›¸åï¼š<ol><li>ä¼˜ç‚¹ 1ï¼šå®Œå…¨ä¸åŒçš„ç±»ï¼ŒBean å¯¹åº”çš„ class ç±»å‹ä¸åŒï¼Œ<code>applicationContext.getBean</code>å¯ä»¥é€šè¿‡ class ç±»å‹è·å–ï¼›</li><li>ä¼˜ç‚¹ 2ï¼šä¸<code>ReloadableResourceBundleMessageSource</code>çš„ç±»å®šä¹‰æ²¡æœ‰å…³ç³»ï¼Œé™¤é Spring ä¿®æ”¹åº•å±‚é€»è¾‘ï¼Œå¦åˆ™ä¸ä¼šå› ä¸º<code>ReloadableResourceBundleMessageSource</code>çš„å˜åŠ¨å‡ºç°ä¸å…¼å®¹çš„æƒ…å†µï¼›</li><li>ç¼ºç‚¹ 1ï¼šå½“ Spring å¯¹<code>ReloadableResourceBundleMessageSource</code>è¿›è¡Œå‡çº§ï¼Œæå‡ºæ›´åŠ ä¼˜åŒ–çš„å†™æ³•ï¼Œæˆ‘ä»¬å°±éœ€è¦é‡å†™<code>NacosBundleMessageSource</code>äº†ï¼›</li><li>ç¼ºç‚¹ 2ï¼šæ—¢ç„¶æ˜¯ä»¿å†™ï¼Œå¾ˆå¤šæ–¹æ³•éƒ½æ˜¯ä¸<code>ReloadableResourceBundleMessageSource</code>å®Œå…¨ç›¸åŒçš„é‡å¤ä»£ç ã€‚</li></ol></li></ol><p>è€ƒè™‘åˆ°ä¸¤ç§æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ï¼Œç»“åˆä¸šåŠ¡ä¸­çš„é€»è¾‘ï¼Œæœ€ç»ˆé€‰æ‹©æ–¹æ¡ˆäºŒã€‚</p><h2 id="æ–‡ä»¶å"><a href="#æ–‡ä»¶å" class="headerlink" title="æ–‡ä»¶å"></a>æ–‡ä»¶å</h2><p>æˆ‘ä»¬è¦å®ç°çš„å›½é™…åŒ–ç»„ä»¶ï¼Œåœ¨ Spring çš„å®ç°ä¸­ï¼Œä½¿ç”¨çš„æ˜¯<code>Locale</code>è¡¨ç¤ºæŒ‡å®šçš„åŒºåŸŸï¼Œåœ¨è¿™ä¸ªç±»ä¸­ï¼Œå®šä¹‰äº†ä¸‰ä¸ªä¸åŒçš„ç»´åº¦<code>language</code>ã€<code>country</code>ã€<code>variant</code>ï¼Œç¿»è¯‘è¿‡æ¥æ˜¯<code>è¯­è¨€</code>ã€<code>å›½å®¶</code>ã€<code>å˜ç§</code>ï¼Œç»“åˆ<code>BaseLocale</code>çš„å®šä¹‰ï¼Œå¯ä»¥å°†<code>country</code>çœ‹åšæ˜¯è¯­è¨€å¤§ç±»ã€‚</p><p>æ ¹æ®å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬çš„å›½é™…åŒ–é…ç½®æ–‡ä»¶å®šä¹‰æ ¼å¼æ˜¯æ ¹æ®<code>Locale</code>æ ¼å¼å®šä¹‰çš„ã€‚æ¯”å¦‚ï¼Œbasename æ˜¯ messagesï¼ŒLocale æ˜¯ de_AT_oo çš„è¯ï¼Œå¯¹åº”çš„é…ç½®æ–‡ä»¶å¯ä»¥æ˜¯â€œmessages_de_AT_OOâ€ã€â€œmessages_de_ATâ€ã€â€œmessages_deâ€ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨åˆ°é€’å½’çš„æ–¹å¼è·å–æ–‡ä»¶åï¼š</p><pre><code class="java">protected List&lt;String&gt; calculateFilenamesForLocale(String basename, Locale locale) {    List&lt;String&gt; result = new ArrayList&lt;&gt;(3);    String language = locale.getLanguage();    String country = locale.getCountry();    String variant = locale.getVariant();    StringBuilder temp = new StringBuilder(basename);    temp.append(&#39;_&#39;);    if (language.length() &gt; 0) {        temp.append(language);        result.add(0, temp.toString());    }    temp.append(&#39;_&#39;);    if (country.length() &gt; 0) {        temp.append(country);        result.add(0, temp.toString());    }    if (variant.length() &gt; 0 &amp;&amp; (language.length() &gt; 0 || country.length() &gt; 0)) {        temp.append(&#39;_&#39;).append(variant);        result.add(0, temp.toString());    }    return result;}</code></pre><h2 id="åŠ è½½æ–¹å¼"><a href="#åŠ è½½æ–¹å¼" class="headerlink" title="åŠ è½½æ–¹å¼"></a>åŠ è½½æ–¹å¼</h2><p>æ—¢ç„¶æ˜¯ä» Nacos è¯»å–é…ç½®ï¼Œé‚£é…ç½®æ–‡ä»¶çš„å†…å®¹å°±éœ€è¦é€šè¿‡ Nacos è·å–ã€‚è¿™é‡Œä½¿ç”¨äº†<code>NacosConfigManager</code>è·å–ï¼š</p><pre><code class="java">protected Properties loadProperties(String filename) throws IOException, NacosException {    final Properties props = newProperties();    final String dataId = filename + NacosConstants.PROPERTIES_SUFFIX;    logger.info(&quot;Loading properties for &quot; + dataId);    final String config = nacosConfigManager.getConfigService().getConfig(dataId, nacosGroup, 5000);    if (StringUtils.hasText(config)) {        logger.info(&quot;No properties found for &quot; + dataId);        throw new NoSuchFileException(dataId);    }    try (Reader reader = new StringReader(config)) {        this.propertiesPersister.load(props, reader);        logger.info(&quot;Loaded properties for &quot; + dataId);    }    return props;}</code></pre><p>æ–¹æ³•ä¼ å…¥çš„<code>filename</code>å°±æ˜¯ä»ä¸Šä¸€èŠ‚ä¸­è·å–çš„æ–‡ä»¶åã€‚å½“ç„¶ï¼Œæ–‡ä»¶åæ˜¯æˆ‘ä»¬è®¡ç®—å‡ºæ¥çš„ï¼Œå¯èƒ½ä¸å­˜åœ¨ï¼Œæ­¤å¤„ç›´æ¥æŠ›å‡º<code>NoSuchFileException</code>ï¼Œç”±ä¸Šå±‚é€»è¾‘æ•æ‰å¤„ç†ï¼š</p><pre><code class="java">protected PropertiesHolder refreshProperties(String filename, @Nullable PropertiesHolder propHolder) {    long refreshTimestamp = (getCacheMillis() &lt; 0 ? -1 : System.currentTimeMillis());    try {        Properties props = loadProperties(filename);        propHolder = new PropertiesHolder(props, -1);    } catch (NacosException ex) {        if (logger.isWarnEnabled()) {            logger.warn(&quot;Could not get properties form nacos &quot;, ex);        }        // Empty holder representing &quot;not valid&quot;.        propHolder = new PropertiesHolder();    } catch (IOException ex) {        if (logger.isInfoEnabled()) {            logger.info(&quot;Could not get properties form nacos, the message is &quot; + ex.getMessage());        }        // Empty holder representing &quot;not valid&quot;.        propHolder = new PropertiesHolder();    }    propHolder.setRefreshTimestamp(refreshTimestamp);    this.cachedProperties.put(filename, propHolder);    logger.info(&quot;Refreshed properties for &quot; + filename);    return propHolder;}</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä» Nacos ä¸­è¯»å–é…ç½®é€»è¾‘çš„ä¸Šå±‚ä¼šæ•æ‰<code>Exception</code>ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç©ºçš„é…ç½®ç®¡ç†å™¨ã€‚æ­¤å¤„ä¼šæœ‰ä¸¤ä¸ªå¼‚å¸¸ï¼š</p><ul><li><code>NacosException</code>ï¼šè¯»å– Nacos å¤±è´¥æŠ›å‡ºçš„å¼‚å¸¸ï¼ŒåŒ…æ‹¬ Nacos é“¾æ¥ä¸æ­£ç¡®æˆ–è€…æ˜¯è¯»å–å¤±è´¥ç­‰ï¼›</li><li><code>IOException</code>ï¼šæ²¡æœ‰æŒ‡å®šæ–‡ä»¶åçš„é…ç½®æ—¶ä¼šæŠ›å‡º IOExceptionã€‚</li></ul><h2 id="åŠ¨æ€åˆ·æ–°"><a href="#åŠ¨æ€åˆ·æ–°" class="headerlink" title="åŠ¨æ€åˆ·æ–°"></a>åŠ¨æ€åˆ·æ–°</h2><p>å‰ä¸€èŠ‚è®²äº†åŠ è½½ Nacos é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œæœ¬èŠ‚è¯´ä¸€ä¸‹æ€ä¹ˆå®ç° Nacos é…ç½®æ–‡ä»¶çš„ç›‘å¬ï¼ŒåŠ¨æ€åˆ·æ–°é…ç½®å†…å®¹ã€‚</p><p>æˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹å®ç° Nacos ç›‘å¬çš„å‡ ä¸ªç±»ï¼š</p><ul><li>NacosRefreshHistoryï¼šnacos é…ç½®æ–‡ä»¶åˆ·æ–°çš„å†å²è®°å½•ï¼Œä¼šä¿å­˜ Nacos é…ç½®æ–‡ä»¶çš„åˆ·æ–°å†å²ï¼Œæœ€å¤šå­˜å‚¨ 20 ä¸ªï¼›</li><li>ConfigServiceï¼šä¸€èˆ¬ä½¿ç”¨çš„æ—¶å€™æ˜¯ NacosConfigService ç±»ï¼Œè¿™ä¸ªç±»æ˜¯ä½¿ç”¨<code>NacosConfigManager#getConfigService</code>é€šè¿‡åå°„åˆ›å»ºçš„ï¼Œç”¨äºå­˜å‚¨ Nacos ç›‘å¬å™¨ï¼Œå®ç°ç›‘å¬é€»è¾‘ï¼›</li><li>Listenerï¼šè¿™ä¸ªå°±æ˜¯å…·ä½“çš„ç›‘å¬å™¨äº†ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨çš„æ˜¯<code>AbstractSharedListener</code>çš„åŒ¿åå­ç±»ï¼Œå®ç°åŠ¨æ€åˆ·æ–°çš„é€»è¾‘å°±åœ¨è¿™ä¸ªç±»é‡Œã€‚</li></ul><p>é¦–å…ˆï¼Œæˆ‘ä»¬å½“å‰ç»„ä»¶æ˜¯ MessageSourceï¼Œç”¨äºå®ç°å›½é™…åŒ–çš„ç»„ä»¶ã€‚è¿™ä¸ªç»„ä»¶æ˜¯åœ¨æ•´ä¸ªåº”ç”¨å°±ç»ªåå†åŠ è½½å°±è¡Œï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ç›‘å¬ Spring çš„<code>ApplicationReadyEvent</code>äº‹ä»¶å³å¯ã€‚</p><pre><code class="java">@Overridepublic void onApplicationEvent(ApplicationReadyEvent event) {    // many Spring context    if (this.ready.compareAndSet(false, true)) {        for (Locale defaultLocale : this.nacosBundleMessageSource.defaultLocales()) {            this.nacosBundleMessageSource.getMergedProperties(defaultLocale);        }        this.registerNacosListenersForApplications();    }}</code></pre><p>ç„¶åæ˜¯æˆ‘ä»¬éœ€è¦å¯¹æ‰€æœ‰å¯èƒ½çš„é…ç½®æ–‡ä»¶è¿›è¡Œç›‘å¬ï¼Œå°±éœ€è¦ç”¨åˆ°å‰æ–‡çš„<code>calculateFilenamesForLocale</code>æ–¹æ³•ï¼Œè®¡ç®—æ‰€æœ‰å¯èƒ½å‡ºç°çš„åå­—ã€‚</p><pre><code class="java">private void registerNacosListenersForApplications() {    if (!isRefreshEnabled()) {        return;    }    this.nacosBundleMessageSource.getBasenameSet().stream()            .map(basename -&gt; this.nacosBundleMessageSource.defaultLocales().stream()                    .map(locale -&gt; this.nacosBundleMessageSource.calculateAllFilenames(basename, locale))                    .flatMap(List::stream)                    .collect(Collectors.toList())            )            .flatMap(List::stream)            .forEach(x -&gt; registerNacosListener(nacosBundleMessageSource.getNacosGroup(), x + NacosConstants.PROPERTIES_SUFFIX));}</code></pre><p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦å‘ Nacos çš„è¿è¡Œç®¡ç†å™¨ä¸­æ³¨å†Œæ–‡ä»¶ç›‘å¬ï¼Œå®ç°åŠ¨æ€åˆ·æ–°çš„èƒ½åŠ›ã€‚</p><pre><code class="java">private void registerNacosListener(final String groupKey, final String dataKey) {    final String key = NacosPropertySourceRepository.getMapKey(dataKey, groupKey);    final Listener listener = listenerMap.computeIfAbsent(key, lst -&gt; new AbstractSharedListener() {        @Override        public void innerReceive(String dataId, String group, String configInfo) {            refreshCountIncrement();            nacosRefreshHistory.addRefreshRecord(dataId, group, configInfo);            try {                nacosBundleMessageSource.forceRefresh(dataId, configInfo);                if (log.isDebugEnabled()) {                    log.debug(&quot;Refresh Nacos config group={},dataId={},configInfo={}&quot;, group, dataId, configInfo);                }            } catch (IOException e) {                log.warn(&quot;Nacos refresh failed, dataId: {}, group: {}, configInfo: {}&quot;,                        dataId, group, configInfo, e);            }        }    });    try {        configService.addListener(dataKey, groupKey, listener);    } catch (NacosException e) {        log.warn(&quot;register fail for nacos listener ,dataId=[{}],group=[{}]&quot;, dataKey, groupKey, e);    }}</code></pre><p>è‡³æ­¤ï¼Œæˆ‘ä»¬è·å–äº†å›½é™…åŒ–ç»„ä»¶ MessageSource ä¸ Nacos ç»„åˆå®ç°åŠ¨æ€é…ç½®èƒ½åŠ›ã€‚æœ¬æ–‡ä¸­çš„å®ä¾‹å·²ç»ä¼ åˆ° GitHubï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤<code>spring</code>è·å–æºç ã€‚</p><h2 id="å‘æ•£ä¸€ä¸‹"><a href="#å‘æ•£ä¸€ä¸‹" class="headerlink" title="å‘æ•£ä¸€ä¸‹"></a>å‘æ•£ä¸€ä¸‹</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†é‡å¤´æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬æœ€åˆæƒ³è¦å®ç°ä¸€ä¸ªé€‚ç”¨äºå¾®æœåŠ¡æ¶æ„ã€æ–¹ä¾¿ä¿®æ”¹ã€å…·å¤‡å®¡è®¡åŠŸèƒ½çš„åŠ¨æ€çš„å›½é™…åŒ–é…ç½®ç»„ä»¶ã€‚é€‰æ‹© Nacos ä½œä¸ºä¾‹å­ï¼Œæ˜¯å› ä¸º Nacos æœ¬èº«å®ç°äº†åŠ¨æ€ç›‘å¬çš„èƒ½åŠ›ï¼Œå¯ä»¥å¿«é€Ÿå¤åˆ»<code>ReloadableResourceBundleMessageSource</code>çš„èƒ½åŠ›ã€‚é‚£ Nacos å…·å¤‡ä»€ä¹ˆèƒ½åŠ›å‘¢ï¼Ÿ</p><ol><li>ä¸­å¿ƒåŒ–å­˜å‚¨ï¼šå› ä¸ºæˆ‘ä»¬æƒ³åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨ï¼Œå°±ä¸èƒ½é‡‡ç”¨ä¸ç‹¬ç«‹æœåŠ¡è€¦åˆçš„æ–¹å¼ï¼Œéœ€è¦æ‰€æœ‰æœåŠ¡å¯ä»¥è¯»å–çš„æ–¹å¼ã€‚æ¯”å¦‚æ•°æ®åº“ï¼ˆåŒ…æ‹¬å…³ç³»å‹æ•°æ®åº“ã€éå…³ç³»å‹æ•°æ®åº“ç­‰ï¼‰ã€åˆ†å¸ƒå¼ç¼“å­˜ã€è¿œç¨‹ç£ç›˜ï¼ˆæˆ–è€… Docker çš„å·ï¼‰ç­‰ï¼›</li><li>å¯ç›‘å¬ï¼šä»»ä½•é…ç½®çš„ä¿®æ”¹èƒ½å¤Ÿè¢«æœåŠ¡æ„ŸçŸ¥ï¼Œæƒ³è¦åšåˆ°è¿™ä¸ªï¼Œå°±æ˜¯åœ¨é…ç½®å‘ç”Ÿä¿®æ”¹æ—¶ï¼Œå‘é€ä¸€ä¸ªä¿®æ”¹æ—¶é—´ï¼Œé€šçŸ¥ç›‘å¬æœåŠ¡é…ç½®è¢«ä¿®æ”¹ã€‚å¯ä»¥é‡‡ç”¨è¢«åŠ¨å’Œä¸»åŠ¨ä¸¤ç§æ–¹å¼ï¼š<ol><li>è¢«åŠ¨æ–¹å¼ï¼šè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œåªè¦å°†ç»„ä»¶ä¸­çš„ç¼“å­˜é€»è¾‘åˆ é™¤å°±å¯ä»¥äº†ï¼Œæ¯æ¬¡æŸ¥è¯¢é…ç½®éƒ½ç›´æ¥å­˜å‚¨å™¨ä¸­è¯»å–ï¼Œä½†æ˜¯è¿™åˆä¸æ€§èƒ½ç›¸æ‚–ï¼Œä¸€èˆ¬ä¸é‡‡ç”¨è¿™ä¸ªæ–¹æ¡ˆï¼›</li><li>ä¸»åŠ¨æ–¹å¼ï¼šé€šè¿‡å‘é€äº‹ä»¶æˆ–è€…æ¶ˆæ¯çš„æ–¹å¼ï¼Œæ¯”å¦‚é‡‡ç”¨ CQRS æ¨¡å¼ï¼Œå‘ç”Ÿä¿®æ”¹æ—¶ï¼Œå‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œå„ä¸ªå¾®æœåŠ¡ç›‘å¬è¿™ä¸ªæ¶ˆæ¯ï¼Œé‡æ–°åŠ è½½é…ç½®ï¼›</li></ol></li><li>å¯å®¡è®¡ï¼šè¿™ä¸ªèƒ½åŠ›ç®€å•è¯´å°±æ˜¯è¦è®°å½•æ¯æ¬¡ä¿®æ”¹çš„æ—¶é—´ã€äººç‰©ã€åŠ¨ä½œç­‰ä¿¡æ¯ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯å¸¸ç”¨åŠŸèƒ½ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</li></ol><p>åªè¦å…·å¤‡ä¸Šé¢ä¸‰ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å„ç§ç»„åˆå®ç°ï¼Œæ¯”å¦‚ï¼š</p><ol><li>å¯æŒ‚åœ¨ç£ç›˜</li><li>Git+Hook</li><li>MySQL+Redis+MQ</li><li>â€¦â€¦</li></ol><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡ä»å®è·µè§’åº¦å‡ºå‘ï¼Œå®ç°äº†ä¸€ä¸ªé€‚ç”¨äºå¾®æœåŠ¡æ¶æ„ã€æ–¹ä¾¿ä¿®æ”¹ã€å…·å¤‡å®¡è®¡åŠŸèƒ½çš„åŠ¨æ€çš„å›½é™…åŒ–é…ç½®ç»„ä»¶ã€‚æ–‡ä¸­çš„å®ä¾‹å·²ç»ä¼ åˆ° GitHubï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤<code>spring</code>è·å–æºç ã€‚å¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šé‡‡ç”¨å“ªç§æ–¹æ¡ˆå‘¢ï¼Ÿæ¬¢è¿ä¸€èµ·è®¨è®ºã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/zUrx7duy0-OY1oYn8FeKOw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¸€æ‹›å®ç°ç»“æœçš„ä¼˜é›…å“åº”</a></li><li><a href="https://mp.weixin.qq.com/s/H599Wri3VbjTuLBnf7pD3w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå¦‚ä½•ä¼˜é›…åœ°å¤„ç†å¼‚å¸¸</a></li><li><a href="https://mp.weixin.qq.com/s/fcVE-cE7tDuWKoNNX9rsoQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šé€šè¿‡ BeanPostProcessor åŠ¨æ€æ³¨å…¥ ID ç”Ÿæˆå™¨</a></li><li><a href="https://mp.weixin.qq.com/s/xQQbl6VNF2eCgmQPrMyc4w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šè‡ªå®šä¹‰ Filter ä¼˜é›…è·å–è¯·æ±‚å‚æ•°å’Œå“åº”ç»“æœ</a></li><li><a href="https://mp.weixin.qq.com/s/coKjuefWMmCA4bSkRDIRVA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…åœ°ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/pet_rA7-O1JD3QfQ1fqxAQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…åœ°ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/2OXArNObVejXLvMOmE3oqw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…åœ°ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/hdioIIwPA2lv2khfRmKhOQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…åœ°ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/vbccn0kTdyOlmznDr3RItw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šJUnit5+MockMvc+Mockito åšå¥½å•å…ƒæµ‹è¯•</a></li><li><a href="https://mp.weixin.qq.com/s/s8PQXLT8Ni3dLqsOgf3syA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåŠ è½½å’Œè¯»å–èµ„æºæ–‡ä»¶å†…å®¹</a></li><li><a href="https://mp.weixin.qq.com/s/dGPhS5vdbnFdiTxkpr2mLg" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</a></li><li><a href="https://mp.weixin.qq.com/s/FzX-nVMl96RwI6ITULhQcQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶MessageSourceçš„æ‰§è¡Œé€»è¾‘ä¸æºç </a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/springboot-action-messagesource-nacos/">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource ä¸ Nacos ç»„åˆå®ç°åŠ¨æ€é…ç½®èƒ½åŠ›</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource ä¸ Nacos ç»„åˆå®ç°åŠ¨æ€é…ç½®èƒ½åŠ›</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      å‰é¢ä»‹ç»äº† Spring çš„ MessageSource ç»„ä»¶çš„ç”¨æ³•ã€æ‰§è¡Œé€»è¾‘å’Œæºç ï¼Œæœ¬æ–‡æˆ‘ä»¬å°†æ ¹æ®å‰é¢çš„çŸ¥è¯†ï¼Œå®ç°è‡ªå·±çš„åŠ¨æ€åˆ·æ–°çš„å›½é™…åŒ–ç»„ä»¶ã€‚
    
    </summary>
    
    
      <category term="spring" scheme="https://www.howardliu.cn/categories/spring/"/>
    
    
      <category term="SpringBoot å®æˆ˜" scheme="https://www.howardliu.cn/tags/SpringBoot-%E5%AE%9E%E6%88%98/"/>
    
      <category term="SpringBoot" scheme="https://www.howardliu.cn/tags/SpringBoot/"/>
    
      <category term="spring" scheme="https://www.howardliu.cn/tags/spring/"/>
    
      <category term="SpringBoot æ‰‹å†Œ" scheme="https://www.howardliu.cn/tags/SpringBoot-%E6%89%8B%E5%86%8C/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource çš„æ‰§è¡Œé€»è¾‘ä¸æºç </title>
    <link href="https://www.howardliu.cn/springboot-action-messagesource-principle/"/>
    <id>https://www.howardliu.cn/springboot-action-messagesource-principle/</id>
    <published>2022-08-07T13:04:19.000Z</published>
    <updated>2022-08-07T13:04:19.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/squirrel-7025721_1920.jpeg" alt="SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource çš„æ‰§è¡Œé€»è¾‘ä¸æºç "></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>å‰æ–‡ä»‹ç»äº† SpringBoot ä¸­çš„å›½é™…åŒ–ç»„ä»¶<code>MessageSource</code>çš„ä½¿ç”¨ï¼Œæœ¬ç« æˆ‘ä»¬ä¸€èµ·çœ‹ä¸‹<code>ResourceBundleMessageSource</code>å’Œ<code>ReloadableResourceBundleMessageSource</code>çš„æ‰§è¡Œé€»è¾‘ã€‚SpringBoot çš„ MessageSource ç»„ä»¶æœ‰å¾ˆå¤šæŠ½è±¡åŒ–ï¼Œæºç çœ‹èµ·æ¥æ¯”è¾ƒåˆ†æ•£ï¼Œæ‰€ä»¥æœ¬æ–‡ä¼šé€šè¿‡æµç¨‹å›¾çš„æ–¹å¼è¿›è¡Œè®²è§£ã€‚</p><a id="more"></a><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p>é…ç½®æ–‡ä»¶æ˜¯åŸºç¡€ï¼Œä¼šå½±å“æ‰§è¡Œé€»è¾‘ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é…ç½®é¡¹ï¼š</p><ul><li>basenameï¼šåŠ è½½èµ„æºçš„æ–‡ä»¶åï¼Œå¯ä»¥å¤šä¸ªèµ„æºåç§°ï¼Œé€šè¿‡é€—å·éš”å¼€ï¼Œé»˜è®¤æ˜¯â€œmessagesâ€ï¼›</li><li>encodingï¼šåŠ è½½æ–‡ä»¶çš„å­—ç¬¦é›†ï¼Œé»˜è®¤æ˜¯ UTF-8ï¼Œè¿™ä¸ªä¸å¤šè¯´ï¼›</li><li>cacheDurationï¼šæ–‡ä»¶åŠ è½½åˆ°å†…å­˜åç¼“å­˜æ—¶é—´ï¼Œé»˜è®¤å•ä½æ˜¯ç§’ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåªä¼šåŠ è½½ä¸€æ¬¡ç¼“å­˜ï¼Œä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™ä¸ªå‚æ•°åœ¨ ResourceBundleMessageSourceã€ReloadableResourceBundleMessageSource ç¨å¾®æœ‰äº›å·®å¼‚ï¼Œä¼šå…·ä½“è¯´ä¸‹ã€‚</li><li>fallbackToSystemLocaleï¼šè¿™æ˜¯ä¸€ä¸ªå…œåº•å¼€å…³ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœåœ¨æŒ‡å®šè¯­è¨€ä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„å€¼ï¼Œä¼šä» basename å‚æ•°ï¼ˆé»˜è®¤æ˜¯ messages.propertiesï¼‰ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœå†æ‰¾ä¸åˆ°å¯èƒ½ç›´æ¥è¿”å›æˆ–æŠ›é”™ã€‚è¯¥å‚æ•°è®¾ç½®ä¸º true çš„è¯ï¼Œè¿˜ä¼šå†èµ°ä¸€æ­¥å…œåº•é€»è¾‘ï¼Œä»å½“å‰ç³»ç»Ÿè¯­è¨€å¯¹åº”é…ç½®æ–‡ä»¶ä¸­æŸ¥æ‰¾ã€‚è¯¥å‚æ•°é»˜è®¤æ˜¯ trueï¼›</li><li>alwaysUseMessageFormatï¼šMessageSource ç»„ä»¶é€šè¿‡<code>MessageFormat.format</code>å‡½æ•°å¯¹å›½é™…åŒ–ä¿¡æ¯æ ¼å¼åŒ–ï¼Œå¦‚æœæ³¨å…¥å‚æ•°ï¼Œè¾“å‡ºç»“æœæ˜¯ç»è¿‡æ ¼å¼åŒ–çš„ã€‚æ¯”å¦‚<code>MessageFormat.format(&quot;Hello, {0}!&quot;, &quot;Kanshan&quot;)</code>è¾“å‡ºç»“æœæ˜¯â€œHello, Kanshan!â€ã€‚è¯¥å‚æ•°æ§åˆ¶çš„æ˜¯ï¼Œå½“è¾“å…¥å‚æ•°ä¸ºç©ºæ—¶ï¼Œæ˜¯å¦è¿˜æ˜¯ä½¿ç”¨<code>MessageFormat.format</code>å‡½æ•°å¯¹ç»“æœè¿›è¡Œæ ¼å¼åŒ–ï¼Œé»˜è®¤æ˜¯ falseï¼›</li><li>useCodeAsDefaultMessageï¼šå½“æ²¡æœ‰æ‰¾åˆ°å¯¹åº”ä¿¡æ¯çš„æ—¶å€™ï¼Œæ˜¯å¦è¿”å› codeã€‚ä¹Ÿå°±æ˜¯å½“æ‰¾äº†æ‰€æœ‰èƒ½æ‰¾çš„é…ç½®æ–‡ä»¶åï¼Œè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ä¿¡æ¯ï¼Œæ˜¯å¦ç›´æ¥è¿”å› code å€¼ã€‚é»˜è®¤æ˜¯ falseï¼Œå³ä¸è¿”å› codeï¼ŒæŠ›å‡º<code>NoSuchMessageException</code>å¼‚å¸¸ã€‚</li></ul><p>è¿™äº›é…ç½®å‚æ•°éƒ½æœ‰å„è‡ªçš„é»˜è®¤å€¼ã€‚å¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„éœ€æ±‚ï¼Œå¯ä»¥ç›´æ¥ç›´æ¥æŒ‰ç…§é»˜è®¤çº¦å®šä½¿ç”¨ã€‚</p><h2 id="æ‰§è¡Œé€»è¾‘"><a href="#æ‰§è¡Œé€»è¾‘" class="headerlink" title="æ‰§è¡Œé€»è¾‘"></a>æ‰§è¡Œé€»è¾‘</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹æµç¨‹å›¾ï¼Œä¸‹é¢çš„æµç¨‹å›¾ç»¿è‰²éƒ¨åˆ†æ˜¯ cacheDuration æ²¡æœ‰é…ç½®çš„æƒ…å†µã€‚å¯¹äº ResourceBundleMessageSource æ˜¯åªåŠ è½½ä¸€æ¬¡é…ç½®æ–‡ä»¶ï¼ŒReloadableResourceBundleMessageSource ä¼šæ ¹æ®æ–‡ä»¶ä¿®æ”¹æ—¶é—´åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°åŠ è½½ã€‚</p><h3 id="ResourceBundleMessageSource-çš„æµç¨‹å›¾"><a href="#ResourceBundleMessageSource-çš„æµç¨‹å›¾" class="headerlink" title="ResourceBundleMessageSource çš„æµç¨‹å›¾"></a>ResourceBundleMessageSource çš„æµç¨‹å›¾</h3><p><img src="https://static.howardliu.cn/spring/springboot-messagesource-ResourceBundleMessageSource.png" alt="ResourceBundleMessageSource"></p><h3 id="ReloadableResourceBundleMessageSource-çš„æµç¨‹å›¾"><a href="#ReloadableResourceBundleMessageSource-çš„æµç¨‹å›¾" class="headerlink" title="ReloadableResourceBundleMessageSource çš„æµç¨‹å›¾"></a>ReloadableResourceBundleMessageSource çš„æµç¨‹å›¾</h3><p><img src="https://static.howardliu.cn/spring/springboot-messagesource-ReloadableResourceBundleMessageSource.png" alt="ReloadableResourceBundleMessageSource"></p><h3 id="AbstractMessageSource-çš„å‡ ä¸ª-getMessage-æ–¹æ³•æºç "><a href="#AbstractMessageSource-çš„å‡ ä¸ª-getMessage-æ–¹æ³•æºç " class="headerlink" title="AbstractMessageSource çš„å‡ ä¸ª getMessage æ–¹æ³•æºç "></a>AbstractMessageSource çš„å‡ ä¸ª getMessage æ–¹æ³•æºç </h3><pre><code class="java">@Overridepublic final String getMessage(String code, @Nullable Object[] args, @Nullable String defaultMessage, Locale locale) {    String msg = getMessageInternal(code, args, locale);    if (msg != null) {        return msg;    }    if (defaultMessage == null) {        return getDefaultMessage(code);    }    return renderDefaultMessage(defaultMessage, args, locale);}@Overridepublic final String getMessage(String code, @Nullable Object[] args, Locale locale) throws NoSuchMessageException {    String msg = getMessageInternal(code, args, locale);    if (msg != null) {        return msg;    }    String fallback = getDefaultMessage(code);    if (fallback != null) {        return fallback;    }    throw new NoSuchMessageException(code, locale);}@Overridepublic final String getMessage(MessageSourceResolvable resolvable, Locale locale) throws NoSuchMessageException {    String[] codes = resolvable.getCodes();    if (codes != null) {        for (String code : codes) {            String message = getMessageInternal(code, resolvable.getArguments(), locale);            if (message != null) {                return message;            }        }    }    String defaultMessage = getDefaultMessage(resolvable, locale);    if (defaultMessage != null) {        return defaultMessage;    }    throw new NoSuchMessageException(!ObjectUtils.isEmpty(codes) ? codes[codes.length - 1] : &quot;&quot;, locale);}</code></pre><p>ç¬¬ä¸€ä¸ª<code>getMessage</code>æ–¹æ³•ï¼Œæ˜¯å¯ä»¥ä¼ å…¥é»˜è®¤å€¼<code>defaultMessage</code>çš„ï¼Œä¹Ÿå°±æ˜¯å½“æ‰€æœ‰ basename çš„é…ç½®æ–‡ä»¶ä¸­ä¸å­˜åœ¨ code æŒ‡å®šçš„å€¼ï¼Œå°±ä¼šä½¿ç”¨<code>defaultMessage</code>å€¼è¿›è¡Œæ ¼å¼åŒ–è¿”å›ã€‚</p><p>ç¬¬äºŒä¸ª<code>getMessage</code>æ–¹æ³•ï¼Œæ˜¯é€šè¿‡åˆ¤æ–­<code>useCodeAsDefaultMessage</code>é…ç½®ï¼Œå¦‚æœè®¾ç½®äº† trueï¼Œåœ¨æ‰€æœ‰ basename çš„é…ç½®æ–‡ä»¶ä¸­ä¸å­˜åœ¨ code æŒ‡å®šçš„å€¼çš„æƒ…å†µä¸‹ï¼Œä¼šè¿”å› code ä½œä¸ºè¿”å›å€¼ã€‚ä½†æ˜¯å½“è®¾ç½®ä¸º false æ—¶ï¼Œcode ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œä¼šæŠ›å‡º<code>NoSuchMessageException</code>å¼‚å¸¸ã€‚</p><p>ç¬¬ä¸‰ä¸ª<code>getMessage</code>æ–¹æ³•ï¼Œä¼ å…¥çš„æ˜¯<code>MessageSourceResolvable</code>æ¥å£å¯¹è±¡ï¼ŒæŸ¥æ‰¾çš„ code æ›´åŠ å¤šç§å¤šæ ·ã€‚ä¸è¿‡å¦‚æœæœ€åè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œä¼šæŠ›å‡º<code>NoSuchMessageException</code>å¼‚å¸¸ã€‚</p><h2 id="ç¼“å­˜çš„ä½¿ç”¨"><a href="#ç¼“å­˜çš„ä½¿ç”¨" class="headerlink" title="ç¼“å­˜çš„ä½¿ç”¨"></a>ç¼“å­˜çš„ä½¿ç”¨</h2><p>æˆ‘ä»¬çœ‹æºç ä¸ä»…ä»…æ˜¯ä¸ºäº†çœ‹åŠŸèƒ½ç»„ä»¶çš„å®ç°ï¼Œè¿˜æ˜¯å­¦ä¹ æ›´åŠ ä¼˜ç§€çš„ç¼–ç¨‹æ–¹å¼ã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µå†…å­˜ç¼“å­˜çš„ä½¿ç”¨ï¼ŒSpring æºç ä¸­å¾ˆå¤šåœ°æ–¹éƒ½ç”¨åˆ°äº†è¿™ç§å†…å­˜ç¼“å­˜çš„ä½¿ç”¨æ–¹å¼ï¼š</p><pre><code class="java">// ä¸¤å±‚ Mapï¼Œç¬¬ä¸€å±‚æ˜¯ basenameï¼Œç¬¬äºŒå±‚æ˜¯ localeprivate final Map&lt;String, Map&lt;Locale, ResourceBundle&gt;&gt; cachedResourceBundles =        new ConcurrentHashMap&lt;&gt;();@Nullableprotected ResourceBundle getResourceBundle(String basename, Locale locale) {    if (getCacheMillis() &gt;= 0) {        // Fresh ResourceBundle.getBundle call in order to let ResourceBundle        // do its native caching, at the expense of more extensive lookup steps.        return doGetBundle(basename, locale);    }    else {        // Cache forever: prefer locale cache over repeated getBundle calls.        // å…ˆä»ç¼“å­˜ä¸­è·å–ç¬¬ä¸€å±‚ basename çš„ç¼“å­˜        Map&lt;Locale, ResourceBundle&gt; localeMap = this.cachedResourceBundles.get(basename);        if (localeMap != null) {            // å¦‚æœå‘½ä¸­ç¬¬ä¸€å±‚ï¼Œåœ¨é€šè¿‡ locale è·å–ç¬¬äºŒå±‚çš„å€¼            ResourceBundle bundle = localeMap.get(locale);            if (bundle != null) {                // å¦‚æœå‘½ä¸­ç¬¬äºŒå±‚ç¼“å­˜ï¼Œç›´æ¥è¿”å›                return bundle;            }        }        try {            // èµ°åˆ°è¿™é‡Œï¼Œè¯´æ˜æ²¡æœ‰å‘½ä¸­ç¼“å­˜ï¼Œå°±æ ¹æ® basename å’Œ locale åˆ›å»ºå¯¹è±¡            ResourceBundle bundle = doGetBundle(basename, locale);            if (localeMap == null) {                // å¦‚æœ localeMap ä¸ºç©ºï¼Œè¯´æ˜ç¬¬ä¸€çº§å°±ä¸å­˜åœ¨ï¼Œé€šè¿‡ Map çš„ computeIfAbsent æ–¹æ³•åˆå§‹åŒ–                localeMap = this.cachedResourceBundles.computeIfAbsent(basename, bn -&gt; new ConcurrentHashMap&lt;&gt;());            }            // å°†æ–°å»ºçš„ ResourceBundle å¯¹è±¡æ”¾å…¥ localeMap ä¸­            localeMap.put(locale, bundle);            return bundle;        }        catch (MissingResourceException ex) {            if (logger.isWarnEnabled()) {                logger.warn(&quot;ResourceBundle [&quot; + basename + &quot;] not found for MessageSource: &quot; + ex.getMessage());            }            // Assume bundle not found            // -&gt; do NOT throw the exception to allow for checking parent message source.            return null;        }    }}</code></pre><p>è¿˜æœ‰ä¸€ç§ä½¿ç”¨ Map å®ç°å†…å­˜ç¼“å­˜çš„å†™æ³•ï¼Œæ¯”å¦‚æˆ‘ä»¬å°±å¯¹ä¸Šé¢çš„è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ”¹å†™ï¼š</p><pre><code class="java">public class ResourceBundleMessageSourceExt extends ResourceBundleMessageSource {    private final Map&lt;BasenameLocale, ResourceBundle&gt; cachedResourceBundles = new ConcurrentHashMap&lt;&gt;();    @Override    protected ResourceBundle getResourceBundle(String basename, Locale locale) {        if (getCacheMillis() &gt;= 0) {            // Fresh ResourceBundle.getBundle call in order to let ResourceBundle            // do its native caching, at the expense of more extensive lookup steps.            return doGetBundle(basename, locale);        } else {            // Cache forever: prefer locale cache over repeated getBundle calls.            final BasenameLocale basenameLocale = new BasenameLocale(basename, locale);            ResourceBundle resourceBundle = this.cachedResourceBundles.get(basenameLocale);            if (resourceBundle != null) {                return resourceBundle;            }            try {                ResourceBundle bundle = doGetBundle(basename, locale);                this.cachedResourceBundles.put(basenameLocale, bundle);                return bundle;            } catch (MissingResourceException ex) {                if (logger.isWarnEnabled()) {                    logger.warn(&quot;ResourceBundle [&quot; + basename + &quot;] not found for MessageSource: &quot; + ex.getMessage());                }                // Assume bundle not found                // -&gt; do NOT throw the exception to allow for checking parent message source.                return null;            }        }    }    public record BasenameLocale(String basename, Locale locale) {        @Override        public boolean equals(Object o) {            if (this == o) {                return true;            }            if (o == null || getClass() != o.getClass()) {                return false;            }            BasenameLocale that = (BasenameLocale) o;            return basename.equals(that.basename) &amp;&amp; locale.equals(that.locale);        }        @Override        public int hashCode() {            return Objects.hash(basename, locale);        }    }}</code></pre><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Map æ˜¯é€šè¿‡<code>equals</code>åˆ¤æ–­ key æ˜¯å¦ä¸€è‡´çš„åŸç†ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å« basenameã€locale çš„å¯¹è±¡<code>BasenameLocale</code>ï¼Œç„¶åæ”¹å†™<code>cachedResourceBundles</code>ä¸ºä¸€å±‚ Mapï¼Œä¼šç®€åŒ–ä¸€äº›åˆ¤æ–­é€»è¾‘ã€‚</p><blockquote><p>æ­¤å¤„çš„<code>BasenameLocale</code>æ˜¯<code>record</code>ç±»å‹ï¼Œå…·ä½“è¯­æ³•å¯ä»¥å‚è€ƒ <a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a> ä¸­çš„ Record ç±»å‹ä¸€èŠ‚ã€‚</p></blockquote><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡å…ˆä»‹ç»äº† MessageSource çš„é…ç½®é¡¹ï¼Œç„¶åé€šè¿‡æµç¨‹å›¾çš„æ–¹å¼ä»‹ç»äº†<code>ResourceBundleMessageSource</code>å’Œ<code>ReloadableResourceBundleMessageSource</code>çš„æ‰§è¡Œé€»è¾‘ï¼Œæœ€ååˆ†äº«äº†ä¸¤ä¸ªä½¿ç”¨ Map å®ç°å†…å­˜ç¼“å­˜çš„æ–¹å¼ã€‚</p><p>ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†æ‰©å±• MessageSourceï¼Œå®ç°ä» Nacos åŠ è½½é…ç½®å†…å®¹ï¼ŒåŒæ—¶å®ç°åŠ¨æ€ä¿®æ”¹é…ç½®å†…å®¹çš„åŠŸèƒ½ã€‚</p><p>æœ¬æ–‡ä¸­çš„å®ä¾‹å·²ç»ä¼ åˆ° GitHubï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤<code>spring</code>è·å–æºç ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/zUrx7duy0-OY1oYn8FeKOw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¸€æ‹›å®ç°ç»“æœçš„ä¼˜é›…å“åº”</a></li><li><a href="https://mp.weixin.qq.com/s/H599Wri3VbjTuLBnf7pD3w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå¦‚ä½•ä¼˜é›…çš„å¤„ç†å¼‚å¸¸</a></li><li><a href="https://mp.weixin.qq.com/s/fcVE-cE7tDuWKoNNX9rsoQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šé€šè¿‡ BeanPostProcessor åŠ¨æ€æ³¨å…¥ ID ç”Ÿæˆå™¨</a></li><li><a href="https://mp.weixin.qq.com/s/xQQbl6VNF2eCgmQPrMyc4w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šè‡ªå®šä¹‰ Filter ä¼˜é›…è·å–è¯·æ±‚å‚æ•°å’Œå“åº”ç»“æœ</a></li><li><a href="https://mp.weixin.qq.com/s/coKjuefWMmCA4bSkRDIRVA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/pet_rA7-O1JD3QfQ1fqxAQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/2OXArNObVejXLvMOmE3oqw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/hdioIIwPA2lv2khfRmKhOQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/vbccn0kTdyOlmznDr3RItw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šJUnit5+MockMvc+Mockito åšå¥½å•å…ƒæµ‹è¯•</a></li><li><a href="https://mp.weixin.qq.com/s/s8PQXLT8Ni3dLqsOgf3syA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåŠ è½½å’Œè¯»å–èµ„æºæ–‡ä»¶å†…å®¹</a></li><li><a href="https://mp.weixin.qq.com/s/dGPhS5vdbnFdiTxkpr2mLg" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/springboot-action-messagesource-principle/">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource çš„æ‰§è¡Œé€»è¾‘ä¸æºç </a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource çš„æ‰§è¡Œé€»è¾‘ä¸æºç </a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      æŒæ¡ MessageSource çš„åŸç†ï¼Œæˆ‘ä»¬æ‰èƒ½æ›´å¥½çš„æ‰©å±•ã€‚
    
    </summary>
    
    
      <category term="spring" scheme="https://www.howardliu.cn/categories/spring/"/>
    
    
      <category term="SpringBoot å®æˆ˜" scheme="https://www.howardliu.cn/tags/SpringBoot-%E5%AE%9E%E6%88%98/"/>
    
      <category term="SpringBoot" scheme="https://www.howardliu.cn/tags/SpringBoot/"/>
    
      <category term="spring" scheme="https://www.howardliu.cn/tags/spring/"/>
    
      <category term="SpringBoot æ‰‹å†Œ" scheme="https://www.howardliu.cn/tags/SpringBoot-%E6%89%8B%E5%86%8C/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</title>
    <link href="https://www.howardliu.cn/springboot-action-messagesource/"/>
    <id>https://www.howardliu.cn/springboot-action-messagesource/</id>
    <published>2022-07-30T03:26:55.000Z</published>
    <updated>2022-07-30T03:26:55.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/taiwan-3511017.jpeg" alt="SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>å’±ä»¬ä»Šå¤©ä¸€èµ·æ¥èŠèŠ SpringBoot ä¸­çš„å›½é™…åŒ–ç»„ä»¶ MessageSourceã€‚</p><a id="more"></a><h2 id="åˆè¯†-MessageSource"><a href="#åˆè¯†-MessageSource" class="headerlink" title="åˆè¯† MessageSource"></a>åˆè¯† MessageSource</h2><p>å…ˆçœ‹ä¸€ä¸‹ç±»å›¾ï¼š</p><p><img src="https://static.howardliu.cn/spring/MessageSource.png" alt="MessageSource ç±»å›¾"></p><p>ä»ç±»å›¾å¯ä»¥çœ‹åˆ°ï¼ŒSpring å†…ç½®çš„<code>MessageSource</code>æœ‰ä¸‰ä¸ªå®ç°ç±»ï¼š</p><ul><li>ResourceBundleMessageSourceï¼šé€šè¿‡ JDK æä¾›çš„ ResourceBundle åŠ è½½èµ„æºæ–‡ä»¶ï¼›</li><li>ReloadableResourceBundleMessageSourceï¼šé€šè¿‡ PropertiesPersister åŠ è½½èµ„æºï¼Œæ”¯æŒ xmlã€properties ä¸¤ä¸ªæ ¼å¼ï¼Œä¼˜å…ˆåŠ è½½ properties æ ¼å¼çš„æ–‡ä»¶ã€‚å¦‚æœåŒæ—¶å­˜åœ¨ properties å’Œ xml çš„æ–‡ä»¶ï¼Œä¼šåªåŠ è½½ properties çš„å†…å®¹ï¼›</li><li>StaticMessageSourceï¼šæ˜¯æ‰‹åŠ¨æ³¨å…¥å›½é™…åŒ–å†…å®¹ï¼Œç›¸å½“äºæ‰‹å†™ä»£ç ã€‚å› ä¸ºæ¯”è¾ƒç®€å•ï¼Œè€Œä¸”å®é™…ç”¨å¤„ä¸å¤§ï¼Œæ‰€ä»¥æš‚æ—¶ä¸åšè®¨è®ºã€‚</li></ul><p>åœ¨ SpringBoot ä¸­ï¼Œé»˜è®¤åˆ›å»º ResourceBundleMessageSource å®ä¾‹å®ç°å›½é™…åŒ–è¾“å‡ºã€‚æ ‡å‡†çš„é…ç½®é€šè¿‡<code>MessageSourceProperties</code>ç±»æ³¨å…¥ï¼š</p><ul><li>basenameï¼šåŠ è½½èµ„æºçš„æ–‡ä»¶åï¼Œå¯ä»¥å¤šä¸ªèµ„æºåç§°ï¼Œé€šè¿‡é€—å·éš”å¼€ï¼Œé»˜è®¤æ˜¯â€œmessagesâ€ï¼›</li><li>encodingï¼šåŠ è½½æ–‡ä»¶çš„å­—ç¬¦é›†ï¼Œé»˜è®¤æ˜¯ UTF-8ï¼Œè¿™ä¸ªä¸å¤šè¯´ï¼›</li><li>cacheDurationï¼šæ–‡ä»¶åŠ è½½åˆ°å†…å­˜åç¼“å­˜æ—¶é—´ï¼Œé»˜è®¤å•ä½æ˜¯ç§’ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåªä¼šåŠ è½½ä¸€æ¬¡ç¼“å­˜ï¼Œä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™ä¸ªå‚æ•°åœ¨ ResourceBundleMessageSourceã€ReloadableResourceBundleMessageSource ç¨å¾®æœ‰äº›å·®å¼‚ï¼Œä¼šå…·ä½“è¯´ä¸‹ã€‚</li><li>fallbackToSystemLocaleï¼šè¿™æ˜¯ä¸€ä¸ªå…œåº•å¼€å…³ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœåœ¨æŒ‡å®šè¯­è¨€ä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„å€¼ï¼Œä¼šä» basename å‚æ•°ï¼ˆé»˜è®¤æ˜¯ messages.propertiesï¼‰ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœå†æ‰¾ä¸åˆ°å¯èƒ½ç›´æ¥è¿”å›æˆ–æŠ›é”™ã€‚è¯¥å‚æ•°è®¾ç½®ä¸º true çš„è¯ï¼Œè¿˜ä¼šå†èµ°ä¸€æ­¥å…œåº•é€»è¾‘ï¼Œä»å½“å‰ç³»ç»Ÿè¯­è¨€å¯¹åº”é…ç½®æ–‡ä»¶ä¸­æŸ¥æ‰¾ã€‚è¯¥å‚æ•°é»˜è®¤æ˜¯ trueï¼›</li><li>alwaysUseMessageFormatï¼šMessageSource ç»„ä»¶é€šè¿‡<code>MessageFormat.format</code>å‡½æ•°å¯¹å›½é™…åŒ–ä¿¡æ¯æ ¼å¼åŒ–ï¼Œå¦‚æœæ³¨å…¥å‚æ•°ï¼Œè¾“å‡ºç»“æœæ˜¯ç»è¿‡æ ¼å¼åŒ–çš„ã€‚æ¯”å¦‚<code>MessageFormat.format(&quot;Hello, {0}!&quot;, &quot;Kanshan&quot;)</code>è¾“å‡ºç»“æœæ˜¯â€œHello, Kanshan!â€ã€‚è¯¥å‚æ•°æ§åˆ¶çš„æ˜¯ï¼Œå½“è¾“å…¥å‚æ•°ä¸ºç©ºæ—¶ï¼Œæ˜¯å¦è¿˜æ˜¯ä½¿ç”¨<code>MessageFormat.format</code>å‡½æ•°å¯¹ç»“æœè¿›è¡Œæ ¼å¼åŒ–ï¼Œé»˜è®¤æ˜¯ falseï¼›</li><li>useCodeAsDefaultMessageï¼šå½“æ²¡æœ‰æ‰¾åˆ°å¯¹åº”ä¿¡æ¯çš„æ—¶å€™ï¼Œæ˜¯å¦è¿”å› codeã€‚ä¹Ÿå°±æ˜¯å½“æ‰¾äº†æ‰€æœ‰èƒ½æ‰¾çš„é…ç½®æ–‡ä»¶åï¼Œè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ä¿¡æ¯ï¼Œæ˜¯å¦ç›´æ¥è¿”å› code å€¼ã€‚é»˜è®¤æ˜¯ falseï¼Œå³ä¸è¿”å› codeï¼ŒæŠ›å‡º<code>NoSuchMessageException</code>å¼‚å¸¸ã€‚</li></ul><h2 id="å°è¯•ç‰›åˆ€"><a href="#å°è¯•ç‰›åˆ€" class="headerlink" title="å°è¯•ç‰›åˆ€"></a>å°è¯•ç‰›åˆ€</h2><p>ä»ä¸Šé¢æˆ‘ä»¬çŸ¥é“äº†ä¸€äº›ç®€å•çš„é…ç½®ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰åŠæ³•çŸ¥é“ MessageSource åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œæœ¬èŠ‚æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­å°è¯•ç‰›åˆ€ã€‚</p><p>é¦–å…ˆä»<a href="https://start.spring.io/" target="_blank" rel="noopener">https://start.spring.io/</a>åˆ›å»ºä¸€ä¸ªæœ€å°‘ä¾èµ–<code>spring-boot-starter-web</code>çš„ SpringBoot é¡¹ç›®ã€‚</p><p>ç„¶ååœ¨ resources ç›®å½•ä¸‹å®šä¹‰ä¸€ç»„å›½é™…åŒ–é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨é»˜è®¤é…ç½®ï¼Œæ‰€ä»¥ basename æ˜¯ messagesï¼š</p><pre><code class="properties">## messages.propertiesmessage.code1=[DEFAULT]code onemessage.code2=[DEFAULT]code twomessage.code3=[DEFAULT]code threemessage.code4=[DEFAULT]code fourmessage.code5=[DEFAULT]code fivemessage.code6=[DEFAULT]code six## messages_en.propertiesmessage.code2=[en]code two## messages_en_US.propertiesmessage.code3=[en_US]code three## messages_zh.propertiesmessage.code4=[ä¸­æ–‡] ä¸å­—å·## messages_zh_CN.propertiesmessage.code5=[å¤§é™†åŒºåŸŸä¸­æ–‡] æˆŠå­—å·## messages_zh_Hans.propertiesmessage.code6=[ç®€ä½“ä¸­æ–‡] å·±å­—å·</code></pre><p>ä¸€ä¸ªå®šä¹‰äº†å…­ä¸ªé…ç½®æ–‡ä»¶ï¼š</p><ul><li>messages.propertiesï¼šé»˜è®¤é…ç½®æ–‡ä»¶</li><li>messages_en.propertiesï¼šè‹±æ–‡é…ç½®æ–‡ä»¶</li><li>messages_en_US.propertiesï¼šè‹±æ–‡ç¾å›½é…ç½®æ–‡ä»¶</li><li>messages_zh.propertiesï¼šä¸­æ–‡é…ç½®æ–‡ä»¶</li><li>messages_zh_CN.propertiesï¼šä¸­æ–‡ä¸­å›½å¤§é™†åŒºåŸŸé…ç½®æ–‡ä»¶</li><li>messages_zh_Hans.propertiesï¼šç®€ä½“ä¸­æ–‡é…ç½®æ–‡ä»¶</li></ul><p>ä»ä¸Šé¢é…ç½®æ–‡ä»¶çš„å‘½åå¯ä»¥çœ‹å‡ºï¼Œéƒ½æ˜¯ä»¥ basename å¼€å¤´ï¼Œåé¢è·Ÿä¸Šè¯­ç³»å’Œåœ°åŒºï¼Œä¸‰ä¸ªå‚æ•°ä»¥ä¸‹åˆ’çº¿åˆ†éš”ã€‚</p><p>å¯ä»¥æ”¯æŒçš„è¯­è¨€å’Œå›½å®¶å¯ä»¥ä»<code>java.util.Locale</code>æŸ¥æ‰¾ã€‚</p><p>æœ€åæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Controller å®éªŒï¼š</p><pre><code class="java">@RestControllerpublic class HelloController {    @Autowired    private MessageSource messageSource;    @GetMapping(&quot;m1&quot;)    public List&lt;String&gt; m1(Locale locale) {        final List&lt;String&gt; multi = new ArrayList&lt;&gt;();        multi.add(messageSource.getMessage(&quot;message.code1&quot;, null, locale));        multi.add(messageSource.getMessage(&quot;message.code2&quot;, null, locale));        multi.add(messageSource.getMessage(&quot;message.code3&quot;, null, locale));        multi.add(messageSource.getMessage(&quot;message.code4&quot;, null, locale));        multi.add(messageSource.getMessage(&quot;message.code5&quot;, null, locale));        multi.add(messageSource.getMessage(&quot;message.code6&quot;, null, locale));        return multi;    }}</code></pre><p>æˆ‘ä»¬é€šè¿‡ä¸åŒçš„è¯·æ±‚æŸ¥çœ‹ç»“æœï¼š</p><pre><code class="http">### é»˜è®¤GET http://localhost:8080/m1### ç»“æœæ˜¯ï¼š[  &quot;[DEFAULT]code one&quot;,  &quot;[DEFAULT]code two&quot;,  &quot;[DEFAULT]code three&quot;,  &quot;[ä¸­æ–‡] ä¸å­—å·&quot;,  &quot;[å¤§é™†åŒºåŸŸä¸­æ–‡] æˆŠå­—å·&quot;,  &quot;[ç®€ä½“ä¸­æ–‡] å·±å­—å·&quot;]### local: enGET http://localhost:8080/m1Accept-Language: en### ç»“æœæ˜¯ï¼š[  &quot;[DEFAULT]code one&quot;,  &quot;[en]code two&quot;,  &quot;[DEFAULT]code three&quot;,  &quot;[DEFAULT]code four&quot;,  &quot;[DEFAULT]code five&quot;,  &quot;[DEFAULT]code six&quot;]### local: en-USGET http://localhost:8080/m1Accept-Language: en-US### ç»“æœæ˜¯ï¼š[  &quot;[DEFAULT]code one&quot;,  &quot;[en]code two&quot;,  &quot;[en_US]code three&quot;,  &quot;[DEFAULT]code four&quot;,  &quot;[DEFAULT]code five&quot;,  &quot;[DEFAULT]code six&quot;]### local: zhGET http://localhost:8080/m1Accept-Language: zh### ç»“æœæ˜¯ï¼š[  &quot;[DEFAULT]code one&quot;,  &quot;[DEFAULT]code two&quot;,  &quot;[DEFAULT]code three&quot;,  &quot;[ä¸­æ–‡] ä¸å­—å·&quot;,  &quot;[DEFAULT]code five&quot;,  &quot;[DEFAULT]code six&quot;]### local: zh-CNGET http://localhost:8080/m1Accept-Language: zh-CN### ç»“æœæ˜¯ï¼š[  &quot;[DEFAULT]code one&quot;,  &quot;[DEFAULT]code two&quot;,  &quot;[DEFAULT]code three&quot;,  &quot;[ä¸­æ–‡] ä¸å­—å·&quot;,  &quot;[å¤§é™†åŒºåŸŸä¸­æ–‡] æˆŠå­—å·&quot;,  &quot;[DEFAULT]code six&quot;]</code></pre><p>ä»ä¸Šé¢çš„ç»“æœå¯ä»¥çœ‹å‡ºï¼š</p><ol><li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHTTP è¯·æ±‚æ²¡æœ‰ä¼ è¯­è¨€ï¼Œæ‰€ä»¥ä½¿ç”¨äº†ç³»ç»Ÿè¯­è¨€ç»„è£…ï¼Œç›¸å½“äºä¼ å‚æ˜¯<code>zh-Hans</code>ï¼Œæ‰€ä»¥ç»“æœæ˜¯ç®€ä½“ä¸­æ–‡ä¼˜å…ˆï¼›</li><li>HTTP è¯·æ±‚å®šä¹‰çš„è¯­è¨€è¶Šç²¾ç¡®ï¼ŒåŒ¹é…çš„å†…å®¹è¶Šç²¾ç¡®ï¼›</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŒ‡å®šè¯­è¨€é…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°ï¼Œä¼šä¸€æ¬¡å‘ä¸ŠæŸ¥æ‰¾ï¼Œåœ°åŒº &gt; å›½å®¶ &gt; è¯­è¨€ &gt; é»˜è®¤ã€‚</li></ol><h2 id="å¸¦å‚æ•°çš„å›½é™…åŒ–ä¿¡æ¯"><a href="#å¸¦å‚æ•°çš„å›½é™…åŒ–ä¿¡æ¯" class="headerlink" title="å¸¦å‚æ•°çš„å›½é™…åŒ–ä¿¡æ¯"></a>å¸¦å‚æ•°çš„å›½é™…åŒ–ä¿¡æ¯</h2><p>æˆ‘ä»¬åœ¨ message.properties ä¸­æ·»åŠ ä¸€è¡Œé…ç½®ï¼š</p><pre><code class="properties">message.multiVars=var1={0}, var2={1}</code></pre><p>åœ¨åˆšæ‰çš„ Controller ä¸­å¢åŠ ä¸€ä¸ªè¯·æ±‚ï¼š</p><pre><code class="java">@GetMapping(&quot;m2&quot;)public List&lt;String&gt; m2(Locale locale) {    final List&lt;String&gt; multi = new ArrayList&lt;&gt;();    multi.add(&quot;å‚æ•°ä¸º null: &quot; + messageSource.getMessage(&quot;message.multiVars&quot;, null, locale));    multi.add(&quot;å‚æ•°ä¸ºç©ºï¼š&quot; + messageSource.getMessage(&quot;message.multiVars&quot;, new Object[]{}, locale));    multi.add(&quot;åªä¼ ä¸€ä¸ªå‚æ•°ï¼š&quot; + messageSource.getMessage(&quot;message.multiVars&quot;, new Object[]{&quot;ç¬¬ä¸€ä¸ªå‚æ•°&quot;}, locale));    multi.add(&quot;ä¼ ä¸¤ä¸ªå‚æ•°ï¼š&quot; + messageSource.getMessage(&quot;message.multiVars&quot;, new Object[]{&quot;ç¬¬ä¸€ä¸ªå‚æ•°&quot;, &quot;ç¬¬äºŒä¸ªå‚æ•°&quot;}, locale));    multi.add(&quot;ä¼ è¶…è¿‡ä¸¤ä¸ªå‚æ•°ï¼š&quot; + messageSource.getMessage(&quot;message.multiVars&quot;, new Object[]{&quot;ç¬¬ä¸€ä¸ªå‚æ•°&quot;, &quot;ç¬¬äºŒä¸ªå‚æ•°&quot;, &quot;ç¬¬ä¸‰ä¸ªå‚æ•°&quot;}, locale));    return multi;}</code></pre><p>æˆ‘ä»¬çœ‹çœ‹ç»“æœï¼š</p><pre><code class="http">###GET http://localhost:8080/m2### ç»“æœæ˜¯ï¼š[  &quot;å‚æ•°ä¸º null: var1={0}, var2={1}&quot;,  &quot;å‚æ•°ä¸ºç©ºï¼švar1={0}, var2={1}&quot;,  &quot;åªä¼ ä¸€ä¸ªå‚æ•°ï¼švar1=ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œvar2={1}&quot;,  &quot;ä¼ ä¸¤ä¸ªå‚æ•°ï¼švar1=ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œvar2=ç¬¬äºŒä¸ªå‚æ•°&quot;,  &quot;ä¼ è¶…è¿‡ä¸¤ä¸ªå‚æ•°ï¼švar1=ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œvar2=ç¬¬äºŒä¸ªå‚æ•°&quot;]</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰äº†å¸¦å‚æ•°çš„é…ç½®ä¿¡æ¯ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä¼ å‚æ•°ã€ä¼ å°‘äºæŒ‡å®šæ•°é‡çš„å‚æ•°ã€ä¼ ç¬¦åˆæŒ‡å®šæ•°é‡çš„å‚æ•°ã€ä¼ è¶…è¿‡æŒ‡å®šæ•°é‡çš„å‚æ•°ï¼Œéƒ½å¯ä»¥æ­£å¸¸è¿”å›å›½é™…åŒ–ä¿¡æ¯ã€‚</p><p>æ­¤å¤„å¯ä»¥ç†è§£ä¸ºï¼Œ<code>MessageFormat.format</code>æ‰§è¡Œè¿‡ç¨‹æ˜¯<code>for-index</code>å¾ªç¯ï¼Œä»é…ç½®å€¼ä¸­æ‰¾æ ¼å¼ä¸º<code>{æ•°å­—}</code>çš„å ä½ç¬¦ï¼Œç„¶åç”¨å¯¹åº”ä¸‹æ ‡çš„è¾“å…¥å‚æ•°æ›¿æ¢ï¼Œå¦‚æœå±äºå‚æ•°æ²¡äº†ï¼Œå°±ä¿æŒåŸæ ·ã€‚</p><h2 id="æ‰¾ä¸åˆ°é…ç½®å†…å®¹"><a href="#æ‰¾ä¸åˆ°é…ç½®å†…å®¹" class="headerlink" title="æ‰¾ä¸åˆ°é…ç½®å†…å®¹"></a>æ‰¾ä¸åˆ°é…ç½®å†…å®¹</h2><p>å¦‚æœæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰é…ç½®æˆ–è€…å¯¹åº”è¯­è¨€åŠå…¶çˆ¶çº§éƒ½æ²¡æœ‰é…ç½®å‘¢ï¼Ÿ</p><p>è¿™ä¸ªå°±è¦é å‰é¢è¯´çš„<code>useCodeAsDefaultMessage</code>é…ç½®äº†ï¼Œå¦‚æœä¸º trueï¼Œå°±ä¼šè¿”å›è¾“å…¥çš„ codeï¼Œå¦‚æœä¸º falseï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é»˜è®¤æ˜¯ falseï¼Œæ‰€ä»¥å¦‚æœæ‰¾ä¸åˆ°ä¼šæŠ›å¼‚å¸¸ã€‚æ¯”å¦‚ï¼š</p><pre><code class="java">@GetMapping(&quot;m3&quot;)public List&lt;String&gt; m3(Locale locale) {    final List&lt;String&gt; multi = new ArrayList&lt;&gt;();    multi.add(&quot;ä¸å­˜åœ¨çš„ code: &quot; + messageSource.getMessage(&quot;message.notExist&quot;, null, locale));    return multi;}</code></pre><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ‰§è¡Œ http è¯·æ±‚ï¼š</p><pre><code class="http">###GET http://localhost:8080/m3### ç»“æœæ˜¯ï¼š{  &quot;timestamp&quot;: &quot;2022-06-19T09:14:14.977+00:00&quot;,  &quot;status&quot;: 500,  &quot;error&quot;: &quot;Internal Server Error&quot;,  &quot;path&quot;: &quot;/m3&quot;}</code></pre><p>è¿™æ˜¯æŠ¥é”™äº†ï¼Œå¼‚å¸¸æ ˆæ˜¯ï¼š</p><pre><code class="log">org.springframework.context.NoSuchMessageException: No message found under code &#39;message.notExist&#39; for locale &#39;zh_CN_#Hans&#39;.    at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:161) ~[spring-context-5.3.20.jar:5.3.20]    at cn.howardliu.effective.spring.springbootmessages.controller.HelloController.m3(HelloController.java:47) ~[classes/:na]    â€¦â€¦æ­¤å¤„çœç•¥</code></pre><h2 id="è‡ªå®šä¹‰-MessageSource"><a href="#è‡ªå®šä¹‰-MessageSource" class="headerlink" title="è‡ªå®šä¹‰ MessageSource"></a>è‡ªå®šä¹‰ MessageSource</h2><p>æœ¬æ–‡å¼€å¤´è¯´è¿‡ï¼ŒMessageSource æœ‰ä¸‰ç§å®ç°ï¼ŒSpring é»˜è®¤ä½¿ç”¨äº† ResourceBundleMessageSourceï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä½¿ç”¨ ReloadableResourceBundleMessageSourceã€‚</p><p>æ—¢ç„¶æ˜¯åœ¨ SpringBoot ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¾é  SpringBoot çš„ç‰¹æ€§å®šä¹‰ï¼š</p><pre><code class="java">@Configuration(proxyBeanMethods = false)@ConditionalOnMissingBean(name = AbstractApplicationContext.MESSAGE_SOURCE_BEAN_NAME, search = SearchStrategy.CURRENT)@ConditionalOnProperty(name = &quot;spring.messages-type&quot;, havingValue = &quot;ReloadableResourceBundleMessageSource&quot;)@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)@Conditional(ReloadResourceBundleCondition.class)@EnableConfigurationPropertiespublic class ReloadMessageSourceAutoConfiguration {    private static final Resource[] NO_RESOURCES = {};    @Bean    @ConfigurationProperties(prefix = &quot;spring.messages&quot;)    public MessageSourceProperties messageSourceProperties() {        return new MessageSourceProperties();    }    @Bean    public MessageSource messageSource(MessageSourceProperties properties) {        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();        if (StringUtils.hasText(properties.getBasename())) {            final String[] originBaseNames = StringUtils                    .commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(properties.getBasename()));            final String[] baseNames = new String[originBaseNames.length];            for (int i = 0; i &lt; originBaseNames.length; i++) {                if (originBaseNames[i].startsWith(&quot;classpath:&quot;)) {                    baseNames[i] = originBaseNames[i];                } else {                    baseNames[i] = &quot;classpath:&quot; + originBaseNames[i];                }            }            messageSource.setBasenames(baseNames);        }        if (properties.getEncoding() != null) {            messageSource.setDefaultEncoding(properties.getEncoding().name());        }        messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());        Duration cacheDuration = properties.getCacheDuration();        if (cacheDuration != null) {            messageSource.setCacheMillis(cacheDuration.toMillis());        }        messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());        messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());        return messageSource;    }    protected static class ReloadResourceBundleCondition extends SpringBootCondition {        private static final ConcurrentReferenceHashMap&lt;String, ConditionOutcome&gt; CACHE =                new ConcurrentReferenceHashMap&lt;&gt;();        @Override        public ConditionOutcome getMatchOutcome(ConditionContext context, AnnotatedTypeMetadata metadata) {            String basename = context.getEnvironment().getProperty(&quot;spring.messages.basename&quot;, &quot;messages&quot;);            ConditionOutcome outcome = CACHE.get(basename);            if (outcome == null) {                outcome = getMatchOutcomeForBasename(context, basename);                CACHE.put(basename, outcome);            }            return outcome;        }        private ConditionOutcome getMatchOutcomeForBasename(ConditionContext context, String basename) {            ConditionMessage.Builder message = ConditionMessage.forCondition(&quot;ResourceBundle&quot;);            for (String name : StringUtils.commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(basename))) {                for (Resource resource : getResources(context.getClassLoader(), name)) {                    if (resource.exists()) {                        return ConditionOutcome.match(message.found(&quot;bundle&quot;).items(resource));                    }                }            }            return ConditionOutcome.noMatch(message.didNotFind(&quot;bundle with basename &quot; + basename).atAll());        }        private Resource[] getResources(ClassLoader classLoader, String name) {            String target = name.replace(&#39;.&#39;, &#39;/&#39;);            try {                return new PathMatchingResourcePatternResolver(classLoader)                        .getResources(&quot;classpath*:&quot; + target + &quot;.properties&quot;);            } catch (Exception ex) {                return NO_RESOURCES;            }        }    }}</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œ<code>messageSource.setBasenames(baseNames);</code>çš„æ—¶å€™ï¼Œ<code>baseNames</code>ä¸­çš„å€¼éƒ½æ˜¯è®¾ç½®æˆ<code>classpath:</code>å¼€å¤´çš„ï¼Œè¿™æ˜¯ä¸ºäº†ä½¿<code>ReloadableResourceBundleMessageSource</code>èƒ½å¤Ÿè¯»å– CLASSPATH ä¸‹çš„é…ç½®æ–‡ä»¶ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„å®ç°ï¼Œè¿™ä¸ªæ˜¯æ¯”è¾ƒçµæ´»çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶å†…å®¹ï¼ŒæŸ¥çœ‹å˜åŒ–ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚</p><h2 id="æ–‡æœ«æ€»ç»“"><a href="#æ–‡æœ«æ€»ç»“" class="headerlink" title="æ–‡æœ«æ€»ç»“"></a>æ–‡æœ«æ€»ç»“</h2><p>æœ¬æ–‡é€šè¿‡å‡ ä¸ªå°ä¾‹å­ä»‹ç»äº†<code>MessageSource</code>çš„ä½¿ç”¨ã€‚è¿™é‡Œåšä¸€ä¸‹é¢„å‘Šï¼Œä¸‹ä¸€ç« æˆ‘ä»¬ä¼šä»æºç è§’åº¦åˆ†æ<code>MessageSourc</code>e çš„å®ç°ç±»<code>ResourceBundleMessageSource</code>å’Œ<code>ReloadableResourceBundleMessageSource</code>çš„æ‰§è¡Œé€»è¾‘ï¼›ç„¶åæˆ‘ä»¬è‡ªå®šä¹‰æ‰©å±•ï¼Œä» Nacos ä¸­è¯»å–é…ç½®å†…å®¹ï¼Œå®ç°æ›´åŠ çµæ´»çš„é…ç½®ã€‚</p><p>æœ¬æ–‡ä¸­çš„å®ä¾‹å·²ç»ä¼ åˆ° GitHubï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤<code>spring</code>è·å–æºç ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/zUrx7duy0-OY1oYn8FeKOw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¸€æ‹›å®ç°ç»“æœçš„ä¼˜é›…å“åº”</a></li><li><a href="https://mp.weixin.qq.com/s/H599Wri3VbjTuLBnf7pD3w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå¦‚ä½•ä¼˜é›…çš„å¤„ç†å¼‚å¸¸</a></li><li><a href="https://mp.weixin.qq.com/s/fcVE-cE7tDuWKoNNX9rsoQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šé€šè¿‡ BeanPostProcessor åŠ¨æ€æ³¨å…¥ ID ç”Ÿæˆå™¨</a></li><li><a href="https://mp.weixin.qq.com/s/xQQbl6VNF2eCgmQPrMyc4w" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šè‡ªå®šä¹‰ Filter ä¼˜é›…è·å–è¯·æ±‚å‚æ•°å’Œå“åº”ç»“æœ</a></li><li><a href="https://mp.weixin.qq.com/s/coKjuefWMmCA4bSkRDIRVA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/pet_rA7-O1JD3QfQ1fqxAQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/2OXArNObVejXLvMOmE3oqw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°</a></li><li><a href="https://mp.weixin.qq.com/s/hdioIIwPA2lv2khfRmKhOQ" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåœ¨ RequestBody ä¸­ä¼˜é›…çš„ä½¿ç”¨æšä¸¾å‚æ•°ï¼ˆåŸç†ç¯‡ï¼‰</a></li><li><a href="https://mp.weixin.qq.com/s/vbccn0kTdyOlmznDr3RItw" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šJUnit5+MockMvc+Mockito åšå¥½å•å…ƒæµ‹è¯•</a></li><li><a href="https://mp.weixin.qq.com/s/s8PQXLT8Ni3dLqsOgf3syA" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šåŠ è½½å’Œè¯»å–èµ„æºæ–‡ä»¶å†…å®¹</a></li><li><a href="https://mp.weixin.qq.com/s/dGPhS5vdbnFdiTxkpr2mLg" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/springboot-action-messagesource/">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/126069965" target="_blank" rel="noopener">SpringBoot å®æˆ˜ï¼šå›½é™…åŒ–ç»„ä»¶ MessageSource</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      å’±ä»¬ä»Šå¤©ä¸€èµ·æ¥èŠèŠ SpringBoot ä¸­çš„å›½é™…åŒ–ç»„ä»¶ MessageSourceã€‚
    
    </summary>
    
    
      <category term="spring" scheme="https://www.howardliu.cn/categories/spring/"/>
    
    
      <category term="SpringBoot å®æˆ˜" scheme="https://www.howardliu.cn/tags/SpringBoot-%E5%AE%9E%E6%88%98/"/>
    
      <category term="SpringBoot" scheme="https://www.howardliu.cn/tags/SpringBoot/"/>
    
      <category term="spring" scheme="https://www.howardliu.cn/tags/spring/"/>
    
      <category term="SpringBoot æ‰‹å†Œ" scheme="https://www.howardliu.cn/tags/SpringBoot-%E6%89%8B%E5%86%8C/"/>
    
  </entry>
  
  <entry>
    <title>å°å¿ƒ transmittable-thread-local çš„è¿™ä¸ªå‘</title>
    <link href="https://www.howardliu.cn/transmittable-thread-local-make-trouble/"/>
    <id>https://www.howardliu.cn/transmittable-thread-local-make-trouble/</id>
    <published>2022-07-30T02:55:46.000Z</published>
    <updated>2022-07-30T02:55:46.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/dog-7330712_1920.jpeg" alt="å°å¿ƒ transmittable-thread-local çš„è¿™ä¸ªå‘"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><p>transmittable-thread-local æ˜¯é˜¿é‡Œå¼€æºä¸€ä¸ªçº¿ç¨‹æ± å¤ç”¨åœºæ™¯ä¸‹ï¼Œå¤„ç†å¼‚æ­¥æ‰§è¡Œæ—¶ä¸Šä¸‹æ–‡ä¼ é€’æ•°æ®é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚å¯ä»¥ä»å®˜æ–¹æ–‡æ¡£<a href="https://github.com/alibaba/transmittable-thread-local" target="_blank" rel="noopener">https://github.com/alibaba/transmittable-thread-local</a>è·å–æ›´å¤šä¿¡æ¯ã€‚</p><a id="more"></a><p>æœ¬æ–‡ä¸»è¦æ˜¯å˜æ›´ transmittable-thread-local ä½¿ç”¨æ–¹å¼æ—¶å‡ºç°çš„ä¸€ä¸ªå¼‚å¸¸ã€‚</p><h2 id="å¼‚å¸¸ç°åœº"><a href="#å¼‚å¸¸ç°åœº" class="headerlink" title="å¼‚å¸¸ç°åœº"></a>å¼‚å¸¸ç°åœº</h2><p>çœ‹å¼‚å¸¸ä¹‹å‰ï¼Œå…ˆç®€å•è¯´ä¸‹é¡¹ç›®å¤§æ¦‚æƒ…å†µã€‚</p><p>é¡¹ç›®æ˜¯ Java æ ˆï¼Œä½¿ç”¨äº† SpringBoot+MyBatis çš„æ¡†æ¶ç»“æ„ï¼Œæ„å»ºå·¥å…·æ˜¯ Mavenã€‚å› ä¸ºé¡¹ç›®ä¸­ä½¿ç”¨äº†æ¯”è¾ƒå¤šçš„å¤šçº¿ç¨‹é€»è¾‘ï¼Œæ‰€ä»¥å¼•å…¥äº† transmittable-thread-localï¼Œè§£å†³ä¸Šä¸‹æ–‡ä¼ é€’æ•°æ®é—®é¢˜ã€‚åæ¥åšé¡¹ç›®å‡çº§ï¼Œæ¥å…¥å…¬å¸çš„ç›‘æ§ç³»ç»Ÿï¼Œå¯åŠ¨æ—¶å¢åŠ äº†å¯åŠ¨å‚æ•°<code>-javaagent:/path/to/transmittable-thread-local-2.12.1.jar</code>ï¼Œé€šè¿‡é›¶ä¾µå…¥çš„æ–¹å¼è§£å†³å¤šçº¿ç¨‹ä¸Šä¸‹æ–‡ä¼ å€¼é—®é¢˜ã€‚</p><p>äºæ˜¯ï¼Œæœ‰äº›é€»è¾‘å‡ºé”™äº†ã€‚</p><p>æˆ‘ä»¬çœ‹çœ‹å¼‚å¸¸æ ˆï¼ˆæ—¥å¿—åšäº†åˆ æ”¹ï¼Œéšè—é¡¹ç›®ä¿¡æ¯ï¼‰ï¼š</p><pre><code class="log">org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type &#39;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&#39; available: expected single matching bean but found 3: executor1,executor2,executor3    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1200)    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:420)    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:349)    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342)    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1127)    â€¦â€¦    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)    â€¦â€¦</code></pre><p>å¼‚å¸¸æ—¥å¿—å¾ˆæ¸…æ¥šï¼Œå°±æ˜¯é€šè¿‡<code>AbstractApplicationContext.getBean</code>è·å– Bean çš„æ—¶å€™ï¼Œå› ä¸ºå­˜åœ¨å¤šä¸ªåŒç±»å‹çš„<code>ThreadPoolTaskExecutor</code>ï¼ŒSpring å®¹å™¨ä¸çŸ¥é“è¿”å›å“ªä¸ª Beanï¼Œå°±æŠ›å‡ºäº†<code>NoUniqueBeanDefinitionException</code>å¼‚å¸¸ã€‚</p><h2 id="æ’æŸ¥é—®é¢˜"><a href="#æ’æŸ¥é—®é¢˜" class="headerlink" title="æ’æŸ¥é—®é¢˜"></a>æ’æŸ¥é—®é¢˜</h2><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹è°ƒç”¨ä»£ç ï¼š</p><pre><code class="java">public static void doSth(Object subtag, Object extra, long time) {    ApplicationContextContainer.getBean(ThreadPoolTaskExecutor.class)            .execute(() -&gt; {                // ä¸€äº›ä¸šåŠ¡ä»£ç             });}@Componentpublic class ApplicationContextContainer implements ApplicationContextAware {    private static ApplicationContext applicationContext;    public static &lt;T&gt; T getBean(Class&lt;T&gt; clazz) {        return applicationContext.getBean(clazz);    }    @Override    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {        ApplicationContextContainer.applicationContext = applicationContext;    }}</code></pre><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œ<code>applicationContext.getBean</code>æ—¶åªä¼ å…¥äº† class ç±»å‹ï¼Œæ²¡æœ‰æŒ‡æ˜ Bean çš„åå­—ã€‚æ¨æµ‹æ˜¯é¡¹ç›®ä¸­å®šä¹‰äº†å¤šä¸ª<code>ThreadPoolTaskExecutor</code>ç±»å‹çš„ Beanï¼Œåå­—åˆ†åˆ«æ˜¯ executor1ã€executor2ã€executor3ï¼ˆåå­—æ”¹è¿‡äº†ï¼Œå¤§å®¶å†™ä»£ç æ—¶å°½é‡ä½¿ç”¨è§åçŸ¥æ„çš„èµ·åæ–¹å¼ï¼‰ã€‚</p><pre><code class="java">@Configurationpublic class ExecutorConfig {    @Bean(value = &quot;executor1&quot;)    public Executor executor1() {        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();        // ä¸€äº›åˆå§‹åŒ–æ–¹æ³•        taskExecutor.initialize();        return taskExecutor;    }    @Bean(value = &quot;executor2&quot;)    public Executor executor2() {        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();        // ä¸€äº›åˆå§‹åŒ–æ–¹æ³•        taskExecutor.initialize();        return TtlExecutors.getTtlExecutor(taskExecutor);    }    @Bean(value = &quot;executor3&quot;)    public Executor executor3() {        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();        // ä¸€äº›åˆå§‹åŒ–æ–¹æ³•        taskExecutor.initialize();        return TtlExecutors.getTtlExecutor(taskExecutor);    }}</code></pre><p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥å‘ç°ï¼Œç¡®å®æœ‰ executor1ã€executor2ã€executor3 ä¸‰ä¸ª<code>Executor</code>ï¼Œexecutor1 æ˜¯<code>ThreadPoolTaskExecutor</code>ç±»å‹çš„ï¼Œexecutor2 å’Œ executor3 æ˜¯ç»è¿‡<code>TtlExecutors.getTtlExecutor</code>åŒ…è£…çš„<code>ThreadPoolTaskExecutor</code>ã€‚</p><p>æˆ‘ä»¬æ¥çœ‹çœ‹<code>TtlExecutors.getTtlExecutor</code>æ–¹æ³•ï¼š</p><pre><code class="java">public static Executor getTtlExecutor(@Nullable Executor executor) {    if (TtlAgent.isTtlAgentLoaded() || null == executor || executor instanceof TtlEnhanced) {        return executor;    }    return new ExecutorTtlWrapper(executor, true);}</code></pre><p>æ ¹æ®é”™è¯¯åæ¨ï¼Œç»è¿‡<code>TtlExecutors.getTtlExecutor</code>ä¹‹åè¿”å›çš„è¿˜æ˜¯<code>ThreadPoolTaskExecutor</code>ç±»å‹ã€‚ä¹Ÿå°±æ˜¯ä¸Šé¢ä»£ç èµ°äº†<code>if</code>è¯­å¥ï¼Œç›´æ¥è¿”å›äº†è¾“å…¥å‚æ•°ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™é‡Œå°±ç¢°åˆ°äº†ä¸¤ä¸ªå¼€å‘åå¤§æœªè§£ä¹‹è°œä¸­çš„ä¸¤ä¸ªï¼š</p><ol><li>ä»£ç æ²¡æ”¹ï¼Œä¹‹å‰å¥½å¥½åœ°ï¼Œæ€ä¹ˆå°±æŠ¥é”™äº†ï¼›</li><li>æœ¬åœ°å¥½ä½¿ï¼Œä¸ºä»€ä¹ˆæ”¾åœ¨æœåŠ¡å™¨ä¸Šå°±æŠ¥é”™äº†ã€‚</li></ol><h2 id="å®šä½é—®é¢˜"><a href="#å®šä½é—®é¢˜" class="headerlink" title="å®šä½é—®é¢˜"></a>å®šä½é—®é¢˜</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œä»£ç çš„ç»ˆç‚¹ä¸æ˜¯ç„å­¦ã€‚æˆ‘ä»¬ç°åœ¨ç”¨çš„è®¡ç®—æœºè¿˜ä¸ä¼šæ’’è°ï¼Œåªè¦æŠ¥é”™äº†ï¼Œå°±ä¸€å®šæ˜¯æœ‰é—®é¢˜ã€‚</p><p>æˆ‘ä»¬ä»”ç»†çœ‹çœ‹<code>TtlExecutors.getTtlExecutor</code>æ–¹æ³•ä¸­çš„<code>if</code>åˆ¤æ–­ï¼š</p><ul><li>TtlAgent.isTtlAgentLoaded()ï¼šè¿™ä¸ªæ˜¯åˆ¤æ–­ ttlAgentLoaded æ ‡è¯†ï¼Œè¿™ä¸ªåæ–‡å†è¯´ï¼›</li><li>null == executorï¼šè¾“å…¥å‚æ•°ä¸º nullï¼Œæ˜¾ç„¶ä¸ç¬¦åˆï¼›</li><li>executor instanceof TtlEnhancedï¼šè¾“å…¥å‚æ•°æ˜¯<code>TtlEnhanced</code>ç±»å‹ï¼Œè¾“å…¥çš„æ˜¯<code>ThreadPoolTaskExecutor</code>ç±»å‹ï¼Œä¸ç¬¦åˆã€‚</li></ul><p>æ‰€ä»¥ï¼Œé‡ç‚¹çœ‹çœ‹ ttlAgentLoaded æ ‡è¯†ï¼š</p><pre><code class="java">public static boolean isTtlAgentLoaded() {    return ttlAgentLoaded;}</code></pre><p>ä»å…¨å±€æ‰¾åˆ°ä¿®æ”¹<code>ttlAgentLoaded</code>çš„åœ°æ–¹æ˜¯ï¼š</p><pre><code class="java">public final class TtlAgent {    public static void premain(final String agentArgs, @NonNull final Instrumentation inst) {        kvs = splitCommaColonStringToKV(agentArgs);        Logger.setLoggerImplType(getLogImplTypeFromAgentArgs(kvs));        final Logger logger = Logger.getLogger(TtlAgent.class);        try {            logger.info(&quot;[TtlAgent.premain] begin, agentArgs: &quot; + agentArgs + &quot;, Instrumentation: &quot; + inst);            final boolean disableInheritableForThreadPool = isDisableInheritableForThreadPool();            // çœç•¥éç›¸å…³ä»£ç             ttlAgentLoaded = true;        } catch (Exception e) {            String msg = &quot;Fail to load TtlAgent , cause: &quot; + e.toString();            logger.log(Level.SEVERE, msg, e);            throw new IllegalStateException(msg, e);        }    }    // çœç•¥éç›¸å…³ä»£ç }</code></pre><p>æœ‰ä¸€å®š javaagent çŸ¥è¯†çš„åº”è¯¥çŸ¥é“ï¼Œ<code>premain</code>æ–¹æ³•æ˜¯ java å¯åŠ¨æ—¶ï¼ŒåŠ è½½ javaagent åæ‰§è¡Œçš„æ–¹æ³•ã€‚</p><p>è¿™å°±å»åˆäº†ã€‚</p><p>æŠ¥é”™ä¹‹å‰çš„æœåŠ¡å™¨ä»£ç ï¼Œ<code>ExecutorConfig</code>ç±»ä¸­å®šä¹‰çš„ executor1 æ˜¯<code>ThreadPoolTaskExecutor</code>ç±»å‹ï¼Œexecutor2 å’Œ executor3 æ˜¯<code>ExecutorTtlWrapper</code>ç±»å‹ï¼Œä½¿ç”¨<code>applicationContext.getBean(clazz)</code>èƒ½å¤Ÿå¾—åˆ°åå­—æ˜¯ executor1 çš„ Beanã€‚</p><p>ç„¶åä½¿ç”¨<code>-javaagent:/path/to/transmittable-thread-local-2.12.1.jar</code>æ–¹å¼å®ç°é›¶ä¾µå…¥çš„<code>transmittable-thread-local</code>æ³¨å…¥èƒ½åŠ›ã€‚<code>ExecutorConfig</code>ç±»ä¸­å®šä¹‰çš„ executor2 å’Œ executor3 æ˜¯<code>ThreadPoolTaskExecutor</code>ç±»å‹ï¼Œä½¿ç”¨<code>applicationContext.getBean(clazz)</code>å°±ä¼šæŸ¥åˆ°ä¸‰ä¸ª<code>ThreadPoolTaskExecutor</code>ç±»å‹çš„ Beanï¼ŒSpring å®¹å™¨æ²¡æœ‰åŠæ³•åˆ¤æ–­è¿”å›å“ªä¸€ä¸ªï¼Œäºæ˜¯æŠ›å‡ºäº†<code>NoUniqueBeanDefinitionException</code>å¼‚å¸¸ã€‚</p><p>æœ¬åœ°å¯åŠ¨æ˜¯åŠ ä¸Š<code>-javaagent:/path/to/transmittable-thread-local-2.12.1.jar</code>å‘½ä»¤ï¼Œé—®é¢˜å¤ç°ã€‚</p><h2 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h2><p>è§£å†³ä¸Šé¢çš„æŠ¥é”™æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä½¿ç”¨<code>applicationContext.getBean(beanName, clazz)</code>æ–¹æ³•ï¼Œé€šè¿‡è¾“å…¥æŒ‡å®šçš„ Bean çš„åå­—å’Œç±»å‹ï¼Œè·å–ç¡®å®š Beanï¼Œä»£ç ä¿®æ”¹ä¸ºï¼š</p><pre><code class="java">public static void doSth(Object subtag, Object extra, long time) {    ApplicationContextContainer.getBean(&quot;executor1&quot;, ThreadPoolTaskExecutor.class)            .execute(() -&gt; {                // ä¸€äº›ä¸šåŠ¡ä»£ç             });}</code></pre><p>æµæ°´çº¿å‘ç‰ˆå›å½’æµ‹è¯•ï¼Œé—®é¢˜è§£å†³ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/transmittable-thread-local-make-trouble/">å°å¿ƒ transmittable-thread-local çš„è¿™ä¸ªå‘</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/126069634" target="_blank" rel="noopener">å°å¿ƒ transmittable-thread-local çš„è¿™ä¸ªå‘</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      æœ¬æ–‡ä¸»è¦æ˜¯å˜æ›´ transmittable-thread-local ä½¿ç”¨æ–¹å¼æ—¶å‡ºç°çš„ä¸€ä¸ªå¼‚å¸¸ã€‚
    
    </summary>
    
    
      <category term="debug" scheme="https://www.howardliu.cn/categories/debug/"/>
    
    
      <category term="debug" scheme="https://www.howardliu.cn/tags/debug/"/>
    
      <category term="transmittable" scheme="https://www.howardliu.cn/tags/transmittable/"/>
    
      <category term="ttl" scheme="https://www.howardliu.cn/tags/ttl/"/>
    
  </entry>
  
  <entry>
    <title>Switch å—ã€Switch è¡¨è¾¾å¼ã€Switch æ¨¡å¼åŒ¹é…ï¼Œè¶Šæ¥è¶Šå¥½ç”¨çš„ Switch</title>
    <link href="https://www.howardliu.cn/java-switch/"/>
    <id>https://www.howardliu.cn/java-switch/</id>
    <published>2022-06-19T04:00:56.000Z</published>
    <updated>2022-06-19T04:00:56.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://static.howardliu.cn/cover/beach-7262493_1920.jpeg" alt="Switch å—ã€Switch è¡¨è¾¾å¼ã€Switch æ¨¡å¼åŒ¹é…ï¼Œè¶Šæ¥è¶Šå¥½ç”¨çš„ Switch"></p><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚</p><blockquote><p>æœ¬æ–‡æ”¶å½•åœ¨ <a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ã€Šä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…ã€‹</a> ç³»åˆ—ä¸“æ ä¸­ã€‚</p></blockquote><p>ä¸ if-else ä¸€æ ·ï¼Œswitch è¯­æ³•æ˜¯ç”¨æ¥åšæ¡ä»¶åˆ¤æ–­çš„ã€‚å½“æ¡ä»¶æ¸…æ™°ç®€æ´æ—¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°æå‡ä»£ç å¯è¯»æ€§ã€‚switch è¯­æ³•ä» Java5 å¼€å§‹ï¼ŒJava12 å¢åŠ äº† Switch è¡¨è¾¾å¼ï¼ˆJava14 æä¾›æ­£å¼ç‰ˆï¼‰ï¼ŒJava17 å¢åŠ  Switch æ¨¡å¼åŒ¹é…ï¼ˆé¢„è§ˆç‰ˆï¼‰ã€‚</p><p>æœ¬æ–‡çš„ç›®æ ‡æ˜¯æœŸæœ›è¯»è€…å¯ä»¥æŒæ¡ Switch è¯­æ³•çš„æ‰€æœ‰èƒ½åŠ›ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ä¿¡æ‰‹æ‹ˆæ¥ã€‚</p><a id="more"></a><h2 id="if-else-ä¸-switch-è¯­æ³•"><a href="#if-else-ä¸-switch-è¯­æ³•" class="headerlink" title="if-else ä¸ switch è¯­æ³•"></a>if-else ä¸ switch è¯­æ³•</h2><p>æˆ‘ä»¬å…ˆæ¥ä¸ªç®€å•çš„ä¾‹å­çœ‹çœ‹ if-else å’Œ switch è¯­æ³•çš„ä½¿ç”¨ï¼š</p><pre><code class="java">public static void demoOfIf(int num) {    if (num == 0) {        System.out.println(&quot;0&quot;);    } else if (num == 1) {        System.out.println(&quot;1&quot;);    } else if (num == 2) {        System.out.println(&quot;2&quot;);    } else {        System.out.println(&quot;3&quot;);    }}public static void demoOfSwitch(int num) {    switch (num) {        case 0: {            System.out.println(&quot;0&quot;);            break;        }        case 1: {            System.out.println(&quot;1&quot;);            break;        }        case 2: {            System.out.println(&quot;2&quot;);            break;        }        default: {            System.out.println(&quot;3&quot;);        }    }}</code></pre><p>ä¸Šé¢çš„ç¤ºä¾‹å¾ˆç®€å•ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥ç€é‡å­¦ä¹ ä¸€ä¸‹ Swith è¯­æ³•ã€‚</p><h2 id="Switch-å—é€šç”¨è¯­æ³•"><a href="#Switch-å—é€šç”¨è¯­æ³•" class="headerlink" title="Switch å—é€šç”¨è¯­æ³•"></a>Switch å—é€šç”¨è¯­æ³•</h2><pre><code class="java">switch(integral-selector) {case value1: statement1; break;case value2: statement2; break;// â€¦â€¦default: default-statement;}</code></pre><p>switch è¯­å¥æ˜¯ä¸€ç§å¤šè·¯é€‰æ‹©çš„ç®€æ´è¡¨è¾¾å¼ï¼Œåœ¨ Java7 ä¹‹å‰ï¼Œswitch è¯­å¥çš„è¡¨è¾¾å¼å¿…é¡»æ˜¯æ•´æ•°å€¼ï¼Œè¿™æ ·ä¼šæœ‰å¾ˆå¤šçš„é™åˆ¶ã€‚äºæ˜¯åœ¨ Java7 ä¸­å¢åŠ äº† String æ ¼å¼çš„æ”¯æŒï¼Œä½¿åº”ç”¨åœºæ™¯æ›´åŠ ä¸°å¯Œã€‚</p><p>æ¯ä¸ª case æ‰§è¡Œè¯­å¥æœ«å°¾éƒ½æœ‰ä¸€ä¸ª<code>break</code>å…³é”®å­—ï¼Œå®ƒä¼šè®©æ‰§è¡Œæµç¨‹è·³åˆ° switch çš„æœ«å°¾ã€‚å¦‚æœä¸åŠ <code>break</code>ï¼Œåé¢çš„ case è¯­å¥ä¼šç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°ç¬¬ä¸€ä¸ª<code>break</code>å…³é”®å­—ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="java">public static void noBreak(int num) {    switch (num) {        case 0: {            System.out.println(&quot;0&quot;);        }        case 1: {            System.out.println(&quot;1&quot;);        }        case 2: {            System.out.println(&quot;2&quot;);            break;        }        default: {            System.out.println(&quot;3&quot;);        }    }}</code></pre><p>æ‰§è¡Œ<code>noBreak(0)</code>çš„ç»“æœä¼šæ˜¯ï¼š</p><pre><code class="log">012</code></pre><p>åŸºäºè¿™ç§ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åˆå¹¶å¤šä¸ªå€¼çš„æ‰§è¡Œé€»è¾‘ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§å†™æ³•ï¼š</p><pre><code class="java">public static void noBreak2(int num) {    switch (num) {        case 0:        case 1:        case 2: {            System.out.println(&quot;0 or 1 or 2&quot;);            break;        }        default: {            System.out.println(&quot;3&quot;);        }    }}</code></pre><p>å½“å‚æ•°æ˜¯ 0 æˆ– 1 æˆ– 2 æ—¶ï¼Œç»“æœç›¸åŒï¼Œéƒ½æ˜¯ï¼š</p><pre><code class="log">0 or 1 or 2</code></pre><h2 id="Switch-è¡¨è¾¾å¼"><a href="#Switch-è¡¨è¾¾å¼" class="headerlink" title="Switch è¡¨è¾¾å¼"></a>Switch è¡¨è¾¾å¼</h2><p>Switch è¯­å¥å‡ºç°çš„å§¿åŠ¿æ˜¯æ¡ä»¶åˆ¤æ–­ã€æµç¨‹æ§åˆ¶ç»„ä»¶ï¼Œä¸ç°åœ¨å¾ˆæµè¡Œçš„æ–°è¯­è¨€å¯¹æ¯”ï¼Œå…¶å†™æ³•æ˜¾å¾—éå¸¸ç¬¨æ‹™ï¼Œæ‰€ä»¥ Java æ¨å‡ºäº† Switch è¡¨è¾¾å¼è¯­æ³•ï¼Œå¯ä»¥è®©æˆ‘ä»¬å†™å‡ºæ›´åŠ ç®€åŒ–çš„ä»£ç ã€‚è¿™ä¸ªæ‰©å±•åœ¨ Java12 ä¸­ä½œä¸ºé¢„è§ˆç‰ˆé¦–æ¬¡å¼•å…¥ï¼Œéœ€è¦åœ¨ç¼–è¯‘æ—¶å¢åŠ <code>-enable-preview</code>å¼€å¯ï¼Œåœ¨ Java14 ä¸­æ­£å¼æä¾›ï¼ŒåŠŸèƒ½ç¼–å·æ˜¯ <a href="https://openjdk.java.net/jeps/361" target="_blank" rel="noopener">JEP 361</a>ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬é€šè¿‡ switch è¯­æ³•ç®€å•è®¡ç®—å·¥ä½œæ—¥ã€ä¼‘æ¯æ—¥ï¼Œåœ¨ Java12 ä¹‹å‰éœ€è¦è¿™æ ·å†™ï¼š</p><pre><code class="java">@Testvoid testSwitch() {    final DayOfWeek day = DayOfWeek.from(LocalDate.now());    String typeOfDay = &quot;&quot;;    switch (day) {        case MONDAY:        case TUESDAY:        case WEDNESDAY:        case THURSDAY:        case FRIDAY:            typeOfDay = &quot;Working Day&quot;;            break;        case SATURDAY:        case SUNDAY:            typeOfDay = &quot;Rest Day&quot;;            break;    }    Assertions.assertFalse(typeOfDay.isEmpty());}</code></pre><p>åœ¨ Java12 ä¸­çš„ Switch è¡¨è¾¾å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç®€åŒ–ï¼š</p><pre><code class="java">@Testvoid testSwitchExpression() {    final DayOfWeek day = DayOfWeek.SATURDAY;    final String typeOfDay = switch (day) {        case MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; &quot;Working Day&quot;;        case SATURDAY, SUNDAY -&gt; &quot;Day Off&quot;;    };    Assertions.assertEquals(&quot;Day Off&quot;, typeOfDay);}</code></pre><p>æ˜¯ä¸æ˜¯å¾ˆæ¸…çˆ½ã€‚ä¸è¿‡ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹ä¸è¶³çš„æ˜¯ï¼Œå¦‚æœæ˜¯éœ€è¦æ‰§è¡Œä¸€æ®µä¸šåŠ¡é€»è¾‘ï¼Œç„¶åè¿”å›ä¸€ä¸ªç»“æœå‘¢ï¼Ÿäºæ˜¯ Java13 ä½¿ç”¨<code>yield</code>å…³é”®å­—è¡¥é½äº†è¿™ä¸ªåŠŸèƒ½ï¼š</p><pre><code class="java">@Testvoid testSwitchExpression13() {    final DayOfWeek day = DayOfWeek.SATURDAY;    final String typeOfDay = switch (day) {        case MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY -&gt; {            System.out.println(&quot;Working Day: &quot; + day);            yield &quot;Working Day&quot;;        }        case SATURDAY, SUNDAY -&gt; {            System.out.println(&quot;Day Off: &quot; + day);            yield &quot;Day Off&quot;;        }    };    Assertions.assertEquals(&quot;Day Off&quot;, typeOfDay);}</code></pre><h2 id="Switch-æ¨¡å¼åŒ¹é…"><a href="#Switch-æ¨¡å¼åŒ¹é…" class="headerlink" title="Switch æ¨¡å¼åŒ¹é…"></a>Switch æ¨¡å¼åŒ¹é…</h2><p>åˆ° Java17 æ—¶ï¼Œåˆæä¾›äº† Switch æ¨¡å¼åŒ¹é…åŠŸèƒ½ã€‚ä¸ instanceof æ¨¡å¼åŒ¹é…æœ‰äº›ç±»ä¼¼ï¼Œæ˜¯èƒ½å¤Ÿåœ¨ Switch è¡¨è¾¾å¼å®ç°ç±»å‹è‡ªåŠ¨è½¬æ¢ã€‚</p><p>æ¯”å¦‚ï¼š</p><pre><code class="java">static String formatterPatternSwitch(Object o) {    return switch (o) {        case null -&gt; &quot;null&quot;;        case Integer i -&gt; String.format(&quot;int %d&quot;, i);        case Long l -&gt; String.format(&quot;long %d&quot;, l);        case Double d -&gt; String.format(&quot;double %f&quot;, d);        case String s -&gt; String.format(&quot;String %s&quot;, s);        default -&gt; o.getClass().getSimpleName() + &quot; &quot; + o;    };}public static void main(String[] args) {    System.out.println(formatterPatternSwitch(null));    System.out.println(formatterPatternSwitch(&quot;1&quot;));    System.out.println(formatterPatternSwitch(2));    System.out.println(formatterPatternSwitch(3L));    System.out.println(formatterPatternSwitch(4.0));    System.out.println(formatterPatternSwitch(new AtomicLong(5)));}</code></pre><p>ç»“æœæ˜¯ï¼š</p><pre><code class="log">nullString 1int 2long 3double 4.000000AtomicLong 5</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸åªæ˜¯ç±»å‹è‡ªåŠ¨è½¬æ¢ï¼Œè¿˜å¯ä»¥ç›´æ¥åˆ¤æ–­æ˜¯å¦æ˜¯<code>null</code>ï¼Œçœäº†å‰ç½®åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯<code>null</code>äº†ã€‚</p><p>é’å±±ä¸æ”¹ï¼Œç»¿æ°´é•¿æµï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ã€‚</p><h2 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h2><ul><li><a href="https://mp.weixin.qq.com/s/7f5dcjjKLdBYpzS5p7_v7Q" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 Stream ä¸­ Collectors çš„ 24 ä¸ªæ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/JOLrw7cbVh8z2czePEfLjw" target="_blank" rel="noopener">ä¸€æ–‡æŒæ¡ Java8 çš„ Optional çš„ 6 ç§æ“ä½œ</a></li><li><a href="https://mp.weixin.qq.com/s/Vhw-2lgCvmhNI5aeXOWYNg" target="_blank" rel="noopener">ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¶…å¼ºçš„æ’åºåŠŸèƒ½</a></li><li><a href="https://mp.weixin.qq.com/s/Srv6733byTYDg7hTrW_tdw" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ1ï¼‰ï¼šä»‹ç» Java8 ä¸­çš„æ—¶é—´ç±»åŠå¸¸ç”¨ API</a></li><li><a href="https://mp.weixin.qq.com/s/LRydpL89GsjOeTrLrihyYQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ2ï¼‰ï¼šDate ä¸ LocalDate æˆ– LocalDateTime äº’ç›¸è½¬æ¢</a></li><li><a href="https://mp.weixin.qq.com/s/KmBMLG1y73IUwFuSfUKaEQ" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ3ï¼‰ï¼šå¼€å§‹ä½¿ç”¨ Java8 ä¸­çš„æ—¶é—´ç±»</a></li><li><a href="https://mp.weixin.qq.com/s/PxC0WQMReIeG0Tyl5WiK1Q" target="_blank" rel="noopener">Java8 çš„æ—¶é—´åº“ï¼ˆ4ï¼‰ï¼šæ£€æŸ¥æ—¥æœŸå­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</a></li><li><a href="https://mp.weixin.qq.com/s/rjMOq0QAdiWNacKYqHJqXA" target="_blank" rel="noopener">Java8 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/FHv963s0Qvh2K5r2tdLATA" target="_blank" rel="noopener">Java9 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/NY5-qkfZGdaOvz9iyJ3VSQ" target="_blank" rel="noopener">Java10 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/baBv0mP2JmPE4MoNYESqhA" target="_blank" rel="noopener">Java11 ä¸­åŸºäºåµŒå¥—å…³ç³»çš„è®¿é—®æ§åˆ¶ä¼˜åŒ–</a></li><li><a href="https://mp.weixin.qq.com/s/Bn4S2OfMoG19lI-L3nw8cg" target="_blank" rel="noopener">Java11 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/xBjXHC5UWy4JEKaRo6xQsg" target="_blank" rel="noopener">Java12 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/9EdRVPK0GUoQqI7eXcmwEA" target="_blank" rel="noopener">Java13 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/rEAHIf40j_UECLlxK5KW6w" target="_blank" rel="noopener">Java14 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/UESHDzuY3H7p5LLPJfwyAw" target="_blank" rel="noopener">Java15 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/HExV39BU0lSbdtg0aMjbSA" target="_blank" rel="noopener">Java16 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/s/By2JoZqAHA6U36PG8qvCcg" target="_blank" rel="noopener">Java17 çš„æ–°ç‰¹æ€§</a></li><li><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI4OTU5NTA1Ng==&action=getalbum&album_id=1732392238946533378#wechat_redirect" target="_blank" rel="noopener">ä»å°å·¥åˆ°ä¸“å®¶çš„ Java è¿›é˜¶ä¹‹æ—…</a></li></ul><hr><p>ä½ å¥½ï¼Œæˆ‘æ˜¯çœ‹å±±ã€‚æ¸¸äºç ç•Œï¼Œæˆäº«äººç”Ÿã€‚å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€å…³æ³¨ã€‚æˆ‘è¿˜æ•´ç†äº†ä¸€äº›ç²¾å“å­¦ä¹ èµ„æ–™ï¼Œå…³æ³¨å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œå›å¤â€œèµ„æ–™â€å³å¯è·å¾—ã€‚</p><p>ä¸ªäººä¸»é¡µï¼š<a href="https://www.howardliu.cn">https://www.howardliu.cn</a><br>ä¸ªäººåšæ–‡ï¼š<a href="https://www.howardliu.cn/java-switch/">Switch å—ã€Switch è¡¨è¾¾å¼ã€Switch æ¨¡å¼åŒ¹é…ï¼Œè¶Šæ¥è¶Šå¥½ç”¨çš„ Switch</a><br>CSDN ä¸»é¡µï¼š<a href="https://kanshan.blog.csdn.net/" target="_blank" rel="noopener">https://kanshan.blog.csdn.net/</a><br>CSDN åšæ–‡ï¼š<a href="https://kanshan.blog.csdn.net/article/details/126069533" target="_blank" rel="noopener">Switch å—ã€Switch è¡¨è¾¾å¼ã€Switch æ¨¡å¼åŒ¹é…ï¼Œè¶Šæ¥è¶Šå¥½ç”¨çš„ Switch</a></p><center><b>ğŸ‘‡ğŸ»æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€Œçœ‹å±±çš„å°å±‹ã€ï¼Œé¢†å–ç²¾é€‰èµ„æ–™ğŸ‘‡ğŸ»</b></center><p><img src="http://static.howardliu.cn/about/kanshanshuo.png" alt="å…¬ä¼—å·ï¼šçœ‹å±±çš„å°å±‹"></p>]]></content>
    
    <summary type="html">
    
      ä¸ if-else ä¸€æ ·ï¼Œswitch è¯­æ³•æ˜¯ç”¨æ¥åšæ¡ä»¶åˆ¤æ–­çš„ã€‚å½“æ¡ä»¶æ¸…æ™°ç®€æ´æ—¶ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°æå‡ä»£ç å¯è¯»æ€§ã€‚switch è¯­æ³•ä» Java5 å¼€å§‹ï¼ŒJava12 å¢åŠ äº† Switch è¡¨è¾¾å¼ï¼ˆJava14 æä¾›æ­£å¼ç‰ˆï¼‰ï¼ŒJava17 å¢åŠ  Switch æ¨¡å¼åŒ¹é…ï¼ˆé¢„è§ˆç‰ˆï¼‰ã€‚
    
    </summary>
    
    
      <category term="java" scheme="https://www.howardliu.cn/categories/java/"/>
    
    
      <category term="java" scheme="https://www.howardliu.cn/tags/java/"/>
    
      <category term="switch" scheme="https://www.howardliu.cn/tags/switch/"/>
    
  </entry>
  
</feed>
